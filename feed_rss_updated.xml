<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    
    <title>KenForever1</title>
    <description>çƒ­çˆ±ç¼–ç¨‹å’Œé˜…è¯»ï¼Œå­¦æ— æ­¢å¢ƒ</description>
    <link>https://github.com/KenForever1/</link>
    <atom:link href="https://github.com/KenForever1/feed_rss_updated.xml" rel="self" type="application/rss+xml" />

    
    <managingEditor>SteveForever</managingEditor>
    <docs>https://github.com/KenForever1</docs>
    <language>zh</language>

    
    <pubDate>Sun, 11 Jan 2026 13:45:42 -0000</pubDate>
    <lastBuildDate>Sun, 11 Jan 2026 13:45:42 -0000</lastBuildDate>
    <ttl>1440</ttl>

    
    <generator>MkDocs RSS plugin - v1.17.9</generator>

    
    
    <image>
      <url>https://upload.wikimedia.org/wikipedia/commons/thumb/4/43/Feed-icon.svg/128px-Feed-icon.svg.png</url>
      <title>KenForever1</title>
      <link>https://github.com/KenForever1/</link>
    </image>
    

    
    
    <item>
      <title>MIT ç»å…¸è®²åº§ï¼šHow to Speak - Patrick Winston</title>
      
      
        
      <author>KenForever1</author>
        
      
      
      
      <description>&lt;h1 id=&#34;mit-ç»å…¸è®²åº§how-to-speak---patrick-winston&#34;&gt;MIT ç»å…¸è®²åº§ï¼šHow to Speak - Patrick Winston&lt;a class=&#34;headerlink&#34; href=&#34;#mit-ç»å…¸è®²åº§how-to-speak---patrick-winston&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt;Patrick Winston æ•™æˆæ¯å¹´ä¸€æœˆéƒ½ä¼šåœ¨ MIT ä¸¾åŠè¿™åœºè®²åº§ï¼Œè‡´åŠ›äºå¸®åŠ©å­¦ç”Ÿå’Œç ”ç©¶äººå‘˜æé«˜è¡¨è¾¾å’Œæ²Ÿé€šèƒ½åŠ›ã€‚ä»–è®¤ä¸ºï¼Œæ²Ÿé€šèƒ½åŠ›æ˜¯ä½ ä¸€ç”ŸæˆåŠŸä¸å¦çš„å…³é”®å› ç´ ä¹‹ä¸€ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;è§†é¢‘é“¾æ¥&lt;/strong&gt;: &lt;a href=&#34;https://www.youtube.com/watch?v=Unzc731iCUY&#34;&gt;https://www.youtube.com/watch?v=Unzc731iCUY&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è®²è€…&lt;/strong&gt;: Patrick Winston (1943-2019), MIT æ•™æˆï¼Œæ›¾ä»»äººå·¥æ™ºèƒ½å®éªŒå®¤ä¸»ä»»ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;!-- more --&gt;

&lt;hr /&gt;
&lt;h2 id=&#34;æ ¸å¿ƒå…¬å¼æˆåŠŸçš„è¦ç´ &#34;&gt;æ ¸å¿ƒå…¬å¼ï¼šæˆåŠŸçš„è¦ç´ &lt;a class=&#34;headerlink&#34; href=&#34;#æ ¸å¿ƒå…¬å¼æˆåŠŸçš„è¦ç´ &#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Winston æ•™æˆæå‡ºäº†å†³å®šæ¼”è®²è´¨é‡ï¼ˆQualityï¼‰çš„å…¬å¼ï¼š&lt;/p&gt;
&lt;div class=&#34;arithmatex&#34;&gt;\[ Q = f(K, P, T) \]&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;K (Knowledge)&lt;/strong&gt;: çŸ¥è¯†å‚¨å¤‡ã€‚è¿™æ˜¯æœ€é‡è¦çš„å› ç´ ã€‚å¦‚æœä½ æ²¡æœ‰çœŸæå®æ–™ï¼ŒæŠ€å·§å†å¥½ä¹Ÿæ— æµäºäº‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;P (Practice)&lt;/strong&gt;: ç»ƒä¹ ã€‚é€šè¿‡åå¤ç»ƒä¹ å¯ä»¥æ˜¾è‘—æé«˜æ¼”è®²è´¨é‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;T (Talent)&lt;/strong&gt;: å¤©èµ‹ã€‚è¿™åœ¨ä¸‰è€…ä¸­å…¶å®&lt;strong&gt;æœ€ä¸é‡è¦&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ç»“è®º&lt;/strong&gt;: å³ä½¿æ²¡æœ‰è¿‡äººçš„å¤©èµ‹ï¼Œåªè¦æœ‰å……è¶³çš„çŸ¥è¯†å’Œä¸æ–­çš„ç»ƒä¹ ï¼Œä»»ä½•äººéƒ½èƒ½æˆä¸ºä¼˜ç§€çš„æ¼”è®²è€…ã€‚&lt;/p&gt;
&lt;hr /&gt;
&lt;h2 id=&#34;å¦‚ä½•å¼€åœº-how-to-start&#34;&gt;å¦‚ä½•å¼€åœº (How to Start)&lt;a class=&#34;headerlink&#34; href=&#34;#å¦‚ä½•å¼€åœº-how-to-start&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸è¦ä»¥ç¬‘è¯å¼€åœº&lt;/strong&gt;: å¬ä¼—æ­¤æ—¶è¿˜åœ¨é€‚åº”ç¯å¢ƒï¼Œè¿˜æ²¡å‡†å¤‡å¥½ç¬‘ã€‚å¦‚æœç¬‘è¯å†·åœºï¼Œä¼šç ´åæ•´ä¸ªæ¼”è®²çš„æ°›å›´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨â€œå¢æƒæ‰¿è¯ºâ€ (Empowerment Promise)&lt;/strong&gt;:&lt;ul&gt;
&lt;li&gt;å‘Šè¯‰å¬ä¼—åœ¨è®²åº§ç»“æŸæ—¶ï¼Œä»–ä»¬å°†å­¦åˆ°ä»€ä¹ˆä¹‹å‰ä¸çŸ¥é“çš„ä¸œè¥¿ã€‚&lt;/li&gt;
&lt;li&gt;ä¾‹å¦‚ï¼šâ€œåœ¨è¿™ 60 åˆ†é’Ÿç»“æŸæ—¶ï¼Œä½ ä¼šæŒæ¡ä¸€äº›ä½ ç°åœ¨ä¸çŸ¥é“çš„æ¼”è®²æŠ€å·§ï¼Œè¿™å°†æ”¹å˜ä½ çœ‹å¾…æ¼”è®²çš„æ–¹å¼ã€‚â€&lt;/li&gt;
&lt;li&gt;è¿™èƒ½è¿…é€ŸæŠ“ä½å¬ä¼—çš„æ³¨æ„åŠ›ï¼Œå¹¶å»ºç«‹é¢„æœŸçš„ä»·å€¼ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;h2 id=&#34;æ¼”è®²çš„å››å¤§æ ·æ¿æŠ€å·§-the-four-samples&#34;&gt;æ¼”è®²çš„â€œå››å¤§æ ·æ¿â€æŠ€å·§ (The Four Samples)&lt;a class=&#34;headerlink&#34; href=&#34;#æ¼”è®²çš„å››å¤§æ ·æ¿æŠ€å·§-the-four-samples&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;ä¸ºäº†ç¡®ä¿å¬ä¼—èƒ½è·Ÿä¸Šå¹¶ç†è§£ä½ çš„å†…å®¹ï¼ŒWinston æ•™æˆæ¨èäº†å››ä¸ªæŠ€å·§ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¾ªç¯å¾€å¤ (Cycle on the Subject)&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸è¦æŒ‡æœ›å¬ä¼—å¬ä¸€éå°±æ‡‚ã€‚é‡è¦æ¦‚å¿µè¦ä»¥ä¸åŒçš„æ–¹å¼&lt;strong&gt;é‡å¤è‡³å°‘ä¸‰æ¬¡&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å¤§çº¦ 20% çš„å¬ä¼—åœ¨ä»»ä½•æ—¶å€™éƒ½å¯èƒ½èµ°ç¥ï¼Œé‡å¤èƒ½ç¡®ä¿ä»–ä»¬æœ‰æœºä¼šé‡æ–°è·Ÿä¸Šã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å»ºç«‹å›´æ  (Build Fences)&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ˜ç¡®åŒºåˆ†&lt;strong&gt;ä½ çš„è§‚ç‚¹&lt;/strong&gt;ä¸&lt;strong&gt;ä»–äººçš„è§‚ç‚¹&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ä¾‹å¦‚ï¼šâ€œè¿™ä¸€éƒ¨åˆ†æ˜¯é€šç”¨çš„ç®—æ³•ï¼Œè€Œè¿™é‡Œâ€”â€”åšäº†ç‰¹æ®Šå¤„ç†çš„éƒ¨åˆ†â€”â€”æ˜¯æˆ‘çš„åˆ›æ–°ã€‚â€è¿™èƒ½å¸®åŠ©å¬ä¼—å®šä½ä½ çš„è´¡çŒ®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å£å¤´æ ‡ç‚¹ (Verbal Punctuation)&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æä¾›ä¾§è¾¹æ æˆ–è¿‡æ¸¡ä¿¡å·ï¼Œå¸®åŠ©å¬ä¼—åœ¨èµ°ç¥åé‡æ–°å›å½’ã€‚&lt;/li&gt;
&lt;li&gt;ä¾‹å¦‚ï¼šâ€œè¿™æ˜¯ç¬¬ä¸€ä¸ªè¦ç‚¹ï¼Œç°åœ¨æˆ‘ä»¬æ¥çœ‹ç¬¬äºŒä¸ªè¦ç‚¹ã€‚â€ æˆ–è€…åˆ©ç”¨çŸ­æš‚çš„æ²‰é»˜ã€æ”¹å˜è¯­é€Ÿæ¥æç¤ºæ®µè½çš„åˆ‡æ¢ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æé—® (Ask Questions)&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æé—®çš„é—®é¢˜ä¸èƒ½å¤ªç®€å•ï¼ˆä¾®è¾±æ™ºå•†ï¼‰ï¼Œä¹Ÿä¸èƒ½å¤ªéš¾ï¼ˆæ²¡äººæ•¢ç­”ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…³é”®&lt;/strong&gt;: æé—®åè¦ç­‰å¾…ã€‚Winston çš„æ ‡å‡†æ˜¯&lt;strong&gt;ç­‰å¾… 7 ç§’&lt;/strong&gt;ã€‚ç»™å¬ä¼—æ€è€ƒçš„æ—¶é—´ï¼Œä¸è¦å› ä¸ºæ²‰é»˜è€Œæ„Ÿåˆ°å°´å°¬ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr /&gt;
&lt;h2 id=&#34;å·¥å…·ä¸ç¯å¢ƒ-tools-and-environment&#34;&gt;å·¥å…·ä¸ç¯å¢ƒ (Tools and Environment)&lt;a class=&#34;headerlink&#34; href=&#34;#å·¥å…·ä¸ç¯å¢ƒ-tools-and-environment&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;h3 id=&#34;æ—¶é—´ä¸åœ°ç‚¹&#34;&gt;æ—¶é—´ä¸åœ°ç‚¹&lt;a class=&#34;headerlink&#34; href=&#34;#æ—¶é—´ä¸åœ°ç‚¹&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ—¶é—´&lt;/strong&gt;: ä¸Šåˆ 11 ç‚¹æ˜¯æœ€ä½³æ—¶é—´ï¼ˆå¤§å®¶åˆšé†’ä¸”è¿˜æ²¡é¥¿ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åœ°ç‚¹&lt;/strong&gt;: &lt;ul&gt;
&lt;li&gt;å…‰çº¿è¦å……è¶³ã€‚æ˜æš—çš„ç¯å…‰ä¼šè®©äººæƒ³ç¡è§‰ã€‚Winston å¼ºè°ƒï¼šâ€œåœ¨è¿™ä¸ªæˆ¿é—´é‡Œï¼Œå”¯ä¸€èƒ½åœ¨é»‘æš—ä¸­ä¿æŒæ¸…é†’çš„æ˜¯æ¼”è®²è€…ã€‚â€&lt;/li&gt;
&lt;li&gt;åœºåœ°å¤§å°è¦é€‚ä¸­ã€‚å¦‚æœæ˜¯å°å‹æ¼”è®²ï¼Œä¸è¦é€‰å¤§ç¤¼å ‚ï¼Œç©ºè¡è¡çš„åº§ä½ä¼šé™ä½æ°›å›´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æ¿ä¹¦-vs-å¹»ç¯ç‰‡-blackboard-vs-slides&#34;&gt;æ¿ä¹¦ vs. å¹»ç¯ç‰‡ (Blackboard vs. Slides)&lt;a class=&#34;headerlink&#34; href=&#34;#æ¿ä¹¦-vs-å¹»ç¯ç‰‡-blackboard-vs-slides&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Winston æ•™æˆæåŠ›æ¨å´‡ä½¿ç”¨&lt;strong&gt;æ¿ä¹¦&lt;/strong&gt;ï¼ˆé»‘æ¿/ç™½æ¿ï¼‰ï¼Œä¸»è¦åŸå› æœ‰äºŒï¼š
1.  &lt;strong&gt;èŠ‚å¥æ§åˆ¶ (Pacing)&lt;/strong&gt;: å†™å­—çš„é€Ÿåº¦é™åˆ¶äº†ä½ è®²è¯¾çš„é€Ÿåº¦ï¼Œè¿™æ°å¥½ç¬¦åˆå¬ä¼—å¸æ”¶ä¿¡æ¯çš„é€Ÿåº¦ã€‚
2.  &lt;strong&gt;è§†è§‰èšç„¦&lt;/strong&gt;: å†™æ¿ä¹¦æ—¶ï¼Œå¤§å®¶éƒ½åœ¨çœ‹ä½ å†™çš„å†…å®¹ï¼Œè¿™æ¯”ç›¯ç€é™æ€çš„ PPT æ›´å®¹æ˜“é›†ä¸­æ³¨æ„åŠ›ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å¹»ç¯ç‰‡-slides-çš„ä½¿ç”¨ç¦å¿Œ&#34;&gt;å¹»ç¯ç‰‡ (Slides) çš„ä½¿ç”¨ç¦å¿Œ&lt;a class=&#34;headerlink&#34; href=&#34;#å¹»ç¯ç‰‡-slides-çš„ä½¿ç”¨ç¦å¿Œ&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;å¦‚æœå¿…é¡»ä½¿ç”¨ PPTï¼Œè¯·éµå¾ªä»¥ä¸‹åŸåˆ™ï¼š
*   &lt;strong&gt;ä¸è¦è¯» PPT&lt;/strong&gt;: å¬ä¼—è¯†å­—é€Ÿåº¦æ¯”ä½ è¯´è¯å¿«ï¼Œè¯» PPT åªä¼šè®©ä»–ä»¬çƒ¦èºã€‚
*   &lt;strong&gt;å­—æ•°è¦å°‘&lt;/strong&gt;: PPT æ˜¯ç”¨æ¥è¾…åŠ©çš„ï¼Œä¸æ˜¯æè¯å™¨ã€‚
*   &lt;strong&gt;ä¸è¦ä½¿ç”¨æ¿€å…‰ç¬”&lt;/strong&gt;: æ¿€å…‰ç¬”æ™ƒåŠ¨ä¼šåˆ†æ•£æ³¨æ„åŠ›ï¼Œä¸”è®©ä½ èƒŒå¯¹è§‚ä¼—ã€‚åº”è¯¥ç›´æ¥ç”¨æ‰‹å»æŒ‡å±å¹•ï¼ˆå¦‚æœå¤Ÿå¾—ç€ï¼‰ï¼Œæˆ–è€…åœ¨ PPT ä¸Šåšç®­å¤´æ ‡è®°ã€‚
*   &lt;strong&gt;æ¸…é™¤æ‚ç‰©&lt;/strong&gt;: å»æ‰ä¸å¿…è¦çš„ LOGOã€èƒŒæ™¯å›¾å’Œæ— å…³çš„æ ‡é¢˜ï¼Œä¿æŒç®€æ´ã€‚&lt;/p&gt;
&lt;hr /&gt;
&lt;h2 id=&#34;ç‰¹æ®Šåœºåˆçš„æ¼”è®²&#34;&gt;ç‰¹æ®Šåœºåˆçš„æ¼”è®²&lt;a class=&#34;headerlink&#34; href=&#34;#ç‰¹æ®Šåœºåˆçš„æ¼”è®²&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;h3 id=&#34;å¯å‘æ€§æ¼”è®²-inspiring&#34;&gt;å¯å‘æ€§æ¼”è®² (Inspiring)&lt;a class=&#34;headerlink&#34; href=&#34;#å¯å‘æ€§æ¼”è®²-inspiring&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å±•ç°ä½ å¯¹è‡ªå·±æ‰€è®²å†…å®¹çš„çƒ­æƒ…ã€‚åªæœ‰å½“ä½ è‡ªå·±è§‰å¾—è¿™ä¸ªä¸œè¥¿å¾ˆé…·æ—¶ï¼Œå¬ä¼—æ‰ä¼šè¢«æ„ŸæŸ“ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å£è¯•--ç­”è¾©-oral-exams&#34;&gt;å£è¯• / ç­”è¾© (Oral Exams)&lt;a class=&#34;headerlink&#34; href=&#34;#å£è¯•--ç­”è¾©-oral-exams&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ç»ƒä¹ ï¼Œç»ƒä¹ ï¼Œå†ç»ƒä¹ ã€‚&lt;/li&gt;
&lt;li&gt;æ‰¾éæœ¬é¢†åŸŸçš„åŒå­¦åšå¬ä¼—ï¼Œå¦‚æœä»–ä»¬èƒ½å¬æ‡‚ï¼Œè¯´æ˜ä½ è®²æ¸…æ¥šäº†èƒŒæ™¯ï¼ˆContextï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å·¥ä½œé¢è¯•-job-interviews&#34;&gt;å·¥ä½œé¢è¯• (Job Interviews)&lt;a class=&#34;headerlink&#34; href=&#34;#å·¥ä½œé¢è¯•-job-interviews&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;5 åˆ†é’ŸåŸåˆ™&lt;/strong&gt;: ä½ å¿…é¡»åœ¨å‰ 5 åˆ†é’Ÿå†…æ¸…æ™°åœ°ä¼ è¾¾ä¸¤ä»¶äº‹ï¼š&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Vision (æ„¿æ™¯)&lt;/strong&gt;: ä½ æƒ³è¦è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Done Something (æˆæœ)&lt;/strong&gt;: ä½ å·²ç»åšåˆ°äº†ä»€ä¹ˆï¼Ÿ&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;ä¸è¦æŠŠæ—¶é—´éƒ½èŠ±åœ¨é“ºå«èƒŒæ™¯ä¸Šï¼Œè¦å°½å¿«åˆ‡å…¥ä½ çš„è´¡çŒ®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;h2 id=&#34;winston-ä¹‹æ˜Ÿ-the-winston-star---5s-åŸåˆ™&#34;&gt;Winston ä¹‹æ˜Ÿ (The Winston Star) - 5S åŸåˆ™&lt;a class=&#34;headerlink&#34; href=&#34;#winston-ä¹‹æ˜Ÿ-the-winston-star---5s-åŸåˆ™&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ çš„æ¼”è®²æ›´æœ‰â€œæ˜Ÿâ€å‘³ï¼Œæ›´å®¹æ˜“è¢«è®°ä½ï¼Œè¯·åŒ…å«ä»¥ä¸‹äº”ä¸ªè¦ç´ ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;S&lt;/strong&gt;ymbol (ç¬¦å·): ä¸ºä½ çš„æ ¸å¿ƒæ¦‚å¿µæ‰¾ä¸€ä¸ªè§†è§‰åŒ–çš„ç¬¦å·ï¼ˆä¾‹å¦‚ Winston çš„â€œæ‹±é—¨â€ç»“æ„ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;S&lt;/strong&gt;logan (å£å·): ç”¨ä¸€å¥ç®€çŸ­æœ‰åŠ›çš„è¯æ€»ç»“ä½ çš„å·¥ä½œï¼ˆä¾‹å¦‚â€œæ²¡æœ‰è¯­ä¹‰çš„è¯­æ³•æ˜¯æ— æ„ä¹‰çš„â€ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;S&lt;/strong&gt;urprise (æƒŠå–œ): æä¾›ä¸€ä¸ªåç›´è§‰çš„ä¾‹å­æˆ–ä»¤äººæƒŠè®¶çš„äº‹å®ï¼Œæ‰“ç ´å¬ä¼—çš„é¢„æœŸã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;S&lt;/strong&gt;alient Idea (çªå‡ºçš„æƒ³æ³•): å³ä½¿å¬ä¼—å¿˜äº†ä¸€åˆ‡ï¼Œä½ ä¹Ÿå¸Œæœ›ä»–ä»¬è®°ä½çš„é‚£ä¸€ä¸ªæ ¸å¿ƒç‚¹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;S&lt;/strong&gt;tory (æ•…äº‹): è®²ä¸€ä¸ªå…³äºè¿™æƒ³å·¥ä½œå¦‚ä½•å®Œæˆã€ä¸ºä»€ä¹ˆé‡è¦ã€æˆ–è€…ä½ æ˜¯å¦‚ä½•å‘ç°å®ƒçš„æ•…äº‹ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;hr /&gt;
&lt;h2 id=&#34;å¦‚ä½•ç»“å°¾-how-to-stop&#34;&gt;å¦‚ä½•ç»“å°¾ (How to Stop)&lt;a class=&#34;headerlink&#34; href=&#34;#å¦‚ä½•ç»“å°¾-how-to-stop&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æœ€åä¸€å¼ å¹»ç¯ç‰‡&lt;/strong&gt;: &lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸è¦æ”¾&lt;/strong&gt;ï¼šâ€œThank Youâ€ã€â€œThe Endâ€ã€â€œå‚è€ƒæ–‡çŒ®â€ã€â€œåˆä½œè€…åå•â€ï¼ˆåˆä½œè€…åº”è¯¥åœ¨ä¸€å¼€å§‹å°±è‡´è°¢ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åº”è¯¥æ”¾&lt;/strong&gt;: &lt;strong&gt;Contributions (è´¡çŒ®æ€»ç»“)&lt;/strong&gt;ã€‚å‘Šè¯‰å¬ä¼—ä½ åˆ°åº•åšäº†ä»€ä¹ˆï¼Œåˆ—å‡ºæ ¸å¿ƒç»“è®ºã€‚è®©è¿™å¼  PPT åœç•™åœ¨å±å¹•ä¸Šï¼Œè¿™æ ·åœ¨é—®ç­”ç¯èŠ‚ï¼Œå¤§å®¶èƒ½ä¸€ç›´çœ‹åˆ°ä½ çš„æˆå°±ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç»“æŸè¯­&lt;/strong&gt;:&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸è¦è¯´&lt;/strong&gt;: â€œThank youâ€ï¼ˆè¿™æš—ç¤ºå¬ä¼—æ˜¯å› ä¸ºç¤¼è²Œæ‰åšæŒåˆ°æœ€åï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯ä»¥è¯´&lt;/strong&gt;: &lt;ul&gt;
&lt;li&gt;è®²ä¸€ä¸ªç¬‘è¯ï¼ˆæ­¤æ—¶å¬ä¼—å·²ç»æ”¾æ¾ï¼Œæ›´å®¹æ˜“æ¥å—å¹½é»˜ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Salute (è‡´æ•¬)&lt;/strong&gt;: â€œæˆ‘å¾ˆäº«å—è¿™æ®µæ—¶å…‰â€ã€â€œè¿™æ˜¯ä¸€ç¾¤å¾ˆæ£’çš„å¬ä¼—â€ã€‚&lt;/li&gt;
&lt;li&gt;æˆ–è€…ç›´æ¥ä»¥å¼ºæœ‰åŠ›çš„æ€»ç»“ç»“æŸã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;&amp;ldquo;Your careers will be determined largely by how well you speak, by how well you write, and by the quality of your ideasâ€¦ in that order.&amp;rdquo;&lt;/em&gt; 
â€” &lt;strong&gt;Patrick Winston&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;style&gt;
.related-posts {
  margin-top: 1.5rem;
  padding-top: 0.75rem;
  border-top: 1px solid rgba(0,0,0,0.1);
  max-height: none !important; /* é˜²æ­¢Safarié”™è¯¯è®¡ç®—é«˜åº¦ */
  overflow: visible !important; /* é˜²æ­¢å†…å®¹è¢«æˆªæ–­ */
}
.related-posts h3 {
  margin-top: 0;
  margin-bottom: 0.5rem;
  font-size: 1.2rem;
  font-weight: 500;
  line-height: 1.3;
}
.related-posts ul {
  margin: 0 0 0.5rem 0 !important; /* å¼ºåˆ¶è¦†ç›–å¯èƒ½çš„å†²çªæ ·å¼ */
  padding-left: 1.5rem;
  list-style-position: outside;
}
.related-posts li {
  margin-bottom: 0.25rem;
  line-height: 1.4;
}
/* æš—è‰²æ¨¡å¼é€‚é… */
[data-md-color-scheme=&#34;slate&#34;] .related-posts {
  border-top-color: rgba(255,255,255,0.1);
}
/* Safariç‰¹å®šä¿®å¤ */
@supports (-webkit-hyphens:none) {
  .related-posts {
    display: block;
    position: relative;
    height: auto !important;
  }
  .related-posts ul {
    position: static;
  }
}
&lt;/style&gt;
&lt;div class=&#34;related-posts&#34;&gt;
&lt;h3&gt;ğŸ“š ç›¸å…³æ–‡ç« æ¨è&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/unicodeç¼–ç å’Œutf-8è½¬æ¢ä¸åŒè¯­è¨€å®ç°çš„å·®åˆ«ä»¥åŠlocaleæ‚è°ˆ/&#34; target=&#34;_blank&#34;&gt;unicodeç¼–ç å’Œutf-8è½¬æ¢ä¸åŒè¯­è¨€å®ç°çš„å·®åˆ«ï¼Ÿä»¥åŠlocaleæ‚è°ˆ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/cå¼€å‘å¸¸è§é—®é¢˜ä¹‹abiå…¼å®¹æ€§é—®é¢˜/&#34; target=&#34;_blank&#34;&gt;C++å¼€å‘å¸¸è§é—®é¢˜ä¹‹ABIå…¼å®¹æ€§é—®é¢˜&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/helix-gptå¦‚ä½•å®ç°ai-codeä»¥åŠå¦‚ä½•è°ƒè¯•/&#34; target=&#34;_blank&#34;&gt;helix-gptå¦‚ä½•å®ç°AI codeä»¥åŠå¦‚ä½•è°ƒè¯•?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/300è¡Œå®ç°ä¸€ä¸ªboundedspscqueue/&#34; target=&#34;_blank&#34;&gt;300è¡Œå®ç°ä¸€ä¸ªBoundedSPSCQueue&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/netcapè°ƒè¯•/&#34; target=&#34;_blank&#34;&gt;netcapè°ƒè¯•&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;</description>
      <link>https://github.com/KenForever1/blog/mit-%E7%BB%8F%E5%85%B8%E8%AE%B2%E5%BA%A7how-to-speak---patrick-winston/</link>
      <pubDate>Sat, 10 Jan 2026 00:00:00 +0000</pubDate>
      <source url="https://github.com/KenForever1/feed_rss_updated.xml">KenForever1</source>
      
      <guid isPermaLink="true">https://github.com/KenForever1/blog/mit-%E7%BB%8F%E5%85%B8%E8%AE%B2%E5%BA%A7how-to-speak---patrick-winston/</guid>
      
    </item>
    
    <item>
      <title>Keyonicaç”¨é”®ç›˜æ¼”å¥å£ç´ï¼Œè®©éŸ³ä¹è§¦æ‰‹å¯åŠ</title>
      
      
        
      <author>KenForever1</author>
        
      
      
      
      <description>&lt;h1 id=&#34;-keyonica&#34;&gt;ğŸµ Keyonica&lt;a class=&#34;headerlink&#34; href=&#34;#-keyonica&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Key&lt;/strong&gt; + Harmo&lt;strong&gt;nica&lt;/strong&gt; = &lt;strong&gt;&lt;a href=&#34;https://github.com/KenForever1/Keyonica&#34;&gt;Keyonica&lt;/a&gt;&lt;/strong&gt; â€” ç”¨é”®ç›˜æ¼”å¥å£ç´ï¼Œè®©éŸ³ä¹è§¦æ‰‹å¯åŠï¼&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å‘¨æœ«æ‹¿å‡ºå°˜å°å·²ä¹…çš„å£ç´ï¼Œå‘ç°å¾ˆå¤šè°±å­ä¸ç†Ÿæ‚‰ï¼Œæ—©æ™¨å¤ªæ—©æˆ–è€…æ™šä¸Šå¤ªæ™šç»ƒä¹ å¯èƒ½å½±å“é‚»å±…ï¼Œè€Œä¸”æœ‰æ—¶å€™ä¸æƒ³åŠ¨å˜´ï¼å°±äº§ç”Ÿäº†è¿™ä¸ªRust é”®ç›˜å£ç´, åˆ©ç”¨è®¡ç®—æœºé”®ç›˜æ¨¡æ‹Ÿå£ç´çš„æ¼”å¥ä½“éªŒï¼Œæ”¯æŒå¤šé”®å¹¶å‘ï¼Œå…·å¤‡ä½å»¶è¿Ÿçš„éŸ³é¢‘å“åº”èƒ½åŠ›ã€‚å¸®åŠ©ä½ äº«å—éŸ³ä¹ã€è®°è°±å­ã€æ— èŠçš„æ—¶å€™æ”¾æ¾ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€æ¬¾åŸºäº Rust å¼€å‘çš„å£ç´æ¨¡æ‹Ÿå™¨ï¼Œæ”¯æŒé”®ç›˜å®æ—¶æ¼”å¥ã€å’Œå¼¦æ¼”å¥ã€ç§»è°ƒåŠŸèƒ½ï¼Œå¹¶å†…ç½®è‡ªåŠ¨æ¼”ç¤ºæ›²ç›®ã€‚æ— è®ºä½ æ˜¯éŸ³ä¹çˆ±å¥½è€…è¿˜æ˜¯ç¼–ç¨‹å­¦ä¹ è€…ï¼Œéƒ½èƒ½åœ¨è¿™é‡Œæ‰¾åˆ°ä¹è¶£ï¼&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;&#34; src=&#34;https://raw.githubusercontent.com/KenForever1/CDN/main/keyonica_icon.png&#34; /&gt;&lt;/p&gt;
&lt;!-- more --&gt;

&lt;p&gt;&lt;img alt=&#34;&#34; src=&#34;https://raw.githubusercontent.com/KenForever1/CDN/main/keyonica.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;Rust&#34; src=&#34;https://img.shields.io/badge/Rust-000000?style=flat&amp;amp;logo=rust&amp;amp;logoColor=white&#34; /&gt;
&lt;img alt=&#34;Platform&#34; src=&#34;https://img.shields.io/badge/Platform-Windows%20|%20macOS%20|%20Linux-blue&#34; /&gt;
&lt;img alt=&#34;License&#34; src=&#34;https://img.shields.io/badge/License-MIT-green&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;-ç‰¹æ€§äº®ç‚¹&#34;&gt;âœ¨ ç‰¹æ€§äº®ç‚¹&lt;a class=&#34;headerlink&#34; href=&#34;#-ç‰¹æ€§äº®ç‚¹&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;ğŸ¹ &lt;strong&gt;ä¸‰æ’é”®ç›˜å¸ƒå±€&lt;/strong&gt; - è¦†ç›–ä½éŸ³ã€ä¸­éŸ³ã€é«˜éŸ³ä¸‰ä¸ªå…«åº¦ï¼Œ26ä¸ªéŸ³ç¬¦ä»»ä½ å¼¹å¥&lt;/li&gt;
&lt;li&gt;ğŸ¸ &lt;strong&gt;çœŸå®å£ç´éŸ³è‰²&lt;/strong&gt; - ADSR åŒ…ç»œ + æ³›éŸ³åˆæˆï¼Œå‘Šåˆ«åˆºè€³çš„ç”µå­éŸ³&lt;/li&gt;
&lt;li&gt;ğŸ¶ &lt;strong&gt;æ¼”å¥&lt;/strong&gt; - åŒæ—¶æŒ‰ä¸‹å¤šé”®æ¼”å¥å’Œå¼¦ï¼Œä½“éªŒå£ç´é­…åŠ›&lt;/li&gt;
&lt;li&gt;ğŸ¼ &lt;strong&gt;ç§»è°ƒåŠŸèƒ½&lt;/strong&gt; - æ”¯æŒ Â±12 åŠéŸ³ç§»è°ƒï¼Œè½»æ¾åˆ‡æ¢è°ƒæ€§&lt;/li&gt;
&lt;li&gt;ğŸ¤– &lt;strong&gt;æ¼”ç¤ºæ¨¡å¼&lt;/strong&gt; - å†…ç½®ã€Šå°æ˜Ÿæ˜Ÿã€‹ã€Šä¸¤åªè€è™ã€‹ç­‰ç»å…¸æ›²ç›®è‡ªåŠ¨æ¼”å¥&lt;/li&gt;
&lt;li&gt;ğŸ–¥ï¸ &lt;strong&gt;è·¨å¹³å°&lt;/strong&gt; - Windowsã€macOSã€Linux å…¨å¹³å°æ”¯æŒ&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ•ˆæœå±•ç¤º&#34;&gt;æ•ˆæœå±•ç¤º&lt;a class=&#34;headerlink&#34; href=&#34;#æ•ˆæœå±•ç¤º&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;img alt=&#34;keyonica1_ä½¿ç”¨.mp4&#34; src=&#34;https://cdn.jsdelivr.net/gh/KenForever1/CDN/keyonica1.mp4&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;keyonica1_ä¸Šæµ·æ»©.mp4&#34; src=&#34;https://cdn.jsdelivr.net/gh/KenForever1/CDN/keyonica1_ä¸Šæµ·æ»©.mp4&#34; /&gt;&lt;/p&gt;
&lt;p&gt;æ³¨ï¼šè§†é¢‘ä¸­çš„ç”µæµå£°æ˜¯ä½œè€…å½•åˆ¶çš„ç”µè„‘å–‡å­æœ‰é—®é¢˜ï¼Œå…¶å®ƒç”µè„‘éªŒè¯æ²¡æœ‰ç”µæµå£°ã€‚&lt;/p&gt;
&lt;h2 id=&#34;-ä¸‹è½½ä½¿ç”¨&#34;&gt;ğŸ® ä¸‹è½½ä½¿ç”¨&lt;a class=&#34;headerlink&#34; href=&#34;#-ä¸‹è½½ä½¿ç”¨&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;windowsé€‰æ‹©ä¸‹é¢ä»»æ„ä¸€ä¸ªä¸‹è½½å³å¯ï¼Œè§£å‹zipæ–‡ä»¶ååŒå‡»å³å¯æ‰§è¡Œexeæ–‡ä»¶ï¼Œæ‰“å¼€Keyonicaï¼Œå³å¯æ¼”å¥ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://cdn.jsdelivr.net/gh/KenForever1/CDN/keyonica_x86_64-pc-windows-msvc.zip&#34;&gt;keyonica_x86_64-pc-windows-mscvæ‰§è¡Œç¨‹åºä¸‹è½½&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://cdn.jsdelivr.net/gh/KenForever1/CDN/keyonica_x86_64-pc-windows-gnu.zip&#34;&gt;keyonica_x86_64-pc-windows-gnuæ‰§è¡Œç¨‹åºä¸‹è½½&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è‹¹æœç”µè„‘ç”¨æˆ·ï¼Œä¸‹è½½applicationå‹ç¼©åŒ…è§£å‹åå°±å¯ä»¥ä½¿ç”¨ï¼Œå¯ä»¥åŒå‡»ä¹Ÿå¯ä»¥æ‹–åˆ°Applicationä¸‹ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://cdn.jsdelivr.net/gh/KenForever1/CDN/Keyonica.zip&#34;&gt;Keyonica.zip MAC appå®‰è£…åŒ…ä¸‹è½½&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Bash&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-5&#34;&gt;5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-6&#34;&gt;6&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-0-1&#34; name=&#34;__codelineno-0-1&#34;&gt;&lt;/a&gt;windowsä¸‹è½½é“¾æ¥ï¼š
&lt;a id=&#34;__codelineno-0-2&#34; name=&#34;__codelineno-0-2&#34;&gt;&lt;/a&gt;+&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;https://cdn.jsdelivr.net/gh/KenForever1/CDN/keyonica_x86_64-pc-windows-msvc.zip
&lt;a id=&#34;__codelineno-0-3&#34; name=&#34;__codelineno-0-3&#34;&gt;&lt;/a&gt;+&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;https://cdn.jsdelivr.net/gh/KenForever1/CDN/keyonica_x86_64-pc-windows-gnu.zip
&lt;a id=&#34;__codelineno-0-4&#34; name=&#34;__codelineno-0-4&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-5&#34; name=&#34;__codelineno-0-5&#34;&gt;&lt;/a&gt;macä¸‹è½½é“¾æ¥ï¼š
&lt;a id=&#34;__codelineno-0-6&#34; name=&#34;__codelineno-0-6&#34;&gt;&lt;/a&gt;+&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;https://cdn.jsdelivr.net/gh/KenForever1/CDN/Keyonica.zip
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;h2 id=&#34;-é”®ä½æ˜ å°„&#34;&gt;ğŸ¹ é”®ä½æ˜ å°„&lt;a class=&#34;headerlink&#34; href=&#34;#-é”®ä½æ˜ å°„&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;é”®ç›˜åˆ†ä¸ºä¸‰æ’ï¼Œå¯¹åº”å£ç´çš„ä¸‰ä¸ªéŸ³åŒºï¼š&lt;/p&gt;
&lt;h3 id=&#34;ç¬¬ä¸€æ’-ä½éŸ³--ä¸­éŸ³&#34;&gt;ç¬¬ä¸€æ’ (ä½éŸ³ + ä¸­éŸ³)&lt;a class=&#34;headerlink&#34; href=&#34;#ç¬¬ä¸€æ’-ä½éŸ³--ä¸­éŸ³&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align: center;&#34;&gt;æŒ‰é”®&lt;/th&gt;
&lt;th style=&#34;text-align: center;&#34;&gt;Q&lt;/th&gt;
&lt;th style=&#34;text-align: center;&#34;&gt;W&lt;/th&gt;
&lt;th style=&#34;text-align: center;&#34;&gt;E&lt;/th&gt;
&lt;th style=&#34;text-align: center;&#34;&gt;R&lt;/th&gt;
&lt;th style=&#34;text-align: center;&#34;&gt;T&lt;/th&gt;
&lt;th style=&#34;text-align: center;&#34;&gt;Y&lt;/th&gt;
&lt;th style=&#34;text-align: center;&#34;&gt;U&lt;/th&gt;
&lt;th style=&#34;text-align: center;&#34;&gt;I&lt;/th&gt;
&lt;th style=&#34;text-align: center;&#34;&gt;O&lt;/th&gt;
&lt;th style=&#34;text-align: center;&#34;&gt;P&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;å”±å&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;1.&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;2.&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;3.&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;4.&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;5.&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;6.&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;7.&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;1&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;2&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;éŸ³åŒº&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;ä½&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;ä½&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;ä½&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;ä½&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;ä½&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;ä½&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;ä½&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;ä¸­&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;ä¸­&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;ä¸­&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;ç¬¬äºŒæ’-ä¸­éŸ³--é«˜éŸ³&#34;&gt;ç¬¬äºŒæ’ (ä¸­éŸ³ + é«˜éŸ³)&lt;a class=&#34;headerlink&#34; href=&#34;#ç¬¬äºŒæ’-ä¸­éŸ³--é«˜éŸ³&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align: center;&#34;&gt;æŒ‰é”®&lt;/th&gt;
&lt;th style=&#34;text-align: center;&#34;&gt;A&lt;/th&gt;
&lt;th style=&#34;text-align: center;&#34;&gt;S&lt;/th&gt;
&lt;th style=&#34;text-align: center;&#34;&gt;D&lt;/th&gt;
&lt;th style=&#34;text-align: center;&#34;&gt;F&lt;/th&gt;
&lt;th style=&#34;text-align: center;&#34;&gt;G&lt;/th&gt;
&lt;th style=&#34;text-align: center;&#34;&gt;H&lt;/th&gt;
&lt;th style=&#34;text-align: center;&#34;&gt;J&lt;/th&gt;
&lt;th style=&#34;text-align: center;&#34;&gt;K&lt;/th&gt;
&lt;th style=&#34;text-align: center;&#34;&gt;L&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;å”±å&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;1&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;2&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;3&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;4&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;5&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;6&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;7&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;1&amp;rsquo;&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;2&amp;rsquo;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;éŸ³åŒº&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;ä¸­&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;ä¸­&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;ä¸­&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;ä¸­&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;ä¸­&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;ä¸­&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;ä¸­&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;é«˜&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;é«˜&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;ç¬¬ä¸‰æ’-é«˜éŸ³&#34;&gt;ç¬¬ä¸‰æ’ (é«˜éŸ³)&lt;a class=&#34;headerlink&#34; href=&#34;#ç¬¬ä¸‰æ’-é«˜éŸ³&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align: center;&#34;&gt;æŒ‰é”®&lt;/th&gt;
&lt;th style=&#34;text-align: center;&#34;&gt;Z&lt;/th&gt;
&lt;th style=&#34;text-align: center;&#34;&gt;X&lt;/th&gt;
&lt;th style=&#34;text-align: center;&#34;&gt;C&lt;/th&gt;
&lt;th style=&#34;text-align: center;&#34;&gt;V&lt;/th&gt;
&lt;th style=&#34;text-align: center;&#34;&gt;B&lt;/th&gt;
&lt;th style=&#34;text-align: center;&#34;&gt;N&lt;/th&gt;
&lt;th style=&#34;text-align: center;&#34;&gt;M&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;å”±å&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;1&amp;rsquo;&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;2&amp;rsquo;&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;3&amp;rsquo;&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;4&amp;rsquo;&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;5&amp;rsquo;&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;6&amp;rsquo;&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;7&amp;rsquo;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;éŸ³åŒº&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;é«˜&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;é«˜&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;é«˜&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;é«˜&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;é«˜&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;é«˜&lt;/td&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;é«˜&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;ğŸ’¡ &lt;strong&gt;æç¤º&lt;/strong&gt;ï¼šç¬¬äºŒæ’ A-J ä¸ç¬¬ä¸€æ’ I-P éƒ¨åˆ†é‡å ï¼Œæ–¹ä¾¿ä¸åŒæŒ‡æ³•ä¹ æƒ¯&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;-å¿«æ·é”®&#34;&gt;âŒ¨ï¸ å¿«æ·é”®&lt;a class=&#34;headerlink&#34; href=&#34;#-å¿«æ·é”®&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align: center;&#34;&gt;æŒ‰é”®&lt;/th&gt;
&lt;th style=&#34;text-align: left;&#34;&gt;åŠŸèƒ½&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;&lt;code&gt;Space&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align: left;&#34;&gt;å¼€å§‹/åœæ­¢ æ¼”ç¤ºæ’­æ”¾&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;&lt;code&gt;â†&lt;/code&gt; &lt;code&gt;â†’&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align: left;&#34;&gt;åˆ‡æ¢æ¼”ç¤ºæ›²ç›®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;&lt;code&gt;â†‘&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align: left;&#34;&gt;å‡è°ƒ (+1 åŠéŸ³)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;&lt;code&gt;â†“&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align: left;&#34;&gt;é™è°ƒ (-1 åŠéŸ³)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align: center;&#34;&gt;&lt;code&gt;Esc&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align: left;&#34;&gt;é‡ç½®ä¸ºåŸè°ƒ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;æ ¸å¿ƒè®¾è®¡&#34;&gt;æ ¸å¿ƒè®¾è®¡&lt;a class=&#34;headerlink&#34; href=&#34;#æ ¸å¿ƒè®¾è®¡&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;h4 id=&#34;1-éŸ³é¢‘å¼•æ“&#34;&gt;1. éŸ³é¢‘å¼•æ“&lt;a class=&#34;headerlink&#34; href=&#34;#1-éŸ³é¢‘å¼•æ“&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;åŸºäº &lt;strong&gt;rodio&lt;/strong&gt; å®ç°ä½å»¶è¿ŸéŸ³é¢‘æ’­æ”¾&lt;/li&gt;
&lt;li&gt;æ¯ä¸ªæŒ‰é”®ç‹¬ç«‹ &lt;code&gt;Sink&lt;/code&gt;ï¼Œæ”¯æŒçœŸæ­£çš„æ¼”å¥&lt;/li&gt;
&lt;li&gt;é‡‡ç”¨ mixer æ··éŸ³ï¼Œå¤šéŸ³åŒæ—¶æ’­æ”¾æ— å†²çª&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;2-adsr-åŒ…ç»œ&#34;&gt;2. ADSR åŒ…ç»œ&lt;a class=&#34;headerlink&#34; href=&#34;#2-adsr-åŒ…ç»œ&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Text Only&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-5&#34;&gt;5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-6&#34;&gt;6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-7&#34;&gt;7&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-1-1&#34; name=&#34;__codelineno-1-1&#34;&gt;&lt;/a&gt;éŸ³é‡
&lt;a id=&#34;__codelineno-1-2&#34; name=&#34;__codelineno-1-2&#34;&gt;&lt;/a&gt;  ^
&lt;a id=&#34;__codelineno-1-3&#34; name=&#34;__codelineno-1-3&#34;&gt;&lt;/a&gt;1 |    /\
&lt;a id=&#34;__codelineno-1-4&#34; name=&#34;__codelineno-1-4&#34;&gt;&lt;/a&gt;  |   /  \____
&lt;a id=&#34;__codelineno-1-5&#34; name=&#34;__codelineno-1-5&#34;&gt;&lt;/a&gt;  |  /        \
&lt;a id=&#34;__codelineno-1-6&#34; name=&#34;__codelineno-1-6&#34;&gt;&lt;/a&gt;0 |_/          \___
&lt;a id=&#34;__codelineno-1-7&#34; name=&#34;__codelineno-1-7&#34;&gt;&lt;/a&gt;  +--A--D--S----R--&amp;gt; æ—¶é—´
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
- &lt;strong&gt;Attack (30ms)&lt;/strong&gt;: æŸ”å’Œèµ·éŸ³ï¼Œé¿å…çˆ†ç ´éŸ³
- &lt;strong&gt;Decay (80ms)&lt;/strong&gt;: è‡ªç„¶è¡°å‡
- &lt;strong&gt;Sustain (60%)&lt;/strong&gt;: æŒç»­æŒ‰ä½æ—¶çš„éŸ³é‡
- &lt;strong&gt;Release (150ms)&lt;/strong&gt;: æ¾å¼€åå¹³æ»‘æ¶ˆéŸ³&lt;/p&gt;
&lt;h4 id=&#34;3-å£ç´éŸ³è‰²åˆæˆ&#34;&gt;3. å£ç´éŸ³è‰²åˆæˆ&lt;a class=&#34;headerlink&#34; href=&#34;#3-å£ç´éŸ³è‰²åˆæˆ&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;ä¸åŒäºç®€å•çš„æ­£å¼¦æ³¢ï¼Œé‡‡ç”¨æ³›éŸ³å åŠ æ¨¡æ‹ŸçœŸå®å£ç´ï¼š
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Rust&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-2-1&#34; name=&#34;__codelineno-2-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;err&#34;&gt;åŸºé¢‘&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;æ¬¡æ³›éŸ³Ã—&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;æ¬¡æ³›éŸ³Ã—&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;æ¬¡æ³›éŸ³Ã—&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;æ¬¡æ³›éŸ³Ã—&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.05&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/p&gt;
&lt;h4 id=&#34;4-ç§»è°ƒç®—æ³•&#34;&gt;4. ç§»è°ƒç®—æ³•&lt;a class=&#34;headerlink&#34; href=&#34;#4-ç§»è°ƒç®—æ³•&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;åŸºäºåäºŒå¹³å‡å¾‹ï¼Œæ¯ä¸ªåŠéŸ³é¢‘ç‡æ¯”ä¸º &lt;code&gt;2^(1/12)&lt;/code&gt;ï¼š
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Rust&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-3-1&#34; name=&#34;__codelineno-3-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;err&#34;&gt;å®é™…é¢‘ç‡&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;err&#34;&gt;åŸºå‡†é¢‘ç‡&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;err&#34;&gt;Ã—&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;^&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ç§»è°ƒåŠéŸ³æ•°&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;12&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/p&gt;
&lt;h2 id=&#34;-å†…ç½®æ›²ç›®&#34;&gt;ğŸ¼ å†…ç½®æ›²ç›®&lt;a class=&#34;headerlink&#34; href=&#34;#-å†…ç½®æ›²ç›®&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align: left;&#34;&gt;æ›²ç›®&lt;/th&gt;
&lt;th style=&#34;text-align: left;&#34;&gt;æè¿°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align: left;&#34;&gt;éŸ³é˜¶æµ‹è¯•&lt;/td&gt;
&lt;td style=&#34;text-align: left;&#34;&gt;ä¸­éŸ³åŒºä¸Šä¸‹è¡ŒéŸ³é˜¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align: left;&#34;&gt;å°æ˜Ÿæ˜Ÿ&lt;/td&gt;
&lt;td style=&#34;text-align: left;&#34;&gt;ç»å…¸å„¿æ­Œå®Œæ•´ç‰ˆ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align: left;&#34;&gt;ä¸¤åªè€è™&lt;/td&gt;
&lt;td style=&#34;text-align: left;&#34;&gt;æ¬¢å¿«çš„ç«¥è°£æ—‹å¾‹&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;ğŸµ æŒ‰ &lt;code&gt;Space&lt;/code&gt; å¼€å§‹è‡ªåŠ¨æ¼”å¥ï¼Œè§‚çœ‹æŒ‰é”®é«˜äº®è·ŸéšéŸ³ä¹è·³åŠ¨ï¼&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p align=&#34;center&#34;&gt;
  ğŸµ ç”¨ä»£ç å¥å“éŸ³ä¹ï¼Œç”¨é”®ç›˜æ¼”ç»æ—‹å¾‹ ğŸµ
&lt;/p&gt;
&lt;style&gt;
.related-posts {
  margin-top: 1.5rem;
  padding-top: 0.75rem;
  border-top: 1px solid rgba(0,0,0,0.1);
  max-height: none !important; /* é˜²æ­¢Safarié”™è¯¯è®¡ç®—é«˜åº¦ */
  overflow: visible !important; /* é˜²æ­¢å†…å®¹è¢«æˆªæ–­ */
}
.related-posts h3 {
  margin-top: 0;
  margin-bottom: 0.5rem;
  font-size: 1.2rem;
  font-weight: 500;
  line-height: 1.3;
}
.related-posts ul {
  margin: 0 0 0.5rem 0 !important; /* å¼ºåˆ¶è¦†ç›–å¯èƒ½çš„å†²çªæ ·å¼ */
  padding-left: 1.5rem;
  list-style-position: outside;
}
.related-posts li {
  margin-bottom: 0.25rem;
  line-height: 1.4;
}
/* æš—è‰²æ¨¡å¼é€‚é… */
[data-md-color-scheme=&#34;slate&#34;] .related-posts {
  border-top-color: rgba(255,255,255,0.1);
}
/* Safariç‰¹å®šä¿®å¤ */
@supports (-webkit-hyphens:none) {
  .related-posts {
    display: block;
    position: relative;
    height: auto !important;
  }
  .related-posts ul {
    position: static;
  }
}
&lt;/style&gt;
&lt;div class=&#34;related-posts&#34;&gt;
&lt;h3&gt;ğŸ“š ç›¸å…³æ–‡ç« æ¨è&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/300è¡Œå®ç°ä¸€ä¸ªboundedspscqueue/&#34; target=&#34;_blank&#34;&gt;300è¡Œå®ç°ä¸€ä¸ªBoundedSPSCQueue&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/c20å¦‚ä½•å®ç°ä¸€ä¸ªåŸºäºå±æ€§æµ‹è¯•çš„quickcheck-cppåº“/&#34; target=&#34;_blank&#34;&gt;C++20å¦‚ä½•å®ç°ä¸€ä¸ªåŸºäºå±æ€§æµ‹è¯•çš„quickcheck-cppåº“&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/helix-gptå¦‚ä½•å®ç°ai-codeä»¥åŠå¦‚ä½•è°ƒè¯•/&#34; target=&#34;_blank&#34;&gt;helix-gptå¦‚ä½•å®ç°AI codeä»¥åŠå¦‚ä½•è°ƒè¯•?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/cä½¿ç”¨abseil-cppé‡åˆ°çš„å°é—®é¢˜/&#34; target=&#34;_blank&#34;&gt;C++ä½¿ç”¨abseil-cppé‡åˆ°çš„å°é—®é¢˜&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/mit-ç»å…¸è®²åº§how-to-speak---patrick-winston/&#34; target=&#34;_blank&#34;&gt;MIT ç»å…¸è®²åº§ï¼šHow to Speak - Patrick Winston&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;</description>
      <link>https://github.com/KenForever1/blog/keyonica%E7%94%A8%E9%94%AE%E7%9B%98%E6%BC%94%E5%A5%8F%E5%8F%A3%E7%90%B4%E8%AE%A9%E9%9F%B3%E4%B9%90%E8%A7%A6%E6%89%8B%E5%8F%AF%E5%8F%8A/</link>
      <pubDate>Sun, 07 Dec 2025 00:00:00 +0000</pubDate>
      <source url="https://github.com/KenForever1/feed_rss_updated.xml">KenForever1</source>
      
      <guid isPermaLink="true">https://github.com/KenForever1/blog/keyonica%E7%94%A8%E9%94%AE%E7%9B%98%E6%BC%94%E5%A5%8F%E5%8F%A3%E7%90%B4%E8%AE%A9%E9%9F%B3%E4%B9%90%E8%A7%A6%E6%89%8B%E5%8F%AF%E5%8F%8A/</guid>
      
    </item>
    
    <item>
      <title>Tracyçº³ç±³çº§æ€§èƒ½Profilerå·¥å…·ï¼Œæ‰‹åŠ¨æ’æ¡©ã€å¯è§†åŒ–åˆ†æ</title>
      
      
        
      <author>KenForever1</author>
        
      
      
      
      <description>&lt;p&gt;Tracyæ˜¯æœ€è¿‘äº†è§£åˆ°çš„ä¸€ä¸ªæ€§èƒ½åˆ†æå·¥å…·ï¼Œæœ‰ä¸€äº›ç‰¹æ€§å€¼å¾—å…³æ³¨ï¼šå¼€æºå…è´¹ã€å®æ—¶åˆ†æã€çº³ç§’çº§ç²¾åº¦ã€è·¨å¹³å°æ”¯æŒï¼ˆLinuxã€Winã€Macosï¼‰ã€åŠŸèƒ½ä¸°å¯ŒCPUã€MEMã€GPUç­‰ã€é›†æˆæ–¹ä¾¿ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨C++å¼€å‘ä¸­ï¼ŒåŒ…æ‹¬æ¸¸æˆé¢†åŸŸä¸€å¸§ä¸€å¸§åˆ†æã€æ¨ç†ä¸­æ¯æ¬¡æ¨ç†è€—æ—¶åˆ†æã€å¤šä¸ªçº¿ç¨‹ä¸­å…³è”åŒä¸€ä¸ªContextç­‰ã€‚ç›®å‰è¿˜åœ¨å­¦ä¹ ä¸­ï¼Œå…ˆç®€å•ä»‹ç»ä¸€ä¸‹åŸºç¡€ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;!-- more --&gt;

&lt;h2 id=&#34;tracyä»‹ç»&#34;&gt;Tracyä»‹ç»&lt;a class=&#34;headerlink&#34; href=&#34;#tracyä»‹ç»&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Tracyçš„åŠŸèƒ½å¾ˆå¼ºå¤§ï¼Œä¸‹é¢çš„åŠŸèƒ½å®ƒéƒ½èƒ½å¹²ï¼&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;&#34; src=&#34;https://raw.githubusercontent.com/KenForever1/CDN/main/Tracy1.png&#34; /&gt;
å®ƒçš„ä»£ç å®ç°æ˜¯Clientå’ŒServeræ¨¡å¼ï¼ŒTracyClientä»¥ä»£ç çš„æ–¹å¼é›†æˆåˆ°äº†ä½ çš„ç¨‹åºé‡Œé¢ï¼Œå³å¯¼å…¥å¤´æ–‡ä»¶ï¼Œé“¾æ¥Tracyåº“ï¼Œç¼–è¯‘æ—¶ä½¿ç”¨TRACY_ENABLEæ¿€æ´»ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶åServerç«¯ï¼Œä¹Ÿå°±æ˜¯Profiler GUIå¯ä»¥æœç´¢è¿æ¥clientï¼Œå› æ­¤ä½ å¯ä»¥è·¨æœºå™¨ï¼Œæ¯”å¦‚åœ¨ä½ çš„MACæˆ–è€…windowsä¸Šè§‚å¯Ÿè·‘ç€linuxä¸Šçš„ç¨‹åºçš„æ€§èƒ½æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;&#34; src=&#34;https://raw.githubusercontent.com/KenForever1/CDN/main/Tracy3.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;GPUç•Œé¢å¦‚å›¾æ‰€ç¤ºï¼ŒTracyå·¥å…·ä½œè€…å¯¹ç•Œé¢çš„å“åº”è¿›è¡Œäº†å¤šä¸ªç‰ˆæœ¬çš„ä¼˜åŒ–ï¼Œæ˜¾ç¤ºå¾ˆæµç•…ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;&#34; src=&#34;https://raw.githubusercontent.com/KenForever1/CDN/main/Tracy2.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Tracyé‡‡ç”¨æ‰‹åŠ¨ä»£ç æ’æ¡©çš„æ–¹å¼ï¼Œå¯ä»¥è§‚å¯Ÿåˆ°æ¯ä¸ªå‡½æ•°çš„è€—æ—¶ï¼Œè§‚å¯Ÿå†…å­˜ç”³è¯·å’Œé‡Šæ”¾ç­‰åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;&#34; src=&#34;https://raw.githubusercontent.com/KenForever1/CDN/main/Tracy4.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;&#34; src=&#34;https://raw.githubusercontent.com/KenForever1/CDN/main/Tracy5.png&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;tracyé›†æˆä½¿ç”¨ä¾‹å­&#34;&gt;Tracyé›†æˆä½¿ç”¨ä¾‹å­&lt;a class=&#34;headerlink&#34; href=&#34;#tracyé›†æˆä½¿ç”¨ä¾‹å­&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-21&#34;&gt;21&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-22&#34;&gt;22&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-23&#34;&gt;23&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-24&#34;&gt;24&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-25&#34;&gt;25&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-26&#34;&gt;26&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-27&#34;&gt;27&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-28&#34;&gt;28&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-29&#34;&gt;29&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-30&#34;&gt;30&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-31&#34;&gt;31&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-32&#34;&gt;32&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-33&#34;&gt;33&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-34&#34;&gt;34&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-35&#34;&gt;35&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-36&#34;&gt;36&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-37&#34;&gt;37&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-38&#34;&gt;38&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-39&#34;&gt;39&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-40&#34;&gt;40&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-41&#34;&gt;41&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-42&#34;&gt;42&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-43&#34;&gt;43&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-44&#34;&gt;44&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-45&#34;&gt;45&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-46&#34;&gt;46&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-47&#34;&gt;47&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-48&#34;&gt;48&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-49&#34;&gt;49&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-50&#34;&gt;50&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-51&#34;&gt;51&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-52&#34;&gt;52&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-53&#34;&gt;53&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-54&#34;&gt;54&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-55&#34;&gt;55&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-56&#34;&gt;56&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-57&#34;&gt;57&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-58&#34;&gt;58&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-59&#34;&gt;59&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-60&#34;&gt;60&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-61&#34;&gt;61&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-0-1&#34; name=&#34;__codelineno-0-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// main.cpp&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-2&#34; name=&#34;__codelineno-0-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;cpf&#34;&gt;&amp;lt;thread&amp;gt;&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-3&#34; name=&#34;__codelineno-0-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;cpf&#34;&gt;&amp;lt;unistd.h&amp;gt;&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-4&#34; name=&#34;__codelineno-0-4&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-5&#34; name=&#34;__codelineno-0-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;cpf&#34;&gt;&amp;quot;tracy/Tracy.hpp&amp;quot;&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-6&#34; name=&#34;__codelineno-0-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;cpf&#34;&gt;&amp;quot;tracy/TracyC.h&amp;quot;&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-7&#34; name=&#34;__codelineno-0-7&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-8&#34; name=&#34;__codelineno-0-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;cpf&#34;&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-9&#34; name=&#34;__codelineno-0-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fiber&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;job1&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;
&lt;a id=&#34;__codelineno-0-10&#34; name=&#34;__codelineno-0-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;TracyCZoneCtx&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;zone&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-11&#34; name=&#34;__codelineno-0-11&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-12&#34; name=&#34;__codelineno-0-12&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-13&#34; name=&#34;__codelineno-0-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Line&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(){&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-14&#34; name=&#34;__codelineno-0-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ZoneScopedN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;Line&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// ä½œç”¨åŸŸå®&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-15&#34; name=&#34;__codelineno-0-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-16&#34; name=&#34;__codelineno-0-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sleep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-17&#34; name=&#34;__codelineno-0-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cout&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;Line:&amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;endl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-18&#34; name=&#34;__codelineno-0-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TracyPlot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;line&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int64_t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// ç»˜åˆ¶å›¾&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-19&#34; name=&#34;__codelineno-0-19&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-20&#34; name=&#34;__codelineno-0-20&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-21&#34; name=&#34;__codelineno-0-21&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-22&#34; name=&#34;__codelineno-0-22&#34;&gt;&lt;/a&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Add&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(){&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-23&#34; name=&#34;__codelineno-0-23&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ZoneScopedN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;Add&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-24&#34; name=&#34;__codelineno-0-24&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sleep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-25&#34; name=&#34;__codelineno-0-25&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cout&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;Add:&amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;endl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-26&#34; name=&#34;__codelineno-0-26&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Line&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-27&#34; name=&#34;__codelineno-0-27&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-28&#34; name=&#34;__codelineno-0-28&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-29&#34; name=&#34;__codelineno-0-29&#34;&gt;&lt;/a&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Sub&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(){&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-30&#34; name=&#34;__codelineno-0-30&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ZoneScopedN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;Sub&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-31&#34; name=&#34;__codelineno-0-31&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sleep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-32&#34; name=&#34;__codelineno-0-32&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;malloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1024&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-33&#34; name=&#34;__codelineno-0-33&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TracyAllocN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1024&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;malloc_1024&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// profilerå†…å­˜ç”³è¯·ä¿¡æ¯&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-34&#34; name=&#34;__codelineno-0-34&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sleep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-35&#34; name=&#34;__codelineno-0-35&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;free&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-36&#34; name=&#34;__codelineno-0-36&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TracyFreeN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;malloc_1024&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// profilerå†…å­˜é‡Šæ”¾ä¿¡æ¯&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-37&#34; name=&#34;__codelineno-0-37&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cout&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;Sub:&amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;endl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-38&#34; name=&#34;__codelineno-0-38&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-39&#34; name=&#34;__codelineno-0-39&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-40&#34; name=&#34;__codelineno-0-40&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-41&#34; name=&#34;__codelineno-0-41&#34;&gt;&lt;/a&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-42&#34; name=&#34;__codelineno-0-42&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-43&#34; name=&#34;__codelineno-0-43&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;thread&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;t1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-44&#34; name=&#34;__codelineno-0-44&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TracyFiberEnter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fiber&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-45&#34; name=&#34;__codelineno-0-45&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TracyCZone&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-46&#34; name=&#34;__codelineno-0-46&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;zone&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-47&#34; name=&#34;__codelineno-0-47&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sleep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-48&#34; name=&#34;__codelineno-0-48&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Add&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-49&#34; name=&#34;__codelineno-0-49&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TracyFiberLeave&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-50&#34; name=&#34;__codelineno-0-50&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-51&#34; name=&#34;__codelineno-0-51&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;t1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;join&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-52&#34; name=&#34;__codelineno-0-52&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-53&#34; name=&#34;__codelineno-0-53&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;thread&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;t2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-54&#34; name=&#34;__codelineno-0-54&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TracyFiberEnter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fiber&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-55&#34; name=&#34;__codelineno-0-55&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sleep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-56&#34; name=&#34;__codelineno-0-56&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Sub&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-57&#34; name=&#34;__codelineno-0-57&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TracyCZoneEnd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;zone&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-58&#34; name=&#34;__codelineno-0-58&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TracyFiberLeave&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-59&#34; name=&#34;__codelineno-0-59&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-60&#34; name=&#34;__codelineno-0-60&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;t2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;join&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-61&#34; name=&#34;__codelineno-0-61&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;CMakeé›†æˆTracyï¼Œä½¿ç”¨CPM.cmakeå·¥å…·ä»githubä»“åº“ä¸­è·å–æºç ï¼Œå¹¶ç¼–è¯‘ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Bash&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-21&#34;&gt;21&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-22&#34;&gt;22&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-23&#34;&gt;23&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-24&#34;&gt;24&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-25&#34;&gt;25&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-26&#34;&gt;26&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-27&#34;&gt;27&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-28&#34;&gt;28&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-29&#34;&gt;29&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-30&#34;&gt;30&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-31&#34;&gt;31&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-32&#34;&gt;32&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-33&#34;&gt;33&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-34&#34;&gt;34&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-35&#34;&gt;35&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-36&#34;&gt;36&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-37&#34;&gt;37&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-1-1&#34; name=&#34;__codelineno-1-1&#34;&gt;&lt;/a&gt;cmake_minimum_required&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;VERSION&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;3&lt;/span&gt;.10&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-2&#34; name=&#34;__codelineno-1-2&#34;&gt;&lt;/a&gt;project&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;hellocpp&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;VERSION&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.1.0&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;LANGUAGES&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;C&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;CXX&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-3&#34; name=&#34;__codelineno-1-3&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-1-4&#34; name=&#34;__codelineno-1-4&#34;&gt;&lt;/a&gt;option&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;TRACY_ENABLE&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;Enable Tracy&amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;ON&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-5&#34; name=&#34;__codelineno-1-5&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-1-6&#34; name=&#34;__codelineno-1-6&#34;&gt;&lt;/a&gt;add_definitions&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;-std&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;c++17&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-7&#34; name=&#34;__codelineno-1-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;TRACY_ENABLE&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-8&#34; name=&#34;__codelineno-1-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;add_definitions&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;-DTRACY_ENABLE&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-9&#34; name=&#34;__codelineno-1-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;add_definitions&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;-DTRACY_FIBERS&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-10&#34; name=&#34;__codelineno-1-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;# add_definitions(-DTRACY_NO_EXIT=ON) // å°è¯•æ²¡æœ‰æ•ˆæœ&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-11&#34; name=&#34;__codelineno-1-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;add_compile_options&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;-g&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-O3&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-fno-omit-frame-pointer&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-12&#34; name=&#34;__codelineno-1-12&#34;&gt;&lt;/a&gt;endif&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-13&#34; name=&#34;__codelineno-1-13&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-1-14&#34; name=&#34;__codelineno-1-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;NOT&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;TRACY_ENABLE&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-15&#34; name=&#34;__codelineno-1-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;set&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;TRACY_OPTIONS&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;TRACY_STATIC ON&amp;quot;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-16&#34; name=&#34;__codelineno-1-16&#34;&gt;&lt;/a&gt;endif&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-17&#34; name=&#34;__codelineno-1-17&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-1-18&#34; name=&#34;__codelineno-1-18&#34;&gt;&lt;/a&gt;include&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;cmake/CPM.cmake&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-19&#34; name=&#34;__codelineno-1-19&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-1-20&#34; name=&#34;__codelineno-1-20&#34;&gt;&lt;/a&gt;CPMAddPackage&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-21&#34; name=&#34;__codelineno-1-21&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;NAME&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;tracy
&lt;a id=&#34;__codelineno-1-22&#34; name=&#34;__codelineno-1-22&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;GITHUB_REPOSITORY&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;wolfpld/tracy
&lt;a id=&#34;__codelineno-1-23&#34; name=&#34;__codelineno-1-23&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;GIT_TAG&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;master
&lt;a id=&#34;__codelineno-1-24&#34; name=&#34;__codelineno-1-24&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;OPTIONS&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;TRACY_OPTIONS&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-25&#34; name=&#34;__codelineno-1-25&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;EXCLUDE_FROM_ALL&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;TRUE
&lt;a id=&#34;__codelineno-1-26&#34; name=&#34;__codelineno-1-26&#34;&gt;&lt;/a&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-27&#34; name=&#34;__codelineno-1-27&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-1-28&#34; name=&#34;__codelineno-1-28&#34;&gt;&lt;/a&gt;include_directories&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;CMAKE_CURRENT_BINARY_DIR&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-29&#34; name=&#34;__codelineno-1-29&#34;&gt;&lt;/a&gt;message&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;status&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;tracy_SOURCE_DIR&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-30&#34; name=&#34;__codelineno-1-30&#34;&gt;&lt;/a&gt;add_executable&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;hellocpp&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;main.cpp
&lt;a id=&#34;__codelineno-1-31&#34; name=&#34;__codelineno-1-31&#34;&gt;&lt;/a&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-32&#34; name=&#34;__codelineno-1-32&#34;&gt;&lt;/a&gt;target_link_libraries&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;hellocpp&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;PRIVATE&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Tracy::TracyClient&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-33&#34; name=&#34;__codelineno-1-33&#34;&gt;&lt;/a&gt;target_include_directories&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;hellocpp&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;PRIVATE&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;tracy_SOURCE_DIR&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;/public&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-34&#34; name=&#34;__codelineno-1-34&#34;&gt;&lt;/a&gt;set&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;CMAKE_INSTALL_PREFIX&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;PROJECT_SOURCE_DIR&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;/install_dir&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-35&#34; name=&#34;__codelineno-1-35&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-1-36&#34; name=&#34;__codelineno-1-36&#34;&gt;&lt;/a&gt;install&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;TARGETS&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;PROJECT_NAME&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;
&lt;a id=&#34;__codelineno-1-37&#34; name=&#34;__codelineno-1-37&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;RUNTIME&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;DESTINATION&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;ins&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;h2 id=&#34;tracyç›¸å…³èµ„æ–™&#34;&gt;Tracyç›¸å…³èµ„æ–™&lt;a class=&#34;headerlink&#34; href=&#34;#tracyç›¸å…³èµ„æ–™&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;Tracy çš„CMakeä½¿ç”¨ï¼Œå¯ä»¥å‚è€ƒä½œè€…vvå·¥å…·çš„ä½¿ç”¨&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;a href=&#34;https://github1s.com/wolfpld/vv/blob/master/CMakeLists.txt&#34;&gt;wolfpld/vv&lt;/a&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Tracy C++2023ä¼šè®®PPT&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è®²è§£äº†å¦‚ä½•CMakeé›†æˆTracy Clientï¼Œå¦‚ä½•ç¼–è¯‘Macã€linuxã€windowsä¸‰ç«¯çš„Tracy Profilerå¯è§†åŒ–ç•Œé¢ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨Tracy Profilerè¿›è¡Œæ€§èƒ½åˆ†æã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/CppCon/CppCon2023/blob/main/Presentations/Tracy_Profiler_2024.pdf&#34;&gt;/Tracy_Profiler_2024&lt;/a&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;hdké¡¹ç›®ä¸­è¿™ä¸ªå¤´æ–‡ä»¶å¯¹Tracyçš„å®å®šä¹‰è¿›è¡Œäº†äºŒæ¬¡å®šä¹‰ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;a href=&#34;https://www.sidefx.com/docs/hdk/_u_t___tracing_8h_source.html&#34;&gt;hdké¡¹ç›®Tracyå¤´æ–‡ä»¶&lt;/a&gt;, åŸå§‹TracyAllocç­‰å®å®šä¹‰ä½¿ç”¨çš„x,y,zæ ‡è®°å‚æ•°ï¼Œçœ‹ç€å¾ˆä¸æ¸…æ™°ï¼Œè¿™ä¸ªå¤´æ–‡ä»¶å°†å‚æ•°æ”¹æˆäº†æ›´æ¸…æ™°çš„ptr,size,nameã€‚&lt;/p&gt;
&lt;p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-2-1&#34; name=&#34;__codelineno-2-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// Memory tracing.&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-2&#34; name=&#34;__codelineno-2-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;171&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;define&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;utTraceAlloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TracyAlloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-3&#34; name=&#34;__codelineno-2-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;172&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;define&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;utTraceFree&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;                    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TracyFree&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-4&#34; name=&#34;__codelineno-2-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;173&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;define&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;utTraceAllocN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TracyAllocN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-5&#34; name=&#34;__codelineno-2-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;174&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;define&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;utTraceFreeN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TracyFreeN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-6&#34; name=&#34;__codelineno-2-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;175&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;
&lt;a id=&#34;__codelineno-2-7&#34; name=&#34;__codelineno-2-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;176&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;define&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;utTraceAllocS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;depth&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TracyAllocS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;depth&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-8&#34; name=&#34;__codelineno-2-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;177&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;define&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;utTraceFreeS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;depth&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;             &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TracyFreeS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;depth&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-9&#34; name=&#34;__codelineno-2-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;178&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;define&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;utTraceAllocNS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;depth&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TracyAllocNS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;depth&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-10&#34; name=&#34;__codelineno-2-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;179&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;define&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;utTraceFreeNS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;depth&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TracyFreeNS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;depth&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-11&#34; name=&#34;__codelineno-2-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;180&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
æ„Ÿè°¢æ‚¨çš„é˜…è¯»ï¼ï¼ï¼&lt;/p&gt;
&lt;style&gt;
.related-posts {
  margin-top: 1.5rem;
  padding-top: 0.75rem;
  border-top: 1px solid rgba(0,0,0,0.1);
  max-height: none !important; /* é˜²æ­¢Safarié”™è¯¯è®¡ç®—é«˜åº¦ */
  overflow: visible !important; /* é˜²æ­¢å†…å®¹è¢«æˆªæ–­ */
}
.related-posts h3 {
  margin-top: 0;
  margin-bottom: 0.5rem;
  font-size: 1.2rem;
  font-weight: 500;
  line-height: 1.3;
}
.related-posts ul {
  margin: 0 0 0.5rem 0 !important; /* å¼ºåˆ¶è¦†ç›–å¯èƒ½çš„å†²çªæ ·å¼ */
  padding-left: 1.5rem;
  list-style-position: outside;
}
.related-posts li {
  margin-bottom: 0.25rem;
  line-height: 1.4;
}
/* æš—è‰²æ¨¡å¼é€‚é… */
[data-md-color-scheme=&#34;slate&#34;] .related-posts {
  border-top-color: rgba(255,255,255,0.1);
}
/* Safariç‰¹å®šä¿®å¤ */
@supports (-webkit-hyphens:none) {
  .related-posts {
    display: block;
    position: relative;
    height: auto !important;
  }
  .related-posts ul {
    position: static;
  }
}
&lt;/style&gt;
&lt;div class=&#34;related-posts&#34;&gt;
&lt;h3&gt;ğŸ“š ç›¸å…³æ–‡ç« æ¨è&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/cutlassåº“ä¸­çš„å°¾å£°èåˆepilogue-fusionå’Œepilogue-visitor-trees/&#34; target=&#34;_blank&#34;&gt;CUTLASSåº“ä¸­çš„å°¾å£°èåˆ(Epilogue Fusion)å’ŒEpilogue Visitor Trees&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/ä»deepseekå¼€æºåº“3fsä¸­å­¦ä¹ fuseçš„ä½¿ç”¨-å¦‚ä½•å¼€å‘ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿä¸€/&#34; target=&#34;_blank&#34;&gt;ä»Deepseekå¼€æºåº“3FSä¸­å­¦ä¹ fuseçš„ä½¿ç”¨-å¦‚ä½•å¼€å‘ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼ˆä¸€ï¼‰&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/helix-gptå¦‚ä½•å®ç°ai-codeä»¥åŠå¦‚ä½•è°ƒè¯•/&#34; target=&#34;_blank&#34;&gt;helix-gptå¦‚ä½•å®ç°AI codeä»¥åŠå¦‚ä½•è°ƒè¯•?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/mit-ç»å…¸è®²åº§how-to-speak---patrick-winston/&#34; target=&#34;_blank&#34;&gt;MIT ç»å…¸è®²åº§ï¼šHow to Speak - Patrick Winston&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/300è¡Œå®ç°ä¸€ä¸ªboundedspscqueue/&#34; target=&#34;_blank&#34;&gt;300è¡Œå®ç°ä¸€ä¸ªBoundedSPSCQueue&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;</description>
      <link>https://github.com/KenForever1/blog/tracy%E7%BA%B3%E7%B1%B3%E7%BA%A7%E6%80%A7%E8%83%BDprofiler%E5%B7%A5%E5%85%B7%E6%89%8B%E5%8A%A8%E6%8F%92%E6%A1%A9%E5%8F%AF%E8%A7%86%E5%8C%96%E5%88%86%E6%9E%90/</link>
      <pubDate>Sat, 29 Nov 2025 00:00:00 +0000</pubDate>
      <source url="https://github.com/KenForever1/feed_rss_updated.xml">KenForever1</source>
      
      <guid isPermaLink="true">https://github.com/KenForever1/blog/tracy%E7%BA%B3%E7%B1%B3%E7%BA%A7%E6%80%A7%E8%83%BDprofiler%E5%B7%A5%E5%85%B7%E6%89%8B%E5%8A%A8%E6%8F%92%E6%A1%A9%E5%8F%AF%E8%A7%86%E5%8C%96%E5%88%86%E6%9E%90/</guid>
      
    </item>
    
    <item>
      <title>Tritonserverä¸­metricä½¿ç”¨æºä»£ç åˆ†æ</title>
      
      
        
      <author>KenForever1</author>
        
      
      
      
      <description>&lt;p&gt;è½¯ä»¶ç›‘æ§åœ¨ç°ä»£ç³»ç»Ÿä¸­æ‰®æ¼”ç€è‡³å…³é‡è¦çš„è§’è‰²ï¼Œæ— è®ºæ˜¯é—®é¢˜æ’æŸ¥è¿˜æ˜¯æ€§èƒ½ä¼˜åŒ–ï¼Œéƒ½ç¦»ä¸å¼€å¯¹metricsã€logså’Œtracesçš„æœ‰æ•ˆç›‘æ§ã€‚æœ¬æ–‡å°†æ·±å…¥åˆ†æTritonserverå¦‚ä½•å®ç°metricsæ•°æ®çš„æ”¶é›†ä¸ç®¡ç†ï¼Œå¸®åŠ©ä½ ç†è§£å…¶å†…éƒ¨æœºåˆ¶å¹¶æŒæ¡ç›¸å…³æŠ€æœ¯ç»†èŠ‚ã€‚&lt;/p&gt;
&lt;!-- more --&gt;

&lt;blockquote&gt;
&lt;p&gt;metricsæ•°æ®çš„ä½¿ç”¨æ–¹å¼ååˆ†ä¾¿æ·ï¼š
é€šè¿‡HTTPæœåŠ¡ï¼ˆä¾‹å¦‚ï¼šhttp://127.0.0.1:8002/metricsï¼‰å³å¯è·å–åˆ°metricsæ•°æ®ã€‚ç”±äºå…¶æ ¼å¼å®Œå…¨ç¬¦åˆPrometheusæ ‡å‡†ï¼Œå¯ä»¥ç›´æ¥ä¸Prometheuså¯¹æ¥ï¼Œå†é€šè¿‡Grafanaå¯è§†åŒ–é¢æ¿è¿›è¡Œç›‘æ§å’Œå±•ç¤ºã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;æºç å®ç°æ¦‚è§ˆ&#34;&gt;æºç å®ç°æ¦‚è§ˆ&lt;a class=&#34;headerlink&#34; href=&#34;#æºç å®ç°æ¦‚è§ˆ&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;åœ¨Tritonserverçš„coreä»“åº“ä¸­ï¼Œä¸metricsç›¸å…³çš„å®ç°ä¸»è¦é›†ä¸­åœ¨ä»¥ä¸‹å‡ ä¸ªæ–‡ä»¶ä¸­ï¼Œå®ƒä»¬å…±åŒæ„æˆäº†å®Œæ•´çš„metricsç³»ç»Ÿï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-0-1&#34; name=&#34;__codelineno-0-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;metrics&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cpp&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;æ ¸å¿ƒå®ç°æ–‡ä»¶&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ï¼Œ&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;æä¾›äº†å…¨å±€å•ä¾‹Metricsç±»&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ï¼Œ&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;æ‰€æœ‰metric_familyå’Œmetric_reporteréƒ½ä¾èµ–äºå®ƒ&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ã€‚&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;è¯¥æ–‡ä»¶å®ç°äº†metricsçš„æ³¨å†Œ&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ã€&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;åˆ›å»º&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ã€&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;åˆ é™¤&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ã€&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;åºåˆ—åŒ–ç­‰æ ¸å¿ƒæ“ä½œ&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ï¼Œ&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;è¿˜åŒ…å«äº†GPUå’ŒCPUä¿¡æ¯çš„æ”¶é›†é€»è¾‘&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ã€‚&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-2&#34; name=&#34;__codelineno-0-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;metric_family&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cpp&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ä¸ºTritonserverè‡ªå®šä¹‰æ‰©å±•metricsæä¾›æ”¯æŒ&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ï¼Œ&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;å°è£…äº†counterå’Œgaugeç±»å‹çš„å¸¸ç”¨å‡½æ•°&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ï¼ˆ&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;å¦‚Increment&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ã€&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Set&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ã€&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetValueç­‰&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ï¼‰&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ä»¥åŠåˆ›å»ºFamilyçš„å‡½æ•°&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ã€‚&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-3&#34; name=&#34;__codelineno-0-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;metric_reporter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cpp&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;æä¾›äº†MetricModelReporterç±»&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ï¼Œ&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ä¾›Tritonserverå†…éƒ¨è°ƒç”¨ä»¥æ”¶é›†metricsæ•°æ®&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ã€‚&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ä¾‹å¦‚&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ï¼Œ&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;å½“æ¨ç†è¯·æ±‚æˆåŠŸå®Œæˆæ—¶&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ï¼Œ&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ç›¸å…³ç»Ÿè®¡å‡½æ•°ä¼šè‡ªåŠ¨è°ƒç”¨åˆ°MetricModelReporterç±»&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ã€‚&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;å¦‚æœä½ è®¡åˆ’ä¸ºè‡ªå·±çš„åº”ç”¨å®ç°metricsæ•°æ®æ”¶é›†åŠŸèƒ½ï¼Œè¿™äº›æ–‡ä»¶ï¼ˆå°¤å…¶æ˜¯metrics.h/cppï¼‰æä¾›äº†å¾ˆå¥½çš„å‚è€ƒæ¨¡æ¿ã€‚åœ¨Tritonserverçš„ä»£ç ç»“æ„ä¸­ï¼Œè¿™éƒ¨åˆ†å®ç°ç›¸å¯¹ç‹¬ç«‹ï¼Œæ˜“äºç†è§£å’Œå¤ç”¨ã€‚&lt;/p&gt;
&lt;h2 id=&#34;metricsæ•°æ®çš„æ”¶é›†æœºåˆ¶&#34;&gt;metricsæ•°æ®çš„æ”¶é›†æœºåˆ¶&lt;a class=&#34;headerlink&#34; href=&#34;#metricsæ•°æ®çš„æ”¶é›†æœºåˆ¶&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Tritonserveré€šè¿‡é›†æˆPrometheusçš„C++åº“ï¼ˆprometheus-cppï¼‰æ¥å®ç°metricsæ•°æ®çš„æ”¶é›†ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹è¿™ä¸ªåº“çš„æ ¸å¿ƒæ¥å£ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-5&#34;&gt;5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-6&#34;&gt;6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-7&#34;&gt;7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-8&#34;&gt;8&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-1-1&#34; name=&#34;__codelineno-1-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// å…¨å±€å”¯ä¸€çš„æ³¨å†Œè¡¨ï¼Œæ‰€æœ‰åˆ›å»ºçš„familyéƒ½ä¼šæ³¨å†Œåˆ°è¿™é‡Œ&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-2&#34; name=&#34;__codelineno-1-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shared_ptr&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;prometheus&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Registry&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;registry_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-3&#34; name=&#34;__codelineno-1-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// åºåˆ—åŒ–å™¨ï¼Œç”¨äºå°†metricsæ•°æ®è½¬æ¢ä¸ºå­—ç¬¦ä¸²æ ¼å¼&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-4&#34; name=&#34;__codelineno-1-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;unique_ptr&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;prometheus&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Serializer&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;serializer_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-5&#34; name=&#34;__codelineno-1-5&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-1-6&#34; name=&#34;__codelineno-1-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// å®šä¹‰äº†å‡ ä¸ªæ ¸å¿ƒçš„Familyå¯¹è±¡ï¼ŒFamilyæ˜¯prometheus-cppåº“ä¸­çš„æ¨¡æ¿ç±»&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-7&#34; name=&#34;__codelineno-1-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;prometheus&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Family&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;prometheus&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Counter&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;inf_success_family_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-8&#34; name=&#34;__codelineno-1-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;prometheus&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Family&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;prometheus&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Gauge&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cache_num_entries_family_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;åœ¨Prometheusçš„æ¦‚å¿µä½“ç³»ä¸­ï¼ŒFamilyå¯ä»¥ç†è§£ä¸ºä¸€ç»„å…·æœ‰ç›¸åŒåç§°å’Œå¸®åŠ©ä¿¡æ¯çš„æŒ‡æ ‡é›†åˆã€‚ä¸€ä¸ªFamilyå¯¹è±¡å¯ä»¥åŒ…å«å¤šä¸ªæŒ‡æ ‡å®ä¾‹ï¼Œæ¯ä¸ªå®ä¾‹é€šè¿‡ä¸åŒçš„æ ‡ç­¾æ¥åŒºåˆ†ã€‚ä¾‹å¦‚ï¼Œinf_success_family_å¯ä»¥åŒæ—¶ç»Ÿè®¡æ¨¡å‹Aå’Œæ¨¡å‹Bçš„è¯·æ±‚æˆåŠŸæ¬¡æ•°ï¼Œåªéœ€ä¸ºå®ƒä»¬åˆ›å»ºä¸åŒæ ‡ç­¾çš„å®ä¾‹å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;Familyçš„åˆ›å»ºè¿‡ç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-5&#34;&gt;5&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-2-1&#34; name=&#34;__codelineno-2-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;inf_success_family_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-2&#34; name=&#34;__codelineno-2-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;prometheus&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;BuildCounter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-3&#34; name=&#34;__codelineno-2-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;nv_inference_request_success&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-4&#34; name=&#34;__codelineno-2-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Help&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;Number of successful inference requests, all batch sizes&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-5&#34; name=&#34;__codelineno-2-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Register&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;registry_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)),&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;å¯¹äºä¸åŒçš„æ¨¡å‹æˆ–åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡Addæ–¹æ³•ä¸ºFamilyæ·»åŠ å…·æœ‰ä¸åŒæ ‡ç­¾çš„Metricå®ä¾‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-3-1&#34; name=&#34;__codelineno-3-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// æ·»åŠ ä¸€ä¸ªå¸¦æœ‰ç‰¹å®šlabelsçš„metricå®ä¾‹åˆ°familyä¸­&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-2&#34; name=&#34;__codelineno-3-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;prometheus&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Counter&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-3&#34; name=&#34;__codelineno-3-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;nf&#34;&gt;MetricModelReporter::CreateCounterMetric&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-4&#34; name=&#34;__codelineno-3-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;prometheus&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Family&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;prometheus&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Counter&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;family&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-5&#34; name=&#34;__codelineno-3-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;labels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-6&#34; name=&#34;__codelineno-3-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-7&#34; name=&#34;__codelineno-3-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;family&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Add&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;labels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-8&#34; name=&#34;__codelineno-3-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-9&#34; name=&#34;__codelineno-3-9&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-3-10&#34; name=&#34;__codelineno-3-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// åœ¨å¯¹è±¡é”€æ¯æ—¶è°ƒç”¨Removeå‡½æ•°ç§»é™¤å¯¹åº”çš„metricå®ä¾‹&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-11&#34; name=&#34;__codelineno-3-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;MetricModelReporter&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::~&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MetricModelReporter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-12&#34; name=&#34;__codelineno-3-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-13&#34; name=&#34;__codelineno-3-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Metrics&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;FamilyInferenceSuccess&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Remove&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;metric_inf_success_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-14&#34; name=&#34;__codelineno-3-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;Prometheusæ”¯æŒå¤šç§æŒ‡æ ‡ç±»å‹ï¼ŒåŒ…æ‹¬Counterï¼ˆè®¡æ•°å™¨ï¼‰ã€Gaugeï¼ˆå®æ—¶å€¼ï¼‰ã€Histogramï¼ˆç›´æ–¹å›¾ï¼‰å’ŒSummaryï¼ˆæ‘˜è¦ï¼‰ç­‰ï¼Œå®ƒä»¬éƒ½æ˜¯Familyçš„ä¸åŒç‰¹åŒ–å½¢å¼ï¼Œé€‚ç”¨äºä¸åŒçš„ç»Ÿè®¡åœºæ™¯ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†æ›´ç›´è§‚åœ°ç†è§£metricsçš„æ”¶é›†æµç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹Mermaidæµç¨‹å›¾æ¥å±•ç¤ºï¼š&lt;/p&gt;
&lt;pre class=&#34;mermaid&#34;&gt;&lt;code&gt;flowchart TD
    A[æ¨ç†è¯·æ±‚å¼€å§‹] --&amp;gt; B[åˆ›å»º/è·å–å¯¹åº”çš„Metricå®ä¾‹]
    B --&amp;gt; C[æ ¹æ®æ“ä½œç±»å‹è°ƒç”¨ä¸åŒæ–¹æ³•]
    C --&amp;gt;|æˆåŠŸ| D[è°ƒç”¨Counterçš„Incrementæ–¹æ³•]
    C --&amp;gt;|å¤±è´¥| E[è°ƒç”¨Error Counterçš„Incrementæ–¹æ³•]
    C --&amp;gt;|å®æ—¶å€¼| F[è°ƒç”¨Gaugeçš„Setæ–¹æ³•]
    D --&amp;gt; G[æ›´æ–°Registryä¸­çš„æ•°æ®]
    E --&amp;gt; G
    F --&amp;gt; G
    G --&amp;gt; H[ç­‰å¾…HTTPè¯·æ±‚è·å–]&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;metricsæ•°æ®çš„è·å–æ–¹å¼&#34;&gt;metricsæ•°æ®çš„è·å–æ–¹å¼&lt;a class=&#34;headerlink&#34; href=&#34;#metricsæ•°æ®çš„è·å–æ–¹å¼&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Tritonserveré€šè¿‡å†…ç½®çš„HTTPæœåŠ¡æä¾›metricsæ•°æ®çš„è®¿é—®æ¥å£ï¼Œè¿™éƒ¨åˆ†å®ç°ä½äºå¼€æºä»£ç çš„src/http_server.ccæ–‡ä»¶ä¸­ã€‚å½“å®¢æˆ·ç«¯å‘èµ·è¯·æ±‚æ—¶ï¼Œç³»ç»Ÿä¼šè°ƒç”¨prometheus-cppåº“çš„åºåˆ—åŒ–æ¥å£ï¼Œå°†å½“å‰çš„metricsæ•°æ®è½¬æ¢ä¸ºå­—ç¬¦ä¸²æ ¼å¼è¿”å›ç»™å®¢æˆ·ç«¯ã€‚&lt;/p&gt;
&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒTritonserverä½¿ç”¨evhtpä½œä¸ºå…¶HTTPåº“ï¼Œä½†åœ¨å®é™…åº”ç”¨ä¸­ä½ å¯ä»¥é€‰æ‹©ä»»ä½•é€‚åˆçš„HTTPåº“æ¥å®ç°ç±»ä¼¼åŠŸèƒ½ã€‚æ ¸å¿ƒå®ç°é€»è¾‘å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-21&#34;&gt;21&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-22&#34;&gt;22&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-23&#34;&gt;23&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-24&#34;&gt;24&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-25&#34;&gt;25&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-26&#34;&gt;26&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-27&#34;&gt;27&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-28&#34;&gt;28&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-29&#34;&gt;29&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-30&#34;&gt;30&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-31&#34;&gt;31&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-32&#34;&gt;32&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-33&#34;&gt;33&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-34&#34;&gt;34&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-35&#34;&gt;35&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-36&#34;&gt;36&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-37&#34;&gt;37&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-38&#34;&gt;38&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-4-1&#34; name=&#34;__codelineno-4-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-2&#34; name=&#34;__codelineno-4-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;nf&#34;&gt;HTTPMetricsServer::Handle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;evhtp_request_t&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-3&#34; name=&#34;__codelineno-4-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-4&#34; name=&#34;__codelineno-4-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;LOG_VERBOSE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;HTTP request: &amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;method&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot; &amp;quot;&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-5&#34; name=&#34;__codelineno-4-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                 &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;uri&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;full&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-6&#34; name=&#34;__codelineno-4-6&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-4-7&#34; name=&#34;__codelineno-4-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;method&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;htp_method_GET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-8&#34; name=&#34;__codelineno-4-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;RETURN_AND_RESPOND_WITH_ERR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-9&#34; name=&#34;__codelineno-4-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;EVHTP_RES_METHNALLOWED&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;Method Not Allowed&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-10&#34; name=&#34;__codelineno-4-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-11&#34; name=&#34;__codelineno-4-11&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-4-12&#34; name=&#34;__codelineno-4-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;evhtp_headers_add_header&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-13&#34; name=&#34;__codelineno-4-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;headers_out&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-14&#34; name=&#34;__codelineno-4-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;evhtp_header_new&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;kContentTypeHeader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;text/plain; charset=utf-8&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-15&#34; name=&#34;__codelineno-4-15&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-4-16&#34; name=&#34;__codelineno-4-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// æ£€æŸ¥è¯·æ±‚è·¯å¾„æ˜¯å¦ç¬¦åˆAPIè§„èŒƒ&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-17&#34; name=&#34;__codelineno-4-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;RE2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;FullMatch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;uri&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;full&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;api_regex_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-18&#34; name=&#34;__codelineno-4-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TRITONSERVER_Metrics&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;metrics&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-19&#34; name=&#34;__codelineno-4-19&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TRITONSERVER_Error&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;
&lt;a id=&#34;__codelineno-4-20&#34; name=&#34;__codelineno-4-20&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TRITONSERVER_ServerMetrics&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;server_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;metrics&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-21&#34; name=&#34;__codelineno-4-21&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-22&#34; name=&#34;__codelineno-4-22&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;base&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-23&#34; name=&#34;__codelineno-4-23&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;size_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;byte_size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-24&#34; name=&#34;__codelineno-4-24&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TRITONSERVER_MetricsFormatted&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-25&#34; name=&#34;__codelineno-4-25&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;metrics&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TRITONSERVER_METRIC_PROMETHEUS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;base&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;byte_size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-26&#34; name=&#34;__codelineno-4-26&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-27&#34; name=&#34;__codelineno-4-27&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// è·å–åˆ°metricsæ•°æ®ï¼Œç›´æ¥è¿”å›ç»™å®¢æˆ·ç«¯&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-28&#34; name=&#34;__codelineno-4-28&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;evbuffer_add&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;buffer_out&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;base&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;byte_size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-29&#34; name=&#34;__codelineno-4-29&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-30&#34; name=&#34;__codelineno-4-30&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-31&#34; name=&#34;__codelineno-4-31&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-4-32&#34; name=&#34;__codelineno-4-32&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TRITONSERVER_MetricsDelete&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;metrics&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-33&#34; name=&#34;__codelineno-4-33&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;RETURN_AND_RESPOND_IF_ERR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-34&#34; name=&#34;__codelineno-4-34&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TRITONSERVER_ErrorDelete&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-35&#34; name=&#34;__codelineno-4-35&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-36&#34; name=&#34;__codelineno-4-36&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-4-37&#34; name=&#34;__codelineno-4-37&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;evhtp_send_reply&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;EVHTP_RES_OK&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-38&#34; name=&#34;__codelineno-4-38&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;è¿™é‡Œçš„TRITONSERVER_Metricsæ˜¯ä¸€ä¸ªCè¯­è¨€é£æ ¼çš„ç©ºç»“æ„ä½“æŒ‡é’ˆï¼Œè¿™æ˜¯Tritonserverå°†C++å®ç°å¯¼å‡ºä¸ºCè¯­è¨€æ¥å£çš„ä¸€ç§å¸¸ç”¨æ–¹å¼ã€‚è¿™ç§è®¾è®¡ä½¿å¾—è·¨è¯­è¨€è°ƒç”¨å’ŒFFIç»‘å®šå˜å¾—æ›´åŠ æ–¹ä¾¿ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-5-1&#34; name=&#34;__codelineno-5-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;TRITONSERVER_Metrics&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-2&#34; name=&#34;__codelineno-5-2&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-5-3&#34; name=&#34;__codelineno-5-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;TRITONAPI_DECLSPEC&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TRITONSERVER_Error&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-4&#34; name=&#34;__codelineno-5-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;TRITONSERVER_ServerMetrics&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-5&#34; name=&#34;__codelineno-5-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TRITONSERVER_Server&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;server&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TRITONSERVER_Metrics&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;**&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;metrics&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-6&#34; name=&#34;__codelineno-5-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-7&#34; name=&#34;__codelineno-5-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#ifdef TRITON_ENABLE_METRICS&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-8&#34; name=&#34;__codelineno-5-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// TritonServerMetricsæ˜¯å†…éƒ¨çœŸæ­£ä½¿ç”¨çš„C++ç±»ï¼Œè¿™é‡Œåªæ˜¯ä¸ºäº†è°ƒç”¨å•ä¾‹ç±»Metricsçš„åºåˆ—åŒ–å‡½æ•°&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-9&#34; name=&#34;__codelineno-5-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// ç”±äºä½¿ç”¨äº†newæ“ä½œï¼Œå¿…é¡»æä¾›å¯¹åº”çš„Cè¯­è¨€APIè¿›è¡Œèµ„æºé‡Šæ”¾&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-10&#34; name=&#34;__codelineno-5-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TritonServerMetrics&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;lmetrics&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TritonServerMetrics&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-11&#34; name=&#34;__codelineno-5-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;metrics&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;reinterpret_cast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TRITONSERVER_Metrics&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;lmetrics&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-12&#34; name=&#34;__codelineno-5-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// Success&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-13&#34; name=&#34;__codelineno-5-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#else&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-14&#34; name=&#34;__codelineno-5-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;metrics&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-15&#34; name=&#34;__codelineno-5-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TRITONSERVER_ErrorNew&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-16&#34; name=&#34;__codelineno-5-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TRITONSERVER_ERROR_UNSUPPORTED&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;metrics not supported&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-17&#34; name=&#34;__codelineno-5-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#endif  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// TRITON_ENABLE_METRICS&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-18&#34; name=&#34;__codelineno-5-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;TRITONSERVER_MetricsFormattedå‡½æ•°è´Ÿè´£å°†metricsæ•°æ®åºåˆ—åŒ–ä¸ºå­—ç¬¦ä¸²ï¼Œå…¶æ ¸å¿ƒå®ç°ä½äºtritonserver-coreä»“åº“çš„src/tritonserver.ccæ–‡ä»¶ä¸­ã€‚æœ€ç»ˆçš„åºåˆ—åŒ–æ“ä½œè°ƒç”¨äº†prometheus-cppåº“æä¾›çš„æ¥å£ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-6-1&#34; name=&#34;__codelineno-6-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-2&#34; name=&#34;__codelineno-6-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;nf&#34;&gt;Metrics::SerializedMetrics&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-3&#34; name=&#34;__codelineno-6-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-4&#34; name=&#34;__codelineno-6-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;singleton&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Metrics&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetSingleton&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-5&#34; name=&#34;__codelineno-6-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;singleton&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;serializer_&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Serialize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-6&#34; name=&#34;__codelineno-6-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;singleton&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;registry_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Collect&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-7&#34; name=&#34;__codelineno-6-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-8&#34; name=&#34;__codelineno-6-8&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-6-9&#34; name=&#34;__codelineno-6-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Metrics&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-10&#34; name=&#34;__codelineno-6-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shared_ptr&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;prometheus&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Registry&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;registry_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-11&#34; name=&#34;__codelineno-6-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;unique_ptr&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;prometheus&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Serializer&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;serializer_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-12&#34; name=&#34;__codelineno-6-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;ä¸ºäº†æ›´å¥½åœ°ç†è§£metricsæ•°æ®çš„å®Œæ•´æµç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹Mermaidæ—¶åºå›¾æ¥å±•ç¤ºï¼š&lt;/p&gt;
&lt;pre class=&#34;mermaid&#34;&gt;&lt;code&gt;sequenceDiagram
    participant Client as HTTPå®¢æˆ·ç«¯
    participant Server as Tritonserver
    participant Metrics as Metricsæ¨¡å—
    participant Prometheus as Prometheusåº“

    Client-&amp;gt;&amp;gt;Server: GET /metrics HTTPè¯·æ±‚
    Server-&amp;gt;&amp;gt;Metrics: è°ƒç”¨TRITONSERVER_ServerMetrics
    Metrics-&amp;gt;&amp;gt;Prometheus: è°ƒç”¨registry_-&amp;gt;Collect()
    Prometheus--&amp;gt;&amp;gt;Metrics: è¿”å›æ”¶é›†åˆ°çš„metricsæ•°æ®
    Metrics-&amp;gt;&amp;gt;Prometheus: è°ƒç”¨serializer_-&amp;gt;Serialize()
    Prometheus--&amp;gt;&amp;gt;Metrics: è¿”å›åºåˆ—åŒ–åçš„å­—ç¬¦ä¸²
    Metrics--&amp;gt;&amp;gt;Server: è¿”å›metricså­—ç¬¦ä¸²
    Server--&amp;gt;&amp;gt;Client: è¿”å›HTTP 200å“åº”åŠmetricsæ•°æ®&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;tritonserverè‡ªå®šä¹‰metrics&#34;&gt;Tritonserverè‡ªå®šä¹‰metrics&lt;a class=&#34;headerlink&#34; href=&#34;#tritonserverè‡ªå®šä¹‰metrics&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;é™¤äº†å†…ç½®çš„metricså¤–ï¼ŒTritonserverè¿˜æ”¯æŒè‡ªå®šä¹‰metricsåŠŸèƒ½ï¼Œæ–¹ä¾¿å¼€å‘è€…æ ¹æ®å®é™…éœ€æ±‚æ‰©å±•ç›‘æ§èƒ½åŠ›ã€‚è¿™éƒ¨åˆ†åŠŸèƒ½ä¸»è¦é€šè¿‡metric_family.h/cppä¸­æä¾›çš„APIå®ç°ã€‚&lt;/p&gt;
&lt;p&gt;ä½ å¯ä»¥å‚è€ƒå®˜æ–¹æä¾›çš„&lt;a href=&#34;https://github.com/triton-inference-server/identity_backend/blob/main/README.md#custom-metric-example&#34;&gt;custom-metric-example&lt;/a&gt;æ¥äº†è§£å¦‚ä½•åœ¨è‡ªå®šä¹‰backendä¸­å®ç°è‡ªå®šä¹‰metricsã€‚æ ¸å¿ƒå®ç°ä¾èµ–äºTRITONSERVER_MetricFamily&lt;em&gt;å’ŒTRITONSERVER_Metric&lt;/em&gt;ç­‰APIæ¥å£ï¼Œè¿™äº›æ¥å£çš„æºç å®šä¹‰åœ¨coreä»“åº“çš„metric_family.h/cppæ–‡ä»¶ä¸­ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å…¶ä»–ç›¸å…³æŠ€æœ¯&#34;&gt;å…¶ä»–ç›¸å…³æŠ€æœ¯&lt;a class=&#34;headerlink&#34; href=&#34;#å…¶ä»–ç›¸å…³æŠ€æœ¯&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;h3 id=&#34;opentelemetryé¥æµ‹æ•°æ®æ”¶é›†&#34;&gt;OpenTelemetryé¥æµ‹æ•°æ®æ”¶é›†&lt;a class=&#34;headerlink&#34; href=&#34;#opentelemetryé¥æµ‹æ•°æ®æ”¶é›†&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://opentelemetry.io/docs/languages/cpp/&#34;&gt;OpenTelemetry&lt;/a&gt;æ˜¯ä¸€ä¸ªç»Ÿä¸€çš„å¯è§‚æµ‹æ€§æ¡†æ¶ï¼Œæ”¯æŒè¿½è¸ªï¼ˆTracesï¼‰ã€æŒ‡æ ‡ï¼ˆMetricsï¼‰å’Œæ—¥å¿—ï¼ˆLogsï¼‰ä¸‰å¤§æ”¯æŸ±æ•°æ®çš„é‡‡é›†ã€‚å®ƒé€šè¿‡SDKåµŒå…¥åº”ç”¨ä»£ç æˆ–è‡ªåŠ¨Instrumentationé‡‡é›†æ•°æ®ï¼Œå¹¶å¯çµæ´»å¯¼å‡ºåˆ°å¤šç§åç«¯ç³»ç»Ÿï¼ˆå¦‚Jaegerã€Prometheusç­‰ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ä½ å¯ä»¥å‚è€ƒOpenTelemetryçš„&lt;a href=&#34;https://opentelemetry.io/docs/demo/architecture/&#34;&gt;demo-architecture&lt;/a&gt;äº†è§£å…¶å®Œæ•´çš„æ¶æ„è®¾è®¡å’Œå®ç°æ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœåªç»Ÿè®¡metricsæ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨prometheus-cppåº“æ›´ç®€å•ï¼Œä¾èµ–æ›´å°‘ã€‚å¦‚æœéœ€è¦åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªï¼Œå¯ä»¥ä½¿ç”¨opentelemetryã€‚&lt;/p&gt;
&lt;h3 id=&#34;ç®€åŒ–çš„metricsæœåŠ¡ç¤ºä¾‹&#34;&gt;ç®€åŒ–çš„metricsæœåŠ¡ç¤ºä¾‹&lt;a class=&#34;headerlink&#34; href=&#34;#ç®€åŒ–çš„metricsæœåŠ¡ç¤ºä¾‹&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;é™¤äº†å®Œæ•´çš„Prometheusé›†æˆæ–¹æ¡ˆå¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å®ç°ä¸€ä¸ªç®€å•çš„metricsæœåŠ¡æ¥å¿«é€ŸéªŒè¯å’Œå­¦ä¹ ç›¸å…³æ¦‚å¿µã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªåŸºäºbashå’Œnetcatçš„ç¤ºä¾‹è„šæœ¬ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Bash&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-21&#34;&gt;21&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-22&#34;&gt;22&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-23&#34;&gt;23&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-24&#34;&gt;24&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-25&#34;&gt;25&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-26&#34;&gt;26&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-27&#34;&gt;27&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-28&#34;&gt;28&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-29&#34;&gt;29&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-30&#34;&gt;30&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-31&#34;&gt;31&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-32&#34;&gt;32&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-33&#34;&gt;33&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-34&#34;&gt;34&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-35&#34;&gt;35&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-36&#34;&gt;36&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-37&#34;&gt;37&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-38&#34;&gt;38&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-39&#34;&gt;39&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-40&#34;&gt;40&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-41&#34;&gt;41&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-42&#34;&gt;42&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-43&#34;&gt;43&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-44&#34;&gt;44&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-45&#34;&gt;45&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-46&#34;&gt;46&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-47&#34;&gt;47&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-48&#34;&gt;48&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-49&#34;&gt;49&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-50&#34;&gt;50&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-51&#34;&gt;51&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-52&#34;&gt;52&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-53&#34;&gt;53&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-54&#34;&gt;54&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-55&#34;&gt;55&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-56&#34;&gt;56&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-57&#34;&gt;57&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-58&#34;&gt;58&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-59&#34;&gt;59&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-60&#34;&gt;60&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-61&#34;&gt;61&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-62&#34;&gt;62&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-63&#34;&gt;63&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-64&#34;&gt;64&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-7-1&#34; name=&#34;__codelineno-7-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;# statistics.sh&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-2&#34; name=&#34;__codelineno-7-2&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-7-3&#34; name=&#34;__codelineno-7-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;#!/bin/bash&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-4&#34; name=&#34;__codelineno-7-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;# å®šä¹‰ç›‘æ§é—´éš”ï¼ˆç§’ï¼‰&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-5&#34; name=&#34;__codelineno-7-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;nv&#34;&gt;interval&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-6&#34; name=&#34;__codelineno-7-6&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-7-7&#34; name=&#34;__codelineno-7-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;# è·å–ç³»ç»Ÿæ€»çš„CPUä½¿ç”¨æƒ…å†µï¼ˆsy: system, id: idleï¼‰&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-8&#34; name=&#34;__codelineno-7-8&#34;&gt;&lt;/a&gt;get_sys_cpu_usage&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-9&#34; name=&#34;__codelineno-7-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;top&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-bn1&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;grep&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;%Cpu(s)&amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;awk&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;{print $4}&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;# syè¡¨ç¤ºç³»ç»ŸCPUå ç”¨&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-10&#34; name=&#34;__codelineno-7-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-11&#34; name=&#34;__codelineno-7-11&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-7-12&#34; name=&#34;__codelineno-7-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;# è·å–ç³»ç»Ÿæ€»çš„CPUç©ºé—²å ç”¨ï¼ˆid: idleï¼‰&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-13&#34; name=&#34;__codelineno-7-13&#34;&gt;&lt;/a&gt;get_total_cpu_usage&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-14&#34; name=&#34;__codelineno-7-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;top&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-bn1&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;grep&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;%Cpu(s)&amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;awk&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;{print $8}&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;# idè¡¨ç¤ºç©ºé—²CPUå ç”¨&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-15&#34; name=&#34;__codelineno-7-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-16&#34; name=&#34;__codelineno-7-16&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-7-17&#34; name=&#34;__codelineno-7-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;# è·å–ç³»ç»Ÿå†…å­˜ä½¿ç”¨ç‡ï¼ˆåŸºäº MemAvailableï¼‰&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-18&#34; name=&#34;__codelineno-7-18&#34;&gt;&lt;/a&gt;get_memory_usage&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-19&#34; name=&#34;__codelineno-7-19&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;total&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;grep&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;MemTotal&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;/proc/meminfo&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;awk&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;{print $2}&amp;#39;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-20&#34; name=&#34;__codelineno-7-20&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;available&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;grep&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;MemAvailable&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;/proc/meminfo&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;awk&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;{print $2}&amp;#39;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-21&#34; name=&#34;__codelineno-7-21&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;used&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;$((&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;total&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;available&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;))&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-22&#34; name=&#34;__codelineno-7-22&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;usage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;scale=2; &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$used&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt; / &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$total&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt; * 100&amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;bc&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-23&#34; name=&#34;__codelineno-7-23&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$usage&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-24&#34; name=&#34;__codelineno-7-24&#34;&gt;&lt;/a&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-25&#34; name=&#34;__codelineno-7-25&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-7-26&#34; name=&#34;__codelineno-7-26&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;# å®šä¹‰ç›‘å¬çš„ç«¯å£ï¼ˆé»˜è®¤ 8080ï¼‰&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-27&#34; name=&#34;__codelineno-7-27&#34;&gt;&lt;/a&gt;&lt;span class=&#34;nv&#34;&gt;PORT&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8121&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-28&#34; name=&#34;__codelineno-7-28&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-7-29&#34; name=&#34;__codelineno-7-29&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;# å¯åŠ¨ HTTP æœåŠ¡å‡½æ•°&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-30&#34; name=&#34;__codelineno-7-30&#34;&gt;&lt;/a&gt;start_http_server&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-31&#34; name=&#34;__codelineno-7-31&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;Starting HTTP metrics server on port &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$PORT&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;...&amp;quot;&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-32&#34; name=&#34;__codelineno-7-32&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;while&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;true&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;do&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-33&#34; name=&#34;__codelineno-7-33&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;# ç³»ç»Ÿèµ„æº&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-34&#34; name=&#34;__codelineno-7-34&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;sys_cpu&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;get_sys_cpu_usage&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-35&#34; name=&#34;__codelineno-7-35&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;total_cpu&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;get_total_cpu_usage&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-36&#34; name=&#34;__codelineno-7-36&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;# è®¡ç®—total CPUä½¿ç”¨ç‡ï¼Œtotal = 100 - id&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-37&#34; name=&#34;__codelineno-7-37&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;total_cpu_usage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;awk&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;BEGIN {print 100 - &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$total_cpu&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;}&amp;quot;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-38&#34; name=&#34;__codelineno-7-38&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;# è·å–ç³»ç»Ÿå†…å­˜ä½¿ç”¨ç‡&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-39&#34; name=&#34;__codelineno-7-39&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;memory_usage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;get_memory_usage&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-40&#34; name=&#34;__codelineno-7-40&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-7-41&#34; name=&#34;__codelineno-7-41&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;# ä½¿ç”¨ nc (netcat) ç›‘å¬ HTTP è¯·æ±‚&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-42&#34; name=&#34;__codelineno-7-42&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;
&lt;a id=&#34;__codelineno-7-43&#34; name=&#34;__codelineno-7-43&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;HTTP/1.1 200 OK\r\n&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-44&#34; name=&#34;__codelineno-7-44&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;Content-Type: text/plain\r\n&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-45&#34; name=&#34;__codelineno-7-45&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;\r\n&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;# ç©ºè¡Œåˆ†éš”å¤´å’Œ body&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-46&#34; name=&#34;__codelineno-7-46&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;sys_cpu &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$sys_cpu&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;\n&amp;quot;&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-47&#34; name=&#34;__codelineno-7-47&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;total_cpu &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$total_cpu&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;\n&amp;quot;&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-48&#34; name=&#34;__codelineno-7-48&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;total_cpu_usage &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$total_cpu_usage&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;\n&amp;quot;&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-49&#34; name=&#34;__codelineno-7-49&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;memory_usage &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$memory_usage&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;\n&amp;quot;&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-50&#34; name=&#34;__codelineno-7-50&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;nc&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-l&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-p&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$PORT&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-w&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-51&#34; name=&#34;__codelineno-7-51&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;done&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-52&#34; name=&#34;__codelineno-7-52&#34;&gt;&lt;/a&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-53&#34; name=&#34;__codelineno-7-53&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-7-54&#34; name=&#34;__codelineno-7-54&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;# ä¸»é€»è¾‘&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-55&#34; name=&#34;__codelineno-7-55&#34;&gt;&lt;/a&gt;cleanup&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-56&#34; name=&#34;__codelineno-7-56&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;Stopping metrics server...&amp;quot;&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-57&#34; name=&#34;__codelineno-7-57&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;rm&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-f&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$METRICS_FILE&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-58&#34; name=&#34;__codelineno-7-58&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;exit&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-59&#34; name=&#34;__codelineno-7-59&#34;&gt;&lt;/a&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-60&#34; name=&#34;__codelineno-7-60&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-7-61&#34; name=&#34;__codelineno-7-61&#34;&gt;&lt;/a&gt;&lt;span class=&#34;nb&#34;&gt;trap&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;cleanup&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;EXIT
&lt;a id=&#34;__codelineno-7-62&#34; name=&#34;__codelineno-7-62&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-7-63&#34; name=&#34;__codelineno-7-63&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;# å¯åŠ¨ HTTP æœåŠ¡&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-64&#34; name=&#34;__codelineno-7-64&#34;&gt;&lt;/a&gt;start_http_server
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤å¯åŠ¨è¿™ä¸ªç®€å•çš„metricsæœåŠ¡ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Bash&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-8-1&#34; name=&#34;__codelineno-8-1&#34;&gt;&lt;/a&gt;nohup&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;sh&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;statistics.sh&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&amp;gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;log_metrics.txt&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;&amp;gt;&lt;span class=&#34;p&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;amp;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;h3 id=&#34;jaegeråˆ†å¸ƒå¼é“¾è·¯è¿½è¸ª&#34;&gt;Jaegeråˆ†å¸ƒå¼é“¾è·¯è¿½è¸ª&lt;a class=&#34;headerlink&#34; href=&#34;#jaegeråˆ†å¸ƒå¼é“¾è·¯è¿½è¸ª&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;é™¤äº†metricså¤–ï¼Œåˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªä¹Ÿæ˜¯å¯è§‚æµ‹æ€§çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚Jaegeræ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼è¿½è¸ªç³»ç»Ÿï¼Œæä¾›äº†å¼ºå¤§çš„é“¾è·¯åˆ†æèƒ½åŠ›ã€‚ä½ å¯ä»¥é€šè¿‡&lt;a href=&#34;https://www.liwenzhou.com/posts/Go/jaeger/&#34;&gt;è¿™ç¯‡æ–‡ç« &lt;/a&gt;äº†è§£å¦‚ä½•åœ¨Goè¯­è¨€é¡¹ç›®ä¸­é›†æˆJaegerã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡æœ¬æ–‡çš„åˆ†æï¼Œç›¸ä¿¡ä½ å·²ç»å¯¹Tritonserverä¸­metricsçš„å®ç°åŸç†æœ‰äº†æ·±å…¥çš„ç†è§£ã€‚æ— è®ºæ˜¯ä½¿ç”¨ç°æˆçš„ç›‘æ§ç³»ç»Ÿè¿˜æ˜¯ä¸ºè‡ªå·±çš„é¡¹ç›®æ„å»ºç±»ä¼¼åŠŸèƒ½ï¼Œè¿™äº›çŸ¥è¯†éƒ½å°†å¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚&lt;/p&gt;
&lt;style&gt;
.related-posts {
  margin-top: 1.5rem;
  padding-top: 0.75rem;
  border-top: 1px solid rgba(0,0,0,0.1);
  max-height: none !important; /* é˜²æ­¢Safarié”™è¯¯è®¡ç®—é«˜åº¦ */
  overflow: visible !important; /* é˜²æ­¢å†…å®¹è¢«æˆªæ–­ */
}
.related-posts h3 {
  margin-top: 0;
  margin-bottom: 0.5rem;
  font-size: 1.2rem;
  font-weight: 500;
  line-height: 1.3;
}
.related-posts ul {
  margin: 0 0 0.5rem 0 !important; /* å¼ºåˆ¶è¦†ç›–å¯èƒ½çš„å†²çªæ ·å¼ */
  padding-left: 1.5rem;
  list-style-position: outside;
}
.related-posts li {
  margin-bottom: 0.25rem;
  line-height: 1.4;
}
/* æš—è‰²æ¨¡å¼é€‚é… */
[data-md-color-scheme=&#34;slate&#34;] .related-posts {
  border-top-color: rgba(255,255,255,0.1);
}
/* Safariç‰¹å®šä¿®å¤ */
@supports (-webkit-hyphens:none) {
  .related-posts {
    display: block;
    position: relative;
    height: auto !important;
  }
  .related-posts ul {
    position: static;
  }
}
&lt;/style&gt;
&lt;div class=&#34;related-posts&#34;&gt;
&lt;h3&gt;ğŸ“š ç›¸å…³æ–‡ç« æ¨è&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/llmæ¨ç†é‡‡ç”¨æŠ•æœºé‡‡æ ·åŠ é€Ÿæ¨ç†è¯‘/&#34; target=&#34;_blank&#34;&gt;LLMæ¨ç†ï¼šé‡‡ç”¨æŠ•æœºé‡‡æ ·åŠ é€Ÿæ¨ç†[è¯‘]&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/cä½¿ç”¨abseil-cppé‡åˆ°çš„å°é—®é¢˜/&#34; target=&#34;_blank&#34;&gt;C++ä½¿ç”¨abseil-cppé‡åˆ°çš„å°é—®é¢˜&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/mit-ç»å…¸è®²åº§how-to-speak---patrick-winston/&#34; target=&#34;_blank&#34;&gt;MIT ç»å…¸è®²åº§ï¼šHow to Speak - Patrick Winston&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/cå¸¸è§é™·é˜±ä¸€ä¸ªä¾‹å­äº†è§£constä½¿ç”¨/&#34; target=&#34;_blank&#34;&gt;C++å¸¸è§é™·é˜±ï¼šä¸€ä¸ªä¾‹å­äº†è§£constä½¿ç”¨&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/helix-gptå¦‚ä½•å®ç°ai-codeä»¥åŠå¦‚ä½•è°ƒè¯•/&#34; target=&#34;_blank&#34;&gt;helix-gptå¦‚ä½•å®ç°AI codeä»¥åŠå¦‚ä½•è°ƒè¯•?&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;</description>
      <link>https://github.com/KenForever1/blog/tritonserver%E4%B8%ADmetric%E4%BD%BF%E7%94%A8%E6%BA%90%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90/</link>
      <pubDate>Sat, 29 Nov 2025 00:00:00 +0000</pubDate>
      <source url="https://github.com/KenForever1/feed_rss_updated.xml">KenForever1</source>
      
      <guid isPermaLink="true">https://github.com/KenForever1/blog/tritonserver%E4%B8%ADmetric%E4%BD%BF%E7%94%A8%E6%BA%90%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90/</guid>
      
    </item>
    
    <item>
      <title>Tritonserverä¸­traceä½¿ç”¨æºä»£ç åˆ†æ</title>
      
      
        
      <author>KenForever1</author>
        
      
      
      
      <description>&lt;p&gt;æœ¬æ–‡ä¸»è¦ä»‹ç»äº†tritonserverä¸­traceçš„å®ç°ï¼Œæˆ‘ä»¬çŸ¥é“æ—¥å¿—ã€metricå’Œtraceæ˜¯å¸¸ç”¨çš„ç›‘æ§æ‰‹æ®µï¼Œå¯ä»¥ç”¨æ¥åˆ†æé—®é¢˜ã€è¯„ä¼°æ€§èƒ½ã€‚tritonserverä¸­çš„traceä¸»è¦åŸºäºopentelemetryå®ç°ã€‚&lt;/p&gt;
&lt;!-- more --&gt;

&lt;h2 id=&#34;trtionserver-traceå®ç°&#34;&gt;trtionserver traceå®ç°&lt;a class=&#34;headerlink&#34; href=&#34;#trtionserver-traceå®ç°&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;h3 id=&#34;traceçš„ä¸¤ç§æ¨¡å¼&#34;&gt;traceçš„ä¸¤ç§æ¨¡å¼&lt;a class=&#34;headerlink&#34; href=&#34;#traceçš„ä¸¤ç§æ¨¡å¼&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;åˆ†ä¸ºä¸¤ç§æ¨¡å¼ï¼Œtritonæ¨¡å¼å°±æ˜¯å°†traceæ•°æ®å†™å…¥åˆ°æ–‡ä»¶ï¼Œå¦ä¸€ç§opentelemetryæ¨¡å¼å°±æ˜¯å°†traceæ•°æ®å‘é€åˆ°opentelemetry collector(æˆ–è€…ç›´æ¥å‘é€ç»™jaegeræŸ¥çœ‹ï¼Œå› ä¸ºjaegeræ”¯æŒé€šè¿‡otlpåè®®é€šè¿‡httpæˆ–è€…grpcæ¥å—traceæ•°æ®)ã€‚&lt;/p&gt;
&lt;p&gt;opentelemetryæ¨¡å¼åœ¨tritonserverä¸­é‡‡ç”¨opentelemetry-cppåº“å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;å®ç°æºç ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;tritonserveré¡¹ç›®ä¸­çš„src/tracer.hå’Œsrc/tracer.cc&lt;/li&gt;
&lt;li&gt;tritonserverçš„coreå®ç°ä¸­çš„src/infer_trace.hå’Œsrc/infer_trace.cc&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;tritonserver-coreä¸­traceå®ç°&#34;&gt;tritonserver coreä¸­traceå®ç°&lt;a class=&#34;headerlink&#34; href=&#34;#tritonserver-coreä¸­traceå®ç°&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;coreä¸­çš„infer_traceä¸»è¦å®ç°äº†InferenceTraceç±»å’ŒInferenceTraceProxyç±»ï¼Œåœ¨InferenceTraceç±»ä¸­æ²¡æœ‰ç›´æ¥ä½¿ç”¨opentelemetry-cppåº“(æ²¡æœ‰å¯¹è¯¥åº“çš„ä¾èµ–)ï¼Œè®°å½•traceæ˜¯ä½¿ç”¨çš„å›è°ƒå‡½æ•°å®ç°ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-5&#34;&gt;5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-6&#34;&gt;6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-7&#34;&gt;7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-8&#34;&gt;8&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-0-1&#34; name=&#34;__codelineno-0-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;typedef&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TRITONSERVER_InferenceTraceActivityFn_t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-2&#34; name=&#34;__codelineno-0-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TRITONSERVER_InferenceTrace&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;trace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-3&#34; name=&#34;__codelineno-0-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TRITONSERVER_InferenceTraceActivity&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;activity&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint64_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;timestamp_ns&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-4&#34; name=&#34;__codelineno-0-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;userp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-5&#34; name=&#34;__codelineno-0-5&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-6&#34; name=&#34;__codelineno-0-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;TRITONSERVER_InferenceTraceActivityFn_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;activity_fn_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-7&#34; name=&#34;__codelineno-0-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;TRITONSERVER_InferenceTraceTensorActivityFn_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tensor_activity_fn_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-8&#34; name=&#34;__codelineno-0-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;TRITONSERVER_InferenceTraceReleaseFn_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;release_fn_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;activity_fn_å‡½æ•°å°±æ˜¯tritonserverçš„tracer.ccä¸­å®ç°çš„ReportToOpenTelemetryå‡½æ•°ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-21&#34;&gt;21&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-22&#34;&gt;22&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-23&#34;&gt;23&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-24&#34;&gt;24&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-1-1&#34; name=&#34;__codelineno-1-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-2&#34; name=&#34;__codelineno-1-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;nf&#34;&gt;TraceManager::Trace::ReportToOpenTelemetry&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-3&#34; name=&#34;__codelineno-1-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TRITONSERVER_InferenceTrace&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;trace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-4&#34; name=&#34;__codelineno-1-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TRITONSERVER_InferenceTraceActivity&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;activity&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint64_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;timestamp_ns&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-5&#34; name=&#34;__codelineno-1-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-6&#34; name=&#34;__codelineno-1-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint64_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-7&#34; name=&#34;__codelineno-1-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;LOG_TRITONSERVER_ERROR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-8&#34; name=&#34;__codelineno-1-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TRITONSERVER_InferenceTraceId&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;trace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;getting trace id&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-9&#34; name=&#34;__codelineno-1-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;span_stacks_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;find&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;span_stacks_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;end&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-10&#34; name=&#34;__codelineno-1-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;unique_ptr&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-11&#34; name=&#34;__codelineno-1-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;stack&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;opentelemetry&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nostd&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shared_ptr&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;otel_trace_api&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Span&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-12&#34; name=&#34;__codelineno-1-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;st&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;stack&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-13&#34; name=&#34;__codelineno-1-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;opentelemetry&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nostd&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shared_ptr&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;otel_trace_api&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Span&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-14&#34; name=&#34;__codelineno-1-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;span_stacks_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;emplace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;move&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;st&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-15&#34; name=&#34;__codelineno-1-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-16&#34; name=&#34;__codelineno-1-16&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-1-17&#34; name=&#34;__codelineno-1-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;AddEvent&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;trace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;activity&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;timestamp_ns&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-18&#34; name=&#34;__codelineno-1-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-19&#34; name=&#34;__codelineno-1-19&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-1-20&#34; name=&#34;__codelineno-1-20&#34;&gt;&lt;/a&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-21&#34; name=&#34;__codelineno-1-21&#34;&gt;&lt;/a&gt;&lt;span class=&#34;nf&#34;&gt;TraceManager::TraceRelease&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TRITONSERVER_InferenceTrace&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;trace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;userp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-22&#34; name=&#34;__codelineno-1-22&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-23&#34; name=&#34;__codelineno-1-23&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// ......&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-24&#34; name=&#34;__codelineno-1-24&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;InferenceTraceç±»å’ŒInferenceTraceProxyç±»ä¸»è¦æ˜¯ä¸ºäº†tritonserverçš„ä¸šåŠ¡ä»£ç ä¸­æ–¹ä¾¿ä½¿ç”¨ï¼Œä¸ºtraceä¿å­˜äº†requestã€modelnameã€modelversionç­‰ä¿¡æ¯ï¼Œå¹¶æä¾›äº†æ¥å£ä¾›ä¸šåŠ¡ä»£ç ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥åœ¨tritonserverçš„coreå®ç°ä¸­ç›´æ¥ä½¿ç”¨InferenceTraceç±»çš„æ¥å£æ¥ä¿å­˜traceæ•°æ®ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-21&#34;&gt;21&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-22&#34;&gt;22&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-23&#34;&gt;23&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-2-1&#34; name=&#34;__codelineno-2-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// coreé¡¹ç›®ä¸­src/infer_request.cc&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-2&#34; name=&#34;__codelineno-2-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#ifdef TRITON_ENABLE_STATS&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-3&#34; name=&#34;__codelineno-2-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-4&#34; name=&#34;__codelineno-2-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;nf&#34;&gt;InferenceRequest::ReportStatistics&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-5&#34; name=&#34;__codelineno-2-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MetricModelReporter&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;metric_reporter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;success&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-6&#34; name=&#34;__codelineno-2-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint64_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;compute_start_ns&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint64_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;compute_input_end_ns&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-7&#34; name=&#34;__codelineno-2-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint64_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;compute_output_start_ns&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint64_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;compute_end_ns&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-8&#34; name=&#34;__codelineno-2-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-9&#34; name=&#34;__codelineno-2-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;collect_stats_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-10&#34; name=&#34;__codelineno-2-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-11&#34; name=&#34;__codelineno-2-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-12&#34; name=&#34;__codelineno-2-12&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-2-13&#34; name=&#34;__codelineno-2-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#ifdef TRITON_ENABLE_TRACING&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-14&#34; name=&#34;__codelineno-2-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;trace_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-15&#34; name=&#34;__codelineno-2-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;trace_&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Report&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TRITONSERVER_TRACE_COMPUTE_START&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;compute_start_ns&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-16&#34; name=&#34;__codelineno-2-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;trace_&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Report&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TRITONSERVER_TRACE_COMPUTE_INPUT_END&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;compute_input_end_ns&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-17&#34; name=&#34;__codelineno-2-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;trace_&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Report&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-18&#34; name=&#34;__codelineno-2-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TRITONSERVER_TRACE_COMPUTE_OUTPUT_START&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;compute_output_start_ns&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-19&#34; name=&#34;__codelineno-2-19&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;trace_&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Report&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TRITONSERVER_TRACE_COMPUTE_END&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;compute_end_ns&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-20&#34; name=&#34;__codelineno-2-20&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-21&#34; name=&#34;__codelineno-2-21&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#endif  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// TRITON_ENABLE_TRACING&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-22&#34; name=&#34;__codelineno-2-22&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-2-23&#34; name=&#34;__codelineno-2-23&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;åŒæ—¶å¦‚æœè¦è‡ªå®šä¹‰backendï¼Œä¹Ÿæä¾›äº†APIï¼Œåœ¨backendä¸­è®°å½•traceã€‚è¿™äº›APIå‡½æ•°å°±æ˜¯è°ƒç”¨äº†InferenceTraceç±»çš„æ¥å£ã€‚ï¼ˆr22.12ç‰ˆæœ¬ä¸­æ²¡æœ‰æä¾›æ¥å£TRITONSERVER_InferenceTraceReportActivity,ä¹Ÿæ²¡æœ‰å®ç°opentelementryç»Ÿè®¡traceæ•°æ®ï¼Œåœ¨åé¢çš„ç‰ˆæœ¬æä¾›äº†ã€‚ï¼‰&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-3-1&#34; name=&#34;__codelineno-3-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;backend&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;traceçš„ä¾‹å­å‚è€ƒ&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ï¼š&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;https&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;//github1s.com/triton-inference-server/identity_backend/blob/main/src/identity.cc&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;h3 id=&#34;tritonserverä¸­opentelemetryå®ç°&#34;&gt;tritonserverä¸­opentelemetryå®ç°&lt;a class=&#34;headerlink&#34; href=&#34;#tritonserverä¸­opentelemetryå®ç°&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;å¯¹opentelemtry-cppåº“çš„ä½¿ç”¨ï¼ŒåŒ…æ‹¬ä½¿ç”¨äº†http_collector_exporterã€spanè®°å½•ç­‰éƒ½åœ¨tritonserveré¡¹ç›®ä¸­çš„tracer.ccä¸­å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;åˆå§‹åŒ–trackerï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-21&#34;&gt;21&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-22&#34;&gt;22&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-23&#34;&gt;23&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-24&#34;&gt;24&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-25&#34;&gt;25&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-26&#34;&gt;26&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-27&#34;&gt;27&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-28&#34;&gt;28&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-29&#34;&gt;29&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-30&#34;&gt;30&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-31&#34;&gt;31&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-32&#34;&gt;32&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-33&#34;&gt;33&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-34&#34;&gt;34&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-35&#34;&gt;35&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-36&#34;&gt;36&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-37&#34;&gt;37&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-38&#34;&gt;38&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-4-1&#34; name=&#34;__codelineno-4-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-2&#34; name=&#34;__codelineno-4-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;nf&#34;&gt;TraceManager::InitTracer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;triton&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;server&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TraceConfigMap&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;config_map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-3&#34; name=&#34;__codelineno-4-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-4&#34; name=&#34;__codelineno-4-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;switch&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;global_setting_&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mode_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-5&#34; name=&#34;__codelineno-4-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;case&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;no&#34;&gt;TRACE_MODE_OPENTELEMETRY&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-6&#34; name=&#34;__codelineno-4-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#ifndef _WIN32&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-7&#34; name=&#34;__codelineno-4-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;otlp&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;OtlpHttpExporterOptions&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;exporter_options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-8&#34; name=&#34;__codelineno-4-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;otel_resource&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ResourceAttributes&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;attributes&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{};&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-9&#34; name=&#34;__codelineno-4-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;otel_trace_sdk&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;BatchSpanProcessorOptions&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;processor_options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-10&#34; name=&#34;__codelineno-4-10&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-4-11&#34; name=&#34;__codelineno-4-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ProcessOpenTelemetryParameters&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-12&#34; name=&#34;__codelineno-4-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;config_map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;exporter_options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;attributes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;processor_options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-13&#34; name=&#34;__codelineno-4-13&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-4-14&#34; name=&#34;__codelineno-4-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;exporter&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;otlp&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;OtlpHttpExporterFactory&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Create&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;exporter_options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-15&#34; name=&#34;__codelineno-4-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;processor&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;otel_trace_sdk&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;BatchSpanProcessorFactory&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Create&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-16&#34; name=&#34;__codelineno-4-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;move&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;exporter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;processor_options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-17&#34; name=&#34;__codelineno-4-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;resource&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;otel_resource&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Resource&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Create&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;attributes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-18&#34; name=&#34;__codelineno-4-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shared_ptr&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;otel_trace_api&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TracerProvider&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;provider&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-19&#34; name=&#34;__codelineno-4-19&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;otel_trace_sdk&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TracerProviderFactory&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Create&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-20&#34; name=&#34;__codelineno-4-20&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;move&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;processor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;resource&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-21&#34; name=&#34;__codelineno-4-21&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-4-22&#34; name=&#34;__codelineno-4-22&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;otel_trace_api&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Provider&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SetTracerProvider&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;provider&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-23&#34; name=&#34;__codelineno-4-23&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;otel_cntxt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;propagation&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GlobalTextMapPropagator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SetGlobalPropagator&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-24&#34; name=&#34;__codelineno-4-24&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;opentelemetry&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nostd&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shared_ptr&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-25&#34; name=&#34;__codelineno-4-25&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;otel_cntxt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;propagation&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TextMapPropagator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-26&#34; name=&#34;__codelineno-4-26&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;otel_trace_api&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;propagation&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;HttpTraceContext&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()));&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-27&#34; name=&#34;__codelineno-4-27&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;break&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-28&#34; name=&#34;__codelineno-4-28&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#else&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-29&#34; name=&#34;__codelineno-4-29&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;LOG_ERROR&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;Unsupported trace mode: &amp;quot;&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-30&#34; name=&#34;__codelineno-4-30&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TraceManager&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;InferenceTraceModeString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-31&#34; name=&#34;__codelineno-4-31&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                       &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;global_setting_&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mode_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-32&#34; name=&#34;__codelineno-4-32&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;break&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-33&#34; name=&#34;__codelineno-4-33&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#endif&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-34&#34; name=&#34;__codelineno-4-34&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-35&#34; name=&#34;__codelineno-4-35&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-36&#34; name=&#34;__codelineno-4-36&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-37&#34; name=&#34;__codelineno-4-37&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-38&#34; name=&#34;__codelineno-4-38&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;è®°å½•traceçš„æ ¸å¿ƒå‡½æ•°æ˜¯ReportToOpenTelemetry, åœ¨å…¶ä¸­ä¼šè°ƒç”¨StartSpanå‡½æ•°å’ŒEndSpanå‡½æ•°ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-5-1&#34; name=&#34;__codelineno-5-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-2&#34; name=&#34;__codelineno-5-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;nf&#34;&gt;TraceManager::Trace::ReportToOpenTelemetry&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-3&#34; name=&#34;__codelineno-5-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TRITONSERVER_InferenceTrace&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;trace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-4&#34; name=&#34;__codelineno-5-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TRITONSERVER_InferenceTraceActivity&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;activity&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint64_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;timestamp_ns&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;åœ¨tritonserverä¸­é€šè¿‡TRITONSERVER_InferenceTraceActivityçš„å­—ç¬¦ä¸²åç¼€æ¥åŒºåˆ†æ˜¯startspanè¿˜æ˜¯endspanã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-6-1&#34; name=&#34;__codelineno-6-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;start&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;_START&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-2&#34; name=&#34;__codelineno-6-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;end&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;_END&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-3&#34; name=&#34;__codelineno-6-3&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-6-4&#34; name=&#34;__codelineno-6-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;activity&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TRITONSERVER_TRACE_REQUEST_START&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;||&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-5&#34; name=&#34;__codelineno-6-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;activity&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TRITONSERVER_TRACE_COMPUTE_START&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;||&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-6&#34; name=&#34;__codelineno-6-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;activity&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TRITONSERVER_TRACE_CUSTOM_ACTIVITY&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-7&#34; name=&#34;__codelineno-6-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;activity_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;length&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;start&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;length&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-8&#34; name=&#34;__codelineno-6-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;equal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;start&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rbegin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;start&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rend&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;activity_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rbegin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())))&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-9&#34; name=&#34;__codelineno-6-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;StartSpan&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;trace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;activity&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;timestamp_ns&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;trace_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;span_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-10&#34; name=&#34;__codelineno-6-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-11&#34; name=&#34;__codelineno-6-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;activity&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TRITONSERVER_TRACE_REQUEST_END&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;||&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-12&#34; name=&#34;__codelineno-6-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;activity&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TRITONSERVER_TRACE_COMPUTE_END&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;||&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-13&#34; name=&#34;__codelineno-6-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;activity&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TRITONSERVER_TRACE_CUSTOM_ACTIVITY&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-14&#34; name=&#34;__codelineno-6-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;activity_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;length&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;end&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;length&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-15&#34; name=&#34;__codelineno-6-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;equal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;end&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rbegin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;end&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rend&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;activity_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rbegin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())))&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-16&#34; name=&#34;__codelineno-6-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;EndSpan&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;timestamp_ns&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;trace_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-17&#34; name=&#34;__codelineno-6-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;system_clockâ€Œï¼šé€‚ç”¨äºéœ€è¦ä¸å®é™…æ—¥å†æ—¶é—´å…³è”çš„åœºæ™¯ï¼ˆå¦‚æ—¥å¿—è®°å½•ã€æ˜¾ç¤ºå½“å‰æ—¶é—´ï¼‰ï¼Œæ”¯æŒä¸time_tç±»å‹ç›¸äº’è½¬æ¢
â€Œsteady_clockâ€Œï¼šä¸“ä¸ºé«˜ç²¾åº¦è®¡æ—¶è®¾è®¡ï¼Œå¦‚æ€§èƒ½åˆ†ææˆ–ç®—æ³•è€—æ—¶æµ‹é‡ï¼Œä½†æ— æ³•ç›´æ¥è½¬æ¢ä¸ºæ—¥å†æ—¶é—´&lt;/p&gt;
&lt;h2 id=&#34;opentelemetry-cppåº“çš„ä½¿ç”¨&#34;&gt;opentelemetry-cppåº“çš„ä½¿ç”¨&lt;a class=&#34;headerlink&#34; href=&#34;#opentelemetry-cppåº“çš„ä½¿ç”¨&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://opentelemetry-cpp.readthedocs.io/en/latest/sdk/GettingStarted.html&#34;&gt;GettingStarted&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¯ä»¥é€šè¿‡Context Propagationï¼ˆä¸Šä¸‹æ–‡ä¼ æ’­ï¼‰è·¨è¿›ç¨‹ä¼ é€’Traceä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œåœ¨C++ä¸­ä¸»è¦ä¾èµ–W3C TraceContextæ ‡å‡†çš„HTTPå¤´éƒ¨æˆ–gRPCå…ƒæ•°æ®å®ç°&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;jeageré…ç½®ä½¿ç”¨å¯è§†åŒ–traceæ•°æ®&#34;&gt;jeageré…ç½®ä½¿ç”¨ï¼Œå¯è§†åŒ–traceæ•°æ®&lt;a class=&#34;headerlink&#34; href=&#34;#jeageré…ç½®ä½¿ç”¨å¯è§†åŒ–traceæ•°æ®&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-5&#34;&gt;5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-6&#34;&gt;6&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-7-1&#34; name=&#34;__codelineno-7-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;docker&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;run&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;d&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;--&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;jaeger&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;\
&lt;a id=&#34;__codelineno-7-2&#34; name=&#34;__codelineno-7-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;COLLECTOR_OTLP_ENABLED&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;\
&lt;a id=&#34;__codelineno-7-3&#34; name=&#34;__codelineno-7-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;16686&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;16686&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;\
&lt;a id=&#34;__codelineno-7-4&#34; name=&#34;__codelineno-7-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4317&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4317&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;\
&lt;a id=&#34;__codelineno-7-5&#34; name=&#34;__codelineno-7-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4318&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4318&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;\
&lt;a id=&#34;__codelineno-7-6&#34; name=&#34;__codelineno-7-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;jaegertracing&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;all&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;in&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;one&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;1.49&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;h2 id=&#34;opentelemetry-collectoré…ç½®ä½¿ç”¨&#34;&gt;opentelemetry-collectoré…ç½®ä½¿ç”¨&lt;a class=&#34;headerlink&#34; href=&#34;#opentelemetry-collectoré…ç½®ä½¿ç”¨&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;åœ¨æ–°ç‰ˆæœ¬ä¸­opentelementryåˆ é™¤äº†jeageråè®®çš„exporterï¼Œä½¿ç”¨otlp/jeagerã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;YAML&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-21&#34;&gt;21&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-22&#34;&gt;22&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-23&#34;&gt;23&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-24&#34;&gt;24&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-25&#34;&gt;25&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-26&#34;&gt;26&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-27&#34;&gt;27&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-28&#34;&gt;28&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-29&#34;&gt;29&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-30&#34;&gt;30&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-31&#34;&gt;31&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-32&#34;&gt;32&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-8-1&#34; name=&#34;__codelineno-8-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;nt&#34;&gt;receivers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-2&#34; name=&#34;__codelineno-8-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;otlp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-3&#34; name=&#34;__codelineno-8-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;protocols&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-4&#34; name=&#34;__codelineno-8-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;grpc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-5&#34; name=&#34;__codelineno-8-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;endpoint&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l l-Scalar l-Scalar-Plain&#34;&gt;0.0.0.0:4317&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-6&#34; name=&#34;__codelineno-8-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-7&#34; name=&#34;__codelineno-8-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;endpoint&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l l-Scalar l-Scalar-Plain&#34;&gt;0.0.0.0:4318&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-8&#34; name=&#34;__codelineno-8-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;nt&#34;&gt;exporters&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-9&#34; name=&#34;__codelineno-8-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;# NOTE: Prior to v0.86.0 use `logging` instead of `debug`.&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-10&#34; name=&#34;__codelineno-8-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;debug&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-11&#34; name=&#34;__codelineno-8-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;verbosity&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l l-Scalar l-Scalar-Plain&#34;&gt;detailed&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-12&#34; name=&#34;__codelineno-8-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;otlp/jaeger&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-13&#34; name=&#34;__codelineno-8-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;# Jaeger supports OTLP directly&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-14&#34; name=&#34;__codelineno-8-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;endpoint&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l l-Scalar l-Scalar-Plain&#34;&gt;localhost:4317&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-15&#34; name=&#34;__codelineno-8-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;tls&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-16&#34; name=&#34;__codelineno-8-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;insecure&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l l-Scalar l-Scalar-Plain&#34;&gt;true&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-17&#34; name=&#34;__codelineno-8-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;nt&#34;&gt;processors&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-18&#34; name=&#34;__codelineno-8-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;batch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-19&#34; name=&#34;__codelineno-8-19&#34;&gt;&lt;/a&gt;&lt;span class=&#34;nt&#34;&gt;service&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-20&#34; name=&#34;__codelineno-8-20&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;pipelines&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-21&#34; name=&#34;__codelineno-8-21&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;traces&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-22&#34; name=&#34;__codelineno-8-22&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;receivers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p p-Indicator&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;otlp&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p p-Indicator&#34;&gt;]&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-23&#34; name=&#34;__codelineno-8-23&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;exporters&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p p-Indicator&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;otlp/jaeger&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p p-Indicator&#34;&gt;]&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-24&#34; name=&#34;__codelineno-8-24&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;processors&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p p-Indicator&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;batch&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p p-Indicator&#34;&gt;]&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-25&#34; name=&#34;__codelineno-8-25&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metrics&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-26&#34; name=&#34;__codelineno-8-26&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;receivers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p p-Indicator&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;otlp&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p p-Indicator&#34;&gt;]&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-27&#34; name=&#34;__codelineno-8-27&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;exporters&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p p-Indicator&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;debug&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p p-Indicator&#34;&gt;]&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-28&#34; name=&#34;__codelineno-8-28&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;processors&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p p-Indicator&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;batch&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p p-Indicator&#34;&gt;]&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-29&#34; name=&#34;__codelineno-8-29&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;logs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-30&#34; name=&#34;__codelineno-8-30&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;receivers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p p-Indicator&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;otlp&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p p-Indicator&#34;&gt;]&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-31&#34; name=&#34;__codelineno-8-31&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;exporters&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p p-Indicator&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;debug&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p p-Indicator&#34;&gt;]&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-32&#34; name=&#34;__codelineno-8-32&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;processors&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p p-Indicator&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;batch&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p p-Indicator&#34;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Bash&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-9-1&#34; name=&#34;__codelineno-9-1&#34;&gt;&lt;/a&gt;docker&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;run&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-p&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;4317&lt;/span&gt;:4317&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-2&#34; name=&#34;__codelineno-9-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;-v&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;pwd&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;/otel-collector-config.yaml:/etc/otel-collector-config.yaml&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-3&#34; name=&#34;__codelineno-9-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;otel/opentelemetry-collector:latest&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-4&#34; name=&#34;__codelineno-9-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;--config&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/etc/otel-collector-config.yaml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;a class=&#34;headerlink&#34; href=&#34;#å‚è€ƒ&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://triton-inference-server.github.io/pytriton/0.5.2/guides/distributed_tracing/&#34;&gt;https://triton-inference-server.github.io/pytriton/0.5.2/guides/distributed_tracing/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github1s.com/triton-inference-server/server/blob/main/src/tracer.h#L41&#34;&gt;https://github1s.com/triton-inference-server/server/blob/main/src/tracer.h#L41&lt;/a&gt;&lt;/p&gt;
&lt;style&gt;
.related-posts {
  margin-top: 1.5rem;
  padding-top: 0.75rem;
  border-top: 1px solid rgba(0,0,0,0.1);
  max-height: none !important; /* é˜²æ­¢Safarié”™è¯¯è®¡ç®—é«˜åº¦ */
  overflow: visible !important; /* é˜²æ­¢å†…å®¹è¢«æˆªæ–­ */
}
.related-posts h3 {
  margin-top: 0;
  margin-bottom: 0.5rem;
  font-size: 1.2rem;
  font-weight: 500;
  line-height: 1.3;
}
.related-posts ul {
  margin: 0 0 0.5rem 0 !important; /* å¼ºåˆ¶è¦†ç›–å¯èƒ½çš„å†²çªæ ·å¼ */
  padding-left: 1.5rem;
  list-style-position: outside;
}
.related-posts li {
  margin-bottom: 0.25rem;
  line-height: 1.4;
}
/* æš—è‰²æ¨¡å¼é€‚é… */
[data-md-color-scheme=&#34;slate&#34;] .related-posts {
  border-top-color: rgba(255,255,255,0.1);
}
/* Safariç‰¹å®šä¿®å¤ */
@supports (-webkit-hyphens:none) {
  .related-posts {
    display: block;
    position: relative;
    height: auto !important;
  }
  .related-posts ul {
    position: static;
  }
}
&lt;/style&gt;
&lt;div class=&#34;related-posts&#34;&gt;
&lt;h3&gt;ğŸ“š ç›¸å…³æ–‡ç« æ¨è&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/cutlassåº“ä¸­çš„å°¾å£°èåˆepilogue-fusionå’Œepilogue-visitor-trees/&#34; target=&#34;_blank&#34;&gt;CUTLASSåº“ä¸­çš„å°¾å£°èåˆ(Epilogue Fusion)å’ŒEpilogue Visitor Trees&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/helix-gptå¦‚ä½•å®ç°ai-codeä»¥åŠå¦‚ä½•è°ƒè¯•/&#34; target=&#34;_blank&#34;&gt;helix-gptå¦‚ä½•å®ç°AI codeä»¥åŠå¦‚ä½•è°ƒè¯•?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/cä½¿ç”¨abseil-cppé‡åˆ°çš„å°é—®é¢˜/&#34; target=&#34;_blank&#34;&gt;C++ä½¿ç”¨abseil-cppé‡åˆ°çš„å°é—®é¢˜&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/mit-ç»å…¸è®²åº§how-to-speak---patrick-winston/&#34; target=&#34;_blank&#34;&gt;MIT ç»å…¸è®²åº§ï¼šHow to Speak - Patrick Winston&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/300è¡Œå®ç°ä¸€ä¸ªboundedspscqueue/&#34; target=&#34;_blank&#34;&gt;300è¡Œå®ç°ä¸€ä¸ªBoundedSPSCQueue&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;</description>
      <link>https://github.com/KenForever1/blog/tritonserver%E4%B8%ADtrace%E4%BD%BF%E7%94%A8%E6%BA%90%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90/</link>
      <pubDate>Sat, 29 Nov 2025 00:00:00 +0000</pubDate>
      <source url="https://github.com/KenForever1/feed_rss_updated.xml">KenForever1</source>
      
      <guid isPermaLink="true">https://github.com/KenForever1/blog/tritonserver%E4%B8%ADtrace%E4%BD%BF%E7%94%A8%E6%BA%90%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90/</guid>
      
    </item>
    
    <item>
      <title>å¼€å‘æŠ€æ³•ä¹‹powè®¡ç®—simdä¼˜åŒ–</title>
      
      
        
      <author>KenForever1</author>
        
      
      
      
      <description>&lt;!-- more --&gt;

&lt;h2 id=&#34;èƒŒæ™¯&#34;&gt;èƒŒæ™¯&lt;a class=&#34;headerlink&#34; href=&#34;#èƒŒæ™¯&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;åœ¨é˜…è¯»&lt;a href=&#34;https://github.com/wolfpld/vv&#34;&gt;vv&lt;/a&gt;ç»ˆç«¯å›¾ç‰‡æŸ¥çœ‹å™¨ä»£ç æ—¶ï¼Œçœ‹åˆ°äº†ä½œè€…åŠ é€Ÿçš„ä¸€ä¸ªtrickï¼Œæ•ˆæœæå‡æ˜æ˜¾ï¼Œåˆ†äº«è®°å½•ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;é—®é¢˜ï¼šä¸€å¼ æµ‹è¯•å›¾åƒåˆ†è¾¨ç‡ä¸º9504Ã—6336ï¼ŒåŠ è½½æ—¶é—´è¶…è¿‡äº†8ç§’ã€‚è¿™æ˜¯æ— æ³•æ¥å—çš„ã€‚
ä¼˜åŒ–æ–¹æ³•ï¼šå¤šçº¿ç¨‹ã€simdåŠ é€Ÿè®¡ç®—ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¤šçº¿ç¨‹å¹¶è¡ŒåŒ–&#34;&gt;å¤šçº¿ç¨‹å¹¶è¡ŒåŒ–&lt;a class=&#34;headerlink&#34; href=&#34;#å¤šçº¿ç¨‹å¹¶è¡ŒåŒ–&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;é¦–å…ˆé‡‡ç”¨äº†å¤šçº¿ç¨‹çš„æ–¹å¼ï¼Œ&lt;/p&gt;
&lt;p&gt;æ‰€æœ‰è®¡ç®—éƒ½æ˜¯é’ˆå¯¹å•ä¸ªåƒç´ çš„å±€éƒ¨è®¡ç®—ï¼Œä¸ä¾èµ–äºç›¸é‚»åƒç´ ï¼Œåº”è¯¥æ˜¯ææ˜“å¹¶è¡ŒåŒ–çš„ã€‚&lt;/p&gt;
&lt;p&gt;åˆ†åˆ«å¯¹æ¯ä¸ªå¤„ç†æ­¥éª¤è¿›è¡Œå¹¶è¡ŒåŒ–å¤„ç†ï¼Œä»¥éµå¾ªä¸²è¡Œçš„æ“ä½œæ–¹å¼ã€‚ç„¶åï¼Œç»è¿‡ä¸€ç•ªåˆ†æï¼Œæˆ‘æ„è¯†åˆ°è¿™ç§åšæ³•æ•ˆç‡å¾ˆä½ã€‚æˆ‘ä½¿ç”¨çš„æµ‹è¯•å›¾åƒå¤§å°ä¸º9504Ã—6336Ã—4é€šé“Ã—4å­—èŠ‚ï¼Œå³918MBã€‚å› æ­¤ï¼Œå¹¶è¡ŒåŒ–çš„è‰²å½©ç®¡ç†å‡½æ•°éœ€è¦åŠ è½½è¿™918MBçš„æ•°æ®ï¼Œè¿›è¡Œå¤„ç†ï¼Œå†å°†918MBçš„æ•°æ®å­˜å‚¨å›å†…å­˜ã€‚æ¥ç€ï¼Œå¹¶è¡ŒåŒ–çš„è½¬æ¢å‡½æ•°åˆéœ€è¦å†æ¬¡åŠ è½½è¿™918MBçš„æ•°æ®ï¼Œè¿›è¡Œå¿…è¦çš„è®¡ç®—ï¼Œç„¶åå†æ¬¡å­˜å‚¨918MBçš„æ•°æ®ã€‚åç»­çš„æ­¥éª¤ä¹Ÿæ˜¯å¦‚æ­¤ã€‚éš¾æ€ªåˆ†æç»“æœæ˜¾ç¤ºï¼Œä¸€åŠçš„æ‰§è¡Œæ—¶é—´éƒ½èŠ±åœ¨äº†å†…å­˜æŒ‡ä»¤ä¸Šï¼Œå› ä¸ºæ‰€æœ‰æ•°æ®éƒ½å¿…é¡»ä¸æ–­åœ°é€šè¿‡å†…å­˜è¿›è¡Œä¼ è¾“ã€‚&lt;/p&gt;
&lt;p&gt;æ”¹è¿›æ–¹æ³•ï¼š
å½»åº•æ”¹å˜åŠ è½½å™¨çš„å·¥ä½œæ–¹å¼ã€‚ç°åœ¨ï¼Œå¹¶è¡Œå¤„ç†åœ¨é¡¶å±‚è¿›è¡Œï¼Œæ¯ä¸ªä»»åŠ¡é¦–å…ˆåŠ è½½ä¸€éƒ¨åˆ†YCbCræ•°æ®ï¼Œç„¶ååœ¨ä¸€ä¸ªå°çš„ä¸´æ—¶ç¼“å†²åŒºä¸­é€æ­¥å®Œæˆæ‰€æœ‰å¿…è¦çš„å¤„ç†ï¼Œæœ€åå°†å¤„ç†å¥½çš„å›¾åƒéƒ¨åˆ†å†™å…¥è¾“å‡ºä½å›¾ã€‚è¿™äº›æ•°æ®å—è¶³å¤Ÿå°ï¼Œå¯ä»¥æ”¾å…¥ç¼“å­˜ä¸­ï¼Œè€Œä¸”åœ¨æ€§èƒ½åˆ†ææ—¶ï¼Œå†…å­˜æŒ‡ä»¤çš„é—®é¢˜ä¹Ÿä¸å†å‡ºç°äº†ã€‚&lt;/p&gt;
&lt;h2 id=&#34;simdåŠ é€Ÿ&#34;&gt;simdåŠ é€Ÿ&lt;a class=&#34;headerlink&#34; href=&#34;#simdåŠ é€Ÿ&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;åœ¨å¤„ç†HDRå›¾åƒæ—¶ï¼Œéœ€è¦ä½¿ç”¨PQå‡½æ•°ï¼Œéœ€è¦æœ‰std::pow()å‡½æ•°çš„å®ç°æ‰èƒ½ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Pq å®ç°çš„æ˜¯ PQ (Perceptual Quantizer) é‡åŒ–ï¼Œè¿™æ˜¯ HDR (é«˜åŠ¨æ€èŒƒå›´) å›¾åƒå¤„ç†ä¸­å¸¸ç”¨çš„éçº¿æ€§ç¼–ç å‡½æ•°ï¼Œç”¨äºå°†çº¿æ€§å…‰ä¿¡å·è½¬æ¢ä¸ºæ„ŸçŸ¥é‡åŒ–çš„éçº¿æ€§å€¼ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä½œè€…åšäº†ä¸€äº›å°è¯•ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/JishinMaster/simd_utils/blob/master/sse_mathfun.h&#34;&gt;å·²æœ‰çš„SSE2å®ç°&lt;/a&gt;ï¼ˆèƒ½åŒæ—¶è¿›è¡Œ3æ¬¡pow()è®¡ç®—ï¼‰å®é™…ä¸Šæ¯”ä¸²è¡Œå®ç°è¿˜è¦æ…¢ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç”¨fmaï¼ˆèåˆä¹˜åŠ ï¼‰æŒ‡ä»¤æ›¿ä»£ä¸€ç³»åˆ—çš„mul + addæŒ‡ä»¤ï¼Œç•¥å¾®è®©SIMDå æ®äº†ä¼˜åŠ¿ã€‚å°†å®ç°æ‰©å±•åˆ°AVX2å¸¦æ¥äº†é¢„æœŸçš„2å€é€Ÿåº¦æå‡ï¼Œä½†AVX512ç‰ˆæœ¬å´äº§ç”Ÿäº†å¤±çœŸã€‚åæ¥æˆ‘å‘ç°ï¼Œåœ¨é˜…è¯»SIMDæ–‡æ¡£æ—¶ï¼Œæˆ‘ä¸çŸ¥æ€ä¹ˆæ¼æ‰äº†æ­£ç¡®çš„èˆå…¥é€‰é¡¹ï¼Œç”¨äº†é”™è¯¯çš„é‚£ä¸ªï¼Œå¯¼è‡´è¾“å‡ºå‡ºç°äº†NaNã€‚ä½†è¿™ä¹Ÿæ— å…³ç´§è¦äº†ï¼Œæˆ‘å¯¹é‚£ä¸ªç‰ˆæœ¬çš„æ€§èƒ½å¹¶ä¸æ»¡æ„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç„¶åï¼Œä½œè€…å†³å®šä¸å†ç½‘ä¸Šæ‰¾ä»£ç äº†ï¼Œâ€œæˆ–è®¸æ˜¯æ—¶å€™åœæ­¢å°è¯•ä»ç½‘ä¸Šéšä¾¿æ‰¾ä»£ç äº†ï¼Œæˆ–è®¸æˆ‘çœŸçš„åº”è¯¥å¼„æ˜ç™½è¿™ä¸œè¥¿åˆ°åº•è¯¥æ€ä¹ˆè¿è¡Œã€‚â€&lt;/p&gt;
&lt;p&gt;å…ˆé€éœ²å“ˆï¼Œå®é™…ä¸Šä½œè€…é‡‡ç”¨äº†æ•°å­¦ä¼˜åŒ–æ–¹æ³•å»è®¡ç®—powã€‚å°†powè½¬æ¢æˆäº†expå’Œlogçš„ç»„åˆã€‚ç„¶åexpå’Œlogçš„è®¡ç®—é‡‡ç”¨äº†å¤šé¡¹å¼é€¼è¿‘çš„æ–¹æ³•ï¼Œæ¥å‡å°‘ä¹˜æ³•çš„æ¬¡æ•°ï¼Œåˆ†åˆ«å®ç°äº†SSE2ã€AVXã€AVX512çš„ç‰ˆæœ¬ä¼˜åŒ–ã€‚å–å¾—äº†å·¨å¤§çš„æ€§èƒ½æå‡ã€‚&lt;/p&gt;
&lt;h3 id=&#34;èƒŒæ™¯æ•°å­¦çŸ¥è¯†&#34;&gt;èƒŒæ™¯æ•°å­¦çŸ¥è¯†&lt;a class=&#34;headerlink&#34; href=&#34;#èƒŒæ™¯æ•°å­¦çŸ¥è¯†&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;å¹‚å‡½æ•°å¯ä»¥è¡¨ç¤ºä¸ºexp()å’Œlog()å‡½æ•°çš„ç»„åˆã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;arithmatex&#34;&gt;\[ x^y = e^{y \cdot \ln x} \]&lt;/div&gt;
&lt;p&gt;æˆ–è€…&lt;/p&gt;
&lt;div class=&#34;arithmatex&#34;&gt;\[ x^y = 2^{y \cdot \log_2 x} \]&lt;/div&gt;
&lt;p&gt;ä¸‹é¢å¯¹å›¾åƒå¤„ç†ä¸­æµ®ç‚¹æ•°è®¡ç®—çš„ä¼˜åŒ–ï¼Œé‡‡ç”¨ $ x^y = 2^{y cdot log_2 x} $ ã€‚ä¸ä½¿ç”¨eçš„åŸå› æ˜¯å‡å°‘ä¸å¿…è¦çš„æ•°å­—æ¥å›è½¬æ¢ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;IEEE 754æµ®ç‚¹æ•°çš„ç¼–ç æ–¹å¼çš„æ„æˆï¼š&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;1 bit sign, S, 1ä½ç¬¦å·ä½Sï¼Œ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;8 bits exponent, E, 8ä½æŒ‡æ•°Eï¼Œ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;23 bits mantissa, M. 23ä½å°¾æ•°Mã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;arithmatex&#34;&gt;\[ -1^S \cdot 1.M \cdot 2^{E - 127} \]&lt;/div&gt;
&lt;p&gt;ç”±äºæ˜¯å›¾ç‰‡å¤„ç†ï¼Œç¬¦å·ä½ä¸æˆ‘ä»¬æ— å…³ï¼Œé¢œè‰²å€¼æ°¸è¿œä¸ä¼šæ˜¯è´Ÿæ•°ã€‚&lt;/p&gt;
&lt;p&gt;Eâˆ’127åªæ˜¯ä¸ºäº†è§£ç è¯¥æ•°å­—çš„äºŒè¿›åˆ¶ç¼–ç ï¼Œæˆ‘ä»¬ä¼šå°†å…¶ç®€åŒ–ä¸ºEï¼Œå‡è®¾å®ƒæœ‰é€‚å½“çš„åç§»é‡ã€‚&lt;/p&gt;
&lt;p&gt;å°¾æ•°çš„å€¼å†™ä½œ $ 1.M $ ï¼Œ æ€»æ˜¯åœ¨1åˆ°2çš„èŒƒå›´å†…ã€‚å½“1åˆ°2çš„èŒƒå›´å€¼ï¼Œä¹˜ä»¥ $ 2^{E} $ ï¼ŒèŒƒå›´å°±å˜æˆäº†0.5-1,2-4ï¼Œç­‰ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶åæ ¹æ®å¦ä¸€ä¸ªæ•°å­¦çŸ¥è¯†ï¼š&lt;/p&gt;
&lt;div class=&#34;arithmatex&#34;&gt;\[ \log(a \cdot b) = \log a + \log b \]&lt;/div&gt;
&lt;p&gt;åœ¨å›¾ç‰‡å¤„ç†çš„æµ®ç‚¹æ•°å¤„ç†ä¸­ï¼Œå°±å¯ä»¥åšä¸‹é¢çš„è½¬æ¢ï¼š&lt;/p&gt;
&lt;div class=&#34;arithmatex&#34;&gt;\[ \log_2(1.M \cdot 2^E) = \log_2 1.M + \log_2 2^E \]&lt;/div&gt;
&lt;div class=&#34;arithmatex&#34;&gt;\[ \log_2(1.M \cdot 2^E) = \log_2 1.M + E \]&lt;/div&gt;
&lt;p&gt;å¯¹äºåŸºæ•°2ï¼Œæˆ‘ä»¬æ‰€è¦åšçš„å°±æ˜¯è®¡ç®—å°¾æ•°çš„å¯¹æ•°ï¼Œå†åŠ ä¸ŠæŒ‡æ•°çš„å€¼ï¼Œå°±èƒ½å¾—åˆ°æ•´ä¸ªæµ®ç‚¹æ•°çš„å¯¹æ•°ã€‚è€Œä¸”ï¼Œç”±äºå°¾æ•°çš„èŒƒå›´æ€»æ˜¯åœ¨1åˆ°2ä¹‹é—´ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å¤šé¡¹å¼å‡½æ•°ç›¸å½“ç²¾ç¡®åœ°è¿‘ä¼¼å…¶å¯¹æ•°ã€‚æŒ‡æ•°å‡½æ•°ä¹Ÿå¯ä»¥é€šè¿‡å¤šé¡¹å¼å’Œä¸€äº›ç±»ä¼¼çš„æŠ€å·§æ¥è¿‘ä¼¼ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å¤„ç†å®Œå¹‚å‡½æ•°åï¼Œå°†PQå˜æ¢å®ç°ä¸ºSIMDå‡½æ•°å°±ç›¸å½“ç®€å•äº†ã€‚è¯¥ä»£ç çš„æ ‡é‡ç‰ˆæœ¬è¿è¡Œæ—¶é—´ä¸º1.56ç§’ã€‚SSE 4.1 + FMAç‰ˆæœ¬ä»…éœ€528æ¯«ç§’ï¼Œé€Ÿåº¦æå‡çº¦3å€ã€‚å¤ªæ£’äº†ï¼æ‰©å±•SIMDä»£ç å¾ˆç®€å•ï¼Œå› ä¸ºé€šé“ä¹‹é—´æ²¡æœ‰ä¸²æ‰°ï¼Œå¦åˆ™å°±éœ€è¦ä»£ä»·é«˜æ˜‚çš„æ··æ´—å’Œç½®æ¢æ“ä½œã€‚AVX2ç‰ˆæœ¬çš„è¿è¡Œæ—¶é—´ä¸º276æ¯«ç§’ï¼Œè€ŒAVX512ç‰ˆæœ¬ä»…éœ€145æ¯«ç§’ã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡æˆ‘ä»¬å·²ç»è®¨è®ºè¿‡çš„å¹¶è¡ŒåŒ–å¤„ç†ï¼Œè¿è¡Œæ—¶é—´è¿›ä¸€æ­¥ç¼©çŸ­åˆ°ä»…31æ¯«ç§’ã€‚è¿™ä»…ä¸ºåŸå§‹1.56ç§’çš„2%ï¼&lt;/p&gt;
&lt;p&gt;ä¼˜åŒ–å‰ï¼Œæµ‹è¯•å›¾åƒåŠ è½½éœ€è¦8ç§’å¤šã€‚æœ‰äº†SIMDä»£ç è·¯å¾„å’Œå¤šçº¿ç¨‹åï¼ŒåŒä¸€å›¾åƒçš„åŠ è½½æ—¶é—´ä»…ä¸º0.8ç§’ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;åŸå§‹pqå®ç°&#34;&gt;åŸå§‹PQå®ç°&lt;a class=&#34;headerlink&#34; href=&#34;#åŸå§‹pqå®ç°&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;PQ é‡åŒ–åŸºäºäººç±»è§†è§‰ç³»ç»Ÿçš„æ„ŸçŸ¥ç‰¹æ€§ï¼Œé€šè¿‡éçº¿æ€§æ˜ å°„å°†é«˜åŠ¨æ€èŒƒå›´çš„å…‰çº¿å€¼å‹ç¼©åˆ°æœ‰é™çš„ç¼–ç ç©ºé—´ä¸­ï¼ŒåŒæ—¶ä¿æŒæ„ŸçŸ¥ä¸Šçš„å‡åŒ€æ€§ã€‚å¯ä»¥ç”¨äºHDR å›¾åƒæ˜¾ç¤ºï¼Œè¿™ä¸ªå‡½æ•°æ˜¯ ST.2084 æ ‡å‡†ä¸­å®šä¹‰çš„ PQ æ›²çº¿çš„å®ç°ï¼Œç”¨äºå°†çº¿æ€§å…‰å€¼è½¬æ¢ä¸ºæ„ŸçŸ¥é‡åŒ–çš„ç”µå¹³å€¼ã€‚
åŸå§‹çš„PQå®ç°ï¼š
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-21&#34;&gt;21&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-22&#34;&gt;22&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-23&#34;&gt;23&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-24&#34;&gt;24&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-25&#34;&gt;25&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-0-1&#34; name=&#34;__codelineno-0-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Pq&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-2&#34; name=&#34;__codelineno-0-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-3&#34; name=&#34;__codelineno-0-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;constexpr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;m1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.1593017578125f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-4&#34; name=&#34;__codelineno-0-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;constexpr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;m1inv&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;1.f&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;m1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-5&#34; name=&#34;__codelineno-0-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;constexpr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;m2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;78.84375f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-6&#34; name=&#34;__codelineno-0-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;constexpr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;m2inv&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;1.f&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;m2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-7&#34; name=&#34;__codelineno-0-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;constexpr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;c1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.8359375f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-8&#34; name=&#34;__codelineno-0-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;constexpr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;c2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;18.8515625f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-9&#34; name=&#34;__codelineno-0-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;constexpr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;c3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;18.6875f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-10&#34; name=&#34;__codelineno-0-10&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-11&#34; name=&#34;__codelineno-0-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Nm2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pow&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;max&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.f&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;m2inv&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-12&#34; name=&#34;__codelineno-0-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;10000.f&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pow&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;max&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Nm2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;c1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;c2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;c3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Nm2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;m1inv&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;255.f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-13&#34; name=&#34;__codelineno-0-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-14&#34; name=&#34;__codelineno-0-14&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-15&#34; name=&#34;__codelineno-0-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;LinearizePq&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sz&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-16&#34; name=&#34;__codelineno-0-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-17&#34; name=&#34;__codelineno-0-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sz&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-18&#34; name=&#34;__codelineno-0-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-19&#34; name=&#34;__codelineno-0-19&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Pq&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-20&#34; name=&#34;__codelineno-0-20&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Pq&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-21&#34; name=&#34;__codelineno-0-21&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Pq&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-22&#34; name=&#34;__codelineno-0-22&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-23&#34; name=&#34;__codelineno-0-23&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-24&#34; name=&#34;__codelineno-0-24&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-25&#34; name=&#34;__codelineno-0-25&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/p&gt;
&lt;h3 id=&#34;simdå®ç°åŠå¤šé¡¹å¼é€¼è¿‘å®ç°powè®¡ç®—&#34;&gt;simdå®ç°åŠå¤šé¡¹å¼é€¼è¿‘å®ç°powè®¡ç®—&lt;a class=&#34;headerlink&#34; href=&#34;#simdå®ç°åŠå¤šé¡¹å¼é€¼è¿‘å®ç°powè®¡ç®—&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;è¿™é‡Œåªå±•ç¤ºäº†__SSE4_1__çš„å®ç°ï¼Œ256ä½å’Œ512ä½çš„æ“ä½œå¯ä»¥æŸ¥çœ‹æºç ã€‚é‡ç‚¹ä¼˜åŒ–ç‚¹æ˜¯è‡ªå®šä¹‰å®ç°äº†_mm_pow_pså‡½æ•°ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-21&#34;&gt;21&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-22&#34;&gt;22&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-23&#34;&gt;23&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-24&#34;&gt;24&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-25&#34;&gt;25&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-26&#34;&gt;26&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-27&#34;&gt;27&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-28&#34;&gt;28&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-29&#34;&gt;29&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-30&#34;&gt;30&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-31&#34;&gt;31&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-1-1&#34; name=&#34;__codelineno-1-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#if defined __SSE4_1__ &amp;amp;&amp;amp; defined __FMA__&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-2&#34; name=&#34;__codelineno-1-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;LinearizePq128&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sz&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-3&#34; name=&#34;__codelineno-1-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-4&#34; name=&#34;__codelineno-1-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;while&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sz&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-5&#34; name=&#34;__codelineno-1-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-6&#34; name=&#34;__codelineno-1-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;__m128&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;px0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_loadu_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-7&#34; name=&#34;__codelineno-1-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;__m128&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;px1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_max_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;px0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_setzero_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-8&#34; name=&#34;__codelineno-1-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;__m128&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Nm2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_pow_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;px1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_set1_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;1.f&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;78.84375f&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-9&#34; name=&#34;__codelineno-1-9&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-1-10&#34; name=&#34;__codelineno-1-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;__m128&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;px2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_sub_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Nm2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_set1_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.8359375f&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-11&#34; name=&#34;__codelineno-1-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;__m128&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;px3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_max_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;px2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_setzero_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-12&#34; name=&#34;__codelineno-1-12&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-1-13&#34; name=&#34;__codelineno-1-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;__m128&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;px4&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_fnmadd_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_set1_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;18.6875f&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Nm2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_set1_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;18.8515625f&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-14&#34; name=&#34;__codelineno-1-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;__m128&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;px5&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_div_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;px3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;px4&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-15&#34; name=&#34;__codelineno-1-15&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-1-16&#34; name=&#34;__codelineno-1-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;__m128&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;px6&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_pow_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;px5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_set1_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;1.f&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.1593017578125f&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-17&#34; name=&#34;__codelineno-1-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;__m128&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_mul_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;px6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_set1_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;10000.f&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;255.f&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-18&#34; name=&#34;__codelineno-1-18&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-1-19&#34; name=&#34;__codelineno-1-19&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;__m128&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_blend_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;px0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x8&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-20&#34; name=&#34;__codelineno-1-20&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_storeu_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-21&#34; name=&#34;__codelineno-1-21&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-1-22&#34; name=&#34;__codelineno-1-22&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-23&#34; name=&#34;__codelineno-1-23&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sz&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;--&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-24&#34; name=&#34;__codelineno-1-24&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-25&#34; name=&#34;__codelineno-1-25&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-26&#34; name=&#34;__codelineno-1-26&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#  endif&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-27&#34; name=&#34;__codelineno-1-27&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-1-28&#34; name=&#34;__codelineno-1-28&#34;&gt;&lt;/a&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;LinearizePq&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sz&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-29&#34; name=&#34;__codelineno-1-29&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-30&#34; name=&#34;__codelineno-1-30&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;LinearizePq128&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sz&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-31&#34; name=&#34;__codelineno-1-31&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;å®ç°äº† SIMD ä¼˜åŒ–çš„æ•°å­¦å‡½æ•°ï¼ŒåŒ…æ‹¬å¯¹æ•°ã€æŒ‡æ•°å’Œå¹‚è¿ç®—ï¼Œç”¨äºæ›¿ä»£æ ‡å‡†æ•°å­¦åº“çš„å‡½æ•°ä»¥æé«˜æ€§èƒ½ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-5&#34;&gt;5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-6&#34;&gt;6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-7&#34;&gt;7&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-2-1&#34; name=&#34;__codelineno-2-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#if defined __SSE4_1__ &amp;amp;&amp;amp; defined __FMA__&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-2&#34; name=&#34;__codelineno-2-2&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-2-3&#34; name=&#34;__codelineno-2-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;__m128&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_pow_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;__m128&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;__m128&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-4&#34; name=&#34;__codelineno-2-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-5&#34; name=&#34;__codelineno-2-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_exp_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_mul_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_log_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-6&#34; name=&#34;__codelineno-2-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-7&#34; name=&#34;__codelineno-2-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#endif&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;h4 id=&#34;simd-å¯¹æ•°å‡½æ•°&#34;&gt;SIMD å¯¹æ•°å‡½æ•°&lt;a class=&#34;headerlink&#34; href=&#34;#simd-å¯¹æ•°å‡½æ•°&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;å®ç°åŸç†ï¼šä½¿ç”¨è‡ªç„¶å¯¹æ•°çš„æ•°å­¦æ€§è´¨ï¼šlog(x) = log(mantissa) + exponent, å°†æµ®ç‚¹æ•°åˆ†è§£ä¸ºå°¾æ•°å’ŒæŒ‡æ•°éƒ¨åˆ†ã€‚ç„¶åè®¡ç®—å¯¹æ•°çš„å¤šé¡¹å¼é€¼è¿‘ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-21&#34;&gt;21&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-22&#34;&gt;22&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-23&#34;&gt;23&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-24&#34;&gt;24&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-25&#34;&gt;25&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-3-1&#34; name=&#34;__codelineno-3-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;__m128&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_log_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;__m128&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-2&#34; name=&#34;__codelineno-3-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-3&#34; name=&#34;__codelineno-3-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;__m128i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;e0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_castps_si128&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-4&#34; name=&#34;__codelineno-3-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// æå–æŒ‡æ•°éƒ¨åˆ†&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-5&#34; name=&#34;__codelineno-3-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;__m128i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;e1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_srai_epi32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;e0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;23&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// å³ç§»23ä½è·å–æŒ‡æ•°&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-6&#34; name=&#34;__codelineno-3-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;__m128i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;e2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_sub_epi32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;e1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_set1_epi32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;127&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// å‡å»åç§»é‡&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-7&#34; name=&#34;__codelineno-3-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// æå–å°¾æ•°éƒ¨åˆ†å¹¶è§„æ ¼åŒ–&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-8&#34; name=&#34;__codelineno-3-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;__m128i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;e3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_and_si128&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;e0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_set1_epi32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x007fffff&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// ä¿ç•™å°¾æ•°ä½&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-9&#34; name=&#34;__codelineno-3-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;__m128i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;e4&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_or_si128&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;e3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_set1_epi32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x3f800000&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-10&#34; name=&#34;__codelineno-3-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;__m128&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;e5&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_castsi128_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;e4&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-11&#34; name=&#34;__codelineno-3-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// ä½¿ç”¨å¤šé¡¹å¼é€¼è¿‘è®¡ç®— log(mantissa)&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-12&#34; name=&#34;__codelineno-3-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;__m128&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_sub_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;e5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_set1_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;1.f&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// f = mantissa - 1&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-13&#34; name=&#34;__codelineno-3-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;__m128&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_mul_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-14&#34; name=&#34;__codelineno-3-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;__m128&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f4&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_mul_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-15&#34; name=&#34;__codelineno-3-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;__m128&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hi&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_fmadd_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_set1_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;-0.00931049621349f&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_set1_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.05206469089414f&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-16&#34; name=&#34;__codelineno-3-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;__m128&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;lo&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_fmadd_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_set1_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.47868480909345f&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_set1_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;-0.72116591947498f&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-17&#34; name=&#34;__codelineno-3-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hi&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_fmadd_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hi&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_set1_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;-0.13753123777116f&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-18&#34; name=&#34;__codelineno-3-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hi&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_fmadd_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hi&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_set1_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.24187369696082f&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-19&#34; name=&#34;__codelineno-3-19&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hi&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_fmadd_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hi&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_set1_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;-0.34730547155299f&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-20&#34; name=&#34;__codelineno-3-20&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;lo&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_fmadd_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;lo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_set1_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;1.442689881667200f&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-21&#34; name=&#34;__codelineno-3-21&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;__m128&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;r0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_mul_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;lo&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-22&#34; name=&#34;__codelineno-3-22&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;__m128&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;r1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_fmadd_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hi&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;r0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-23&#34; name=&#34;__codelineno-3-23&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;__m128&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;r2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_add_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;r1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_cvtepi32_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;e2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-24&#34; name=&#34;__codelineno-3-24&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;r2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-25&#34; name=&#34;__codelineno-3-25&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;h4 id=&#34;simd-æŒ‡æ•°å‡½æ•°&#34;&gt;SIMD æŒ‡æ•°å‡½æ•°&lt;a class=&#34;headerlink&#34; href=&#34;#simd-æŒ‡æ•°å‡½æ•°&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;å®ç°åŸç†ï¼šåˆ©ç”¨æŒ‡æ•°æ€§è´¨ï¼šexp(x) = exp(integer_part) * exp(fractional_part), ä½¿ç”¨å¤šé¡¹å¼é€¼è¿‘è®¡ç®— exp(fractional_part)ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-4-1&#34; name=&#34;__codelineno-4-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;__m128&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_exp_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;__m128&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-2&#34; name=&#34;__codelineno-4-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-3&#34; name=&#34;__codelineno-4-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// åˆ†ç¦»æ•´æ•°å’Œå°æ•°éƒ¨åˆ†&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-4&#34; name=&#34;__codelineno-4-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;__m128i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mi&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_cvtps_epi32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// æ•´æ•°éƒ¨åˆ†&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-5&#34; name=&#34;__codelineno-4-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;__m128&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mf&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_round_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_MM_FROUND_TO_NEAREST_INT&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_MM_FROUND_NO_EXC&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// å››èˆäº”å…¥&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-6&#34; name=&#34;__codelineno-4-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_sub_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mf&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// å°æ•°éƒ¨åˆ†&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-7&#34; name=&#34;__codelineno-4-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// å¤šé¡¹å¼é€¼è¿‘è®¡ç®— exp(fractional_part)&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-8&#34; name=&#34;__codelineno-4-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;__m128&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_set1_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;1.33336498402e-3f&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-9&#34; name=&#34;__codelineno-4-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_fmadd_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_set1_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;9.810352697968e-3f&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-10&#34; name=&#34;__codelineno-4-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_fmadd_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_set1_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;5.551834031939e-2f&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-11&#34; name=&#34;__codelineno-4-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_fmadd_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_set1_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.2401793301105f&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-12&#34; name=&#34;__codelineno-4-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_fmadd_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_set1_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.693144857883f&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-13&#34; name=&#34;__codelineno-4-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_fmadd_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_set1_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;1.0f&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-14&#34; name=&#34;__codelineno-4-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// é‡æ–°ç»„åˆç»“æœ&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-15&#34; name=&#34;__codelineno-4-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;__m128i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;m0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_slli_epi32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mi&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;23&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// å·¦ç§»23ä½æ„é€ æŒ‡æ•°&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-16&#34; name=&#34;__codelineno-4-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;__m128i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ri&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_castps_si128&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-17&#34; name=&#34;__codelineno-4-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;__m128i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_add_epi32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;m0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ri&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// ç»„åˆå°¾æ•°å’ŒæŒ‡æ•°&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-18&#34; name=&#34;__codelineno-4-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;__m128&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sf&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_castsi128_ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-19&#34; name=&#34;__codelineno-4-19&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-20&#34; name=&#34;__codelineno-4-20&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;h4 id=&#34;å¤šé¡¹å¼ä¼˜åŒ–&#34;&gt;å¤šé¡¹å¼ä¼˜åŒ–&lt;a class=&#34;headerlink&#34; href=&#34;#å¤šé¡¹å¼ä¼˜åŒ–&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;å¤šé¡¹å¼ä¼˜åŒ–é€šä¿—è§£é‡Šå°±æ˜¯é‡‡ç”¨æ•°å­¦æ–¹æ³•å»åœ¨ä¸€å®šåŒºåŸŸèŒƒå›´å†…ï¼Œå»é€¼è¿‘æˆ‘ä»¬çš„expå‡½æ•°ã€logå‡½æ•°ã€‚å¤šé¡¹å¼è®¡ç®—æ›´åŠ ç®€å•ã€‚è¿™ä¸ªå¯ä»¥æŸ¥çœ‹å¤§å­¦é«˜ç­‰æ•°å­¦ä¸­å­¦åˆ°çš„æ³°å‹’çº§æ•°ç›¸å…³å†…å®¹ã€‚&lt;/p&gt;
&lt;p&gt;ä¸Šé¢çš„expå’Œlogå‡½æ•°çš„å¤šé¡¹å¼é€¼è¿‘ä¸­ç”¨åˆ°çš„å¾ˆå¤šå¥‡ç‰¹çš„æ•°å€¼ï¼Œå®é™…ä¸Šæ˜¯æ•°å­¦è®¡ç®—æ¨å‡ºæ¥çš„ï¼Œæ˜¯å›ºå®šå€¼ï¼Œè¿™é‡Œå¯ä»¥å‚è€ƒå®ç°&lt;a href=&#34;https://github.com/AcademySoftwareFoundation/OpenImageIO/blob/main/src/include/OpenImageIO/fmath.h&#34;&gt;OpenImageIO/fmath&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&#34;simdè°ƒè¯•æ–¹æ³•&#34;&gt;simdè°ƒè¯•æ–¹æ³•&lt;a class=&#34;headerlink&#34; href=&#34;#simdè°ƒè¯•æ–¹æ³•&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;åœ¨ä½¿ç”¨GDBï¼ˆåŒ…æ‹¬gdbã€lldbï¼‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¸Œæœ›ä»¥æ›´å¥½çš„é˜…è¯»æ–¹å¼å‘ˆç°debugæ•°æ®å†…å®¹ï¼Œä¹Ÿå°±æ˜¯gdbçš„pretty printåŠŸèƒ½ï¼Œå¯¹äºå¸¸è§çš„æ•°æ®ç»“æ„gdbå·²ç»æ”¯æŒï¼Œä½†æ˜¯simdè¿™ç§æ•°æ®å¹¶ä¸èƒ½æ‰“å°å¾ˆå¥½ã€‚&lt;/p&gt;
&lt;p&gt;simdä¸­128ä½å®½çš„æ•°æ®ã€256ã€512ä½çš„æ•°æ®ï¼Œä»¥128ä¸ºä¾‹ï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ•°æ®åˆ’åˆ†ï¼š&lt;/p&gt;
&lt;p&gt;64x2 â€“ two lanes of 64-bit integers,
32x4 â€“ four lanes of 32-bit integers,
16x8 â€“ eight lanes of 16-bit integers,
8x16 â€“ sixteen lanes of 8-bit integers.&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œéœ€è¦åŠ å…¥pretty printï¼Œä¸ç„¶æ‰“å°å‡ºæ¥å°±æ˜¯ï¼š
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-5&#34;&gt;5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-6&#34;&gt;6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-7&#34;&gt;7&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-5-1&#34; name=&#34;__codelineno-5-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;kr&#34;&gt;__m128i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vPxa&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_loadu_si128&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;__m128i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pPixels&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-2&#34; name=&#34;__codelineno-5-2&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-5-3&#34; name=&#34;__codelineno-5-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;gdb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vPxa&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-4&#34; name=&#34;__codelineno-5-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;$1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;8341503235886217471&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;8629733612088195327&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-5&#34; name=&#34;__codelineno-5-5&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-5-6&#34; name=&#34;__codelineno-5-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;lldb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vPxa&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-7&#34; name=&#34;__codelineno-5-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;__m128i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vPxa&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;8341503235886217471&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;8629733612088195327&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
è¿™é‡Œ&lt;a href=&#34;https://wolf.nereid.pl/posts/simd-debugging/&#34;&gt;simd-debugging&lt;/a&gt;å·²ç»ä¸ºæˆ‘ä»¬å®ç°äº†ï¼ŒåŠ å…¥pretty printåçš„æ‰“å°ï¼š
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-21&#34;&gt;21&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-22&#34;&gt;22&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-23&#34;&gt;23&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-24&#34;&gt;24&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-25&#34;&gt;25&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-26&#34;&gt;26&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-27&#34;&gt;27&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-28&#34;&gt;28&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-29&#34;&gt;29&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-30&#34;&gt;30&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-31&#34;&gt;31&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-32&#34;&gt;32&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-33&#34;&gt;33&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-34&#34;&gt;34&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-35&#34;&gt;35&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-36&#34;&gt;36&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-37&#34;&gt;37&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-38&#34;&gt;38&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-39&#34;&gt;39&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-40&#34;&gt;40&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-41&#34;&gt;41&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-42&#34;&gt;42&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-43&#34;&gt;43&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-44&#34;&gt;44&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-45&#34;&gt;45&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-46&#34;&gt;46&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-47&#34;&gt;47&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-48&#34;&gt;48&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-6-1&#34; name=&#34;__codelineno-6-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;lldb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vPxa&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-2&#34; name=&#34;__codelineno-6-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;__m128i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vPxa&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;8341503235886217471&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;8629733612088195327&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-3&#34; name=&#34;__codelineno-6-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;lldb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;command&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;script&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;import&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;~/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;simd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;py&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-4&#34; name=&#34;__codelineno-6-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;lldb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vPxa&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-5&#34; name=&#34;__codelineno-6-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;__m128i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vPxa&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-6&#34; name=&#34;__codelineno-6-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;u8x16&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-7&#34; name=&#34;__codelineno-6-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;255&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-8&#34; name=&#34;__codelineno-6-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;248&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-9&#34; name=&#34;__codelineno-6-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;196&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-10&#34; name=&#34;__codelineno-6-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;115&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-11&#34; name=&#34;__codelineno-6-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;255&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-12&#34; name=&#34;__codelineno-6-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;248&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-13&#34; name=&#34;__codelineno-6-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;194&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-14&#34; name=&#34;__codelineno-6-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;7&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;115&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-15&#34; name=&#34;__codelineno-6-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;255&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-16&#34; name=&#34;__codelineno-6-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;9&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;248&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-17&#34; name=&#34;__codelineno-6-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;195&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-18&#34; name=&#34;__codelineno-6-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;11&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;118&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-19&#34; name=&#34;__codelineno-6-19&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;12&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;255&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-20&#34; name=&#34;__codelineno-6-20&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;13&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;248&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-21&#34; name=&#34;__codelineno-6-21&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;14&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;194&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-22&#34; name=&#34;__codelineno-6-22&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;15&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;119&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-23&#34; name=&#34;__codelineno-6-23&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-24&#34; name=&#34;__codelineno-6-24&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i8x16&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-25&#34; name=&#34;__codelineno-6-25&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;-1&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-26&#34; name=&#34;__codelineno-6-26&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;-8&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-27&#34; name=&#34;__codelineno-6-27&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;-60&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-28&#34; name=&#34;__codelineno-6-28&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;115&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-29&#34; name=&#34;__codelineno-6-29&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;-1&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-30&#34; name=&#34;__codelineno-6-30&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;-8&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-31&#34; name=&#34;__codelineno-6-31&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;-62&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-32&#34; name=&#34;__codelineno-6-32&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;7&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;115&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-33&#34; name=&#34;__codelineno-6-33&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;-1&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-34&#34; name=&#34;__codelineno-6-34&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;9&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;-8&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-35&#34; name=&#34;__codelineno-6-35&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;-61&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-36&#34; name=&#34;__codelineno-6-36&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;11&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;118&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-37&#34; name=&#34;__codelineno-6-37&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;12&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;-1&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-38&#34; name=&#34;__codelineno-6-38&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;13&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;-8&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-39&#34; name=&#34;__codelineno-6-39&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;14&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;-62&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-40&#34; name=&#34;__codelineno-6-40&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;15&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;119&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-41&#34; name=&#34;__codelineno-6-41&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-42&#34; name=&#34;__codelineno-6-42&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;u16x8&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;63743&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;29636&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;63743&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;29634&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;63743&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;30403&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;63743&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;7&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;30658&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-43&#34; name=&#34;__codelineno-6-43&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i16x8&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;-1793&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;29636&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;-1793&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;29634&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;-1793&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;30403&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;-1793&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;7&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;30658&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-44&#34; name=&#34;__codelineno-6-44&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;u32x4&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1942288639&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1942157567&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1992554751&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2009266431&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-45&#34; name=&#34;__codelineno-6-45&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i32x4&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1942288639&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1942157567&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1992554751&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2009266431&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-46&#34; name=&#34;__codelineno-6-46&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;u64x2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;8341503235886217471&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;8629733612088195327&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-47&#34; name=&#34;__codelineno-6-47&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i64x2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;8341503235886217471&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;8629733612088195327&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-48&#34; name=&#34;__codelineno-6-48&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/p&gt;
&lt;p&gt;å…³äºgdb pretty printä¹‹å‰ä¹Ÿå†™è¿‡ä¸€ç¯‡æ–‡ç« ï¼š&lt;a href=&#34;https://zhuanlan.zhihu.com/p/662099267&#34;&gt;GDBå¦‚ä½•ä¼˜åŒ–æ˜¾ç¤ºc++ STLæ•°æ®ç»“æ„çš„å€¼&lt;/a&gt;ã€‚ã€&lt;/p&gt;
&lt;p&gt;æ„Ÿè°¢æ‚¨çš„é˜…è¯»ï¼ï¼&lt;/p&gt;
&lt;style&gt;
.related-posts {
  margin-top: 1.5rem;
  padding-top: 0.75rem;
  border-top: 1px solid rgba(0,0,0,0.1);
  max-height: none !important; /* é˜²æ­¢Safarié”™è¯¯è®¡ç®—é«˜åº¦ */
  overflow: visible !important; /* é˜²æ­¢å†…å®¹è¢«æˆªæ–­ */
}
.related-posts h3 {
  margin-top: 0;
  margin-bottom: 0.5rem;
  font-size: 1.2rem;
  font-weight: 500;
  line-height: 1.3;
}
.related-posts ul {
  margin: 0 0 0.5rem 0 !important; /* å¼ºåˆ¶è¦†ç›–å¯èƒ½çš„å†²çªæ ·å¼ */
  padding-left: 1.5rem;
  list-style-position: outside;
}
.related-posts li {
  margin-bottom: 0.25rem;
  line-height: 1.4;
}
/* æš—è‰²æ¨¡å¼é€‚é… */
[data-md-color-scheme=&#34;slate&#34;] .related-posts {
  border-top-color: rgba(255,255,255,0.1);
}
/* Safariç‰¹å®šä¿®å¤ */
@supports (-webkit-hyphens:none) {
  .related-posts {
    display: block;
    position: relative;
    height: auto !important;
  }
  .related-posts ul {
    position: static;
  }
}
&lt;/style&gt;
&lt;div class=&#34;related-posts&#34;&gt;
&lt;h3&gt;ğŸ“š ç›¸å…³æ–‡ç« æ¨è&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/cutlassåº“ä¸­çš„å°¾å£°èåˆepilogue-fusionå’Œepilogue-visitor-trees/&#34; target=&#34;_blank&#34;&gt;CUTLASSåº“ä¸­çš„å°¾å£°èåˆ(Epilogue Fusion)å’ŒEpilogue Visitor Trees&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/cå¦‚ä½•å®ç°fp16ieee754-2008ç±»å‹/&#34; target=&#34;_blank&#34;&gt;C++å¦‚ä½•å®ç°FP16ï¼ˆIEEE754-2008ï¼‰ç±»å‹ï¼Ÿ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/helix-gptå¦‚ä½•å®ç°ai-codeä»¥åŠå¦‚ä½•è°ƒè¯•/&#34; target=&#34;_blank&#34;&gt;helix-gptå¦‚ä½•å®ç°AI codeä»¥åŠå¦‚ä½•è°ƒè¯•?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/mit-ç»å…¸è®²åº§how-to-speak---patrick-winston/&#34; target=&#34;_blank&#34;&gt;MIT ç»å…¸è®²åº§ï¼šHow to Speak - Patrick Winston&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/300è¡Œå®ç°ä¸€ä¸ªboundedspscqueue/&#34; target=&#34;_blank&#34;&gt;300è¡Œå®ç°ä¸€ä¸ªBoundedSPSCQueue&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;</description>
      <link>https://github.com/KenForever1/blog/%E5%BC%80%E5%8F%91%E6%8A%80%E6%B3%95%E4%B9%8Bpow%E8%AE%A1%E7%AE%97simd%E4%BC%98%E5%8C%96/</link>
      <pubDate>Sat, 29 Nov 2025 00:00:00 +0000</pubDate>
      <source url="https://github.com/KenForever1/feed_rss_updated.xml">KenForever1</source>
      
      <guid isPermaLink="true">https://github.com/KenForever1/blog/%E5%BC%80%E5%8F%91%E6%8A%80%E6%B3%95%E4%B9%8Bpow%E8%AE%A1%E7%AE%97simd%E4%BC%98%E5%8C%96/</guid>
      
    </item>
    
    <item>
      <title>å¡”ç€ï¼ˆTutterï¼‰è‡ªæŒ‡å…¬å¼æ˜¯ä»€ä¹ˆï¼Ÿ</title>
      
      
        
      <author>KenForever1</author>
        
      
      
      
      <description>&lt;h2 id=&#34;tutterå…¬å¼å¹¶ä¸é«˜æ·±è«æµ‹&#34;&gt;Tutterå…¬å¼å¹¶ä¸é«˜æ·±è«æµ‹&lt;a class=&#34;headerlink&#34; href=&#34;#tutterå…¬å¼å¹¶ä¸é«˜æ·±è«æµ‹&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;ä»Šå¤©ï¼Œå­¦ä¹ Tracyçš„æ—¶å€™ä»‹ç»ä¾‹ç¨‹è®²åˆ°äº†è¿™ä¸ªå…¬å¼ï¼Œå½“æ—¶å¾ˆè¿·ç³Šï¼Œè§‰å¾—è¿™ä¸ªå…¬å¼é«˜æ·±è«æµ‹ã€‚ç„¶åæŸ¥é˜…èµ„æ–™å­¦ä¹ äº†ä¸€ä¸‹åŸç†ï¼Œåˆ†äº«è®°å½•ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;!-- more --&gt;

&lt;p&gt;&lt;img alt=&#34;&#34; src=&#34;https://raw.githubusercontent.com/KenForever1/CDN/main/tutter-formula.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;å›¾ç‰‡ä¸Šæ–¹å°±æ˜¯å¡”ç€ï¼ˆTutterï¼‰è‡ªæŒ‡å…¬å¼ï¼Œæ„æ€å°±æ˜¯ç»™ä»–ä¸€ä¸ªç‰¹å®šçš„æ•°å­—Kï¼Œç„¶åé€šè¿‡è¿™ä¸ªå…¬å¼è®¡ç®—xå€¼å’Œyå€¼åæ ‡ç‚¹çš„å€¼ï¼Œå¯ä»¥å¾—åˆ°17*106åƒç´ æ ¼å­çš„é»‘ç™½å›¾ç‰‡ã€‚ï¼ˆ0è¡¨ç¤ºç™½è‰²ï¼Œ1è¡¨ç¤ºé»‘è‰²ï¼‰ï¼Œå¯ä»¥ç”»å‡ºè¿™ä¸ªå…¬å¼ã€‚ä¹Ÿå°±æ˜¯å›¾ç‰‡ä¸‹æ–¹çš„æ¸²æŸ“å›¾ï¼Œæ˜¯ä¸æ˜¯å¾ˆç¥å¥‡ï¼ï¼&lt;/p&gt;
&lt;p&gt;ä¸çœ‹æ•°å­¦åŸç†å¦‚ä½•å·§å¦™çš„æ„é€ è¿™ä¸ªå…¬å¼ï¼Œæˆ‘ä»¬åªçœ‹å…¬å¼é‡Œé¢æœ‰17ä¹˜ä»¥xï¼Œyæ¨¡è¿ç®—17ã€‚è¿™ä¸å°±æ˜¯åæ ‡ç‚¹çš„ç§»åŠ¨å—ï¼Ÿ&lt;/p&gt;
&lt;p&gt;æ•´ä¸ªå›¾ç‰‡å°±æ˜¯17åˆ—ä¹˜ä»¥106è¡Œçš„ç‚¹æ ¼æ„æˆï¼Œæˆ‘ä»¬åªè¦åœ¨è¿™ä¸ªç‚¹æ ¼ä¸Šç”»å‡ºæ¥æˆ‘ä»¬æƒ³è¦çš„å›¾ç‰‡ï¼Œå†æŠŠç‚¹æ ¼ä¸Šçš„æ•°å­—æŒ‰ç…§å…ˆè¡Œååˆ—çš„é¡ºåºç»„æˆä¸€ä¸ªæ•°å­—Mï¼Œå†ä¹˜ä»¥17å°±å¯ä»¥å¾—åˆ°Kå€¼ã€‚&lt;/p&gt;
&lt;p&gt;çœ‹ä¸ªä¾‹å­å°±æ˜ç™½äº†ï¼š
&lt;img alt=&#34;&#34; src=&#34;https://raw.githubusercontent.com/KenForever1/CDN/main/tutter_1.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;&#34; src=&#34;https://raw.githubusercontent.com/KenForever1/CDN/main/tutter_2.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://en.wikipedia.org/wiki/Tupper%27s_self-referential_formula&#34;&gt;wikipediaä»‹ç»é‡Œé¢çš„ä¸€å¼ å›¾&lt;/a&gt;ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;&#34; src=&#34;https://raw.githubusercontent.com/KenForever1/CDN/main/tutter_4.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;é¦–å…ˆæœ‰å‡ ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å…¬å¼å·¦è¾¹çš„1/2å®é™…ä¸Šå¯ä»¥æ˜¯0åˆ°1ä¹‹é—´ä»»æ„æ•°ï¼Œä½œè€…é‡‡ç”¨1/2è¿™ä¸ªå€¼è®©å…¬å¼ä¹Ÿå¤šè’™ä¸Šäº†ä¸€ä¸ªè¿·é›¾ã€‚å› ä¸ºå¯¹2å–æ¨¡è¿ç®—ï¼Œåªä¼šå‡ºç°0å’Œ1ä¸¤ç§ç»“æœï¼Œä¹Ÿå°±æ˜¯é»‘ç™½ä¸¤ç§é¢œè‰²ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è¿™ä¸ªå…¬å¼ä¸­çš„17å°±æ˜¯å›¾ç‰‡çš„é«˜åº¦ï¼Œ106å°±æ˜¯å›¾ç‰‡çš„å®½ã€‚Kå€¼å…¶å®ä¿å­˜äº†å›¾ç‰‡çš„äºŒè¿›åˆ¶æ•°æ®ä¿¡æ¯ï¼Œåˆ©ç”¨è¿™ä¸ªå…¬å¼å¯ä»¥è¿˜åŸå‡ºæ¯ä¸ªåæ ‡ç‚¹çš„é¢œè‰²å€¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¦‚æœä½ è¦ç”»æ›´å¤§çš„å›¾ç‰‡ï¼Œè¶…è¿‡17x106ï¼Œä½ ä¹Ÿå¯ä»¥æ›´æ”¹å…¬å¼ï¼ŒKå€¼èŒƒå›´ä¹Ÿä¼šå˜å¤§ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥æ ¹æ®æƒ³è¦çš„å›¾ç‰‡ï¼Œè®¡ç®—å‡ºä¸åŒçš„Kå€¼ï¼Œå°±å¯ä»¥æ¸²æŸ“ä¸åŒçš„å›¾ç‰‡ã€‚æ¯”å¦‚ï¼š&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸åŒçš„Kå€¼å¯ä»¥ç”»å‡ºä¸åŒçš„æ•ˆæœ, å¯ä»¥æ‰§è¡Œä¸‹pythonä»£ç ï¼Œä¹Ÿå¯ä»¥æŠŠKå€¼å¤åˆ¶åˆ°ç½‘ç«™é‡Œé¢&lt;a href=&#34;https://keelyhill.github.io/tuppers-formula/&#34;&gt;keelyhill.github.io/tuppers-formula&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;&#34; src=&#34;https://raw.githubusercontent.com/KenForever1/CDN/main/tutter_3.png&#34; /&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Python&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-21&#34;&gt;21&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-22&#34;&gt;22&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-23&#34;&gt;23&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-24&#34;&gt;24&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-25&#34;&gt;25&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-26&#34;&gt;26&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-27&#34;&gt;27&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-28&#34;&gt;28&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-29&#34;&gt;29&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-30&#34;&gt;30&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-31&#34;&gt;31&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-32&#34;&gt;32&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-0-1&#34; name=&#34;__codelineno-0-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;# https://github.com/UlrikHjort/Tuppers-self-referential-formula/blob/master/Tupper.py&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-2&#34; name=&#34;__codelineno-0-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;# Tupper&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-3&#34; name=&#34;__codelineno-0-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;k1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4858450636189713423582095962494202044581400587983244549483093085061934704708809928450644769865524364849997247024915119110411605739177407856919754326571855442057210445735883681829823754139634338225199452191651284348332905131193199953502413758765239264874613394906870130562295813219481113685339535565290850023875092856892694555974281546386510730049106723058933586052544096664351265349363643957125565695936815184334857605266940161251266951421550539554519153785457525756590740540157929001765967965480064427829131488548259914721248506352686630476300&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-4&#34; name=&#34;__codelineno-0-4&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-5&#34; name=&#34;__codelineno-0-5&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-6&#34; name=&#34;__codelineno-0-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;# Pacman&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-7&#34; name=&#34;__codelineno-0-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;k2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;144520248970897582847942537337194567481277782215150702479718813968549088735682987348888251320905766438178883231976923440016667764749242125128995265907053708020473915320841631792025549005418004768657201699730466383394901601374319715520996181145249781945019068359500510657804325640801197867556863142280259694206254096081665642417367403946384170774537427319606443899923010379398938675025786929455234476319291860957618345432248004921728033349419816206749854472038193939738513848960476759782673313437697051994580681869819330446336774047268864&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-8&#34; name=&#34;__codelineno-0-8&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-9&#34; name=&#34;__codelineno-0-9&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-10&#34; name=&#34;__codelineno-0-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;# Euler&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-11&#34; name=&#34;__codelineno-0-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;k3&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2352035939949658122140829649197960929306974813625028263292934781954073595495544614140648457342461564887325223455620804204796011434955111022376601635853210476633318991990462192687999109308209472315419713652238185967518731354596984676698288025582563654632501009155760415054499960&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-12&#34; name=&#34;__codelineno-0-12&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-13&#34; name=&#34;__codelineno-0-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;# Assign k1,k2, k3 to k to get desired image&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-14&#34; name=&#34;__codelineno-0-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;k&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;k1&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-15&#34; name=&#34;__codelineno-0-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;width&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;106&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-16&#34; name=&#34;__codelineno-0-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;height&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;17&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-17&#34; name=&#34;__codelineno-0-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;scale&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-18&#34; name=&#34;__codelineno-0-18&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-19&#34; name=&#34;__codelineno-0-19&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;fname&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;quot;foo&amp;quot;&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-20&#34; name=&#34;__codelineno-0-20&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;image&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Image&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;RGB&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;width&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;height&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;255&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;255&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;255&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-21&#34; name=&#34;__codelineno-0-21&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-22&#34; name=&#34;__codelineno-0-22&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;# è¿™é‡Œæä¾›çš„Kå€¼æŒ‰ç…§å…¬å¼ç”»å‡ºæ¥æ˜¯å€’ç€çš„é•œåƒå›¾ç‰‡ï¼Œæ‰€ä»¥ä»£ç é‡Œé¢y = height-y-1ä¸Šä¸‹ç¿»è½¬äº†ä¸€ä¸‹&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-23&#34; name=&#34;__codelineno-0-23&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;range&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;width&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-24&#34; name=&#34;__codelineno-0-24&#34;&gt;&lt;/a&gt;    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;y&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;range&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;height&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-25&#34; name=&#34;__codelineno-0-25&#34;&gt;&lt;/a&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;k&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;//&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;17&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;//&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;**&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;17&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;%&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;17&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;%&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-26&#34; name=&#34;__codelineno-0-26&#34;&gt;&lt;/a&gt;            &lt;span class=&#34;c1&#34;&gt;# Image need to be flipped vertically - therefore y = height-y-1&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-27&#34; name=&#34;__codelineno-0-27&#34;&gt;&lt;/a&gt;            &lt;span class=&#34;n&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;putpixel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;height&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-28&#34; name=&#34;__codelineno-0-28&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-29&#34; name=&#34;__codelineno-0-29&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-30&#34; name=&#34;__codelineno-0-30&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;#scale up image&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-31&#34; name=&#34;__codelineno-0-31&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;image&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;resize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;width&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;scale&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;height&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;scale&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-32&#34; name=&#34;__codelineno-0-32&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;save&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fname&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;.png&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;h2 id=&#34;å‚è€ƒèµ„æ–™&#34;&gt;å‚è€ƒèµ„æ–™&lt;a class=&#34;headerlink&#34; href=&#34;#å‚è€ƒèµ„æ–™&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;https://www.zhihu.com/question/35867114&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;https://en.wikipedia.org/wiki/Tupper%27s_self-referential_formula&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;https://keelyhill.github.io/tuppers-formula/?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;https://github.com/UlrikHjort/Tuppers-self-referential-formula/blob/master/Tupper.py&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;style&gt;
.related-posts {
  margin-top: 1.5rem;
  padding-top: 0.75rem;
  border-top: 1px solid rgba(0,0,0,0.1);
  max-height: none !important; /* é˜²æ­¢Safarié”™è¯¯è®¡ç®—é«˜åº¦ */
  overflow: visible !important; /* é˜²æ­¢å†…å®¹è¢«æˆªæ–­ */
}
.related-posts h3 {
  margin-top: 0;
  margin-bottom: 0.5rem;
  font-size: 1.2rem;
  font-weight: 500;
  line-height: 1.3;
}
.related-posts ul {
  margin: 0 0 0.5rem 0 !important; /* å¼ºåˆ¶è¦†ç›–å¯èƒ½çš„å†²çªæ ·å¼ */
  padding-left: 1.5rem;
  list-style-position: outside;
}
.related-posts li {
  margin-bottom: 0.25rem;
  line-height: 1.4;
}
/* æš—è‰²æ¨¡å¼é€‚é… */
[data-md-color-scheme=&#34;slate&#34;] .related-posts {
  border-top-color: rgba(255,255,255,0.1);
}
/* Safariç‰¹å®šä¿®å¤ */
@supports (-webkit-hyphens:none) {
  .related-posts {
    display: block;
    position: relative;
    height: auto !important;
  }
  .related-posts ul {
    position: static;
  }
}
&lt;/style&gt;
&lt;div class=&#34;related-posts&#34;&gt;
&lt;h3&gt;ğŸ“š ç›¸å…³æ–‡ç« æ¨è&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/netcapè°ƒè¯•/&#34; target=&#34;_blank&#34;&gt;netcapè°ƒè¯•&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/ä»deepseekå¼€æºåº“3fsä¸­å­¦ä¹ fuseçš„ä½¿ç”¨-å¦‚ä½•å¼€å‘ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿä¸€/&#34; target=&#34;_blank&#34;&gt;ä»Deepseekå¼€æºåº“3FSä¸­å­¦ä¹ fuseçš„ä½¿ç”¨-å¦‚ä½•å¼€å‘ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼ˆä¸€ï¼‰&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/300è¡Œå®ç°ä¸€ä¸ªboundedspscqueue/&#34; target=&#34;_blank&#34;&gt;300è¡Œå®ç°ä¸€ä¸ªBoundedSPSCQueue&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/helix-gptå¦‚ä½•å®ç°ai-codeä»¥åŠå¦‚ä½•è°ƒè¯•/&#34; target=&#34;_blank&#34;&gt;helix-gptå¦‚ä½•å®ç°AI codeä»¥åŠå¦‚ä½•è°ƒè¯•?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/mit-ç»å…¸è®²åº§how-to-speak---patrick-winston/&#34; target=&#34;_blank&#34;&gt;MIT ç»å…¸è®²åº§ï¼šHow to Speak - Patrick Winston&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;</description>
      <link>https://github.com/KenForever1/blog/%E5%A1%94%E7%8F%80tutter%E8%87%AA%E6%8C%87%E5%85%AC%E5%BC%8F%E6%98%AF%E4%BB%80%E4%B9%88/</link>
      <pubDate>Sun, 23 Nov 2025 00:00:00 +0000</pubDate>
      <source url="https://github.com/KenForever1/feed_rss_updated.xml">KenForever1</source>
      
      <guid isPermaLink="true">https://github.com/KenForever1/blog/%E5%A1%94%E7%8F%80tutter%E8%87%AA%E6%8C%87%E5%85%AC%E5%BC%8F%E6%98%AF%E4%BB%80%E4%B9%88/</guid>
      
    </item>
    
    <item>
      <title>pyo3å®ç°pythonå’Œrustè·¨è¯­è¨€è°ƒç”¨</title>
      
      
        
      <author>KenForever1</author>
        
      
      
      
      <description>&lt;!-- more --&gt;

&lt;h2 id=&#34;pyo3æ˜¯ä»€ä¹ˆ&#34;&gt;pyo3æ˜¯ä»€ä¹ˆï¼Ÿ&lt;a class=&#34;headerlink&#34; href=&#34;#pyo3æ˜¯ä»€ä¹ˆ&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;pyo3æ˜¯ä¸€ä¸ªRuståº“ï¼Œå¯ä»¥å®ç°pythonå’Œrustä¹‹é—´çš„ç›¸äº’è°ƒç”¨ã€‚å¯ä»¥ä½¿ç”¨Rustä¸ºPythonç¼–å†™æ‰©å±•ã€‚
æ•™ç¨‹å¯ä»¥å‚è€ƒ&lt;a href=&#34;https://pyo3.rs/main/getting-started.html&#34;&gt;pyo3 getting-started&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å°±è¡Œï¼Œpybind11ä¸€æ ·ï¼Œpybind11æ˜¯ä¸€ä¸ªc++åº“ï¼Œæä¾›äº†c++å’Œpythonä¹‹é—´çš„ç›¸äº’è°ƒç”¨ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ffiéœ€è¦è€ƒè™‘ä»€ä¹ˆé—®é¢˜&#34;&gt;FFIéœ€è¦è€ƒè™‘ä»€ä¹ˆé—®é¢˜ï¼Ÿ&lt;a class=&#34;headerlink&#34; href=&#34;#ffiéœ€è¦è€ƒè™‘ä»€ä¹ˆé—®é¢˜&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;pythonå’Œrustä¹‹é—´çš„ç›¸äº’è°ƒç”¨ï¼Œéœ€è¦è€ƒè™‘çš„é—®é¢˜æœ‰ï¼š
çº¿ç¨‹å®‰å…¨ï¼Œçº¿ç¨‹é—´ç«äº‰ã€‚pyo3é’ˆå¯¹ä¸åŒçš„pythonç‰ˆæœ¬å®ç°ï¼Œå®ç°äº†GILå’Œno GILã€‚
æ•°æ®ç»“æ„çš„ç”Ÿå‘½å‘¨æœŸï¼Œpyo3å°è£…äº†æ™ºèƒ½æŒ‡é’ˆï¼Œé€šè¿‡è¿‡ç¨‹å®ç”Ÿæˆå‡½æ•°&lt;/p&gt;
&lt;h2 id=&#34;pythonçš„no-gil&#34;&gt;pythonçš„no GIL&lt;a class=&#34;headerlink&#34; href=&#34;#pythonçš„no-gil&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;GILå°±æ˜¯Pythonçš„å…¨å±€è§£é‡Šå™¨é”ï¼Œå› æ­¤pythonçš„å¤šçº¿ç¨‹å®é™…æ˜¯ä¼ªå¤šçº¿ç¨‹ï¼Œä¸èƒ½åƒc++ç­‰å…¶å®ƒè¯­è¨€çš„å¤šçº¿ç¨‹ä¸€æ ·çœŸæ­£çš„å®ç°å¹¶å‘ã€‚&lt;/p&gt;
&lt;p&gt;pythonçš„no GILæ˜¯CPython 3.14æå‡ºçš„ä¸å†ä¾èµ–å…¨å±€è§£é‡Šå™¨é”çš„å¤šçº¿ç¨‹å®ç°ï¼Œæå‡å¹¶å‘ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;CPython 3.14 declared support for the &amp;ldquo;free-threaded&amp;rdquo; build of CPython that does not rely on the global interpreter lock (often referred to as the GIL) for thread safety. &lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;å¦‚ä½•ç¼–è¯‘ä¸€ä¸ªå¤šä¸ªç‰ˆæœ¬éƒ½å¯ä»¥ä½¿ç”¨çš„wheelåŒ…ä¸ä»€ä¹ˆç‰¹æ€§æœ‰å…³&#34;&gt;å¦‚ä½•ç¼–è¯‘ä¸€ä¸ªå¤šä¸ªç‰ˆæœ¬éƒ½å¯ä»¥ä½¿ç”¨çš„wheelåŒ…ï¼Ÿä¸ä»€ä¹ˆç‰¹æ€§æœ‰å…³ï¼Ÿ&lt;a class=&#34;headerlink&#34; href=&#34;#å¦‚ä½•ç¼–è¯‘ä¸€ä¸ªå¤šä¸ªç‰ˆæœ¬éƒ½å¯ä»¥ä½¿ç”¨çš„wheelåŒ…ä¸ä»€ä¹ˆç‰¹æ€§æœ‰å…³&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬å¹³æ—¶ä½¿ç”¨pythonä¾èµ–å®‰è£…åŒ…æ—¶å¯èƒ½ä¼šæ³¨æ„åˆ°ï¼Œæœ‰äº›wheelæ–‡ä»¶å‘½åä¸Šæ˜¯æŒ‡æ˜äº†pythonç‰ˆæœ¬è¦æ±‚çš„ï¼Œæ¯”å¦‚python3.8çš„wheelåŒ…å’Œpython3.10ç­‰æ˜¯ä¸åŒçš„æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;æ ‡å‡†Python ABIé€šå¸¸è¦æ±‚æ¨¡å—é’ˆå¯¹ç‰¹å®šPythonç‰ˆæœ¬ç¼–è¯‘ï¼Œè€ŒABI3é€šè¿‡å†»ç»“å…³é”®äºŒè¿›åˆ¶æ¥å£å®ç°è·¨ç‰ˆæœ¬å…¼å®¹ï¼Œé™ä½äº†ç»´æŠ¤æˆæœ¬ã€‚&lt;/p&gt;
&lt;p&gt;é»˜è®¤æƒ…å†µä¸‹ï¼ŒPythonæ‰©å±•æ¨¡å—åªèƒ½ä¸ç¼–è¯‘å®ƒä»¬æ—¶æ‰€é’ˆå¯¹çš„Pythonç‰ˆæœ¬ä¸€èµ·ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œä¸ºPython 3.5æ„å»ºçš„æ‰©å±•æ¨¡å—æ— æ³•åœ¨Python 3.8ä¸­å¯¼å…¥ã€‚&lt;a href=&#34;https://www.python.org/dev/peps/pep-0384/&#34;&gt;PEP 384&lt;/a&gt;å¼•å…¥äº†æœ‰é™Python APIçš„æ¦‚å¿µï¼Œè¯¥APIå°†å…·æœ‰ç¨³å®šçš„ABIï¼Œä½¿ä½¿ç”¨å®ƒæ„å»ºçš„æ‰©å±•æ¨¡å—èƒ½å¤Ÿåœ¨å¤šä¸ªPythonç‰ˆæœ¬ä¸­ä½¿ç”¨ã€‚è¿™ä¹Ÿè¢«ç§°ä¸ºabi3ã€‚&lt;/p&gt;
&lt;p&gt;å…¶ç¼ºç‚¹æ˜¯ï¼ŒPyO3æ— æ³•ä½¿ç”¨é‚£äº›ä¾èµ–äºé’ˆå¯¹å·²çŸ¥ç¡®åˆ‡Pythonç‰ˆæœ¬è¿›è¡Œç¼–è¯‘çš„ä¼˜åŒ–ã€‚pyo3ä»…è°ƒç”¨å±äºç¨³å®šAPIçš„Python C-APIå‡½æ•°ã€‚&lt;/p&gt;
&lt;p&gt;ç”±äºå•ä¸ªabi3è½®åŒ…å¯ç”¨äºå¤šä¸ªä¸åŒçš„Pythonç‰ˆæœ¬ï¼ŒPyO3æä¾›äº†abi3-py37ã€abi3-py38ã€abi3-py39ç­‰åŠŸèƒ½æ ‡å¿—ï¼Œç”¨äºä¸ºæ‚¨çš„abi3è½®åŒ…è®¾ç½®æœ€ä½æ‰€éœ€çš„Pythonç‰ˆæœ¬ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨è®¾ç½®äº†abi3-py37åŠŸèƒ½ï¼Œæ‚¨çš„æ‰©å±•è½®åŒ…å¯ç”¨äºä»Python 3.7åŠæ›´é«˜ç‰ˆæœ¬çš„æ‰€æœ‰Python 3ç‰ˆæœ¬ã€‚maturinå’Œsetuptools-rustä¼šç»™è½®åŒ…å‘½åä¸ºç±»ä¼¼my-extension-1.0-cp37-abi3-manylinux2020_x86_64.whlçš„åç§°ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä¸€ä¸ªpythonåŒ…å¦‚ä½•æµ‹è¯•å¤šä¸ªç‰ˆæœ¬&#34;&gt;ä¸€ä¸ªpythonåŒ…ï¼Œå¦‚ä½•æµ‹è¯•å¤šä¸ªç‰ˆæœ¬ï¼Ÿ&lt;a class=&#34;headerlink&#34; href=&#34;#ä¸€ä¸ªpythonåŒ…å¦‚ä½•æµ‹è¯•å¤šä¸ªç‰ˆæœ¬&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://nox.thea.codes/en/stable/index.html&#34;&gt;nox&lt;/a&gt;ï¼Œå¯ä»¥è‡ªåŠ¨åŒ–çš„åœ¨å¤šä¸ªpythonç‰ˆæœ¬ä¸‹è¿è¡Œæµ‹è¯•ã€‚é€šè¿‡pyè„šæœ¬é…ç½®ã€‚&lt;/p&gt;
&lt;style&gt;
.related-posts {
  margin-top: 1.5rem;
  padding-top: 0.75rem;
  border-top: 1px solid rgba(0,0,0,0.1);
  max-height: none !important; /* é˜²æ­¢Safarié”™è¯¯è®¡ç®—é«˜åº¦ */
  overflow: visible !important; /* é˜²æ­¢å†…å®¹è¢«æˆªæ–­ */
}
.related-posts h3 {
  margin-top: 0;
  margin-bottom: 0.5rem;
  font-size: 1.2rem;
  font-weight: 500;
  line-height: 1.3;
}
.related-posts ul {
  margin: 0 0 0.5rem 0 !important; /* å¼ºåˆ¶è¦†ç›–å¯èƒ½çš„å†²çªæ ·å¼ */
  padding-left: 1.5rem;
  list-style-position: outside;
}
.related-posts li {
  margin-bottom: 0.25rem;
  line-height: 1.4;
}
/* æš—è‰²æ¨¡å¼é€‚é… */
[data-md-color-scheme=&#34;slate&#34;] .related-posts {
  border-top-color: rgba(255,255,255,0.1);
}
/* Safariç‰¹å®šä¿®å¤ */
@supports (-webkit-hyphens:none) {
  .related-posts {
    display: block;
    position: relative;
    height: auto !important;
  }
  .related-posts ul {
    position: static;
  }
}
&lt;/style&gt;
&lt;div class=&#34;related-posts&#34;&gt;
&lt;h3&gt;ğŸ“š ç›¸å…³æ–‡ç« æ¨è&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/rust-facetåº“å¦‚ä½•å®ç°è¿è¡Œæ—¶åå°„/&#34; target=&#34;_blank&#34;&gt;rust-facetåº“å¦‚ä½•å®ç°è¿è¡Œæ—¶åå°„&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/cå¼€å‘å¸¸è§é—®é¢˜ä¹‹abiå…¼å®¹æ€§é—®é¢˜/&#34; target=&#34;_blank&#34;&gt;C++å¼€å‘å¸¸è§é—®é¢˜ä¹‹ABIå…¼å®¹æ€§é—®é¢˜&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/mit-ç»å…¸è®²åº§how-to-speak---patrick-winston/&#34; target=&#34;_blank&#34;&gt;MIT ç»å…¸è®²åº§ï¼šHow to Speak - Patrick Winston&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/helix-gptå¦‚ä½•å®ç°ai-codeä»¥åŠå¦‚ä½•è°ƒè¯•/&#34; target=&#34;_blank&#34;&gt;helix-gptå¦‚ä½•å®ç°AI codeä»¥åŠå¦‚ä½•è°ƒè¯•?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/300è¡Œå®ç°ä¸€ä¸ªboundedspscqueue/&#34; target=&#34;_blank&#34;&gt;300è¡Œå®ç°ä¸€ä¸ªBoundedSPSCQueue&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;</description>
      <link>https://github.com/KenForever1/blog/pyo3%E5%AE%9E%E7%8E%B0python%E5%92%8Crust%E8%B7%A8%E8%AF%AD%E8%A8%80%E8%B0%83%E7%94%A8/</link>
      <pubDate>Sat, 20 Sep 2025 00:00:00 +0000</pubDate>
      <source url="https://github.com/KenForever1/feed_rss_updated.xml">KenForever1</source>
      
      <guid isPermaLink="true">https://github.com/KenForever1/blog/pyo3%E5%AE%9E%E7%8E%B0python%E5%92%8Crust%E8%B7%A8%E8%AF%AD%E8%A8%80%E8%B0%83%E7%94%A8/</guid>
      
    </item>
    
    <item>
      <title>æ¢ç´¢ggmlçš„å®ç°</title>
      
      
        
      <author>KenForever1</author>
        
      
      
      
      <description>&lt;!-- more --&gt;

&lt;p&gt;æœ¬æ–‡ä¸»è¦ä»‹ç»ggmlçš„è°ƒè¯•å…¥é—¨ç¯å¢ƒæ­å»ºã€ggmlçš„æ ¸å¿ƒæ•°æ®ç»“æ„ã€å†…å­˜ç®¡ç†ä¸å¸ƒå±€ã€è®¡ç®—å›¾æ„å»ºä¸æ‰§è¡Œã€ä»¥åŠggufæ–‡ä»¶æ ¼å¼æ„æˆï¼Œä¼šåˆ†æˆå¤šä¸ªå°èŠ‚ä»‹ç»ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡èµ·æºäºä½œè€…ggmlå­¦ä¹ è¿‡ç¨‹ä¸­äº†è§£çš„èµ„æ–™ï¼ŒåŒ…æ‹¬&lt;a href=&#34;https://xsxszab.github.io/posts/ggml-deep-dive-i/&#34;&gt;xsxszabçš„ggml-deep-diveç³»åˆ—æ–‡ç« &lt;/a&gt;ã€ä»¥åŠé˜…è¯»æºç ï¼Œè®°å½•å’Œåˆ†äº«è‡ªå·±çš„ç†è§£è¿‡ç¨‹ã€‚ï¼ˆæ„Ÿè°¢xsxszabç»˜åˆ¶çš„å…³äºå†…å­˜å¸ƒå±€çš„å›¾ä¾‹ï¼Œä¸ºggmlçš„ç†è§£æ›´åŠ æµ…æ˜¾æ˜“æ‡‚ã€‚ï¼‰&lt;/p&gt;
&lt;p&gt;ggmlæ˜¯é‡‡ç”¨c/c++ç¼–å†™é«˜åº¦ä¼˜åŒ–çš„tensorå¼ é‡è®¡ç®—åº“ï¼Œæ²¡æœ‰å¤–éƒ¨ä¾èµ–ã€‚å­˜åœ¨ä¸åŒçš„backendå®ç°ï¼Œä»macçš„metalã€x86çš„avxå®ç°ä»¥åŠarmçš„neonæŒ‡ä»¤å®ç°ã€gpuçš„cudaã€hipã€openclç­‰å®ç°ã€‚llama.cppé¡¹ç›®å°±æ˜¯ä½¿ç”¨ggmlè¿›è¡Œæ¨¡å‹åŠ è½½ã€æ¨ç†çš„ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ¢ç´¢ggmlçš„å®ç°vscodeè°ƒè¯•ç¯å¢ƒçš„æ­å»º&#34;&gt;æ¢ç´¢ggmlçš„å®ç°&amp;ndash;vscodeè°ƒè¯•ç¯å¢ƒçš„æ­å»º&lt;a class=&#34;headerlink&#34; href=&#34;#æ¢ç´¢ggmlçš„å®ç°vscodeè°ƒè¯•ç¯å¢ƒçš„æ­å»º&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;åœ¨é˜…è¯»æºç çš„æ—¶å€™ï¼Œæ‰¾ä¸€ä¸ªæœ€ç®€å•çš„exampleä¾‹å­è·‘é€šï¼Œç„¶åè·Ÿç€æºç è¿›è¡Œè°ƒè¯•ï¼Œæ˜¯å¾ˆå¿«ç†è§£åŸç†çš„ä¸€ç§æ–¹æ³•ã€‚ &lt;/p&gt;
&lt;p&gt;åœ¨linuxã€æˆ–è€…macä¸‹éƒ½æ–¹ä¾¿ç¼–è¯‘ã€‚&lt;/p&gt;
&lt;p&gt;ç¼–è¯‘ä¾èµ–ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;gcc/g++æˆ–è€… clangç¼–è¯‘&lt;/li&gt;
&lt;li&gt;cmakeï¼š ç”¨äºç®¡ç†æ„å»ºé¡¹ç›®&lt;/li&gt;
&lt;li&gt;ccacheï¼šå¯é€‰é¡¹ï¼ŒåŠ å¿«ç¼–è¯‘é€Ÿåº¦ç”¨&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Bash&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-0-1&#34; name=&#34;__codelineno-0-1&#34;&gt;&lt;/a&gt;git&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;clone&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;https://github.com/ggml-org/ggml.git
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;ä¸Šé¢çš„ä¾èµ–å®‰è£…å¾ˆç®€å•ï¼Œä»¥ubuntuä¸ºä¾‹ï¼š
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Bash&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-1-1&#34; name=&#34;__codelineno-1-1&#34;&gt;&lt;/a&gt;apt&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;update
&lt;a id=&#34;__codelineno-1-2&#34; name=&#34;__codelineno-1-2&#34;&gt;&lt;/a&gt;apt&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;install&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-y&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;gcc&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;g++&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;cmake&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;ccache
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/p&gt;
&lt;h3 id=&#34;é…ç½®è°ƒè¯•ç›®æ ‡&#34;&gt;é…ç½®è°ƒè¯•ç›®æ ‡&lt;a class=&#34;headerlink&#34; href=&#34;#é…ç½®è°ƒè¯•ç›®æ ‡&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;ggmlçš„exampleä¸­åŒ…æ‹¬äº†å¾ˆå¤šä¾‹å­ï¼Œå…ˆä»ç®€å•çš„ä¾‹å­çœ‹èµ·ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Bash&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-2-1&#34; name=&#34;__codelineno-2-1&#34;&gt;&lt;/a&gt;examples/simple/simple-ctx.cpp
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;ä¿®æ”¹é¡¹ç›®çš„cmakeé…ç½®ï¼Œå³æ·»åŠ -gæ–¹ä¾¿debugè°ƒè¯•ã€‚æ‰¾åˆ°examples/simple/CMakeLists.txté…ç½®æ–‡ä»¶ï¼Œä¸ºsimple-ctxè¿™ä¸ªå¯æ‰§è¡Œæ–‡ä»¶æ·»åŠ -gå‚æ•°ã€‚
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Bash&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-3-1&#34; name=&#34;__codelineno-3-1&#34;&gt;&lt;/a&gt;set&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;TEST_TARGET&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;simple-ctx&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-2&#34; name=&#34;__codelineno-3-2&#34;&gt;&lt;/a&gt;add_executable&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;TEST_TARGET&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;simple-ctx.cpp&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-3&#34; name=&#34;__codelineno-3-3&#34;&gt;&lt;/a&gt;target_compile_options&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;TEST_TARGET&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;PRIVATE&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-g&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-4&#34; name=&#34;__codelineno-3-4&#34;&gt;&lt;/a&gt;target_link_libraries&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;TEST_TARGET&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;PRIVATE&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;ggml&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
ä¸Šé¢åªæ˜¯ä¸ºå¯æ‰§è¡Œæ–‡ä»¶æ·»åŠ äº†-gè°ƒè¯•ä¿¡æ¯ï¼Œå¦‚æœè¦è°ƒè¯•ggml.soè¿™ä¸ªåº“ï¼Œåˆ™éœ€è¦ç¼–è¯‘ggml.soåº“æ—¶æŒ‡å®šDebugç±»å‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Bash&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-4-1&#34; name=&#34;__codelineno-4-1&#34;&gt;&lt;/a&gt;cmake&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-B&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;build&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-S&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;.&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-DCMAKE_BUILD_TYPE&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;DEBUG
&lt;a id=&#34;__codelineno-4-2&#34; name=&#34;__codelineno-4-2&#34;&gt;&lt;/a&gt;cmake&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;--build&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;build
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
æŸ¥çœ‹ç¼–è¯‘è¾“å‡ºï¼Œå¯ä»¥çœ‹åˆ°ggml.soåº“è¢«ç¼–è¯‘æˆwith debug_infoã€‚
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Bash&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-5-1&#34; name=&#34;__codelineno-5-1&#34;&gt;&lt;/a&gt;file&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;build/src/libggml.so&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;
&lt;a id=&#34;__codelineno-5-2&#34; name=&#34;__codelineno-5-2&#34;&gt;&lt;/a&gt;build/src/libggml.so:&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;ELF&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;64&lt;/span&gt;-bit&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;LSB&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;shared&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;object,&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;x86-64,&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;version&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;SYSV&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;,&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;dynamically&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;linked,&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;BuildID&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;sha1&lt;span class=&#34;o&#34;&gt;]=&lt;/span&gt;db376e303daeef672c8002ed6cebed1da303a706,&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;with&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;debug_info,&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;not&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;stripped
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/p&gt;
&lt;h3 id=&#34;vscodeé…ç½®debug&#34;&gt;vscodeé…ç½®debug&lt;a class=&#34;headerlink&#34; href=&#34;#vscodeé…ç½®debug&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;ç‚¹å‡»å³è¾¹çš„Run and DebugæŒ‰é’®ï¼Œcreate a launch.json fileï¼Œåˆ›å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼ŒæŠŠä¸‹é¢çš„å†…å®¹ç²˜è´´è¿›å»ã€‚&lt;/p&gt;
&lt;p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;JSON&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-6-1&#34; name=&#34;__codelineno-6-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-2&#34; name=&#34;__codelineno-6-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;quot;version&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;0.2.0&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-3&#34; name=&#34;__codelineno-6-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;quot;configurations&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-4&#34; name=&#34;__codelineno-6-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-5&#34; name=&#34;__codelineno-6-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;debug simple-ctx&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-6&#34; name=&#34;__codelineno-6-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;quot;type&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;lldb&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-7&#34; name=&#34;__codelineno-6-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;quot;request&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;launch&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-8&#34; name=&#34;__codelineno-6-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;quot;program&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;${workspaceFolder}/build/bin/simple-ctx&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-9&#34; name=&#34;__codelineno-6-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;quot;cwd&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;${workspaceFolder}&amp;quot;&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-10&#34; name=&#34;__codelineno-6-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-11&#34; name=&#34;__codelineno-6-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-12&#34; name=&#34;__codelineno-6-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
æ¥ä¸‹æ¥å°±å¯ä»¥æŒ‰ç…§vscodeçš„ç•Œé¢buttonè°ƒè¯•äº†ï¼Œå¦‚æœè¦è°ƒè¯•å…¶å®ƒå¯æ‰§è¡Œç¨‹åºï¼Œä¿®æ”¹launch.jsonçš„programå­—æ®µå³å¯ã€‚&lt;/p&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡ä¸Šé¢çš„ç¼–è¯‘debugæ¨¡å¼å’Œæ·»åŠ -gå‚æ•°ï¼Œå¯ä»¥è¿›å…¥å¯æ‰§è¡Œç¨‹åºå’Œggml.soåº“çš„æºç è¿›è¡Œè°ƒè¯•äº†äº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;&#34; src=&#34;https://raw.githubusercontent.com/KenForever1/CDN/main/ggml-debug.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;&#34; src=&#34;https://raw.githubusercontent.com/KenForever1/CDN/main/ggml-debug1.png&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;æ¢ç´¢ggmlçš„å®ç°å¼ é‡è¡¨ç¤º&#34;&gt;æ¢ç´¢ggmlçš„å®ç°&amp;ndash;å¼ é‡è¡¨ç¤º&lt;a class=&#34;headerlink&#34; href=&#34;#æ¢ç´¢ggmlçš„å®ç°å¼ é‡è¡¨ç¤º&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;h3 id=&#34;ggml_tensor-æ•°æ®ç»“æ„&#34;&gt;ggml_tensor æ•°æ®ç»“æ„&lt;a class=&#34;headerlink&#34; href=&#34;#ggml_tensor-æ•°æ®ç»“æ„&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;åœ¨GGMLä¸­é€šè¿‡ggml_tensorç»“æ„ä½“è¡¨ç¤ºå¼ é‡ï¼Œç»“æ„ä½“å®šä¹‰å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-21&#34;&gt;21&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-22&#34;&gt;22&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-23&#34;&gt;23&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-24&#34;&gt;24&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-25&#34;&gt;25&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-26&#34;&gt;26&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-27&#34;&gt;27&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-28&#34;&gt;28&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-29&#34;&gt;29&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-30&#34;&gt;30&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-31&#34;&gt;31&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-32&#34;&gt;32&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-33&#34;&gt;33&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-34&#34;&gt;34&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-35&#34;&gt;35&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-36&#34;&gt;36&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-37&#34;&gt;37&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-38&#34;&gt;38&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-39&#34;&gt;39&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-40&#34;&gt;40&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-41&#34;&gt;41&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-42&#34;&gt;42&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-43&#34;&gt;43&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-44&#34;&gt;44&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-45&#34;&gt;45&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-46&#34;&gt;46&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-7-1&#34; name=&#34;__codelineno-7-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// n-dimensional tensor&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-2&#34; name=&#34;__codelineno-7-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_tensor&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-3&#34; name=&#34;__codelineno-7-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// å¼ é‡çš„æ•°æ®ç±»å‹ï¼šä¾‹å¦‚GGML_TYPE_F32,GGML_TYPE_F16ï¼ŒGGML_TYPE_Q4_0&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-4&#34; name=&#34;__codelineno-7-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;enum&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_type&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-5&#34; name=&#34;__codelineno-7-5&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-7-6&#34; name=&#34;__codelineno-7-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_backend_buffer&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;buffer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-7&#34; name=&#34;__codelineno-7-7&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-7-8&#34; name=&#34;__codelineno-7-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// æœ€å¤§ç»´åº¦ä¸º4ï¼ŒGGML_MAX_DIMSä¸º4&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-9&#34; name=&#34;__codelineno-7-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// neå­˜å‚¨å¼ é‡æ¯ä¸ªç»´åº¦çš„å…ƒç´ ä¸ªæ•°&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-10&#34; name=&#34;__codelineno-7-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// nbå­˜å‚¨å¼ é‡æ¯ä¸ªç»´çš„å…ƒç´ å¤§å°&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-11&#34; name=&#34;__codelineno-7-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int64_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ne&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GGML_MAX_DIMS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// number of elements&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-12&#34; name=&#34;__codelineno-7-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;size_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GGML_MAX_DIMS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// stride in bytes:&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-13&#34; name=&#34;__codelineno-7-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                                &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// nb[0] = ggml_type_size(type)&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-14&#34; name=&#34;__codelineno-7-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                                &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// nb[1] = nb[0]   * (ne[0] / ggml_blck_size(type)) + padding&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-15&#34; name=&#34;__codelineno-7-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                                &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// nb[i] = nb[i-1] * ne[i-1]&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-16&#34; name=&#34;__codelineno-7-16&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-7-17&#34; name=&#34;__codelineno-7-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// å¼ é‡opç±»å‹ï¼Œåœ¨è®¡ç®—å›¾ä¸­ä½œä¸ºop nodeï¼Œåé¢ä¼šæåˆ°&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-18&#34; name=&#34;__codelineno-7-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// ä¾‹å¦‚çŸ©é˜µä¹˜ç±»å‹ï¼ŒGGML_OP_MUL_MAT&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-19&#34; name=&#34;__codelineno-7-19&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// compute data&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-20&#34; name=&#34;__codelineno-7-20&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;enum&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_op&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;op&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-21&#34; name=&#34;__codelineno-7-21&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-7-22&#34; name=&#34;__codelineno-7-22&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// op params - allocated as int32_t for alignment&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-23&#34; name=&#34;__codelineno-7-23&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int32_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;op_params&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GGML_MAX_OP_PARAMS&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int32_t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)];&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-24&#34; name=&#34;__codelineno-7-24&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-7-25&#34; name=&#34;__codelineno-7-25&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int32_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;flags&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-26&#34; name=&#34;__codelineno-7-26&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-7-27&#34; name=&#34;__codelineno-7-27&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// æŒ‡é’ˆæŒ‡å‘æ­¤å¼ é‡çš„srcå¼ é‡&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-28&#34; name=&#34;__codelineno-7-28&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// ä¾‹å¦‚çŸ©é˜µä¹˜op tensorçš„srcå¼ é‡æ˜¯çŸ©é˜µA tensorå’ŒçŸ©é˜µB tensor&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-29&#34; name=&#34;__codelineno-7-29&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_tensor&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;src&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GGML_MAX_SRC&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-30&#34; name=&#34;__codelineno-7-30&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-7-31&#34; name=&#34;__codelineno-7-31&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// æè¿°å¼ é‡è§†å›¾ï¼Œå¦‚æœæ­¤å¼ é‡æ˜¯å¦ä¸€ä¸ªå¼ é‡ï¼ˆbaseå¼ é‡ï¼‰çš„è§†å›¾ï¼Œåˆ™æŒ‡å‘baseå¼ é‡&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-32&#34; name=&#34;__codelineno-7-32&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// source tensor and offset for views&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-33&#34; name=&#34;__codelineno-7-33&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_tensor&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;view_src&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-34&#34; name=&#34;__codelineno-7-34&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// è§†å›¾å¼ é‡çš„åç§»é‡&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-35&#34; name=&#34;__codelineno-7-35&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;size_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;               &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;view_offs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-36&#34; name=&#34;__codelineno-7-36&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-7-37&#34; name=&#34;__codelineno-7-37&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// å­˜å‚¨å¼ é‡çš„æ•°æ®&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-38&#34; name=&#34;__codelineno-7-38&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-39&#34; name=&#34;__codelineno-7-39&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-7-40&#34; name=&#34;__codelineno-7-40&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// å¼ é‡çš„åç§°&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-41&#34; name=&#34;__codelineno-7-41&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GGML_MAX_NAME&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-42&#34; name=&#34;__codelineno-7-42&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-7-43&#34; name=&#34;__codelineno-7-43&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;extra&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// extra things e.g. for ggml-cuda.cu&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-44&#34; name=&#34;__codelineno-7-44&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-7-45&#34; name=&#34;__codelineno-7-45&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;padding&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-46&#34; name=&#34;__codelineno-7-46&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;h3 id=&#34;é€šè¿‡ä¸€ä¸ªä¾‹å­å­¦ä¹ tensor&#34;&gt;é€šè¿‡ä¸€ä¸ªä¾‹å­å­¦ä¹ tensor&lt;a class=&#34;headerlink&#34; href=&#34;#é€šè¿‡ä¸€ä¸ªä¾‹å­å­¦ä¹ tensor&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;åœ¨examplesæ–‡ä»¶å¤¹ä¸­æ·»åŠ ä¸€ä¸ªsimple-add.cppçš„æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-21&#34;&gt;21&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-22&#34;&gt;22&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-23&#34;&gt;23&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-24&#34;&gt;24&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-25&#34;&gt;25&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-26&#34;&gt;26&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-27&#34;&gt;27&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-28&#34;&gt;28&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-29&#34;&gt;29&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-30&#34;&gt;30&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-31&#34;&gt;31&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-32&#34;&gt;32&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-33&#34;&gt;33&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-34&#34;&gt;34&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-35&#34;&gt;35&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-36&#34;&gt;36&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-37&#34;&gt;37&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-38&#34;&gt;38&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-39&#34;&gt;39&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-40&#34;&gt;40&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-41&#34;&gt;41&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-42&#34;&gt;42&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-43&#34;&gt;43&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-44&#34;&gt;44&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-45&#34;&gt;45&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-46&#34;&gt;46&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-47&#34;&gt;47&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-48&#34;&gt;48&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-49&#34;&gt;49&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-50&#34;&gt;50&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-8-1&#34; name=&#34;__codelineno-8-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;cpf&#34;&gt;&amp;quot;ggml.h&amp;quot;&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-2&#34; name=&#34;__codelineno-8-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;cpf&#34;&gt;&amp;quot;ggml-cpu.h&amp;quot;&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-3&#34; name=&#34;__codelineno-8-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;cpf&#34;&gt;&amp;lt;cstring&amp;gt;&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-4&#34; name=&#34;__codelineno-8-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;cpf&#34;&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-5&#34; name=&#34;__codelineno-8-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;cpf&#34;&gt;&amp;lt;vector&amp;gt;&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-6&#34; name=&#34;__codelineno-8-6&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-8-7&#34; name=&#34;__codelineno-8-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-8&#34; name=&#34;__codelineno-8-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_init_params&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;params&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-9&#34; name=&#34;__codelineno-8-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;/*.mem_size   =*/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1024&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1024&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1024&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_graph_overhead&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-10&#34; name=&#34;__codelineno-8-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;/*.mem_buffer =*/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;NULL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-11&#34; name=&#34;__codelineno-8-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;/*.no_alloc   =*/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-12&#34; name=&#34;__codelineno-8-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-13&#34; name=&#34;__codelineno-8-13&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-8-14&#34; name=&#34;__codelineno-8-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_context&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;params&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-15&#34; name=&#34;__codelineno-8-15&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-8-16&#34; name=&#34;__codelineno-8-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// --------------------&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-17&#34; name=&#34;__codelineno-8-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// Modify this section to test different tensor computations&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-18&#34; name=&#34;__codelineno-8-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a_data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-19&#34; name=&#34;__codelineno-8-19&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-20&#34; name=&#34;__codelineno-8-20&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-21&#34; name=&#34;__codelineno-8-21&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-22&#34; name=&#34;__codelineno-8-22&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-23&#34; name=&#34;__codelineno-8-23&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-8-24&#34; name=&#34;__codelineno-8-24&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b_data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-25&#34; name=&#34;__codelineno-8-25&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-26&#34; name=&#34;__codelineno-8-26&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-27&#34; name=&#34;__codelineno-8-27&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-28&#34; name=&#34;__codelineno-8-28&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-29&#34; name=&#34;__codelineno-8-29&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-8-30&#34; name=&#34;__codelineno-8-30&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-8-31&#34; name=&#34;__codelineno-8-31&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// å› ä¸ºggmlä¸­tensorè¡¨ç¤ºå’Œpytorchç›¸åï¼Œå› æ­¤3è¡Œ2åˆ—çš„çŸ©é˜µï¼Œè¡¨ç¤ºä¸º[2, 3]&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-32&#34; name=&#34;__codelineno-8-32&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_tensor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_new_tensor_2d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GGML_TYPE_F32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-33&#34; name=&#34;__codelineno-8-33&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_tensor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_new_tensor_2d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GGML_TYPE_F32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;
&lt;a id=&#34;__codelineno-8-34&#34; name=&#34;__codelineno-8-34&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;memcpy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a_data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_nbytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-35&#34; name=&#34;__codelineno-8-35&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;memcpy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b_data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_nbytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-36&#34; name=&#34;__codelineno-8-36&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-8-37&#34; name=&#34;__codelineno-8-37&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_tensor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_add&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-38&#34; name=&#34;__codelineno-8-38&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// --------------------&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-39&#34; name=&#34;__codelineno-8-39&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-8-40&#34; name=&#34;__codelineno-8-40&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_cgraph&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;gf&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_new_graph&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-41&#34; name=&#34;__codelineno-8-41&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_build_forward_expand&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;gf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-42&#34; name=&#34;__codelineno-8-42&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-8-43&#34; name=&#34;__codelineno-8-43&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_graph_compute_with_ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;gf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-44&#34; name=&#34;__codelineno-8-44&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-8-45&#34; name=&#34;__codelineno-8-45&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vector&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;out_data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_nelements&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-46&#34; name=&#34;__codelineno-8-46&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;memcpy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;out_data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_nbytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-47&#34; name=&#34;__codelineno-8-47&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-8-48&#34; name=&#34;__codelineno-8-48&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_free&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-49&#34; name=&#34;__codelineno-8-49&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-50&#34; name=&#34;__codelineno-8-50&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
å®Œå–„cmakeé…ç½®ï¼Œåœ¨CMakeLists.txtä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;CMake&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-5&#34;&gt;5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-6&#34;&gt;6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-7&#34;&gt;7&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-9-1&#34; name=&#34;__codelineno-9-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c&#34;&gt;#&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-2&#34; name=&#34;__codelineno-9-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c&#34;&gt;# simple-add&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-3&#34; name=&#34;__codelineno-9-3&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-9-4&#34; name=&#34;__codelineno-9-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;nb&#34;&gt;set&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;TEST_TARGET&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;simple-add&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-5&#34; name=&#34;__codelineno-9-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;nb&#34;&gt;add_executable&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;TEST_TARGET&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;simple-add.cpp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-6&#34; name=&#34;__codelineno-9-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;nb&#34;&gt;target_compile_options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;TEST_TARGET&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;PRIVATE&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;-g&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-7&#34; name=&#34;__codelineno-9-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;nb&#34;&gt;target_link_libraries&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;TEST_TARGET&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;PRIVATE&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;ggml&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
æ ¹æ®ç¬¬ä¸€èŠ‚çš„å†…å®¹ï¼Œç¼–è¯‘ç„¶åå°±å¯ä»¥ç”¨vscode debugè°ƒè¯•äº†ã€‚å½“å®Œæˆggml_new_tensor_2dåˆ›å»º2ç»´å¼ é‡æ—¶ï¼Œå¹¶ä¸”é€šè¿‡memcpyæ‹·è´èµ‹å€¼åã€‚æˆ‘ä»¬é€šè¿‡gdbæ‰“å°tensorçš„æ•°æ®ï¼Œå°±å¯ä»¥çœ‹åˆ°æ•°æ®äº†ã€‚
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Bash&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-21&#34;&gt;21&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-22&#34;&gt;22&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-23&#34;&gt;23&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-24&#34;&gt;24&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-25&#34;&gt;25&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-26&#34;&gt;26&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-27&#34;&gt;27&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-28&#34;&gt;28&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-29&#34;&gt;29&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-30&#34;&gt;30&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-31&#34;&gt;31&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-32&#34;&gt;32&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-33&#34;&gt;33&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-34&#34;&gt;34&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-35&#34;&gt;35&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-36&#34;&gt;36&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-37&#34;&gt;37&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-38&#34;&gt;38&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-39&#34;&gt;39&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-40&#34;&gt;40&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-41&#34;&gt;41&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-42&#34;&gt;42&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-43&#34;&gt;43&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-44&#34;&gt;44&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-45&#34;&gt;45&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-10-1&#34; name=&#34;__codelineno-10-1&#34;&gt;&lt;/a&gt;&amp;gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;p&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;*a
&lt;a id=&#34;__codelineno-10-2&#34; name=&#34;__codelineno-10-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;ggml_tensor&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-3&#34; name=&#34;__codelineno-10-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;GGML_TYPE_F32
&lt;a id=&#34;__codelineno-10-4&#34; name=&#34;__codelineno-10-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;buffer&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;nullptr
&lt;a id=&#34;__codelineno-10-5&#34; name=&#34;__codelineno-10-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;ne&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;([&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;,&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;3&lt;/span&gt;,&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;,&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-6&#34; name=&#34;__codelineno-10-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;nb&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;([&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;4&lt;/span&gt;,&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8&lt;/span&gt;,&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;24&lt;/span&gt;,&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;24&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-7&#34; name=&#34;__codelineno-10-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;op&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;GGML_OP_NONE
&lt;a id=&#34;__codelineno-10-8&#34; name=&#34;__codelineno-10-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;op_params&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-9&#34; name=&#34;__codelineno-10-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-10&#34; name=&#34;__codelineno-10-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-11&#34; name=&#34;__codelineno-10-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-12&#34; name=&#34;__codelineno-10-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-13&#34; name=&#34;__codelineno-10-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-14&#34; name=&#34;__codelineno-10-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-15&#34; name=&#34;__codelineno-10-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-16&#34; name=&#34;__codelineno-10-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;7&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-17&#34; name=&#34;__codelineno-10-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-18&#34; name=&#34;__codelineno-10-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;9&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-19&#34; name=&#34;__codelineno-10-19&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-20&#34; name=&#34;__codelineno-10-20&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;11&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-21&#34; name=&#34;__codelineno-10-21&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;12&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-22&#34; name=&#34;__codelineno-10-22&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-23&#34; name=&#34;__codelineno-10-23&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;14&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-24&#34; name=&#34;__codelineno-10-24&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;15&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-25&#34; name=&#34;__codelineno-10-25&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-26&#34; name=&#34;__codelineno-10-26&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;flags&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-27&#34; name=&#34;__codelineno-10-27&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;src&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-28&#34; name=&#34;__codelineno-10-28&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;nullptr
&lt;a id=&#34;__codelineno-10-29&#34; name=&#34;__codelineno-10-29&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;nullptr
&lt;a id=&#34;__codelineno-10-30&#34; name=&#34;__codelineno-10-30&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;nullptr
&lt;a id=&#34;__codelineno-10-31&#34; name=&#34;__codelineno-10-31&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;nullptr
&lt;a id=&#34;__codelineno-10-32&#34; name=&#34;__codelineno-10-32&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;nullptr
&lt;a id=&#34;__codelineno-10-33&#34; name=&#34;__codelineno-10-33&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;nullptr
&lt;a id=&#34;__codelineno-10-34&#34; name=&#34;__codelineno-10-34&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;nullptr
&lt;a id=&#34;__codelineno-10-35&#34; name=&#34;__codelineno-10-35&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;7&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;nullptr
&lt;a id=&#34;__codelineno-10-36&#34; name=&#34;__codelineno-10-36&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;nullptr
&lt;a id=&#34;__codelineno-10-37&#34; name=&#34;__codelineno-10-37&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;9&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;nullptr
&lt;a id=&#34;__codelineno-10-38&#34; name=&#34;__codelineno-10-38&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-39&#34; name=&#34;__codelineno-10-39&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;view_src&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;nullptr
&lt;a id=&#34;__codelineno-10-40&#34; name=&#34;__codelineno-10-40&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;view_offs&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-41&#34; name=&#34;__codelineno-10-41&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;0x00007fffb75eb1b0
&lt;a id=&#34;__codelineno-10-42&#34; name=&#34;__codelineno-10-42&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-43&#34; name=&#34;__codelineno-10-43&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;extra&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;0x0000000000000000
&lt;a id=&#34;__codelineno-10-44&#34; name=&#34;__codelineno-10-44&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;padding&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-45&#34; name=&#34;__codelineno-10-45&#34;&gt;&lt;/a&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
ä»ä¸Šé¢çš„å†…å®¹å¯ä»¥çœ‹åˆ°ï¼Œggml_tensorç»“æ„ä½“çš„neæˆå‘˜å˜é‡æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„çš„å…ƒç´ ä¸ªæ•°æ˜¯4ï¼Œåˆ†åˆ«è¡¨ç¤ºè¯¥å¼ é‡çš„ç»´åº¦ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªäºŒç»´çŸ©é˜µçš„neæˆå‘˜å˜é‡ä¸º[2, 3, 1, 1]ï¼Œè¡¨ç¤ºè¯¥çŸ©é˜µæœ‰3è¡Œ2åˆ—ï¼Œä¸”è¡Œå’Œåˆ—çš„ç´¢å¼•ä»0å¼€å§‹ã€‚&lt;/p&gt;
&lt;h3 id=&#34;tensorçš„å†…å­˜å¸ƒå±€&#34;&gt;tensorçš„å†…å­˜å¸ƒå±€&lt;a class=&#34;headerlink&#34; href=&#34;#tensorçš„å†…å­˜å¸ƒå±€&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;h4 id=&#34;f32çŸ©é˜µ&#34;&gt;f32çŸ©é˜µ&lt;a class=&#34;headerlink&#34; href=&#34;#f32çŸ©é˜µ&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;å¯¹äºneçš„ç†è§£ï¼Œæ¯”å¦‚ä¸€ä¸ªRGBçš„å›¾ç‰‡ï¼Œwidthä¸º1920ï¼Œheightä¸º1080ï¼Œ ç”¨pytorchè¡¨ç¤ºç»´åº¦ä¿¡æ¯å°±æ˜¯[1, 3, 1080, 1920],å³[N, C, H, W]ã€‚è€Œåœ¨GGMLä¸­ï¼Œè¿™ä¸ªç»´åº¦ä¿¡æ¯è¡¨ç¤ºä¸ºï¼š
[1920, 1080, 3, 1]ã€‚&lt;/p&gt;
&lt;p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-11-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-11-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-11-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-11-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-11-5&#34;&gt;5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-11-6&#34;&gt;6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-11-7&#34;&gt;7&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-11-1&#34; name=&#34;__codelineno-11-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GGML_TYPE_F32&lt;/span&gt;
&lt;a id=&#34;__codelineno-11-2&#34; name=&#34;__codelineno-11-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;buffer&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;
&lt;a id=&#34;__codelineno-11-3&#34; name=&#34;__codelineno-11-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;ne&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-11-4&#34; name=&#34;__codelineno-11-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// 4è¡¨ç¤ºç¬¬ä¸€ç»´æ¯ä¸ªå…ƒç´ æ‰€å å­—èŠ‚æ•°ã€‚8è¡¨ç¤ºæ¯è¡Œå…ƒç´ é—´éš”8ä¸ªå­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯é—´éš”ä¸¤ä¸ªå…ƒç´ ã€‚&lt;/span&gt;
&lt;a id=&#34;__codelineno-11-5&#34; name=&#34;__codelineno-11-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// ä¹Ÿå°±æ˜¯åœ¨å†…å­˜å­˜å‚¨çš„å¸ƒå±€æ˜¯row majorè¿ç»­å­˜å‚¨çš„&lt;/span&gt;
&lt;a id=&#34;__codelineno-11-6&#34; name=&#34;__codelineno-11-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;nb&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;24&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;24&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-11-7&#34; name=&#34;__codelineno-11-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;op&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GGML_OP_NONE&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
neåªè¡¨ç¤ºäº†çŸ©é˜µçš„ç»´åº¦ï¼Œè€Œnbè¡¨ç¤ºäº†çŸ©é˜µåœ¨å†…å­˜ä¸­çš„å­˜å‚¨å¸ƒå±€ï¼Œä»¥åŠæ¯è¡Œå…ƒç´ é—´éš”ã€‚&lt;/p&gt;
&lt;h3 id=&#34;é‡åŒ–çŸ©é˜µ&#34;&gt;é‡åŒ–çŸ©é˜µ&lt;a class=&#34;headerlink&#34; href=&#34;#é‡åŒ–çŸ©é˜µ&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;åœ¨ä¸Šé¢çš„ä¾‹å­ä»»æ„åœ°æ–¹åŠ ä¸€è¡Œè¡¨ç¤ºä¸€ä¸ªé‡åŒ–çŸ©é˜µã€‚
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-12-1&#34; name=&#34;__codelineno-12-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;ggml_tensor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_new_tensor_2d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GGML_TYPE_Q4_0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/p&gt;
&lt;p&gt;é€šè¿‡&lt;code&gt;p *c&lt;/code&gt; å¯ä»¥æŸ¥çœ‹çŸ©é˜µçš„è¯¦ç»†ä¿¡æ¯ã€‚
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Bash&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-5&#34;&gt;5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-6&#34;&gt;6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-7&#34;&gt;7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-8&#34;&gt;8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-9&#34;&gt;9&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-13-1&#34; name=&#34;__codelineno-13-1&#34;&gt;&lt;/a&gt;&amp;gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;p&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;*c
&lt;a id=&#34;__codelineno-13-2&#34; name=&#34;__codelineno-13-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;ggml_tensor&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-13-3&#34; name=&#34;__codelineno-13-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;GGML_TYPE_Q4_0
&lt;a id=&#34;__codelineno-13-4&#34; name=&#34;__codelineno-13-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;buffer&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;nullptr
&lt;a id=&#34;__codelineno-13-5&#34; name=&#34;__codelineno-13-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;ne&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;([&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;32&lt;/span&gt;,&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;6&lt;/span&gt;,&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;,&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-13-6&#34; name=&#34;__codelineno-13-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;nb&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;([&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;18&lt;/span&gt;,&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;18&lt;/span&gt;,&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;108&lt;/span&gt;,&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;108&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-13-7&#34; name=&#34;__codelineno-13-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;op&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;GGML_OP_NONE
&lt;a id=&#34;__codelineno-13-8&#34; name=&#34;__codelineno-13-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;......
&lt;a id=&#34;__codelineno-13-9&#34; name=&#34;__codelineno-13-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
ä¸‹é¢å°±åˆ†æè®¤è¯†ä¸€äº›Q4_0ç±»å‹çš„çŸ©é˜µè¡¨ç¤ºæœ‰ä»€ä¹ˆä¸åŒã€‚
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-14-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-14-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-14-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-14-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-14-5&#34;&gt;5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-14-6&#34;&gt;6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-14-7&#34;&gt;7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-14-8&#34;&gt;8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-14-9&#34;&gt;9&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-14-1&#34; name=&#34;__codelineno-14-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;typedef&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint16_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_half&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-14-2&#34; name=&#34;__codelineno-14-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#define QK4_0 32&lt;/span&gt;
&lt;a id=&#34;__codelineno-14-3&#34; name=&#34;__codelineno-14-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;typedef&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-14-4&#34; name=&#34;__codelineno-14-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 16bitå­˜å‚¨deltaä¿¡æ¯, 2ä¸ªå­—èŠ‚&lt;/span&gt;
&lt;a id=&#34;__codelineno-14-5&#34; name=&#34;__codelineno-14-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_half&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;           &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// delta&lt;/span&gt;
&lt;a id=&#34;__codelineno-14-6&#34; name=&#34;__codelineno-14-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 8bitæ•°ç»„ï¼Œæ•°ç»„é•¿åº¦ä¸ºï¼š16ï¼Œ 16ä¸ªå­—èŠ‚&lt;/span&gt;
&lt;a id=&#34;__codelineno-14-7&#34; name=&#34;__codelineno-14-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint8_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;qs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;QK4_0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// nibbles / quants&lt;/span&gt;
&lt;a id=&#34;__codelineno-14-8&#34; name=&#34;__codelineno-14-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;block_q4_0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-14-9&#34; name=&#34;__codelineno-14-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;static_assert&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;block_q4_0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_half&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;QK4_0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;wrong q4_0 block size/padding&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
åœ¨GGMLä¸­ï¼Œä¸€ä¸ªblock_q4_0ç»“æ„ä½“ï¼Œå¯ä»¥è¡¨ç¤º32ä¸ªint4å…ƒç´ ï¼Œå†åŠ ä¸Šä¸€ä¸ª16bitçš„deltaä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ne[0]å’Œne[1]åˆ†åˆ«ä¸º32, 16,è¡¨ç¤ºäº†32è¡Œå’Œ16åˆ—çš„int4çŸ©é˜µã€‚è€Œnb[0]ä¸º18ï¼Œè¡¨ç¤ºGGMLçš„q4_0é‡åŒ–å°†32ä¸ªint4å…ƒç´ ç»„åˆåœ¨ä¸€èµ·ï¼Œå†åŠ ä¸Šä¸€ä¸ª16ä½çš„å·®å€¼ï¼Œæ¯ç»„å…±18å­—èŠ‚ã€‚&lt;/p&gt;
&lt;p&gt;[32, 6, 1, 1]çš„Q4_0æ•°ç»„å°±å¯ä»¥çœ‹æˆ[1,6,1,1]ï¼Œå› ä¸º32ä¸ªå…ƒç´ ä¸ºå†…å­˜ä¸Šçš„æœ€å°å¯»å€å•å…ƒã€‚æ›´é«˜ç»´åº¦çš„æƒ…å†µä¸‹ï¼Œnb[i] = nb[i-1] * ne[i]ã€‚&lt;/p&gt;
&lt;h3 id=&#34;çŸ©é˜µpermuteé‡æ’åˆ—&#34;&gt;çŸ©é˜µpermuteé‡æ’åˆ—&lt;a class=&#34;headerlink&#34; href=&#34;#çŸ©é˜µpermuteé‡æ’åˆ—&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;çœ‹ä¸€ä¸ªpytorchä¾‹å­ï¼Œäº†è§£permuteæ˜¯ä»€ä¹ˆï¼Ÿpermuteå°±æ˜¯å¯¹æ•°æ®çš„ç»´åº¦å˜åŒ–é¡ºåº
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-15-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-15-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-15-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-15-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-15-5&#34;&gt;5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-15-6&#34;&gt;6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-15-7&#34;&gt;7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-15-8&#34;&gt;8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-15-9&#34;&gt;9&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-15-1&#34; name=&#34;__codelineno-15-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;import&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;torch&lt;/span&gt;
&lt;a id=&#34;__codelineno-15-2&#34; name=&#34;__codelineno-15-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;import&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;numpy&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;as&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;
&lt;a id=&#34;__codelineno-15-3&#34; name=&#34;__codelineno-15-3&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-15-4&#34; name=&#34;__codelineno-15-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;array&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([[[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]]])&lt;/span&gt;
&lt;a id=&#34;__codelineno-15-5&#34; name=&#34;__codelineno-15-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;unpermuted&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;torch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tensor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-15-6&#34; name=&#34;__codelineno-15-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;unpermuted&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;err&#34;&gt;â€”â€”&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;torch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;
&lt;a id=&#34;__codelineno-15-7&#34; name=&#34;__codelineno-15-7&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-15-8&#34; name=&#34;__codelineno-15-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;permuted&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;unpermuted&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;permute&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-15-9&#34; name=&#34;__codelineno-15-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;permuted&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;err&#34;&gt;â€”â€”&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;torch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-16-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-16-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-16-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-16-1&#34; name=&#34;__codelineno-16-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;tensor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([[[&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]],&lt;/span&gt;
&lt;a id=&#34;__codelineno-16-2&#34; name=&#34;__codelineno-16-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[[&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]],&lt;/span&gt;
&lt;a id=&#34;__codelineno-16-3&#34; name=&#34;__codelineno-16-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[[&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]]])&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;err&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;permuted&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;å†çœ‹ggmlä¸­çš„permuteæ“ä½œï¼Œæ·»åŠ å¦‚ä¸‹ä¾‹å­:
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-17-1&#34; name=&#34;__codelineno-17-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;ggml_tensor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;before&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-2&#34; name=&#34;__codelineno-17-2&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-17-3&#34; name=&#34;__codelineno-17-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// Same as PyTorch&amp;#39;s permute()&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-4&#34; name=&#34;__codelineno-17-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;ggml_tensor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;after&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_permute&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;before&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
è§‚å¯Ÿbeforeå’Œafter tensorä¿¡æ¯ï¼Œå¯ä»¥çœ‹åˆ°afterçš„neå’Œnbä¸­çš„0å’Œ1ç»´åº¦äº¤æ¢äº†ï¼Œä½†æ˜¯çœ‹dataï¼Œå…¶å®æ•°æ®å†…å­˜å­˜å‚¨æœ¬èº«æ˜¯æ²¡æœ‰å˜åŒ–çš„ã€‚å¯¹äºä¸€ä¸ªå†…å­˜å­˜å‚¨ï¼Œè¦æ”¹å˜neç»´åº¦ä¿¡æ¯ï¼Œåªéœ€è¦æ”¹å˜nbæ¯ä¸ªç»´åº¦çš„é—´éš”ï¼Œä¹Ÿå°±æ˜¯æ•°æ®è®¿é—®æ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Bash&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-18-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-18-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-18-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-18-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-18-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-18-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-18-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-18-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-18-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-18-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-18-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-18-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-18-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-18-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-18-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-18-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-18-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-18-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-18-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-18-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-18-21&#34;&gt;21&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-18-22&#34;&gt;22&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-18-23&#34;&gt;23&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-18-24&#34;&gt;24&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-18-25&#34;&gt;25&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-18-1&#34; name=&#34;__codelineno-18-1&#34;&gt;&lt;/a&gt;&amp;gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;p&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;*before
&lt;a id=&#34;__codelineno-18-2&#34; name=&#34;__codelineno-18-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;ggml_tensor&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-18-3&#34; name=&#34;__codelineno-18-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;GGML_TYPE_F32
&lt;a id=&#34;__codelineno-18-4&#34; name=&#34;__codelineno-18-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;buffer&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;nullptr
&lt;a id=&#34;__codelineno-18-5&#34; name=&#34;__codelineno-18-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;ne&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;([&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;,&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;3&lt;/span&gt;,&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;,&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-18-6&#34; name=&#34;__codelineno-18-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;nb&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;([&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;4&lt;/span&gt;,&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8&lt;/span&gt;,&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;24&lt;/span&gt;,&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;24&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-18-7&#34; name=&#34;__codelineno-18-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;op&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;GGML_OP_NONE
&lt;a id=&#34;__codelineno-18-8&#34; name=&#34;__codelineno-18-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;view_src&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;nullptr
&lt;a id=&#34;__codelineno-18-9&#34; name=&#34;__codelineno-18-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;view_offs&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;
&lt;a id=&#34;__codelineno-18-10&#34; name=&#34;__codelineno-18-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;0x00007fffb77eb1b0
&lt;a id=&#34;__codelineno-18-11&#34; name=&#34;__codelineno-18-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-18-12&#34; name=&#34;__codelineno-18-12&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-18-13&#34; name=&#34;__codelineno-18-13&#34;&gt;&lt;/a&gt;&amp;gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;p&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;*after
&lt;a id=&#34;__codelineno-18-14&#34; name=&#34;__codelineno-18-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;ggml_tensor&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-18-15&#34; name=&#34;__codelineno-18-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;GGML_TYPE_F32
&lt;a id=&#34;__codelineno-18-16&#34; name=&#34;__codelineno-18-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;buffer&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;nullptr
&lt;a id=&#34;__codelineno-18-17&#34; name=&#34;__codelineno-18-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;ne&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;([&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;3&lt;/span&gt;,&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;,&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;,&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-18-18&#34; name=&#34;__codelineno-18-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;nb&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;([&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8&lt;/span&gt;,&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;4&lt;/span&gt;,&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;24&lt;/span&gt;,&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;24&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-18-19&#34; name=&#34;__codelineno-18-19&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;op&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;GGML_OP_PERMUTE
&lt;a id=&#34;__codelineno-18-20&#34; name=&#34;__codelineno-18-20&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-18-21&#34; name=&#34;__codelineno-18-21&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;view_src&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;0x00007fffb77eb060
&lt;a id=&#34;__codelineno-18-22&#34; name=&#34;__codelineno-18-22&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;view_offs&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;
&lt;a id=&#34;__codelineno-18-23&#34; name=&#34;__codelineno-18-23&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;0x00007fffb77eb1b0
&lt;a id=&#34;__codelineno-18-24&#34; name=&#34;__codelineno-18-24&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot; (permuted)&amp;quot;&lt;/span&gt;
&lt;a id=&#34;__codelineno-18-25&#34; name=&#34;__codelineno-18-25&#34;&gt;&lt;/a&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
ä»view_srcä¹Ÿå¯ä»¥çœ‹å‡ºafteråªæ˜¯beforeçš„è§†å›¾ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-19-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-19-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-19-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-19-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-19-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-19-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-19-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-19-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-19-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-19-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-19-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-19-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-19-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-19-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-19-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-19-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-19-1&#34; name=&#34;__codelineno-19-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// Pseudo-code representation of tensor&amp;#39;s memory layout&lt;/span&gt;
&lt;a id=&#34;__codelineno-19-2&#34; name=&#34;__codelineno-19-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;a id=&#34;__codelineno-19-3&#34; name=&#34;__codelineno-19-3&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-19-4&#34; name=&#34;__codelineno-19-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// Accessing row 1 before permutation, nb[0] = 4&lt;/span&gt;
&lt;a id=&#34;__codelineno-19-5&#34; name=&#34;__codelineno-19-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// 1, 2,&lt;/span&gt;
&lt;a id=&#34;__codelineno-19-6&#34; name=&#34;__codelineno-19-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// 3, 4,&lt;/span&gt;
&lt;a id=&#34;__codelineno-19-7&#34; name=&#34;__codelineno-19-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// 5, 6&lt;/span&gt;
&lt;a id=&#34;__codelineno-19-8&#34; name=&#34;__codelineno-19-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;e0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
&lt;a id=&#34;__codelineno-19-9&#34; name=&#34;__codelineno-19-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;e1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;
&lt;a id=&#34;__codelineno-19-10&#34; name=&#34;__codelineno-19-10&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-19-11&#34; name=&#34;__codelineno-19-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// Accessing row 1 after permutation, nb[0] = 8&lt;/span&gt;
&lt;a id=&#34;__codelineno-19-12&#34; name=&#34;__codelineno-19-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// [[1,3,5],&lt;/span&gt;
&lt;a id=&#34;__codelineno-19-13&#34; name=&#34;__codelineno-19-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;//  [2,4,6]]&lt;/span&gt;
&lt;a id=&#34;__codelineno-19-14&#34; name=&#34;__codelineno-19-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;e0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
&lt;a id=&#34;__codelineno-19-15&#34; name=&#34;__codelineno-19-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;e1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;
&lt;a id=&#34;__codelineno-19-16&#34; name=&#34;__codelineno-19-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;e1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;h3 id=&#34;å¼ é‡è§†å›¾&#34;&gt;å¼ é‡è§†å›¾&lt;a class=&#34;headerlink&#34; href=&#34;#å¼ é‡è§†å›¾&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;è§†å›¾å¯ä»¥å¯¹å¼ é‡å†…å­˜è¿›è¡Œå¤ç”¨ï¼Œé¿å…æ‹·è´ã€é¿å…ä½æ•ˆçš„ä¸ºæ¯ä¸ªå¼ é‡åˆ†é…ä¸€ä¸ªç‹¬ç‰¹çš„å†…å­˜å—ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ggml_cpyæ“ä½œä¸ºä¾‹ï¼Œæ‹·è´çš„b tensorå°±æ˜¯ç›¸å¯¹äºaåˆ›å»ºçš„ä¸€ä¸ªè§†å›¾ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-20-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-20-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-20-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-20-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-20-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-20-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-20-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-20-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-20-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-20-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-20-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-20-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-20-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-20-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-20-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-20-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-20-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-20-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-20-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-20-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-20-21&#34;&gt;21&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-20-1&#34; name=&#34;__codelineno-20-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// ggml_cpy&lt;/span&gt;
&lt;a id=&#34;__codelineno-20-2&#34; name=&#34;__codelineno-20-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_tensor&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_cpy_impl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;a id=&#34;__codelineno-20-3&#34; name=&#34;__codelineno-20-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_context&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-20-4&#34; name=&#34;__codelineno-20-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_tensor&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-20-5&#34; name=&#34;__codelineno-20-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_tensor&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-20-6&#34; name=&#34;__codelineno-20-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GGML_ASSERT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_nelements&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_nelements&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;a id=&#34;__codelineno-20-7&#34; name=&#34;__codelineno-20-7&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-20-8&#34; name=&#34;__codelineno-20-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// make a view of the destination&lt;/span&gt;
&lt;a id=&#34;__codelineno-20-9&#34; name=&#34;__codelineno-20-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_tensor&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_view_tensor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-20-10&#34; name=&#34;__codelineno-20-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;strlen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-20-11&#34; name=&#34;__codelineno-20-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_format_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;%s (copy of %s)&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-20-12&#34; name=&#34;__codelineno-20-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-20-13&#34; name=&#34;__codelineno-20-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_format_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;%s (copy)&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-20-14&#34; name=&#34;__codelineno-20-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-20-15&#34; name=&#34;__codelineno-20-15&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-20-16&#34; name=&#34;__codelineno-20-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;op&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GGML_OP_CPY&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-20-17&#34; name=&#34;__codelineno-20-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;src&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-20-18&#34; name=&#34;__codelineno-20-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;src&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-20-19&#34; name=&#34;__codelineno-20-19&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-20-20&#34; name=&#34;__codelineno-20-20&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-20-21&#34; name=&#34;__codelineno-20-21&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;ä»¥LLMä¸­Qã€Kã€V tensorä¸ºä¾‹ï¼Œä¸‹é¢çš„Qcurã€Kcurã€Vcurå¯ä»¥è¡¨ç¤ºæˆåˆ›å»ºçš„tensor_inputçš„ä¸€éƒ¨åˆ†ã€‚æ‰€ä»¥è§†å›¾ä¸ç”¨æ˜¯base tensorçš„å…¨éƒ¨ï¼Œå¯ä»¥åªæ˜¯ä¸€éƒ¨åˆ†ï¼Œé€šè¿‡offsetå¯ä»¥è®¾ç½®ç›¸å¯¹base tensorçš„åç§»é‡ã€‚
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-21-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-21-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-21-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-21-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-21-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-21-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-21-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-21-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-21-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-21-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-21-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-21-1&#34; name=&#34;__codelineno-21-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_tensor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tensor_input&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_new_tensor_2d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GGML_TYPE_32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;768&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;seq_len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-21-2&#34; name=&#34;__codelineno-21-2&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-21-3&#34; name=&#34;__codelineno-21-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// Create a view tensor of shape (768, seq_len) with offset 0&lt;/span&gt;
&lt;a id=&#34;__codelineno-21-4&#34; name=&#34;__codelineno-21-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// The last parameter of ggml_view_2d specifies the view&amp;#39;s offset (in bytes)&lt;/span&gt;
&lt;a id=&#34;__codelineno-21-5&#34; name=&#34;__codelineno-21-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_tensor&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Qcur&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_view_2d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctx0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tensor_input&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;768&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;seq_len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cur&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;768&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-21-6&#34; name=&#34;__codelineno-21-6&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-21-7&#34; name=&#34;__codelineno-21-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// Create a view tensor of shape (768, seq_len) with offset 768&lt;/span&gt;
&lt;a id=&#34;__codelineno-21-8&#34; name=&#34;__codelineno-21-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_tensor&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Kcur&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_view_2d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctx0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tensor_input&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;768&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;seq_len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cur&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;768&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-21-9&#34; name=&#34;__codelineno-21-9&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-21-10&#34; name=&#34;__codelineno-21-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// Create a view tensor of shape (768, seq_len) with offset 768 * 2&lt;/span&gt;
&lt;a id=&#34;__codelineno-21-11&#34; name=&#34;__codelineno-21-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_tensor&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Vcur&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_view_2d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctx0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tensor_input&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;768&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;seq_len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cur&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;768&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/p&gt;
&lt;h2 id=&#34;æ¢ç´¢ggmlçš„å®ç°ggmlçš„å†…å­˜ç®¡ç†&#34;&gt;æ¢ç´¢ggmlçš„å®ç°&amp;ndash;GGMLçš„å†…å­˜ç®¡ç†&lt;a class=&#34;headerlink&#34; href=&#34;#æ¢ç´¢ggmlçš„å®ç°ggmlçš„å†…å­˜ç®¡ç†&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;æœ¬å°èŠ‚é€šè¿‡æœ€ç®€å•çš„ä¸€ä¸ªä¾‹å­, ./examples/simple/simple-ctx.cppï¼Œç†è§£GGMLå®ç°ä¸¤ä¸ªçŸ©é˜µæ‰§è¡ŒçŸ©é˜µä¹˜æ³•çš„æ ¸å¿ƒå·¥ä½œæµç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªä¾‹å­å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼Œä¹Ÿå› æ­¤ä½œä¸ºæˆ‘ä»¬ç†è§£çš„èµ·ç‚¹ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;åœ¨cpuä¸Šæ‰§è¡Œæœ€ç®€å•çš„ä¸¤ä¸ªçŸ©é˜µçš„ä¹˜æ³•è®¡ç®—ï¼Œä¸ç¡¬ä»¶æ˜¾å¡æ— å…³&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ‰€æœ‰çš„è®¡ç®—éƒ½åœ¨cpuä¸Šæ‰§è¡Œï¼Œæ‰€æœ‰çš„å†…å­˜åˆ†é…éƒ½åœ¨RAMä¸­å®Œæˆ&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;!!![warning]
    GGMLé‡‡ç”¨cè¯­è¨€é£æ ¼å®ç°ï¼Œæ‰€ä»¥åœ¨å†…å­˜ç®¡ç†ä¸Šï¼Œé€šè¿‡structä¸­çš„æŒ‡é’ˆå’Œåç§»é‡æ¥ç®¡ç†å†…å­˜ï¼Œæˆ‘ä»¬éœ€è¦è·Ÿè¸ªæŒ‡é’ˆå€¼ã€è®¡ç®—åç§»é‡ï¼Œæ¥ç†è§£å®ƒçš„å†…å­˜å¸ƒå±€ã€‚&lt;/p&gt;
&lt;h3 id=&#34;è®¤è¯†ggml_context&#34;&gt;è®¤è¯†ggml_context&lt;a class=&#34;headerlink&#34; href=&#34;#è®¤è¯†ggml_context&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;è·³è¿‡ä¸é‡è¦çš„å‡½æ•°ï¼ˆæ¯”å¦‚ï¼š ggml_time_initï¼‰ï¼Œæ–­ç‚¹debugè¿›å…¥load_modelå‡½æ•°ã€‚é¦–å…ˆçœ‹åˆ°ä¸€ä¸ªctx_sizeçš„è®¡ç®—ï¼Œé€šè¿‡ctx_sizeä½œä¸ºå‚æ•°ï¼Œè°ƒç”¨äº†ggml_initå‡½æ•°, åˆå§‹åŒ–äº†struct ggml_context *ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;&#34; src=&#34;https://raw.githubusercontent.com/KenForever1/CDN/main/ggml-ctx.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;æš‚æ—¶å…ˆè·³è¿‡å¤æ‚çš„ctx_sizeè®¡ç®—ï¼Œé‡ç‚¹å…³æ³¨è¿™ä¸ªGGMLæœ€é‡è¦çš„å‡½æ•°ä¹‹ä¸€ï¼šggml_initã€‚&lt;/p&gt;
&lt;h4 id=&#34;ç†è§£ggml_init&#34;&gt;ç†è§£ggml_init&lt;a class=&#34;headerlink&#34; href=&#34;#ç†è§£ggml_init&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;ggml_initå‡½æ•°æ¥å—ä¸€ä¸ªå‚æ•°ggml_init_paramsï¼Œè¿™ä¸ªå‚æ•°ä¸­åŒ…å«å†…å­˜åˆ†é…çš„å‚æ•°ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;mem_size_: å†…å­˜æ± å¤§å°ï¼Œä¹Ÿå°±æ˜¯ctx_sizeï¼ˆæå‰è®¡ç®—å‡ºæ¥çš„ï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;mem_buffer_: å†…å­˜æ± ï¼Œä¹Ÿå°±æ˜¯ctx_bufferï¼Œè¿™ä¸ªå†…å­˜æ± ç”¨äºå­˜å‚¨ggml_tensorç»“æ„ä½“å’Œæ•°æ®ã€‚è¿™é‡Œä¼ é€’çš„NULLåˆå§‹åŒ–ï¼Œè¡¨ç¤ºç”±å†…éƒ¨åˆ†é…&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;no_alloc_: æ˜¯å¦ä½¿ç”¨ç”¨æˆ·ä¼ é€’çš„å†…å­˜æ± ï¼Œå¦‚æœä¸ºtrueï¼Œåˆ™ä½¿ç”¨ç”¨æˆ·ä¼ é€’çš„å†…å­˜æ± ã€‚è¿™ä¸ªä¼ é€’çš„falseï¼Œè¡¨ç¤ºç”±å†…éƒ¨åˆ†é…å†…å­˜æ± ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-22-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-22-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-22-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-22-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-22-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-22-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-22-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-22-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-22-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-22-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-22-1&#34; name=&#34;__codelineno-22-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_context&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_init_params&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;params&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-22-2&#34; name=&#34;__codelineno-22-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// ......&lt;/span&gt;
&lt;a id=&#34;__codelineno-22-3&#34; name=&#34;__codelineno-22-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-22-4&#34; name=&#34;__codelineno-22-4&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-22-5&#34; name=&#34;__codelineno-22-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_init_params&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-22-6&#34; name=&#34;__codelineno-22-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// memory pool&lt;/span&gt;
&lt;a id=&#34;__codelineno-22-7&#34; name=&#34;__codelineno-22-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;size_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mem_size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// bytes&lt;/span&gt;
&lt;a id=&#34;__codelineno-22-8&#34; name=&#34;__codelineno-22-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mem_buffer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// if NULL, memory will be allocated internally&lt;/span&gt;
&lt;a id=&#34;__codelineno-22-9&#34; name=&#34;__codelineno-22-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;no_alloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// don&amp;#39;t allocate memory for the tensor data&lt;/span&gt;
&lt;a id=&#34;__codelineno-22-10&#34; name=&#34;__codelineno-22-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;è¿›å…¥ggml_initå‡½æ•°ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œé¦–å…ˆåœ¨å †ä¸Šåˆ†é…äº†ä¸€ä¸ªstruct ggml_context *ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;&#34; src=&#34;https://raw.githubusercontent.com/KenForever1/CDN/main/ggml_init_func.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;åˆ°è¿™é‡Œï¼Œggml_contextå†…å­˜å¸ƒå±€å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥ä¼šä¸€æ­¥ä¸€æ­¥äº†è§£å†…éƒ¨çš„è¿›ä¸€æ­¥åˆ†é…ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;&#34; src=&#34;https://raw.githubusercontent.com/KenForever1/CDN/main/ggml-ctx-graph1.png&#34; /&gt;&lt;/p&gt;
&lt;h3 id=&#34;ggmlçš„tensorè¡¨ç¤º&#34;&gt;GGMLçš„tensorè¡¨ç¤º&lt;a class=&#34;headerlink&#34; href=&#34;#ggmlçš„tensorè¡¨ç¤º&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;åœ¨ggml_initå‡½æ•°æ‰§è¡Œå®Œæˆåï¼Œç´§æ¥ç€å°±æ˜¯å¯¹ä¸¤ä¸ªçŸ©é˜µtensorçš„åˆ›å»ºå’Œå†…å­˜èµ‹å€¼ã€‚åŒ…æ‹¬äº†ggml_new_tensor_2dçš„è°ƒç”¨ï¼Œä¸€ç›´è°ƒç”¨åˆ°çœŸæ­£çš„å®ç°å‡½æ•°ggml_new_tensor_implã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-23-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-23-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-23-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-23-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-23-5&#34;&gt;5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-23-6&#34;&gt;6&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-23-1&#34; name=&#34;__codelineno-23-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// create tensors&lt;/span&gt;
&lt;a id=&#34;__codelineno-23-2&#34; name=&#34;__codelineno-23-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_new_tensor_2d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GGML_TYPE_F32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cols_A&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rows_A&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-23-3&#34; name=&#34;__codelineno-23-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_new_tensor_2d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GGML_TYPE_F32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cols_B&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rows_B&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-23-4&#34; name=&#34;__codelineno-23-4&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-23-5&#34; name=&#34;__codelineno-23-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;memcpy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_nbytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;a id=&#34;__codelineno-23-6&#34; name=&#34;__codelineno-23-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;memcpy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_nbytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;å…³äºview_srcçš„å†…å®¹å¯ä»¥è·³è¿‡ï¼Œä¸»è¦ç”¨äºå¤„ç†å¼ é‡è§†å›¾ï¼Œç°åœ¨å¯ä»¥ä¸ç”¨å…³å¿ƒã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;&#34; src=&#34;https://raw.githubusercontent.com/KenForever1/CDN/main/ggml-new-tensor-impl.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼Œä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼šGGMLçš„å¼ é‡ç»´åº¦æ˜¯å¦‚ä½•è¡¨ç¤ºçš„ï¼Ÿ&lt;/p&gt;
&lt;p&gt;è¿™é‡Œæˆ‘ä»¬å¯ä»¥å’Œpytorchçš„å¼ é‡è¡¨ç¤ºè¿›è¡Œå¯¹æ¯”ï¼Œå› ä¸ºä½ å¯ä»¥å‘ç°ï¼Œå®ƒä»¬çš„è¡¨ç¤ºæ–¹å¼æ­£å¥½ç›¸åã€‚&lt;/p&gt;
&lt;p&gt;ggmlé‡‡ç”¨ä¸€ä¸ªå››ç»´æ•°ç»„è¡¨ç¤ºshapeä¿¡æ¯ã€‚åœ¨pytorchä¸­ä¸€ä¸ª[batch, channels, height, width]çš„å¼ é‡ï¼Œggmlä¸­è¡¨ç¤ºä¸º[width, height, channels, batch]ã€‚&lt;/p&gt;
&lt;p&gt;pytorchä»æœ€å¤–å±‚åˆ°æœ€å†…å±‚çš„æ•°æ®ï¼Œæ˜¯ä»å·¦åˆ°å³è¡¨ç¤ºçš„ã€‚è¿™é‡Œæœ€å†…å±‚ï¼Œè¡¨ç¤ºåœ¨å†…å­˜å­˜å‚¨ä¸Šè¿ç»­çš„ç»´åº¦ã€‚&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚rowä¼˜å…ˆå­˜å‚¨ï¼Œä¸€ä¸ª3 * 4çš„çŸ©é˜µï¼ˆ3è¡Œï¼Œ4åˆ—ï¼‰ï¼Œé‚£æœ€å†…å±‚ç»´åº¦å°±æ˜¯åˆ—ï¼Œä¹Ÿå°±æ˜¯4åˆ—ã€‚pytorchè¡¨ç¤ºä¸º[3, 4]ï¼Œggmlè¡¨ç¤ºä¸º[4, 3]ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;picture from https://en.wikipedia.org/wiki/Row-_and_column-major_order&#34; src=&#34;https://raw.githubusercontent.com/KenForever1/CDN/main/row-colomn-matrix.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;ä¸Šé¢è®¡ç®—å‡ºçš„data_sizeï¼Œå…ˆè®¡ç®—å•è¡Œçš„sizeï¼Œç„¶åä¹˜ä»¥è¡Œæ•°ï¼Œå¾—åˆ°çŸ©é˜µçš„sizeã€‚è¿™é‡Œçš„typeæ˜¯float32ç±»å‹ï¼Œå¦‚æœæ˜¯é‡åŒ–ç±»å‹ï¼Œsizeå°±ä¼šä¸åŒï¼Œåé¢ç”¨åˆ°åœ¨è®¨è®ºã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-24-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-24-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-24-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-24-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-24-5&#34;&gt;5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-24-6&#34;&gt;6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-24-7&#34;&gt;7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-24-8&#34;&gt;8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-24-9&#34;&gt;9&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-24-1&#34; name=&#34;__codelineno-24-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;kt&#34;&gt;size_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;obj_alloc_size&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-24-2&#34; name=&#34;__codelineno-24-2&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-24-3&#34; name=&#34;__codelineno-24-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;view_src&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;NULL&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;no_alloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-24-4&#34; name=&#34;__codelineno-24-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// allocate tensor data in the context&amp;#39;s memory pool&lt;/span&gt;
&lt;a id=&#34;__codelineno-24-5&#34; name=&#34;__codelineno-24-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;obj_alloc_size&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data_size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-24-6&#34; name=&#34;__codelineno-24-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-24-7&#34; name=&#34;__codelineno-24-7&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-24-8&#34; name=&#34;__codelineno-24-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_object&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;obj_new&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_new_object&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GGML_OBJECT_TYPE_TENSOR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GGML_TENSOR_SIZE&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;obj_alloc_size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-24-9&#34; name=&#34;__codelineno-24-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;GGML_ASSERT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;obj_new&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;å¦‚æœview_srcä¸ºç©ºï¼Œä¸”no_allocä¸ºfalseï¼Œåˆ™è°ƒç”¨ggml_new_objectå‡½æ•°ï¼Œåˆ†é…ä¸€ä¸ªstruct ggml_object *ï¼Œå¹¶åˆå§‹åŒ–ã€‚åˆ†é…çš„sizeå°±æ˜¯tensorçš„sizeï¼Œè¿™é‡Œå°±æ˜¯data_sizeã€‚&lt;/p&gt;
&lt;p&gt;!!! [warning]
    view_srcè¡¨ç¤ºè¯¥objæ˜¯å…¶å®ƒå†…å­˜çš„è§†å›¾ï¼Œä¸éœ€è¦åˆ†é…å†…å­˜ï¼Œç›´æ¥å¤ç”¨å†…å­˜ã€‚&lt;/p&gt;
&lt;p&gt;åˆ†é…çš„ggml_objectç»“æ„ä½“æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿ&lt;/p&gt;
&lt;h4 id=&#34;ç†è§£ggml_new_object&#34;&gt;ç†è§£ggml_new_object&lt;a class=&#34;headerlink&#34; href=&#34;#ç†è§£ggml_new_object&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;ç›´æ¥çœ‹ä»£ç ï¼Œå¯èƒ½æœ‰ç‚¹å›°éš¾ï¼Œæˆ‘ä»¬å¯¹å…³é”®ç‚¹è¿›è¡Œæ€»ç»“ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆè®¡ç®—äº†contextçš„sizeï¼Œæ®æ­¤åˆ†é…äº†ggml_contextã€‚æ¥ä¸‹æ¥çš„å†…å­˜åˆ†é…ï¼ŒåŒ…æ‹¬objçš„åˆ†é…ï¼Œéƒ½æ˜¯åœ¨contextçš„memory poolä¸­å®Œæˆã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ggml_objectçš„å®šä¹‰å¯ä»¥çœ‹å‡ºï¼Œæœ‰ä¸€ä¸ªnextæŒ‡é’ˆæŒ‡å‘ä¸‹ä¸€ä¸ªggml_objectã€‚å› æ­¤å®ƒæ˜¯é€šè¿‡é“¾è¡¨æ¥ç®¡ç†å†…å­˜çš„ï¼Œæ¯ä¸ªggml_objectå¯¹è±¡éƒ½æ˜¯ä¸€ä¸ªé“¾è¡¨èŠ‚ç‚¹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åˆå§‹çŠ¶æ€ä¸‹ï¼Œggml_objectçš„objects_beginå’Œobjects_endéƒ½ä¸ºNULLï¼Œè¡¨ç¤ºè¿™ä¸ªé“¾è¡¨ä¸ºç©ºã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ggml_objectçš„ç”¨é€”æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿggmlé€šè¿‡å®ƒæ¥éšå¼çš„ç®¡ç†å„ç§èµ„æº&amp;ndash;åŒ…æ‹¬tensorå¼ é‡ã€è®¡ç®—å›¾ã€work bufferç­‰ã€‚é“¾æ¥å…·æœ‰O(n)çš„æŸ¥æ‰¾æ—¶é—´å¤æ‚åº¦ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt=&#34;&#34; src=&#34;https://raw.githubusercontent.com/KenForever1/CDN/main/ggml-new-obj.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;åˆ†é…ä¸€ä¸ªggml_objectå¯¹è±¡ï¼Œéœ€è¦å¤šå¤§çš„å†…å­˜å‘¢ï¼Ÿ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-25-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-25-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-25-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-25-1&#34; name=&#34;__codelineno-25-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_object&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;obj_new&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_new_object&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GGML_OBJECT_TYPE_TENSOR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GGML_TENSOR_SIZE&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;obj_alloc_size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-25-2&#34; name=&#34;__codelineno-25-2&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-25-3&#34; name=&#34;__codelineno-25-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;size_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GGML_TENSOR_SIZE&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_tensor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;ä»¥è¿™é‡Œggml_objectåˆ†é…çš„æ˜¯tensorç±»å‹ä¸ºä¾‹å­ï¼š
åŒ…æ‹¬äº† struct ggml_objectçš„size + struct ggml_tensorçš„size + obj_alloc_sizeï¼ˆä¹Ÿå°±æ˜¯tensorçš„dataå†…å­˜å¤§å°ï¼‰ã€‚å½“ç„¶ggml_tensor strucçš„sizeå’Œobj_alloc_sizeè¿˜éœ€è¦è¿›è¡Œå†…å­˜å¯¹é½ã€‚&lt;/p&gt;
&lt;p&gt;åˆ°æ­¤ï¼Œæˆ‘ä»¬çš„ggml_contextå†…å­˜å¸ƒå±€ï¼ˆæ²¡æœ‰åˆ†é…æ–°çš„å†…å­˜ï¼Œæ‰€æœ‰çš„å†…å­˜éƒ½æ˜¯åˆ†é…ctxæ—¶åˆ†é…ï¼‰å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;&#34; src=&#34;https://raw.githubusercontent.com/KenForever1/CDN/main/ggml-ctx-graph2.png&#34; /&gt;&lt;/p&gt;
&lt;h4 id=&#34;ggml_tensorå¦‚ä½•å®šä¹‰&#34;&gt;ggml_tensorå¦‚ä½•å®šä¹‰&lt;a class=&#34;headerlink&#34; href=&#34;#ggml_tensorå¦‚ä½•å®šä¹‰&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;ä¸ŠèŠ‚ï¼Œæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªtensorï¼Œä»¥åŠé€šè¿‡ggml_objectè¿›è¡Œäº†è¡¨ç¤ºç®¡ç†ï¼Œå¹¶ä¸ºå…¶åœ¨ggml_contextä¸­åˆ†é…äº†å†…å­˜ï¼Œé‚£ä¹ˆggml_tensorç»“æ„ä½“çš„å®šä¹‰å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ç»§ç»­çœ‹ggml_new_tensor_implå‡½æ•°ä¸­çš„ä¸‹åŠéƒ¨åˆ†å†…å®¹ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-26-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-26-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-26-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-26-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-26-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-26-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-26-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-26-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-26-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-26-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-26-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-26-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-26-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-26-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-26-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-26-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-26-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-26-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-26-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-26-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-26-21&#34;&gt;21&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-26-22&#34;&gt;22&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-26-23&#34;&gt;23&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-26-24&#34;&gt;24&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-26-25&#34;&gt;25&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-26-26&#34;&gt;26&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-26-27&#34;&gt;27&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-26-28&#34;&gt;28&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-26-29&#34;&gt;29&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-26-30&#34;&gt;30&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-26-31&#34;&gt;31&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-26-32&#34;&gt;32&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-26-1&#34; name=&#34;__codelineno-26-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_tensor&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_tensor&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)((&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mem_buffer&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;obj_new&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;offs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-26-2&#34; name=&#34;__codelineno-26-2&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-26-3&#34; name=&#34;__codelineno-26-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_tensor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-26-4&#34; name=&#34;__codelineno-26-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;/*.type         =*/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-26-5&#34; name=&#34;__codelineno-26-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;/*.buffer       =*/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;NULL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-26-6&#34; name=&#34;__codelineno-26-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;/*.ne           =*/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
&lt;a id=&#34;__codelineno-26-7&#34; name=&#34;__codelineno-26-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;/*.nb           =*/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
&lt;a id=&#34;__codelineno-26-8&#34; name=&#34;__codelineno-26-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;/*.op           =*/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GGML_OP_NONE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-26-9&#34; name=&#34;__codelineno-26-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;/*.op_params    =*/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
&lt;a id=&#34;__codelineno-26-10&#34; name=&#34;__codelineno-26-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;/*.flags        =*/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-26-11&#34; name=&#34;__codelineno-26-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;/*.src          =*/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;NULL&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
&lt;a id=&#34;__codelineno-26-12&#34; name=&#34;__codelineno-26-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;/*.view_src     =*/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;view_src&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-26-13&#34; name=&#34;__codelineno-26-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;/*.view_offs    =*/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;view_offs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-26-14&#34; name=&#34;__codelineno-26-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;/*.data         =*/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;obj_alloc_size&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;?&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-26-15&#34; name=&#34;__codelineno-26-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;/*.name         =*/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
&lt;a id=&#34;__codelineno-26-16&#34; name=&#34;__codelineno-26-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;/*.extra        =*/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;NULL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-26-17&#34; name=&#34;__codelineno-26-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;/*.padding      =*/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
&lt;a id=&#34;__codelineno-26-18&#34; name=&#34;__codelineno-26-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;a id=&#34;__codelineno-26-19&#34; name=&#34;__codelineno-26-19&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-26-20&#34; name=&#34;__codelineno-26-20&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n_dims&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-26-21&#34; name=&#34;__codelineno-26-21&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ne&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ne&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;a id=&#34;__codelineno-26-22&#34; name=&#34;__codelineno-26-22&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-26-23&#34; name=&#34;__codelineno-26-23&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-26-24&#34; name=&#34;__codelineno-26-24&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_type_size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-26-25&#34; name=&#34;__codelineno-26-25&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ne&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_blck_size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;a id=&#34;__codelineno-26-26&#34; name=&#34;__codelineno-26-26&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GGML_MAX_DIMS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-26-27&#34; name=&#34;__codelineno-26-27&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ne&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;a id=&#34;__codelineno-26-28&#34; name=&#34;__codelineno-26-28&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-26-29&#34; name=&#34;__codelineno-26-29&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-26-30&#34; name=&#34;__codelineno-26-30&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n_objects&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-26-31&#34; name=&#34;__codelineno-26-31&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-26-32&#34; name=&#34;__codelineno-26-32&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;resultæŒ‡é’ˆæŒ‡å‘äº†ctx-&amp;gt;mem_buffer + obj_new-&amp;gt;offsï¼Œä¹Ÿå°±æ˜¯ggml_tensorç»“æ„ä½“å¯¹è±¡æ‰€åˆ†é…çš„å†…å­˜ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;&#34; src=&#34;https://raw.githubusercontent.com/KenForever1/CDN/main/ggml-ctx-graph3.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;ggml_tensorç»“æ„ä½“çš„å…³é”®å­—æ®µå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;dataï¼šæŒ‡å‘tensorå¼ é‡æ•°æ®å­˜å‚¨èµ·å§‹åœ°å€ï¼Œè¿™é‡Œå°±æ˜¯ggml_tensorç»“æ„ä½“è‡ªèº«ä¹‹åçš„ç¬¬ä¸€ä¸ªå­—èŠ‚ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;neï¼šä¸€ä¸ªå¤§å°ä¸º4çš„æ•°ç»„ï¼Œè¡¨ç¤ºæ¯ä¸ªç»´åº¦çš„å…ƒç´ æ•°é‡ï¼Œè¿™é‡Œæ˜¯[2, 4, 1, 1]ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;nbï¼šä¸€ä¸ªå¤§å°ä¸º4çš„æ•°ç»„ï¼Œè¡¨ç¤ºæ¯ä¸ªç»´åº¦çš„å…ƒç´ å­—èŠ‚æ•°ï¼Œè¿™é‡Œæ˜¯[4, 8, 32, 32]ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¦‚æœä¸è€ƒè™‘é‡åŒ–ï¼Œè®¡ç®—æ–¹å¼å¦‚ä¸‹:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-27-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-27-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-27-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-27-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-27-1&#34; name=&#34;__codelineno-27-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;nb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-27-2&#34; name=&#34;__codelineno-27-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;nb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ne&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;a id=&#34;__codelineno-27-3&#34; name=&#34;__codelineno-27-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;nb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ne&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;a id=&#34;__codelineno-27-4&#34; name=&#34;__codelineno-27-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;nb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ne&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;é€šè¿‡ä¸Šé¢çš„å†…å®¹æˆ‘ä»¬ä»¥åŠäº†è§£äº†ggml_new_tensor_2dçš„å·¥ä½œåŸç†ã€‚åœ¨simple-ctxä¾‹å­ä¸­ï¼Œä¼šè°ƒç”¨ä¸¤æ¬¡ä»¥åˆ†é…ä¸¤ä¸ªtensorå¼ é‡ï¼Œä¸€æ¬¡ä¸ºxï¼Œä¸€æ¬¡ä¸ºyï¼Œåˆ†é…åçš„å†…å­˜å¸ƒå±€å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;&#34; src=&#34;https://raw.githubusercontent.com/KenForever1/CDN/main/ggml-ctx-graph4.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;ç„¶åé€šè¿‡memcpyå°†æ•°æ®å¤åˆ¶åˆ°ggml_tensorçš„dataå­—æ®µä¸­ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;&#34; src=&#34;https://raw.githubusercontent.com/KenForever1/CDN/main/ggml-ctx-graph5.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;è¿™é‡Œçš„å¼ é‡æ•°æ®ç›´æ¥ç¡¬ç¼–ç å®šä¹‰åˆ°äº†æºä»£ç ä¸­ï¼Œå› æ­¤ä¸éœ€è¦åŠ è½½GGUæ–‡ä»¶ï¼Œå†æ›´å¤æ‚çš„ä¾‹å­ä¸­ä¼šé€šè¿‡GGUæ–‡ä»¶åŠ è½½æ•°æ®ã€‚&lt;/p&gt;
&lt;h3 id=&#34;è¦ç‚¹&#34;&gt;è¦ç‚¹&lt;a class=&#34;headerlink&#34; href=&#34;#è¦ç‚¹&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ggml é€šè¿‡ggml_contextæ¥å¤„ç†å†…å­˜åˆ†é…&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ggml_contextä¸­é€šè¿‡é“¾è¡¨æ¥ç®¡ç†å†…å­˜ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ggml_objectç»“æ„ä½“ï¼Œéšå¼ç®¡ç†tensorå¼ é‡ã€è®¡ç®—å›¾ã€work bufferç­‰èµ„æºã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ggml_tensorçš„ç»´åº¦è¡¨ç¤ºå’Œpytorchæ˜¯ç›¸åçš„ï¼Œè¿™ä¸ªéœ€è¦æ³¨æ„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ¢ç´¢ggmlçš„å®ç°ggmlè®¡ç®—å›¾æ„å»º&#34;&gt;æ¢ç´¢ggmlçš„å®ç°&amp;ndash;GGMLè®¡ç®—å›¾æ„å»º&lt;a class=&#34;headerlink&#34; href=&#34;#æ¢ç´¢ggmlçš„å®ç°ggmlè®¡ç®—å›¾æ„å»º&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;æœ¬å°èŠ‚ä»‹ç»GGMLå¦‚ä½•æ„å»ºå’Œç®¡ç†è®¡ç®—å›¾ç›¸å…³çš„æ•°æ®ç»“æ„ã€‚&lt;/p&gt;
&lt;h3 id=&#34;åœ¨ggml_contextä¸­åˆ›å»ºè®¡ç®—å›¾&#34;&gt;åœ¨ggml_contextä¸­åˆ›å»ºè®¡ç®—å›¾&lt;a class=&#34;headerlink&#34; href=&#34;#åœ¨ggml_contextä¸­åˆ›å»ºè®¡ç®—å›¾&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;ä¸Šä¸€èŠ‚ï¼Œå®Œæˆäº†ggml_contextçš„åˆ›å»ºï¼Œå¹¶ä¸”å®Œæˆäº†çŸ©é˜µè®¡ç®—æ‰€éœ€çš„ggml_tensorå¼ é‡çš„åˆ›å»ºã€‚(load_modelå‡½æ•°ä¸­å®ç°çš„åŠŸèƒ½)&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-28-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-28-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-28-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-28-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-28-5&#34;&gt;5&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-28-1&#34; name=&#34;__codelineno-28-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;simple_model&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-28-2&#34; name=&#34;__codelineno-28-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;load_model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;matrix_A&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;matrix_B&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rows_A&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cols_A&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rows_B&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cols_B&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-28-3&#34; name=&#34;__codelineno-28-3&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-28-4&#34; name=&#34;__codelineno-28-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// perform computation in cpu&lt;/span&gt;
&lt;a id=&#34;__codelineno-28-5&#34; name=&#34;__codelineno-28-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_tensor&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;compute&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;æ¥ä¸‹æ¥é‡ç‚¹ç ”ç©¶çš„å°±æ˜¯computeå‡½æ•°ï¼Œåˆ†ä¸ºæ„å»ºè®¡ç®—å›¾ã€æ‰§è¡Œå›¾è®¡ç®—ã€è·å–ç»“æœï¼ˆè·å–æœ€åä¸€ä¸ªè®¡ç®—èŠ‚ç‚¹çš„è¾“å‡ºç»“æœï¼‰ä¸‰ä¸ªæ­¥éª¤ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-29-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-29-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-29-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-29-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-29-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-29-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-29-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-29-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-29-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-29-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-29-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-29-1&#34; name=&#34;__codelineno-29-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// compute with backend&lt;/span&gt;
&lt;a id=&#34;__codelineno-29-2&#34; name=&#34;__codelineno-29-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_tensor&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;compute&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;simple_model&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-29-3&#34; name=&#34;__codelineno-29-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_cgraph&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;gf&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;build_graph&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-29-4&#34; name=&#34;__codelineno-29-4&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-29-5&#34; name=&#34;__codelineno-29-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n_threads&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// number of threads to perform some operations with multi-threading&lt;/span&gt;
&lt;a id=&#34;__codelineno-29-6&#34; name=&#34;__codelineno-29-6&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-29-7&#34; name=&#34;__codelineno-29-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_graph_compute_with_ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;gf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n_threads&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-29-8&#34; name=&#34;__codelineno-29-8&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-29-9&#34; name=&#34;__codelineno-29-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// in this case, the output tensor is the last one in the graph&lt;/span&gt;
&lt;a id=&#34;__codelineno-29-10&#34; name=&#34;__codelineno-29-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_graph_node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;gf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;-1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-29-11&#34; name=&#34;__codelineno-29-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;åœ¨build_graphå‡½æ•°ä¸­ï¼Œé¦–å…ˆä¼šè°ƒç”¨&lt;strong&gt;ggml_new_graph&lt;/strong&gt;ï¼Œè¿™ä¸ªå‡½æ•°å¯ä»¥å’Œå‰ä¸€èŠ‚ä¸­ggml_new_tensorå‡½æ•°ä¸€æ ·çš„æ–¹å¼ç†è§£ã€‚å®ƒä¹Ÿæ˜¯åˆ›å»ºäº†ggml_objectå¯¹è±¡ï¼Œä½†æ˜¯ä¸åŒçš„æ˜¯ï¼Œ&lt;strong&gt;è¿™ä¸ªobjectç®¡ç†çš„æ˜¯è®¡ç®—å›¾ï¼ˆggml_cgraphç»“æ„ä½“å¯¹è±¡ï¼‰&lt;/strong&gt;ï¼Œè€Œä¸æ˜¯tensorå¼ é‡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;&#34; src=&#34;https://raw.githubusercontent.com/KenForever1/CDN/main/ggml-new-graph-custom.png&#34; /&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;é€šè¿‡ggml_graph_nbyteså‡½æ•°è·å–è®¡ç®—å›¾éœ€è¦å ç”¨çš„å†…å­˜å¤§å°&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ggml_new_objectæ ¹æ®è®¡ç®—å›¾å¤§å°åœ¨ggml_contextå†…å­˜åŒºåŸŸä¸­åˆ†é…ä¸€å—å†…å­˜ï¼Œåˆ›å»ºggml_objectå¯¹è±¡&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é€šè¿‡offsåç§»è·å–ggml_objectä¸­ç®¡ç†çš„ggml_cgraphç»“æ„ä½“å¯¹è±¡æŒ‡é’ˆï¼Œå®Œæˆè®¡ç®—å›¾çš„æ„å»º&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç°åœ¨æˆ‘ä»¬å†å¯¹ç»†èŠ‚è¿›è¡Œå±•å¼€ä»‹ç»ï¼š&lt;/p&gt;
&lt;h4 id=&#34;ggml_gral_nbytesè®¡ç®—ç»†èŠ‚&#34;&gt;ggml_gral_nbytesè®¡ç®—ç»†èŠ‚&lt;a class=&#34;headerlink&#34; href=&#34;#ggml_gral_nbytesè®¡ç®—ç»†èŠ‚&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;GGML_DEFAULT_GRAPH_SIZEæ˜¯ä¸€ä¸ªå®å®šä¹‰ï¼Œé»˜è®¤å€¼ä¸º2048ã€‚å®šä¹‰äº†å•ä¸ªggml_cgraphä¸­å¯åˆ†é…çš„æœ€å¤§èŠ‚ç‚¹æ ‘å’Œleafï¼ˆå¶èŠ‚ç‚¹ï¼‰å¼ é‡æ•°ã€‚ç„¶åä½¿ç”¨ggml_hash_sizeå‡½æ•°è®¡ç®—hashè¡¨éœ€è¦çš„å†…å­˜å¤§å°ï¼Œä¹˜ä»¥2æ˜¯éœ€è¦ç®¡ç†nodeså’Œleafsä¸¤ç§ç±»å‹ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-30-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-30-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-30-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-30-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-30-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-30-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-30-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-30-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-30-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-30-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-30-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-30-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-30-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-30-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-30-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-30-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-30-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-30-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-30-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-30-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-30-21&#34;&gt;21&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-30-22&#34;&gt;22&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-30-23&#34;&gt;23&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-30-1&#34; name=&#34;__codelineno-30-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// è°ƒç”¨ggml_new_graph_customä¼ é€’çš„å‚æ•°&lt;/span&gt;
&lt;a id=&#34;__codelineno-30-2&#34; name=&#34;__codelineno-30-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;ggml_new_graph_custom&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GGML_DEFAULT_GRAPH_SIZE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-30-3&#34; name=&#34;__codelineno-30-3&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-30-4&#34; name=&#34;__codelineno-30-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#define GGML_DEFAULT_GRAPH_SIZE 2048&lt;/span&gt;
&lt;a id=&#34;__codelineno-30-5&#34; name=&#34;__codelineno-30-5&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-30-6&#34; name=&#34;__codelineno-30-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;size_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;ggml_graph_nbytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;size_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;grads&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-30-7&#34; name=&#34;__codelineno-30-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;size_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hash_size&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_hash_size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-30-8&#34; name=&#34;__codelineno-30-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-30-9&#34; name=&#34;__codelineno-30-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;incr_ptr_aligned&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_cgraph&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-30-10&#34; name=&#34;__codelineno-30-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;incr_ptr_aligned&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_tensor&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_tensor&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// nodes&lt;/span&gt;
&lt;a id=&#34;__codelineno-30-11&#34; name=&#34;__codelineno-30-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;incr_ptr_aligned&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_tensor&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_tensor&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// leafs&lt;/span&gt;
&lt;a id=&#34;__codelineno-30-12&#34; name=&#34;__codelineno-30-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;incr_ptr_aligned&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hash_size&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int32_t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int32_t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// use_counts&lt;/span&gt;
&lt;a id=&#34;__codelineno-30-13&#34; name=&#34;__codelineno-30-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;incr_ptr_aligned&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hash_size&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_tensor&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_tensor&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// hash keys&lt;/span&gt;
&lt;a id=&#34;__codelineno-30-14&#34; name=&#34;__codelineno-30-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;grads&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-30-15&#34; name=&#34;__codelineno-30-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;incr_ptr_aligned&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hash_size&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_tensor&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_tensor&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// grads&lt;/span&gt;
&lt;a id=&#34;__codelineno-30-16&#34; name=&#34;__codelineno-30-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;incr_ptr_aligned&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hash_size&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_tensor&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_tensor&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// grad_accs&lt;/span&gt;
&lt;a id=&#34;__codelineno-30-17&#34; name=&#34;__codelineno-30-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-30-18&#34; name=&#34;__codelineno-30-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// è®¡ç®—hash_sizeéœ€è¦å¤šå°‘ä¸ªggml_bitset_tè¡¨ç¤ºçŠ¶æ€ï¼Œè¿™äº›å¤šä¸ªggml_bitset_tæ„æˆäº†bitä½å›¾&lt;/span&gt;
&lt;a id=&#34;__codelineno-30-19&#34; name=&#34;__codelineno-30-19&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;incr_ptr_aligned&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_bitset_size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hash_size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_bitset_t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_bitset_t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;a id=&#34;__codelineno-30-20&#34; name=&#34;__codelineno-30-20&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-30-21&#34; name=&#34;__codelineno-30-21&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;size_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nbytes&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;size_t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-30-22&#34; name=&#34;__codelineno-30-22&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nbytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-30-23&#34; name=&#34;__codelineno-30-23&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;ggml_hash_sizeä»å…¶å®ç°æ¥çœ‹ï¼Œé€šè¿‡äºŒåˆ†æŸ¥æ‰¾æ‰¾åˆ°å¤§äºæˆ–ç­‰äº2 * GGML_DEFAULT_GRAPH_SIZEçš„æœ€å°è´¨æ•°ï¼Œè¿™ä¸ªè´¨æ•°å†³å®šäº†è®¡ç®—å›¾å“ˆå¸Œè¡¨çš„å¤§å°ã€‚é€‰æ‹©è´¨æ•°ä¸»è¦æ˜¯å‡ºäºæ€§èƒ½è€ƒè™‘ï¼šGGMLé‡‡ç”¨äº†ä¸€ç§ç®€å•çš„å¼€æ”¾åœ°å€å“ˆå¸Œå‡½æ•°ï¼Œå¹¶ä½¿ç”¨çº¿æ€§æ¢æµ‹æ³•ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-31-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-31-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-31-1&#34; name=&#34;__codelineno-31-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// the last 4 bits are always zero due to alignment&lt;/span&gt;
&lt;a id=&#34;__codelineno-31-2&#34; name=&#34;__codelineno-31-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;Key&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_tensor_pointer_value&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;%&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;table_size&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;ä½¿ç”¨è´¨æ•°è¡¨å¤§å°æœ‰åŠ©äºæ›´å‡åŒ€åœ°åˆ†å¸ƒé”®ï¼Œå‡å°‘èšé›†ã€æé«˜æŸ¥æ‰¾æ•ˆç‡ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;p&gt;ggml_graphçš„å†…å­˜å¸ƒå±€ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ggml_cgraphç»“æ„ä½“å¯¹è±¡å ç”¨ç©ºé—´ï¼šsizeof(struct ggml_cgraph)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;2048ä¸ªtensorå¼ é‡æŒ‡é’ˆï¼ŒæŒ‡å‘nodes&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;2048ä¸ªtensorå¼ é‡æŒ‡é’ˆï¼ŒæŒ‡å‘leafs&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;hash_sizeä¸ªint32_tï¼Œç”¨äºè®°å½•å¼ é‡çš„ä½¿ç”¨æ¬¡æ•°&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;hash_sizeä¸ªtensorå¼ é‡æŒ‡é’ˆï¼Œç”¨äºå­˜å‚¨å¼ é‡çš„å“ˆå¸Œé”®&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ¢¯åº¦ç›¸å…³ï¼Œsimple_ctxä¾‹å­ä¸æ¶‰åŠ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å“ˆå¸Œè¡¨bitä½å›¾ï¼Œç”¨äºè®°å½•å¼ é‡çš„ä½¿ç”¨æƒ…å†µ&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å…³äºbitä½å›¾ï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-32-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-32-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-32-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-32-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-32-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-32-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-32-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-32-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-32-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-32-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-32-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-32-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-32-1&#34; name=&#34;__codelineno-32-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;typedef&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_bitset_t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-32-2&#34; name=&#34;__codelineno-32-2&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-32-3&#34; name=&#34;__codelineno-32-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;static_assert&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_bitset_t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;bitset_t constants must be updated&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-32-4&#34; name=&#34;__codelineno-32-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#define BITSET_SHR 5 &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// log2(sizeof(ggml_bitset_t)*8)&lt;/span&gt;
&lt;a id=&#34;__codelineno-32-5&#34; name=&#34;__codelineno-32-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#define BITSET_MASK (sizeof(ggml_bitset_t)*8 - 1)&lt;/span&gt;
&lt;a id=&#34;__codelineno-32-6&#34; name=&#34;__codelineno-32-6&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-32-7&#34; name=&#34;__codelineno-32-7&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-32-8&#34; name=&#34;__codelineno-32-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// &amp;gt;&amp;gt; BITSET_SHRç›¸å½“äºé™¤ä»¥32ï¼Œè¡¨ç¤ºæ•°å­—nçš„bitè®°å½•ä½äºç¬¬å‡ ä¸ªggml_bitset_tä¸­&lt;/span&gt;
&lt;a id=&#34;__codelineno-32-9&#34; name=&#34;__codelineno-32-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// ä¸€ä¸ªggml_bitset_tå¯ä»¥è¡¨ç¤º32ä¸ªæ•°çš„çŠ¶æ€ï¼Œåœ¨æœ¬æ–‡ä¸Šä¸‹æ–‡ä¸­å³è¡¨ç¤ºä¸€ä¸ªhashä½ç½®&lt;/span&gt;
&lt;a id=&#34;__codelineno-32-10&#34; name=&#34;__codelineno-32-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;size_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;ggml_bitset_size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;size_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-32-11&#34; name=&#34;__codelineno-32-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;BITSET_MASK&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;BITSET_SHR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-32-12&#34; name=&#34;__codelineno-32-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;æ ¹æ®ggml_graph_nbyteså‡½æ•°è®¡ç®—å‡ºæ¥çš„å†…å­˜å¤§å°ï¼Œåœ¨ctxä¸­åˆ†é…å†…å­˜ï¼Œåˆ†é…åçš„å†…å­˜å¸ƒå±€å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;&#34; src=&#34;https://raw.githubusercontent.com/KenForever1/CDN/main/ggml_graph_graph1.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;åŒ…æ‹¬è®¡ç®—å›¾å¯¹è±¡ã€èŠ‚ç‚¹æŒ‡é’ˆã€å¶å­æŒ‡é’ˆã€ä½¿ç”¨æ¬¡æ•°ã€å“ˆå¸Œé”®ã€æ¢¯åº¦ã€å“ˆå¸Œè¡¨bitä½å›¾ã€‚æ¥ä¸‹æ¥çš„å‡ è¡Œä»£ç åˆå§‹åŒ–æŒ‡å‘å·²åˆ†é…å†…å­˜ä¸­ä¸åŒåŒºåŸŸçš„æŒ‡é’ˆï¼Œå¹¶å°†å®ƒä»¬å­˜å‚¨åœ¨ggml_cgraphç»“æ„ä½“ä¸­ã€‚æœ€åï¼Œå“ˆå¸Œè¡¨è¢«é‡ç½®ï¼Œæ‰€æœ‰æ§½ä½éƒ½è¢«æ ‡è®°ä¸ºæœªå ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;&#34; src=&#34;https://raw.githubusercontent.com/KenForever1/CDN/main/ggml_graph_graph2.png&#34; /&gt;&lt;/p&gt;
&lt;h3 id=&#34;æ„å»ºçŸ©é˜µä¹˜è®¡ç®—å›¾&#34;&gt;æ„å»ºçŸ©é˜µä¹˜è®¡ç®—å›¾&lt;a class=&#34;headerlink&#34; href=&#34;#æ„å»ºçŸ©é˜µä¹˜è®¡ç®—å›¾&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;å‰é¢çš„å†…å®¹ä»‹ç»äº†åœ¨ggml_contextä¸­åˆ†é…ä¸€ä¸ªè®¡ç®—å›¾å†…å­˜ï¼Œå¹¶ä¸”åˆå§‹åŒ–äº†ç›¸å…³æˆå‘˜é»˜è®¤å€¼ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-33-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-33-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-33-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-33-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-33-5&#34;&gt;5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-33-6&#34;&gt;6&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-33-1&#34; name=&#34;__codelineno-33-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_cgraph&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;gf&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_new_graph&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-33-2&#34; name=&#34;__codelineno-33-2&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-33-3&#34; name=&#34;__codelineno-33-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// ç”¨gfè¡¨ç¤ºçŸ©é˜µä¹˜ä»»åŠ¡&lt;/span&gt;
&lt;a id=&#34;__codelineno-33-4&#34; name=&#34;__codelineno-33-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// result = a*b^T&lt;/span&gt;
&lt;a id=&#34;__codelineno-33-5&#34; name=&#34;__codelineno-33-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_tensor&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_mul_mat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-33-6&#34; name=&#34;__codelineno-33-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;ggml_build_forward_expand&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;gf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;ç°åœ¨è¿™ä¸ªè®¡ç®—å›¾gfæ”¯æŒæ·»åŠ 2048ä¸ªå¼ é‡èŠ‚ç‚¹å’Œå¶èŠ‚ç‚¹ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰å°†çŸ©é˜µä¹˜è¿™ä¸ªè®¡ç®—çš„èŠ‚ç‚¹åŠ å…¥è®¡ç®—å›¾ã€‚æ¥ä¸‹æ¥çš„å†…å®¹å°±æ˜¯ä»‹ç»å¦‚ä½•å°†çŸ©é˜µä¹˜ä»»åŠ¡ä¿¡æ¯ç”¨è®¡ç®—å›¾è¿›è¡Œè¡¨ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ggml_mul_matå‡½æ•°ä¸­ï¼Œé¦–å…ˆæ£€æŸ¥è¾“å…¥å¼ é‡çš„åˆæ³•æ€§ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªç»“æœå¼ é‡ï¼Œå¹¶è®¾ç½®å¼ é‡çš„è¿ç®—ç±»å‹ä¸ºçŸ©é˜µä¹˜ã€‚
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-34-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-34-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-34-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-34-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-34-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-34-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-34-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-34-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-34-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-34-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-34-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-34-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-34-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-34-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-34-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-34-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-34-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-34-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-34-1&#34; name=&#34;__codelineno-34-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_tensor&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_mul_mat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;a id=&#34;__codelineno-34-2&#34; name=&#34;__codelineno-34-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_context&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-34-3&#34; name=&#34;__codelineno-34-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_tensor&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-34-4&#34; name=&#34;__codelineno-34-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_tensor&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-34-5&#34; name=&#34;__codelineno-34-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GGML_ASSERT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_can_mul_mat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;a id=&#34;__codelineno-34-6&#34; name=&#34;__codelineno-34-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GGML_ASSERT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_is_transposed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;a id=&#34;__codelineno-34-7&#34; name=&#34;__codelineno-34-7&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-34-8&#34; name=&#34;__codelineno-34-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// è®¡ç®—ç»“æœçš„shape&lt;/span&gt;
&lt;a id=&#34;__codelineno-34-9&#34; name=&#34;__codelineno-34-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int64_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ne&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ne&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ne&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ne&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ne&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;a id=&#34;__codelineno-34-10&#34; name=&#34;__codelineno-34-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_tensor&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_new_tensor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GGML_TYPE_F32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ne&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-34-11&#34; name=&#34;__codelineno-34-11&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-34-12&#34; name=&#34;__codelineno-34-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// å°†åŠ å…¥graph nodesä¸­çš„ä¸€ä¸ªnodeï¼Œç±»å‹ä½çŸ©é˜µä¹˜&lt;/span&gt;
&lt;a id=&#34;__codelineno-34-13&#34; name=&#34;__codelineno-34-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;op&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GGML_OP_MUL_MAT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-34-14&#34; name=&#34;__codelineno-34-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;src&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-34-15&#34; name=&#34;__codelineno-34-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;src&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-34-16&#34; name=&#34;__codelineno-34-16&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-34-17&#34; name=&#34;__codelineno-34-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-34-18&#34; name=&#34;__codelineno-34-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/p&gt;
&lt;p&gt;ç°åœ¨ï¼Œåˆ°äº†æˆ‘ä»¬æ„å»ºè®¡ç®—å›¾çš„æœ€åé˜¶æ®µäº†ï¼Œç§˜å¯†å°±è—åœ¨ggml_build_forward_expandå‡½æ•°ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;å‡½æ•°çš„è¾“å…¥å‚æ•°æ˜¯æˆ‘ä»¬åˆ›å»ºçš„â€œç©ºå›¾â€å’ŒçŸ©é˜µä¹˜ä»»åŠ¡æ‰€è¿”å›çš„çŸ©é˜µä¹˜ç»“æœèŠ‚ç‚¹ï¼ˆåœ¨å¤æ‚çš„æ¡ˆä¾‹ä¸­ï¼Œå°±æ˜¯æ¨¡å‹çš„è¾“å‡ºèŠ‚ç‚¹æˆ–è€…LLMä¸­çš„logitsï¼‰ã€‚&lt;/p&gt;
&lt;h4 id=&#34;ggml_build_forward_expand-å‡½æ•°ç»†èŠ‚æ¢ç´¢&#34;&gt;ggml_build_forward_expand å‡½æ•°ç»†èŠ‚æ¢ç´¢&lt;a class=&#34;headerlink&#34; href=&#34;#ggml_build_forward_expand-å‡½æ•°ç»†èŠ‚æ¢ç´¢&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;è¯¥å‡½æ•°è°ƒç”¨åˆ°äº†ggml_build_forward_implå‡½æ•°ï¼Œæ ¸å¿ƒå®ç°åœ¨ggml_visit_parentsä¸­ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-35-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-35-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-35-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-35-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-35-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-35-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-35-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-35-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-35-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-35-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-35-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-35-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-35-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-35-1&#34; name=&#34;__codelineno-35-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;ggml_build_forward_impl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_cgraph&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cgraph&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_tensor&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tensor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;expand&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-35-2&#34; name=&#34;__codelineno-35-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cgraph&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n_nodes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-35-3&#34; name=&#34;__codelineno-35-3&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-35-4&#34; name=&#34;__codelineno-35-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_visit_parents&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cgraph&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tensor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-35-5&#34; name=&#34;__codelineno-35-5&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-35-6&#34; name=&#34;__codelineno-35-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n_new&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cgraph&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n_nodes&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-35-7&#34; name=&#34;__codelineno-35-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GGML_PRINT_DEBUG&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;%s: visited %d new nodes&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__func__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n_new&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-35-8&#34; name=&#34;__codelineno-35-8&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-35-9&#34; name=&#34;__codelineno-35-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n_new&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-35-10&#34; name=&#34;__codelineno-35-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// the last added node should always be starting point&lt;/span&gt;
&lt;a id=&#34;__codelineno-35-11&#34; name=&#34;__codelineno-35-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GGML_ASSERT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cgraph&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nodes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cgraph&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n_nodes&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tensor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-35-12&#34; name=&#34;__codelineno-35-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-35-13&#34; name=&#34;__codelineno-35-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;ggml_visit_parentså‡½æ•°é€šè¿‡é€’å½’çš„æ–¹å¼æ„å»ºäº†è®¡ç®—å›¾ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;&#34; src=&#34;https://raw.githubusercontent.com/KenForever1/CDN/main/ggml_visit_parents-1.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;&#34; src=&#34;https://raw.githubusercontent.com/KenForever1/CDN/main/ggml_visit_parents-2.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;æ ¸å¿ƒé€»è¾‘ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ£€æŸ¥å½“å‰å¼ é‡æ˜¯å¦å·²å­˜åœ¨äºå“ˆå¸Œè¡¨ä¸­ã€‚å¦‚æœå­˜åœ¨ï¼Œåˆ™åœæ­¢æ‰§è¡Œå¹¶è¿”å›ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¯¹æ‰€æœ‰srcå¼ é‡é€’å½’è°ƒç”¨ggml_visit_parentså‡½æ•°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¦‚æœå®ƒæ˜¯ä¸€ä¸ªå¶èŠ‚ç‚¹ï¼ˆå³å¸¸é‡å¼ é‡æˆ–ä¸ç”±è¿ç®—ç”Ÿæˆçš„è¾“å…¥å¼ é‡ï¼‰ï¼Œåˆ™å°†å…¶å­˜å‚¨åœ¨å›¾çš„å¶æ•°ç»„ï¼ˆleafsæ•°ç»„ï¼‰ä¸­ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¦åˆ™ï¼Œå°†å…¶å­˜å‚¨åœ¨å›¾çš„èŠ‚ç‚¹æ•°ç»„ï¼ˆnodesæ•°ç»„ï¼‰ä¸­ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ‰€æœ‰é€’å½’è°ƒç”¨è¿”å›åï¼Œæœ€åä¸€æ¬¡æ£€æŸ¥ä¼šç¡®ä¿æœ€åè®°å½•çš„èŠ‚ç‚¹æ˜¯ç»“æœå¼ é‡ã€‚å› ä¸ºä½¿ç”¨äº†ååºéå†ï¼Œè¿™æ„å‘³ç€è¾“å…¥èŠ‚ç‚¹ï¼ˆå¼ é‡ï¼‰æ˜¯æœ€åæ’å…¥çš„ã€‚&lt;/p&gt;
&lt;p&gt;é‡‡ç”¨debugæ‰“å°gfè®¡ç®—å›¾ä¿¡æ¯ï¼Œ1ä¸ªnodeèŠ‚ç‚¹å°±æ˜¯mat mul opèŠ‚ç‚¹ï¼Œä¸¤ä¸ªleafèŠ‚ç‚¹å°±æ˜¯ä¸¤ä¸ªè¾“å…¥å¼ é‡aã€bçŸ©é˜µã€‚
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-36-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-36-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-36-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-36-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-36-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-36-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-36-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-36-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-36-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-36-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-36-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-36-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-36-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-36-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-36-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-36-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-36-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-36-1&#34; name=&#34;__codelineno-36-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;gf&lt;/span&gt;
&lt;a id=&#34;__codelineno-36-2&#34; name=&#34;__codelineno-36-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_cgraph&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-36-3&#34; name=&#34;__codelineno-36-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2048&lt;/span&gt;
&lt;a id=&#34;__codelineno-36-4&#34; name=&#34;__codelineno-36-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n_nodes&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
&lt;a id=&#34;__codelineno-36-5&#34; name=&#34;__codelineno-36-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n_leafs&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;
&lt;a id=&#34;__codelineno-36-6&#34; name=&#34;__codelineno-36-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nodes&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x000055555556ddd8&lt;/span&gt;
&lt;a id=&#34;__codelineno-36-7&#34; name=&#34;__codelineno-36-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;grads&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;
&lt;a id=&#34;__codelineno-36-8&#34; name=&#34;__codelineno-36-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;grad_accs&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;
&lt;a id=&#34;__codelineno-36-9&#34; name=&#34;__codelineno-36-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;leafs&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x0000555555571dd8&lt;/span&gt;
&lt;a id=&#34;__codelineno-36-10&#34; name=&#34;__codelineno-36-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;use_counts&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x0000555555575dd8&lt;/span&gt;
&lt;a id=&#34;__codelineno-36-11&#34; name=&#34;__codelineno-36-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;visited_hash_set&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-36-12&#34; name=&#34;__codelineno-36-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4099&lt;/span&gt;
&lt;a id=&#34;__codelineno-36-13&#34; name=&#34;__codelineno-36-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;used&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x0000555555581e00&lt;/span&gt;
&lt;a id=&#34;__codelineno-36-14&#34; name=&#34;__codelineno-36-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;keys&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x0000555555579de8&lt;/span&gt;
&lt;a id=&#34;__codelineno-36-15&#34; name=&#34;__codelineno-36-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-36-16&#34; name=&#34;__codelineno-36-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;order&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GGML_CGRAPH_EVAL_ORDER_LEFT_TO_RIGHT&lt;/span&gt;
&lt;a id=&#34;__codelineno-36-17&#34; name=&#34;__codelineno-36-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/p&gt;
&lt;p&gt;åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»æ„å»ºå¥½äº†aã€bçŸ©é˜µä¹˜è¿™ä¸ªä»»åŠ¡çš„è®¡ç®—å›¾ï¼Œæ¥ä¸‹æ¥å°±æ˜¯çœ‹GGMLå¦‚ä½•æ‰§è¡Œè¿™ä¸ªè®¡ç®—å›¾å¹¶è·å–è®¡ç®—ç»“æœäº†ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ¢ç´¢ggmlçš„å®ç°æ‰§è¡Œggmlè®¡ç®—å›¾&#34;&gt;æ¢ç´¢ggmlçš„å®ç°&amp;ndash;æ‰§è¡ŒGGMLè®¡ç®—å›¾&lt;a class=&#34;headerlink&#34; href=&#34;#æ¢ç´¢ggmlçš„å®ç°æ‰§è¡Œggmlè®¡ç®—å›¾&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;è¿™èŠ‚ä¸»è¦ä»‹ç»å¦‚ä½•è®¡ç®—GGMLè®¡ç®—å›¾ï¼Œå®ç°çš„æ ¸å¿ƒé€»è¾‘åœ¨ggml_graph_compute_with_ctxå‡½æ•°ä¸­ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-37-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-37-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-37-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-37-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-37-5&#34;&gt;5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-37-6&#34;&gt;6&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-37-1&#34; name=&#34;__codelineno-37-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n_threads&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// number of threads to perform some operations with multi-threading&lt;/span&gt;
&lt;a id=&#34;__codelineno-37-2&#34; name=&#34;__codelineno-37-2&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-37-3&#34; name=&#34;__codelineno-37-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;ggml_graph_compute_with_ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;gf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n_threads&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-37-4&#34; name=&#34;__codelineno-37-4&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-37-5&#34; name=&#34;__codelineno-37-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// in this case, the output tensor is the last one in the graph&lt;/span&gt;
&lt;a id=&#34;__codelineno-37-6&#34; name=&#34;__codelineno-37-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_graph_node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;gf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;-1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;åœ¨è¯¥å‡½æ•°ä¸­ï¼Œé¦–å…ˆåˆ›å»ºäº†ä¸ªä¸€ä¸ªè®¡ç®—è®¡åˆ’ï¼Œå¹¶ä¸”æ ¹æ®cplançš„work_sizeåˆ†é…äº†å®Œæˆè¿™ä¸ªplanæ‰€éœ€çš„bufferï¼Œç„¶åè°ƒç”¨ggml_graph_computeå‡½æ•°æ‰§è¡Œè®¡ç®—è®¡åˆ’ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-38-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-38-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-38-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-38-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-38-5&#34;&gt;5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-38-6&#34;&gt;6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-38-7&#34;&gt;7&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-38-1&#34; name=&#34;__codelineno-38-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;enum&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_status&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_graph_compute_with_ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_context&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_cgraph&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cgraph&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n_threads&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-38-2&#34; name=&#34;__codelineno-38-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_cplan&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cplan&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_graph_plan&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cgraph&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n_threads&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;NULL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-38-3&#34; name=&#34;__codelineno-38-3&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-38-4&#34; name=&#34;__codelineno-38-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cplan&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;work_data&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint8_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_new_buffer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cplan&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;work_size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-38-5&#34; name=&#34;__codelineno-38-5&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-38-6&#34; name=&#34;__codelineno-38-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_graph_compute&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cgraph&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cplan&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-38-7&#34; name=&#34;__codelineno-38-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;ggml_cplanç»“æ„ä½“çš„æ ¸å¿ƒç›®çš„æ˜¯ï¼š&lt;strong&gt;ç¡®å®šè®¡ç®—çš„å…³é”®æ‰§è¡Œå‚æ•°&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;n_threadsï¼šç”¨äºå›¾è®¡ç®—çš„çº¿ç¨‹æ•°ï¼Œè¿™ä¸ªè®¾ç½®ä¸ºäº†1ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;work_sizeï¼šè®¡ç®—è®¡åˆ’æ‰€éœ€çš„ä¸´æ—¶å†…å­˜å¤§å°ï¼ˆå­—èŠ‚ä¸ºå•ä½ï¼‰ã€‚åœ¨simple-ctxè¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œè¿™ä¸ªå€¼è¢«è®¾ç½®ä¸º0ï¼Œä¸åŒçš„åç«¯å’Œopéœ€è¦çš„work_sizeæœ‰ä¸åŒã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æ¢ç´¢ggml_graph_planç»†èŠ‚&#34;&gt;æ¢ç´¢ggml_graph_planç»†èŠ‚&lt;a class=&#34;headerlink&#34; href=&#34;#æ¢ç´¢ggml_graph_planç»†èŠ‚&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;h4 id=&#34;å¦‚ä½•ç¡®å®šçº¿ç¨‹æ•°é‡&#34;&gt;å¦‚ä½•ç¡®å®šçº¿ç¨‹æ•°é‡&lt;a class=&#34;headerlink&#34; href=&#34;#å¦‚ä½•ç¡®å®šçº¿ç¨‹æ•°é‡&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;ggml_graph_planå‡½æ•°å®ç°çš„ä¸»è¦åŠŸèƒ½å°±æ˜¯ç¡®å®šè®¡ç®—è®¡åˆ’æ‰€éœ€çš„çº¿ç¨‹æ•°å’Œä¸´æ—¶å†…å­˜å¤§å°ã€‚&lt;/p&gt;
&lt;p&gt;ç¡®å®šçº¿ç¨‹æ•°çš„é€»è¾‘ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;é¦–å…ˆï¼Œä¼ é€’çš„å‚æ•°n_threadså†³å®šäº†cplançš„çº¿ç¨‹æ•°ä¸Šé™ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é€šè¿‡è¿­ä»£æ‰€æœ‰çš„op nodeï¼Œæ ¹æ®opç±»å‹çš„çº¿ç¨‹é™åˆ¶å’Œn_threadså‚æ•°ï¼Œç¡®max_threadsã€‚ï¼ˆé€šè¿‡opçš„swich caseå®ç°ï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æœ€ç»ˆçº¿ç¨‹è®¡ç®—å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-39-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-39-1&#34; name=&#34;__codelineno-39-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;final_n_threads&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MIN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n_threads&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MAX&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;each&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;maximum&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;multithreading&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;count&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;h4 id=&#34;ç¡®å®šå·¥ä½œç¼“å­˜åŒºå¤§å°&#34;&gt;ç¡®å®šå·¥ä½œç¼“å­˜åŒºå¤§å°&lt;a class=&#34;headerlink&#34; href=&#34;#ç¡®å®šå·¥ä½œç¼“å­˜åŒºå¤§å°&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;éå†æ‰€æœ‰çš„op nodeï¼Œæ ¹æ®æ¯ä¸ªop typeä»¥åŠè®¡ç®—çš„æ•°æ®ç±»å‹ï¼ˆæ¯”å¦‚è®¡ç®—çš„çŸ©é˜µä¹˜ä¸¤ä¸ªå‚æ•°æ•°æ®ç±»ä¸åŒï¼Œéœ€è¦é¢å¤–çš„ç¼“å­˜åŒºï¼‰ï¼Œç¡®å®šéœ€è¦çš„ä¸´æ—¶å†…å­˜å¤§å°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æœ€ç»ˆå·¥ä½œç¼“å­˜åŒºå¤§å°è®¡ç®—å¦‚ä¸‹ï¼š
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-40-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-40-1&#34; name=&#34;__codelineno-40-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;final_work_buffer_size&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MAX&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;each&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;required&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;work&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;buffer&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨simple-ctxè¿™ä¸ªä¾‹å­ä¸­ï¼Œthreads_count = 1ï¼Œ work_buffer_size = 0ã€‚åœ¨æ¥ä¸‹æ¥çš„å‡½æ•°ggml_new_bufferä¸­ï¼Œå¯ä»¥çœ‹åˆ°åˆ†é…çš„work_buffer_sizeå¤§å°çš„ç¼“å­˜åŒºï¼Œä¹Ÿæ˜¯åœ¨contextçš„å†…å­˜bufferä¸­åˆ†é…çš„ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-41-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-41-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-41-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-41-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-41-5&#34;&gt;5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-41-6&#34;&gt;6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-41-7&#34;&gt;7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-41-8&#34;&gt;8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-41-9&#34;&gt;9&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-41-1&#34; name=&#34;__codelineno-41-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cplan&lt;/span&gt;
&lt;a id=&#34;__codelineno-41-2&#34; name=&#34;__codelineno-41-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_cplan&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-41-3&#34; name=&#34;__codelineno-41-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;work_size&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
&lt;a id=&#34;__codelineno-41-4&#34; name=&#34;__codelineno-41-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;work_data&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00005555555821d0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;a id=&#34;__codelineno-41-5&#34; name=&#34;__codelineno-41-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n_threads&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
&lt;a id=&#34;__codelineno-41-6&#34; name=&#34;__codelineno-41-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;threadpool&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;NULL&lt;/span&gt;
&lt;a id=&#34;__codelineno-41-7&#34; name=&#34;__codelineno-41-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;abort_callback&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x0000000000000000&lt;/span&gt;
&lt;a id=&#34;__codelineno-41-8&#34; name=&#34;__codelineno-41-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;abort_callback_data&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x0000000000000000&lt;/span&gt;
&lt;a id=&#34;__codelineno-41-9&#34; name=&#34;__codelineno-41-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;h3 id=&#34;è®¡ç®—å›¾çš„æ‰§è¡Œè®¡ç®—&#34;&gt;è®¡ç®—å›¾çš„æ‰§è¡Œè®¡ç®—&lt;a class=&#34;headerlink&#34; href=&#34;#è®¡ç®—å›¾çš„æ‰§è¡Œè®¡ç®—&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä¸ºäº†æ‰§è¡Œè®¡ç®—å›¾ï¼Œå·²ç»å‡†å¤‡å¥½äº†å¼ é‡æ•°æ®ã€è®¡ç®—å›¾ã€è®¡ç®—è®¡åˆ’ï¼ˆplanï¼‰ï¼Œæ‰§è¡Œçš„å…³é”®é€»è¾‘æ¥åˆ°äº†ggml_graph_computeå‡½æ•°ï¼Œå°†è®¡ç®—å›¾cgraphå’Œcplanä½œä¸ºå‚æ•°ä¼ å…¥ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-42-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-42-1&#34; name=&#34;__codelineno-42-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;ggml_graph_compute&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cgraph&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cplan&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;&lt;img alt=&#34;&#34; src=&#34;https://raw.githubusercontent.com/KenForever1/CDN/main/ggml-graph-compute.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;åœ¨ggml_graph_computeå‡½æ•°ä¸­, å®ç°äº†å¦‚ä¸‹æ ¸å¿ƒåŠŸèƒ½ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨ggml_cpu_initå‡½æ•°ä¸­ï¼Œåˆ›å»ºäº†ä¸€äº›å¿«é€Ÿè®¡ç®—çš„æŸ¥æ‰¾è¡¨ã€‚æ¯”å¦‚f32åˆ°f16çš„è½¬æ¢è¡¨ã€geluè®¡ç®—çš„æŸ¥æ‰¾è¡¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-43-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-43-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-43-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-43-1&#34; name=&#34;__codelineno-43-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;ggml_table_f32_f16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-43-2&#34; name=&#34;__codelineno-43-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;ggml_table_gelu_f16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GGML_CPU_FP32_TO_FP16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_gelu_f32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;a id=&#34;__codelineno-43-3&#34; name=&#34;__codelineno-43-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;ggml_table_gelu_quick_f16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GGML_CPU_FP32_TO_FP16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_gelu_quick_f32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;åˆ›å»ºäº†çº¿ç¨‹æ± ï¼Œå°†è®¡ç®—å›¾å’Œè®¡ç®—ä»»åŠ¡dispathç»™çº¿ç¨‹æ± æ‰§è¡Œã€‚åœ¨linuxä¸‹ï¼Œggmlé‡‡ç”¨pthreadå®ç°çº¿ç¨‹ç›¸å…³æ“ä½œã€‚ï¼ˆå…³äºGGML_USE_OPENMPçš„é€»è¾‘å¯ä»¥å…ˆè·³è¿‡ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;ggmlçº¿ç¨‹æ± å®ç°&#34;&gt;GGMLçº¿ç¨‹æ± å®ç°&lt;a class=&#34;headerlink&#34; href=&#34;#ggmlçº¿ç¨‹æ± å®ç°&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;GGML å®ç°äº†ä¸€ä¸ªçº¿ç¨‹æ± ï¼Œè¯¥çº¿ç¨‹æ± ç»è¿‡ä¼˜åŒ–ï¼Œå¯é«˜æ•ˆè¿è¡Œè®¡ç®—å›¾ï¼Œå¹¶é’ˆå¯¹ NUMA æ¶æ„è¿›è¡Œäº†ä¼˜åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;ggmlé¦–å…ˆä½¿ç”¨é»˜è®¤å‚æ•°åˆå§‹åŒ–ä¸€ä¸ªggml_thread_poolç»“æ„ä½“ï¼Œç„¶åä¸ºæ¯ä¸ªå·¥ä½œçº¿ç¨‹åˆ†é…ä¸€ä¸ªçŠ¶æ€ç»“æ„ä½“ï¼ˆggml_compute_stateï¼‰ï¼Œè´Ÿè´£çº¿ç¨‹æ± ä¸­çš„æ¯ä¸ªçº¿ç¨‹çš„çŠ¶æ€è®°å½•ï¼š
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-44-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-44-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-44-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-44-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-44-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-44-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-44-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-44-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-44-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-44-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-44-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-44-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-44-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-44-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-44-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-44-1&#34; name=&#34;__codelineno-44-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// Per-thread state&lt;/span&gt;
&lt;a id=&#34;__codelineno-44-2&#34; name=&#34;__codelineno-44-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_compute_state&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-44-3&#34; name=&#34;__codelineno-44-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#ifndef GGML_USE_OPENMP&lt;/span&gt;
&lt;a id=&#34;__codelineno-44-4&#34; name=&#34;__codelineno-44-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// linuxä¸‹å®é™…ä¸ºpthread&lt;/span&gt;
&lt;a id=&#34;__codelineno-44-5&#34; name=&#34;__codelineno-44-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_thread_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;thrd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-44-6&#34; name=&#34;__codelineno-44-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// ç”¨äºè®¾ç½®cpuäº²å’Œæ€§ï¼ˆNUMAç›¸å…³ä¼˜åŒ–ï¼‰&lt;/span&gt;
&lt;a id=&#34;__codelineno-44-7&#34; name=&#34;__codelineno-44-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cpumask&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GGML_MAX_N_THREADS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;a id=&#34;__codelineno-44-8&#34; name=&#34;__codelineno-44-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;last_graph&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-44-9&#34; name=&#34;__codelineno-44-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pending&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-44-10&#34; name=&#34;__codelineno-44-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#endif&lt;/span&gt;
&lt;a id=&#34;__codelineno-44-11&#34; name=&#34;__codelineno-44-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// æŒ‡å‘çº¿ç¨‹æ± çš„æŒ‡é’ˆ&lt;/span&gt;
&lt;a id=&#34;__codelineno-44-12&#34; name=&#34;__codelineno-44-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_threadpool&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;threadpool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-44-13&#34; name=&#34;__codelineno-44-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// çº¿ç¨‹ç¼–å·&lt;/span&gt;
&lt;a id=&#34;__codelineno-44-14&#34; name=&#34;__codelineno-44-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ith&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-44-15&#34; name=&#34;__codelineno-44-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœå¯ç”¨äº† OpenMPï¼Œçº¿ç¨‹ç®¡ç†ä¼šè‡ªåŠ¨å¤„ç†ï¼›å¦åˆ™ï¼ŒGGML ä¼šæ‰‹åŠ¨åˆ›å»ºå’Œç®¡ç† pthreadï¼Œå³æ‰‹åŠ¨è®¾ç½®cpuäº²å’Œæ€§ç­‰æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;&#34; src=&#34;https://raw.githubusercontent.com/KenForever1/CDN/main/ggml_threadpool.png&#34; /&gt;&lt;/p&gt;
&lt;h4 id=&#34;cpuäº²å’Œæ€§è®¾ç½®&#34;&gt;cpuäº²å’Œæ€§è®¾ç½®&lt;a class=&#34;headerlink&#34; href=&#34;#cpuäº²å’Œæ€§è®¾ç½®&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;ç”±äºåœ¨numaæ¶æ„ä¸‹ï¼Œæœ¬åœ°/è¿œç¨‹å†…å­˜è®¿é—®é€Ÿåº¦å·®å¼‚å¤§ï¼Œé€šè¿‡NUMAæ„ŸçŸ¥è°ƒåº¦ï¼ˆå¦‚çº¿ç¨‹ç»‘å®šã€å†…å­˜åˆ†é…ä¼˜åŒ–ï¼‰å¯æå‡æ€§èƒ½â€Œã€‚é€šè¿‡è®¾ç½®cpuäº²å’Œæ€§ï¼Œç»‘å®šçº¿ç¨‹åˆ°æœ¬åœ°NUMAèŠ‚ç‚¹ï¼Œå‡å°‘è¿œç¨‹è®¿é—®â€Œã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ggmlçš„å®ç°ä¸­ï¼Œé€šè¿‡å‡½æ•°ggml_thread_cpumask_next()ä¸ºæ¯ä¸ªworkerçº¿ç¨‹åˆ†é…cpuäº²å’Œæ€§ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-45-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-45-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-45-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-45-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-45-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-45-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-45-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-45-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-45-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-45-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-45-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-45-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-45-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-45-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-45-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-45-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-45-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-45-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-45-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-45-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-45-21&#34;&gt;21&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-45-1&#34; name=&#34;__codelineno-45-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;ggml_thread_cpumask_next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;global_mask&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;local_mask&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;strict&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int32_t&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;iter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-45-2&#34; name=&#34;__codelineno-45-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;strict&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-45-3&#34; name=&#34;__codelineno-45-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;memcpy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;local_mask&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;global_mask&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GGML_MAX_N_THREADS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-45-4&#34; name=&#34;__codelineno-45-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-45-5&#34; name=&#34;__codelineno-45-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-45-6&#34; name=&#34;__codelineno-45-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;memset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;local_mask&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GGML_MAX_N_THREADS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-45-7&#34; name=&#34;__codelineno-45-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int32_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;base_idx&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;iter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-45-8&#34; name=&#34;__codelineno-45-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int32_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GGML_MAX_N_THREADS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-45-9&#34; name=&#34;__codelineno-45-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int32_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;idx&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;base_idx&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-45-10&#34; name=&#34;__codelineno-45-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;idx&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GGML_MAX_N_THREADS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-45-11&#34; name=&#34;__codelineno-45-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// Just a cheaper modulo&lt;/span&gt;
&lt;a id=&#34;__codelineno-45-12&#34; name=&#34;__codelineno-45-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;idx&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GGML_MAX_N_THREADS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-45-13&#34; name=&#34;__codelineno-45-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-45-14&#34; name=&#34;__codelineno-45-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;global_mask&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;idx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-45-15&#34; name=&#34;__codelineno-45-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;local_mask&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;idx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-45-16&#34; name=&#34;__codelineno-45-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;iter&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;idx&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-45-17&#34; name=&#34;__codelineno-45-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-45-18&#34; name=&#34;__codelineno-45-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-45-19&#34; name=&#34;__codelineno-45-19&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-45-20&#34; name=&#34;__codelineno-45-20&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-45-21&#34; name=&#34;__codelineno-45-21&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;åœ¨è¯¥å‡½æ•°ä¸­é€šè¿‡strictå‚æ•°æ§åˆ¶çº¿ç¨‹çš„äº²å’Œæ€§è®¾ç½®ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å¦‚æœstrictä¸ºfalseï¼Œåˆ™å°†å…¨å±€maskå¤åˆ¶ç»™çº¿ç¨‹çš„maskã€‚åœ¨æ²¡æœ‰NUMAçš„æ¶æ„ä¸­ï¼Œè¿™ä¼šå¯¼è‡´æ‰€æœ‰çº¿ç¨‹éƒ½è¢«å…è®¸åœ¨ä»»ä½•æ ¸å¿ƒä¸Šè¿è¡Œã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¦‚æœstrictä¸ºtrueï¼Œåˆ™é€šè¿‡å¾ªç¯éå†å…¨å±€maskï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªå¯ç”¨çš„CPUæ ¸å¿ƒï¼Œå¹¶å°†å…¶åˆ†é…ç»™çº¿ç¨‹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™ç§é€»è¾‘ç¡®ä¿çº¿ç¨‹åœ¨å¯ç”¨çš„CPUæ ¸å¿ƒä¹‹é—´å‡åŒ€åˆ†å¸ƒï¼Œä»è€Œå‡å°‘ç«äº‰ã€‚&lt;/p&gt;
&lt;h4 id=&#34;è®¡ç®—å›¾å·¥ä½œçº¿ç¨‹åˆ›å»ºåŠè°ƒåº¦&#34;&gt;è®¡ç®—å›¾å·¥ä½œçº¿ç¨‹åˆ›å»ºåŠè°ƒåº¦&lt;a class=&#34;headerlink&#34; href=&#34;#è®¡ç®—å›¾å·¥ä½œçº¿ç¨‹åˆ›å»ºåŠè°ƒåº¦&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;ä¸Šé¢çš„é€»è¾‘å®Œæˆäº†çº¿ç¨‹æ± çš„åˆ›å»ºã€äº²å’Œæ€§çš„è®¾ç½®ï¼Œæ¥ä¸‹æ¥å°±æ˜¯åˆ›å»ºå…·ä½“çš„å·¥ä½œçº¿ç¨‹äº†ï¼Œä¹Ÿå°±æ˜¯çº¿ç¨‹è·‘èµ·æ¥è¦æ‰§è¡Œæ€æ ·çš„è¿ç®—é€»è¾‘ã€‚&lt;/p&gt;
&lt;p&gt;æ³¨æ„ï¼Œè¿™é‡Œåˆ›å»ºå·¥ä½œçº¿ç¨‹æ˜¯ä»thread 1å¼€å§‹çš„ï¼Œå› ä¸ºthread 0çš„è§¦å‘ä¸åœ¨è¿™é‡Œã€‚
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-46-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-46-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-46-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-46-1&#34; name=&#34;__codelineno-46-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tpp&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n_threads&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-46-2&#34; name=&#34;__codelineno-46-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int32_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rc&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_thread_create&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;workers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;].&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;thrd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;NULL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_graph_compute_secondary_thread&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;workers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]);&lt;/span&gt;
&lt;a id=&#34;__codelineno-46-3&#34; name=&#34;__codelineno-46-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥ï¼Œè¯·çœ‹ggml_graph_compute_secondary_threadå‡½æ•°ã€‚&lt;/p&gt;
&lt;p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-47-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-47-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-47-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-47-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-47-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-47-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-47-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-47-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-47-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-47-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-47-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-47-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-47-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-47-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-47-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-47-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-47-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-47-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-47-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-47-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-47-21&#34;&gt;21&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-47-22&#34;&gt;22&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-47-23&#34;&gt;23&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-47-24&#34;&gt;24&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-47-25&#34;&gt;25&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-47-26&#34;&gt;26&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-47-27&#34;&gt;27&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-47-28&#34;&gt;28&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-47-29&#34;&gt;29&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-47-30&#34;&gt;30&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-47-31&#34;&gt;31&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-47-32&#34;&gt;32&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-47-33&#34;&gt;33&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-47-34&#34;&gt;34&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-47-35&#34;&gt;35&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-47-36&#34;&gt;36&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-47-37&#34;&gt;37&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-47-38&#34;&gt;38&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-47-39&#34;&gt;39&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-47-1&#34; name=&#34;__codelineno-47-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;thread_ret_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;ggml_graph_compute_secondary_thread&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-47-2&#34; name=&#34;__codelineno-47-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_compute_state&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_compute_state&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-47-3&#34; name=&#34;__codelineno-47-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_threadpool&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;threadpool&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;threadpool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-47-4&#34; name=&#34;__codelineno-47-4&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-47-5&#34; name=&#34;__codelineno-47-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// è®¾ç½®çº¿ç¨‹ä¼˜å…ˆçº§&lt;/span&gt;
&lt;a id=&#34;__codelineno-47-6&#34; name=&#34;__codelineno-47-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_thread_apply_priority&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;threadpool&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;prio&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-47-7&#34; name=&#34;__codelineno-47-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_thread_cpumask_is_valid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cpumask&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-47-8&#34; name=&#34;__codelineno-47-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// è®¾ç½®çº¿ç¨‹ affinity&lt;/span&gt;
&lt;a id=&#34;__codelineno-47-9&#34; name=&#34;__codelineno-47-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_thread_apply_affinity&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cpumask&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-47-10&#34; name=&#34;__codelineno-47-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-47-11&#34; name=&#34;__codelineno-47-11&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-47-12&#34; name=&#34;__codelineno-47-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;while&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-47-13&#34; name=&#34;__codelineno-47-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// Check if we need to sleep&lt;/span&gt;
&lt;a id=&#34;__codelineno-47-14&#34; name=&#34;__codelineno-47-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;while&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;threadpool&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pause&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-47-15&#34; name=&#34;__codelineno-47-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GGML_PRINT_DEBUG&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;thread #%d inside pause loop&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ith&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-47-16&#34; name=&#34;__codelineno-47-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_mutex_lock_shared&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;threadpool&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mutex&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-47-17&#34; name=&#34;__codelineno-47-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;threadpool&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pause&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-47-18&#34; name=&#34;__codelineno-47-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_cond_wait&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;threadpool&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cond&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;threadpool&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mutex&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-47-19&#34; name=&#34;__codelineno-47-19&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-47-20&#34; name=&#34;__codelineno-47-20&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GGML_PRINT_DEBUG&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;thread #%d resuming after wait&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ith&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-47-21&#34; name=&#34;__codelineno-47-21&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_mutex_unlock_shared&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;threadpool&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mutex&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-47-22&#34; name=&#34;__codelineno-47-22&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-47-23&#34; name=&#34;__codelineno-47-23&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-47-24&#34; name=&#34;__codelineno-47-24&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// This needs to be checked for after the cond_wait&lt;/span&gt;
&lt;a id=&#34;__codelineno-47-25&#34; name=&#34;__codelineno-47-25&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;threadpool&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;stop&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;break&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-47-26&#34; name=&#34;__codelineno-47-26&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-47-27&#34; name=&#34;__codelineno-47-27&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// Check if there is new work&lt;/span&gt;
&lt;a id=&#34;__codelineno-47-28&#34; name=&#34;__codelineno-47-28&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// The main thread is the only one that can dispatch new work&lt;/span&gt;
&lt;a id=&#34;__codelineno-47-29&#34; name=&#34;__codelineno-47-29&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-47-30&#34; name=&#34;__codelineno-47-30&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_graph_compute_check_for_work&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-47-31&#34; name=&#34;__codelineno-47-31&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pending&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-47-32&#34; name=&#34;__codelineno-47-32&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pending&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-47-33&#34; name=&#34;__codelineno-47-33&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-47-34&#34; name=&#34;__codelineno-47-34&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_graph_compute_thread&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-47-35&#34; name=&#34;__codelineno-47-35&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-47-36&#34; name=&#34;__codelineno-47-36&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-47-37&#34; name=&#34;__codelineno-47-37&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-47-38&#34; name=&#34;__codelineno-47-38&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;thread_ret_t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-47-39&#34; name=&#34;__codelineno-47-39&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
å¯ä»¥çœ‹åˆ°å·¥ä½œçº¿ç¨‹ä¸æ˜¯ä¸Šæ¥å°±å¼€å§‹æ‰§è¡Œï¼Œè€Œæ˜¯é€šè¿‡threadpool-&amp;gt;pauseè¿›è¡Œäº†æš‚åœç­‰å¾…ã€‚&lt;/p&gt;
&lt;p&gt;è®©æˆ‘ä»¬å›å¤´çœ‹çœ‹ä¸»çº¿ç¨‹ä¸­çš„ggml_graph_computeé€»è¾‘ï¼Œå®ƒé¦–å…ˆåˆ›å»ºçº¿ç¨‹æ± ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢çš„éƒ¨åˆ†ã€‚åˆ›å»ºå¥½ä»1å¼€å§‹çš„å·¥ä½œçº¿ç¨‹åï¼Œç„¶åè°ƒç”¨äº†ggml_graph_compute_kickoffï¼Œå°±æ˜¯å®ƒæŠŠçº¿ç¨‹æ± çš„pauseè®¾ç½®ä¸ºfalseã€‚&lt;/p&gt;
&lt;p&gt;ç„¶åçº¿ç¨‹0åœ¨è¿™ä¸ªå¯åŠ¨å…¶å®ƒçº¿ç¨‹çš„çº¿ç¨‹å¼€å§‹æ‰§è¡Œggml_graph_compute_threadè®¡ç®—ä»»åŠ¡ã€‚
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-48-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-48-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-48-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-48-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-48-5&#34;&gt;5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-48-6&#34;&gt;6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-48-7&#34;&gt;7&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-48-1&#34; name=&#34;__codelineno-48-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;enum&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_status&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_graph_compute&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_cgraph&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cgraph&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_cplan&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cplan&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-48-2&#34; name=&#34;__codelineno-48-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// Kick all threads to start the new graph&lt;/span&gt;
&lt;a id=&#34;__codelineno-48-3&#34; name=&#34;__codelineno-48-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_graph_compute_kickoff&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;threadpool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n_threads&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-48-4&#34; name=&#34;__codelineno-48-4&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-48-5&#34; name=&#34;__codelineno-48-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// This is a work thread too&lt;/span&gt;
&lt;a id=&#34;__codelineno-48-6&#34; name=&#34;__codelineno-48-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_graph_compute_thread&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;threadpool&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;workers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]);&lt;/span&gt;
&lt;a id=&#34;__codelineno-48-7&#34; name=&#34;__codelineno-48-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/p&gt;
&lt;h3 id=&#34;å¤šçº¿ç¨‹å¦‚ä½•æ‰§è¡ŒçŸ©é˜µä¹˜å¼ é‡è®¡ç®—&#34;&gt;å¤šçº¿ç¨‹å¦‚ä½•æ‰§è¡ŒçŸ©é˜µä¹˜å¼ é‡è®¡ç®—&lt;a class=&#34;headerlink&#34; href=&#34;#å¤šçº¿ç¨‹å¦‚ä½•æ‰§è¡ŒçŸ©é˜µä¹˜å¼ é‡è®¡ç®—&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;GGMLçš„æ‰€æœ‰çº¿ç¨‹æ¯æ¬¡åªå¤„ç†ä¸€ä¸ªèŠ‚ç‚¹ã€‚è®©æˆ‘ä»¬çœ‹çœ‹ggml_compute_forwardï¼Œå…¶ä¸­ä¼šæ ¹æ®èŠ‚ç‚¹çš„è¿ç®—ç¬¦ç±»å‹é€‰æ‹©å®é™…çš„è®¡ç®—å‡½æ•°ã€‚è¿™æ˜¯é€šè¿‡ä¸€ä¸ªåºå¤§çš„switch-caseè¯­å¥å—æ¥å¤„ç†çš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-49-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-49-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-49-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-49-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-49-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-49-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-49-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-49-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-49-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-49-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-49-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-49-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-49-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-49-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-49-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-49-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-49-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-49-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-49-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-49-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-49-21&#34;&gt;21&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-49-22&#34;&gt;22&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-49-23&#34;&gt;23&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-49-24&#34;&gt;24&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-49-25&#34;&gt;25&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-49-26&#34;&gt;26&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-49-27&#34;&gt;27&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-49-28&#34;&gt;28&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-49-29&#34;&gt;29&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-49-30&#34;&gt;30&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-49-31&#34;&gt;31&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-49-32&#34;&gt;32&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-49-33&#34;&gt;33&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-49-34&#34;&gt;34&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-49-35&#34;&gt;35&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-49-36&#34;&gt;36&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-49-37&#34;&gt;37&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-49-1&#34; name=&#34;__codelineno-49-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;thread_ret_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;ggml_graph_compute_thread&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-49-2&#34; name=&#34;__codelineno-49-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_compute_state&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_compute_state&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-49-3&#34; name=&#34;__codelineno-49-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_threadpool&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tp&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;threadpool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-49-4&#34; name=&#34;__codelineno-49-4&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-49-5&#34; name=&#34;__codelineno-49-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_cgraph&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cgraph&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tp&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cgraph&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-49-6&#34; name=&#34;__codelineno-49-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_cplan&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cplan&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tp&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cplan&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-49-7&#34; name=&#34;__codelineno-49-7&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-49-8&#34; name=&#34;__codelineno-49-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_numa_thread_affinity&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ith&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-49-9&#34; name=&#34;__codelineno-49-9&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-49-10&#34; name=&#34;__codelineno-49-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_compute_params&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;params&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-49-11&#34; name=&#34;__codelineno-49-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;/*.ith       =*/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ith&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-49-12&#34; name=&#34;__codelineno-49-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;/*.nth       =*/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;atomic_load_explicit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tp&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n_threads_cur&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;memory_order_relaxed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;
&lt;a id=&#34;__codelineno-49-13&#34; name=&#34;__codelineno-49-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;/*.wsize     =*/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cplan&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;work_size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-49-14&#34; name=&#34;__codelineno-49-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;/*.wdata     =*/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cplan&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;work_data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-49-15&#34; name=&#34;__codelineno-49-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;/*.threadpool=*/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-49-16&#34; name=&#34;__codelineno-49-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;a id=&#34;__codelineno-49-17&#34; name=&#34;__codelineno-49-17&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-49-18&#34; name=&#34;__codelineno-49-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;node_n&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;node_n&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cgraph&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n_nodes&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;atomic_load_explicit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tp&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;abort&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;memory_order_relaxed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;node_n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;node_n&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-49-19&#34; name=&#34;__codelineno-49-19&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_tensor&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cgraph&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nodes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;node_n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;a id=&#34;__codelineno-49-20&#34; name=&#34;__codelineno-49-20&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-49-21&#34; name=&#34;__codelineno-49-21&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_compute_forward&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;params&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-49-22&#34; name=&#34;__codelineno-49-22&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-49-23&#34; name=&#34;__codelineno-49-23&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ith&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cplan&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;abort_callback&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
&lt;a id=&#34;__codelineno-49-24&#34; name=&#34;__codelineno-49-24&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cplan&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;abort_callback&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cplan&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;abort_callback_data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-49-25&#34; name=&#34;__codelineno-49-25&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;atomic_store_explicit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tp&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;abort&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;node_n&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;memory_order_relaxed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-49-26&#34; name=&#34;__codelineno-49-26&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tp&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ec&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GGML_STATUS_ABORTED&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-49-27&#34; name=&#34;__codelineno-49-27&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-49-28&#34; name=&#34;__codelineno-49-28&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-49-29&#34; name=&#34;__codelineno-49-29&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;node_n&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cgraph&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n_nodes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-49-30&#34; name=&#34;__codelineno-49-30&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_barrier&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;threadpool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-49-31&#34; name=&#34;__codelineno-49-31&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-49-32&#34; name=&#34;__codelineno-49-32&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-49-33&#34; name=&#34;__codelineno-49-33&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-49-34&#34; name=&#34;__codelineno-49-34&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_barrier&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;threadpool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-49-35&#34; name=&#34;__codelineno-49-35&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-49-36&#34; name=&#34;__codelineno-49-36&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-49-37&#34; name=&#34;__codelineno-49-37&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
ggml_compute_forwardè°ƒç”¨çš„æ˜¯ggml_compute_forward_mul_matçš„å®ç°ï¼Œå®ŒæˆçŸ©é˜µä¹˜æ³•ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-50-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-50-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-50-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-50-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-50-1&#34; name=&#34;__codelineno-50-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;case&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;no&#34;&gt;GGML_OP_MUL_MAT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;a id=&#34;__codelineno-50-2&#34; name=&#34;__codelineno-50-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-50-3&#34; name=&#34;__codelineno-50-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_compute_forward_mul_mat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;params&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tensor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-50-4&#34; name=&#34;__codelineno-50-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;break&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;æŸ¥çœ‹ggml_compute_forward_mul_matçš„å®ç°å¯çŸ¥ï¼ŒçŸ©é˜µçš„è®¡ç®—ä¸æ˜¯ä¸€ä¸ªçº¿ç¨‹å®Œæˆæ•´ä¸ªçŸ©é˜µçš„è®¡ç®—ï¼Œè€Œæ˜¯ä¼ é€’äº†thread_idå‚æ•°ï¼Œæ ¹æ®thread_idæ¥æ‹†åˆ†çŸ©é˜µå—ï¼Œåˆ†å—è®¡ç®—ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œä¹Ÿå¯ä»¥çœ‹åˆ°GGMLçš„è®¡ç®—å›¾æ‰§è¡Œè°ƒåº¦å’Œä¸€èˆ¬å›¾è®¡ç®—çš„åŒºåˆ«ï¼Œä¸€èˆ¬åœºæ™¯çš„æœ‰å‘æ— ç¯å›¾ï¼Œå¤šä¸ªçº¿ç¨‹å¹¶è¡Œæ‰§è¡Œå¤šä¸ªå¯ä»¥å¹¶è¡Œçš„nodeï¼Œè¿™é‡ŒGGMLæ˜¯ä¸€æ¬¡åªæ‰§è¡Œä¸€ä¸ªnodeï¼Œnodeä¸­å¤šä¸ªçº¿ç¨‹åˆ†å—è®¡ç®—ã€‚ç„¶åè¿›å…¥ä¸‹ä¸€ä¸ªèŠ‚ç‚¹è®¡ç®—ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€æ—¦ä¸€ä¸ªèŠ‚ç‚¹nodeçš„è®¡ç®—å®Œæˆï¼Œæ‰€æœ‰çº¿ç¨‹éƒ½ä¼šåœ¨å±éšœggml_barrierå¤„åŒæ­¥ï¼Œç¡®ä¿å®ƒä»¬åœ¨è¿›å…¥ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¹‹å‰å®Œæˆå½“å‰èŠ‚ç‚¹çš„è®¡ç®—ã€‚è¿™ä¸ªè¿‡ç¨‹ä¼šé‡å¤è¿›è¡Œï¼Œç›´åˆ°å›¾ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹éƒ½è¢«è¯„ä¼°å®Œæ¯•ã€‚&lt;/p&gt;
&lt;p&gt;ä¸Šé¢æ›´å¤šçš„è°ˆåˆ°çš„æ˜¯ä¸ä½¿ç”¨OpenMPï¼Œæ‰‹åŠ¨ç®¡ç†çº¿ç¨‹çš„å‡¡æ˜¯ã€‚å¦‚æœå¯ç”¨OpenMPåï¼Œå®ƒä¼šè‡ªåŠ¨ç®¡ç†å¹¶è¡Œè®¡ç®—ï¼Œæ— éœ€æ‰‹åŠ¨åˆ›å»ºå’ŒåŒæ­¥çº¿ç¨‹ã€‚æˆ‘ä»¬æ— éœ€è‡ªå·±å¤„ç†çº¿ç¨‹æ± ã€æ¡ä»¶å˜é‡å’Œç«äº‰æ¡ä»¶ï¼Œåªéœ€è®¾ç½®çº¿ç¨‹æ•°é‡ï¼Œè®©æ¯ä¸ªçº¿ç¨‹æ‰§è¡Œggml_graph_compute_threadå³å¯ã€‚&lt;/p&gt;
&lt;h3 id=&#34;è·å–è®¡ç®—ç»“æœ&#34;&gt;è·å–è®¡ç®—ç»“æœ&lt;a class=&#34;headerlink&#34; href=&#34;#è·å–è®¡ç®—ç»“æœ&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-51-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-51-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-51-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-51-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-51-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-51-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-51-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-51-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-51-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-51-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-51-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-51-1&#34; name=&#34;__codelineno-51-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// perform computation in cpu&lt;/span&gt;
&lt;a id=&#34;__codelineno-51-2&#34; name=&#34;__codelineno-51-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ggml_tensor&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;compute&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-51-3&#34; name=&#34;__codelineno-51-3&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-51-4&#34; name=&#34;__codelineno-51-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// get the result data pointer as a float array to print&lt;/span&gt;
&lt;a id=&#34;__codelineno-51-5&#34; name=&#34;__codelineno-51-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vector&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;out_data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_nelements&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;a id=&#34;__codelineno-51-6&#34; name=&#34;__codelineno-51-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;memcpy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;out_data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_nbytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;a id=&#34;__codelineno-51-7&#34; name=&#34;__codelineno-51-7&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-51-8&#34; name=&#34;__codelineno-51-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// expected result:&lt;/span&gt;
&lt;a id=&#34;__codelineno-51-9&#34; name=&#34;__codelineno-51-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// [ 60.00 55.00 50.00 110.00&lt;/span&gt;
&lt;a id=&#34;__codelineno-51-10&#34; name=&#34;__codelineno-51-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;//   90.00 54.00 54.00 126.00&lt;/span&gt;
&lt;a id=&#34;__codelineno-51-11&#34; name=&#34;__codelineno-51-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;//   42.00 29.00 28.00 64.00 ]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;æœ€åå°±æ˜¯è·å–result nodeï¼Œç„¶åå°†è®¡ç®—ç»“æœæ‹·è´å‡ºæ¥ã€‚åˆ°æ­¤ï¼Œé€šè¿‡simple-ctxçš„ä¾‹å­ï¼Œæˆ‘ä»¬ä»æºç ç†è§£äº†GGMLå¦‚ä½•å®ç°åœ¨ggml_contextä¸­åˆ†é…æ‰€æœ‰éœ€è¦çš„å†…å­˜ï¼Œé€šè¿‡cpu backendçš„æ–¹å¼æ‰§è¡Œè®¡ç®—å›¾ã€‚&lt;/p&gt;
&lt;style&gt;
.related-posts {
  margin-top: 1.5rem;
  padding-top: 0.75rem;
  border-top: 1px solid rgba(0,0,0,0.1);
  max-height: none !important; /* é˜²æ­¢Safarié”™è¯¯è®¡ç®—é«˜åº¦ */
  overflow: visible !important; /* é˜²æ­¢å†…å®¹è¢«æˆªæ–­ */
}
.related-posts h3 {
  margin-top: 0;
  margin-bottom: 0.5rem;
  font-size: 1.2rem;
  font-weight: 500;
  line-height: 1.3;
}
.related-posts ul {
  margin: 0 0 0.5rem 0 !important; /* å¼ºåˆ¶è¦†ç›–å¯èƒ½çš„å†²çªæ ·å¼ */
  padding-left: 1.5rem;
  list-style-position: outside;
}
.related-posts li {
  margin-bottom: 0.25rem;
  line-height: 1.4;
}
/* æš—è‰²æ¨¡å¼é€‚é… */
[data-md-color-scheme=&#34;slate&#34;] .related-posts {
  border-top-color: rgba(255,255,255,0.1);
}
/* Safariç‰¹å®šä¿®å¤ */
@supports (-webkit-hyphens:none) {
  .related-posts {
    display: block;
    position: relative;
    height: auto !important;
  }
  .related-posts ul {
    position: static;
  }
}
&lt;/style&gt;
&lt;div class=&#34;related-posts&#34;&gt;
&lt;h3&gt;ğŸ“š ç›¸å…³æ–‡ç« æ¨è&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/300è¡Œå®ç°ä¸€ä¸ªboundedspscqueue/&#34; target=&#34;_blank&#34;&gt;300è¡Œå®ç°ä¸€ä¸ªBoundedSPSCQueue&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/c20å¦‚ä½•å®ç°ä¸€ä¸ªåŸºäºå±æ€§æµ‹è¯•çš„quickcheck-cppåº“/&#34; target=&#34;_blank&#34;&gt;C++20å¦‚ä½•å®ç°ä¸€ä¸ªåŸºäºå±æ€§æµ‹è¯•çš„quickcheck-cppåº“&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/helix-gptå¦‚ä½•å®ç°ai-codeä»¥åŠå¦‚ä½•è°ƒè¯•/&#34; target=&#34;_blank&#34;&gt;helix-gptå¦‚ä½•å®ç°AI codeä»¥åŠå¦‚ä½•è°ƒè¯•?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/cä½¿ç”¨abseil-cppé‡åˆ°çš„å°é—®é¢˜/&#34; target=&#34;_blank&#34;&gt;C++ä½¿ç”¨abseil-cppé‡åˆ°çš„å°é—®é¢˜&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/mit-ç»å…¸è®²åº§how-to-speak---patrick-winston/&#34; target=&#34;_blank&#34;&gt;MIT ç»å…¸è®²åº§ï¼šHow to Speak - Patrick Winston&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;</description>
      <link>https://github.com/KenForever1/blog/%E6%8E%A2%E7%B4%A2ggml%E7%9A%84%E5%AE%9E%E7%8E%B0/</link>
      <pubDate>Mon, 01 Sep 2025 00:00:00 +0000</pubDate>
      <source url="https://github.com/KenForever1/feed_rss_updated.xml">KenForever1</source>
      
      <guid isPermaLink="true">https://github.com/KenForever1/blog/%E6%8E%A2%E7%B4%A2ggml%E7%9A%84%E5%AE%9E%E7%8E%B0/</guid>
      
    </item>
    
    <item>
      <title>bitnetä¸­int2å’Œint8çš„ä½¿ç”¨</title>
      
      
        
      <author>KenForever1</author>
        
      
      
      
      <description>&lt;!-- more --&gt;

&lt;h2 id=&#34;bitnetä¸­int2å’Œint8çš„ä½¿ç”¨&#34;&gt;bitnetä¸­int2å’Œint8çš„ä½¿ç”¨&lt;a class=&#34;headerlink&#34; href=&#34;#bitnetä¸­int2å’Œint8çš„ä½¿ç”¨&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;W2A8â€Œï¼ˆ2-bitæƒé‡ + 8-bitæ¿€æ´»ï¼‰æ˜¯ä¸€ç§æä½ç²¾åº¦é‡åŒ–æ–¹æ¡ˆï¼Œæ—¨åœ¨é€šè¿‡ç‰ºç‰²éƒ¨åˆ†æ¨¡å‹ç²¾åº¦æ¢å–æ˜¾è‘—çš„å­˜å‚¨å’Œè®¡ç®—æ•ˆç‡æå‡ã€‚é€‚ç”¨äºè®¡ç®—èµ„æºå—é™çš„åœºæ™¯è¾¹ç¼˜è®¾å¤‡éƒ¨ç½²â€Œï¼Œå¦‚ç§»åŠ¨ç«¯æˆ–åµŒå…¥å¼è®¾å¤‡â€Œã€‚&lt;/p&gt;
&lt;h3 id=&#34;gpuç‰ˆæœ¬æ¨ç†&#34;&gt;gpuç‰ˆæœ¬æ¨ç†&lt;a class=&#34;headerlink&#34; href=&#34;#gpuç‰ˆæœ¬æ¨ç†&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/microsoft/BitNet/tree/main/gpu&#34;&gt;å‚è€ƒreadmeä¸­&lt;/a&gt;ä½¿ç”¨çš„ BitNet-b1.58-2B-4Tæ¨¡å‹ã€‚&lt;/p&gt;
&lt;p&gt;æƒé‡weighté‡‡ç”¨int2å­˜å‚¨ï¼Œæ¿€æ´»activationé‡‡ç”¨int8å­˜å‚¨ã€‚è‡ªå®šä¹‰äº†ä¸ªcuda kernelå‡½æ•°ï¼Œç”¨äºè®¡ç®—int2å’Œint8çš„ä¹˜æ³•ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;åœ¨è½¬æ¢checkpointæ—¶ï¼Œå°†int8æƒé‡è½¬ä¸ºint2ï¼ˆconvert_weight_int8_to_int2ï¼‰ï¼Œå¹¶ä¸”å¯¹æƒé‡è¿›è¡Œäº†åˆ’åˆ†ä¸º16Ã—32 blockså’Œé‡æ’ï¼Œä¾¿äºgpuçš„é«˜æ•ˆè¿ç®—ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è‡ªå®šä¹‰kernelå‡½æ•°ladder_int8xint2_kernelï¼Œé‡‡ç”¨gpu dp4aæŒ‡ä»¤(__dp4a)è¿›è¡Œä½ç²¾åº¦çš„ç‚¹ç§¯æ“ä½œã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt=&#34;&#34; src=&#34;https://developer.nvidia.com/blog/parallelforall/wp-content/uploads/2016/10/DP4A_DP2A-624x223.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;åœ¨prefillæ—¶ï¼Œä½¿ç”¨fp16ï¼›åœ¨decodeæ—¶ï¼Œä½¿ç”¨int2ï¼Œé‡‡ç”¨è‡ªå®šä¹‰cuda kernelå‡½æ•°è¿›è¡Œint2å’Œint8çš„ä¹˜æ³•ã€‚
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Python&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-0-1&#34; name=&#34;__codelineno-0-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;# \gpu\generate.py&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-2&#34; name=&#34;__codelineno-0-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;model_args_prefill&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ModelArgs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;use_kernel&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;False&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-3&#34; name=&#34;__codelineno-0-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;model_args_decode&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ModelArgs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;use_kernel&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-4&#34; name=&#34;__codelineno-0-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;tokenizer&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Tokenizer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;./tokenizer.model&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-5&#34; name=&#34;__codelineno-0-5&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-6&#34; name=&#34;__codelineno-0-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;prefill_model&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Transformer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model_args_prefill&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-7&#34; name=&#34;__codelineno-0-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;decode_model&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Transformer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model_args_decode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-8&#34; name=&#34;__codelineno-0-8&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-9&#34; name=&#34;__codelineno-0-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;fp16_ckpt_path&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ckpt_dir&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;quot;model_state_fp16.pt&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-10&#34; name=&#34;__codelineno-0-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;fp16_checkpoint&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;torch&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;load&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fp16_ckpt_path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;map_location&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;cpu&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-11&#34; name=&#34;__codelineno-0-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;int2_ckpt_path&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ckpt_dir&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;quot;model_state_int2.pt&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-12&#34; name=&#34;__codelineno-0-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;int2_checkpoint&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;torch&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;load&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;int2_ckpt_path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;map_location&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;cpu&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-13&#34; name=&#34;__codelineno-0-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;prefill_model&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;load_state_dict&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fp16_checkpoint&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;strict&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-14&#34; name=&#34;__codelineno-0-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;decode_model&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;load_state_dict&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;int2_checkpoint&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;strict&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
ladder_int8xint2_kernelæ ¸å‡½æ•°ç”¨äºè®¡ç®—int2ä¹˜int8çš„å‘é‡ä¹˜æ³•ã€‚
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-21&#34;&gt;21&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-22&#34;&gt;22&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-23&#34;&gt;23&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-24&#34;&gt;24&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-25&#34;&gt;25&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-26&#34;&gt;26&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-27&#34;&gt;27&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-28&#34;&gt;28&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-29&#34;&gt;29&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-30&#34;&gt;30&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-31&#34;&gt;31&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-32&#34;&gt;32&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-33&#34;&gt;33&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-34&#34;&gt;34&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-35&#34;&gt;35&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-36&#34;&gt;36&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-37&#34;&gt;37&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-38&#34;&gt;38&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-1-1&#34; name=&#34;__codelineno-1-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;M&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;K&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ws_num&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;K_block_size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;N_block_size&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-2&#34; name=&#34;__codelineno-1-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;__global__&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__launch_bounds__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;128&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ladder_int8xint2_kernel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int8_t&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__restrict__&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;A&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int8_t&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__restrict__&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;B&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__nv_bfloat16&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__restrict__&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dtype_transform&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__nv_bfloat16&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__restrict__&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__nv_bfloat16&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__restrict__&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ws&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-3&#34; name=&#34;__codelineno-1-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;constexpr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;K_per_loop&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-4&#34; name=&#34;__codelineno-1-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;constexpr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;wmma_K&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-5&#34; name=&#34;__codelineno-1-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;constexpr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;wmma_N&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-6&#34; name=&#34;__codelineno-1-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;in_thread_C_local&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-7&#34; name=&#34;__codelineno-1-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;signed&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;A_local&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;K_per_loop&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-8&#34; name=&#34;__codelineno-1-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;B_reshape_local&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-9&#34; name=&#34;__codelineno-1-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;signed&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;B_decode_local&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;K_per_loop&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-10&#34; name=&#34;__codelineno-1-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;red_buf0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-11&#34; name=&#34;__codelineno-1-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;in_thread_C_local&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-12&#34; name=&#34;__codelineno-1-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;#pragma unroll&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-13&#34; name=&#34;__codelineno-1-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;k_0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;k_0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;K&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;K_per_loop&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;K_block_size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;k_0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-14&#34; name=&#34;__codelineno-1-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;int4&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;A_local&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;int4&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;A&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;k_0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;K_per_loop&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;K_block_size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(((&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;threadIdx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;K_per_loop&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)));&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-15&#34; name=&#34;__codelineno-1-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;B_reshape_local&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;B&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;
&lt;a id=&#34;__codelineno-1-16&#34; name=&#34;__codelineno-1-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(((&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;blockIdx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;N_block_size&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;K&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;
&lt;a id=&#34;__codelineno-1-17&#34; name=&#34;__codelineno-1-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;k_0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;K_block_size&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;K_per_loop&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;wmma_N&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-18&#34; name=&#34;__codelineno-1-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((((&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;threadIdx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;wmma_K&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;wmma_N&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-19&#34; name=&#34;__codelineno-1-19&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((((&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;threadIdx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;wmma_K&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;wmma_N&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;
&lt;a id=&#34;__codelineno-1-20&#34; name=&#34;__codelineno-1-20&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((((&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;threadIdx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;wmma_K&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;wmma_N&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;
&lt;a id=&#34;__codelineno-1-21&#34; name=&#34;__codelineno-1-21&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((((&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;threadIdx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;7&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;wmma_K&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-22&#34; name=&#34;__codelineno-1-22&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-23&#34; name=&#34;__codelineno-1-23&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;decode_i2s_to_i8s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;B_reshape_local&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;B_decode_local&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-24&#34; name=&#34;__codelineno-1-24&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;#pragma unroll&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-25&#34; name=&#34;__codelineno-1-25&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;k_2_0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;k_2_0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;k_2_0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-26&#34; name=&#34;__codelineno-1-26&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;in_thread_C_local&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__dp4a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;A_local&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[((&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;k_2_0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))],&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;B_decode_local&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[((&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;k_2_0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))],&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;in_thread_C_local&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]);&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-27&#34; name=&#34;__codelineno-1-27&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-28&#34; name=&#34;__codelineno-1-28&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-29&#34; name=&#34;__codelineno-1-29&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;red_buf0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;in_thread_C_local&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-30&#34; name=&#34;__codelineno-1-30&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;#pragma unroll&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-31&#34; name=&#34;__codelineno-1-31&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;offset&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;K_block_size&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;offset&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;offset&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-32&#34; name=&#34;__codelineno-1-32&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;red_buf0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__shfl_down_sync&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__activemask&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;red_buf0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;offset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;K_block_size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-33&#34; name=&#34;__codelineno-1-33&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-34&#34; name=&#34;__codelineno-1-34&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;out_idx&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((((&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;blockIdx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;N_block_size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;threadIdx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-35&#34; name=&#34;__codelineno-1-35&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ws_idx&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;out_idx&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ws_num&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-36&#34; name=&#34;__codelineno-1-36&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;threadIdx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-37&#34; name=&#34;__codelineno-1-37&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dtype_transform&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;out_idx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__nv_bfloat16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(((&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;red_buf0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ws&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ws_idx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]);&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-38&#34; name=&#34;__codelineno-1-38&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/p&gt;
&lt;p&gt;è‡ªå®šä¹‰kernel NVIDIA GeForce RTX 4050æ€§èƒ½æµ‹è¯•è¿è¡Œç»“æœï¼š
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Text Only&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-2-1&#34; name=&#34;__codelineno-2-1&#34;&gt;&lt;/a&gt;custom == np True
&lt;a id=&#34;__codelineno-2-2&#34; name=&#34;__codelineno-2-2&#34;&gt;&lt;/a&gt;Shape(2560, 2560), W2A8: 54.40us, torch BF16: 73.39us
&lt;a id=&#34;__codelineno-2-3&#34; name=&#34;__codelineno-2-3&#34;&gt;&lt;/a&gt;custom == np True
&lt;a id=&#34;__codelineno-2-4&#34; name=&#34;__codelineno-2-4&#34;&gt;&lt;/a&gt;Shape(3840, 2560), W2A8: 22.66us, torch BF16: 75.50us
&lt;a id=&#34;__codelineno-2-5&#34; name=&#34;__codelineno-2-5&#34;&gt;&lt;/a&gt;custom == np True
&lt;a id=&#34;__codelineno-2-6&#34; name=&#34;__codelineno-2-6&#34;&gt;&lt;/a&gt;Shape(13824, 2560), W2A8: 39.99us, torch BF16: 364.94us
&lt;a id=&#34;__codelineno-2-7&#34; name=&#34;__codelineno-2-7&#34;&gt;&lt;/a&gt;custom == np True
&lt;a id=&#34;__codelineno-2-8&#34; name=&#34;__codelineno-2-8&#34;&gt;&lt;/a&gt;Shape(2560, 6912), W2A8: 48.95us, torch BF16: 221.11us
&lt;a id=&#34;__codelineno-2-9&#34; name=&#34;__codelineno-2-9&#34;&gt;&lt;/a&gt;custom == np True
&lt;a id=&#34;__codelineno-2-10&#34; name=&#34;__codelineno-2-10&#34;&gt;&lt;/a&gt;Shape(3200, 3200), W2A8: 45.98us, torch BF16: 128.34us
&lt;a id=&#34;__codelineno-2-11&#34; name=&#34;__codelineno-2-11&#34;&gt;&lt;/a&gt;custom == np True
&lt;a id=&#34;__codelineno-2-12&#34; name=&#34;__codelineno-2-12&#34;&gt;&lt;/a&gt;Shape(4800, 3200), W2A8: 25.54us, torch BF16: 171.50us
&lt;a id=&#34;__codelineno-2-13&#34; name=&#34;__codelineno-2-13&#34;&gt;&lt;/a&gt;custom == np True
&lt;a id=&#34;__codelineno-2-14&#34; name=&#34;__codelineno-2-14&#34;&gt;&lt;/a&gt;Shape(3200, 10240), W2A8: 37.18us, torch BF16: 342.03us
&lt;a id=&#34;__codelineno-2-15&#34; name=&#34;__codelineno-2-15&#34;&gt;&lt;/a&gt;custom == np True
&lt;a id=&#34;__codelineno-2-16&#34; name=&#34;__codelineno-2-16&#34;&gt;&lt;/a&gt;Shape(20480, 3200), W2A8: 74.29us, torch BF16: 805.49us
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/p&gt;
&lt;h3 id=&#34;cpuç‰ˆæœ¬æ¨ç†&#34;&gt;cpuç‰ˆæœ¬æ¨ç†&lt;a class=&#34;headerlink&#34; href=&#34;#cpuç‰ˆæœ¬æ¨ç†&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;cpuæ¨ç†åŸºäºllama.cppé¡¹ç›®ï¼Œé‡‡ç”¨T-MAC(æŸ¥æ‰¾è¡¨)ç®—æ³•æé«˜äº†æ¨ç†æ€§èƒ½ã€‚&lt;/p&gt;
&lt;p&gt;ä¼ ç»Ÿæ–¹å¼ï¼Œéœ€è¦æŠŠæƒé‡åé‡åŒ–ä¸ºæµ®ç‚¹æ•°ï¼Œç„¶åå’Œæ¿€æ´»è¿›è¡Œè®¡ç®—ã€‚é‡‡ç”¨æŸ¥æ‰¾è¡¨å°±æ˜¯ï¼ŒæŠŠ1bitçš„å„ç§è®¡ç®—å¯èƒ½æå‰è®¡ç®—å¥½å­˜å‚¨åˆ°ä¸€ä¸ªæŸ¥æ‰¾è¡¨ä¸­ï¼Œç„¶åé€šè¿‡ç´¢å¼•è¿›è¡ŒæŸ¥æ‰¾å®Œæˆè®¡ç®—ã€‚&lt;/p&gt;
&lt;h4 id=&#34;simdè®¡ç®—int2å’Œint8çš„å‘é‡ç‚¹ç§¯&#34;&gt;SIMDè®¡ç®—int2å’Œint8çš„å‘é‡ç‚¹ç§¯&lt;a class=&#34;headerlink&#34; href=&#34;#simdè®¡ç®—int2å’Œint8çš„å‘é‡ç‚¹ç§¯&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;bitnetçš„å®ç°åˆ†ä¸ºintelçš„AVX å’Œ ARM çš„ neon æŒ‡ä»¤ï¼Œ è¿™é‡Œå¯¹&lt;a href=&#34;https://github.com/microsoft/BitNet/blob/main/src/ggml-bitnet-mad.cpp&#34;&gt;AVXæŒ‡ä»¤ç‰ˆæœ¬&lt;/a&gt;è¿›è¡Œä»‹ç»ã€‚&lt;/p&gt;
&lt;p&gt;å°†é‡åŒ–åçš„ i2 æ•°æ®ä¸ i8 æ•°æ®åšç‚¹ç§¯ï¼Œåˆ©ç”¨å¹³å° SIMD æŒ‡ä»¤åšå¹¶è¡ŒåŠ é€Ÿã€‚
ä¸ºäº†é«˜æ•ˆå¤„ç†ï¼Œæ•°æ®æŒ‰ç»„åˆ†å—ï¼Œæ¯ç»„åšå¹¶è¡Œå¤„ç†ï¼Œæœ€ååˆå¹¶ç»“æœã€‚
é’ˆå¯¹ä¸åŒå¹³å°åˆ†åˆ«ä¼˜åŒ–ï¼ˆAVX2/NEONï¼‰ã€‚
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-5&#34;&gt;5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-6&#34;&gt;6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-7&#34;&gt;7&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-3-1&#34; name=&#34;__codelineno-3-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;each&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;block&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;of&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;32&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;groups&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-2&#34; name=&#34;__codelineno-3-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;each&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;group&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;in&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;block&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-3&#34; name=&#34;__codelineno-3-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;1.&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;æå–2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bitæ•°æ®&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-4&#34; name=&#34;__codelineno-3-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;2.&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;è½½å…¥8&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bitæ•°æ®&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-5&#34; name=&#34;__codelineno-3-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;3.&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;åšä¹˜æ³•ç´¯åŠ &lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ï¼ˆ&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SIMDå¹¶è¡Œ&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ï¼‰&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-6&#34; name=&#34;__codelineno-3-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ç´¯åŠ æ‰€æœ‰ç»„çš„ç»“æœ&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-7&#34; name=&#34;__codelineno-3-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;æœ€ååˆå¹¶æ‰€æœ‰å—çš„ç»“æœ&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ï¼Œ&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;è¾“å‡ºç‚¹ç§¯&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/p&gt;
&lt;p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-1&#34;&gt;  1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-2&#34;&gt;  2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-3&#34;&gt;  3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-4&#34;&gt;  4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-5&#34;&gt;  5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-6&#34;&gt;  6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-7&#34;&gt;  7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-8&#34;&gt;  8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-9&#34;&gt;  9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-10&#34;&gt; 10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-11&#34;&gt; 11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-12&#34;&gt; 12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-13&#34;&gt; 13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-14&#34;&gt; 14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-15&#34;&gt; 15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-16&#34;&gt; 16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-17&#34;&gt; 17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-18&#34;&gt; 18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-19&#34;&gt; 19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-20&#34;&gt; 20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-21&#34;&gt; 21&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-22&#34;&gt; 22&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-23&#34;&gt; 23&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-24&#34;&gt; 24&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-25&#34;&gt; 25&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-26&#34;&gt; 26&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-27&#34;&gt; 27&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-28&#34;&gt; 28&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-29&#34;&gt; 29&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-30&#34;&gt; 30&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-31&#34;&gt; 31&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-32&#34;&gt; 32&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-33&#34;&gt; 33&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-34&#34;&gt; 34&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-35&#34;&gt; 35&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-36&#34;&gt; 36&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-37&#34;&gt; 37&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-38&#34;&gt; 38&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-39&#34;&gt; 39&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-40&#34;&gt; 40&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-41&#34;&gt; 41&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-42&#34;&gt; 42&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-43&#34;&gt; 43&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-44&#34;&gt; 44&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-45&#34;&gt; 45&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-46&#34;&gt; 46&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-47&#34;&gt; 47&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-48&#34;&gt; 48&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-49&#34;&gt; 49&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-50&#34;&gt; 50&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-51&#34;&gt; 51&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-52&#34;&gt; 52&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-53&#34;&gt; 53&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-54&#34;&gt; 54&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-55&#34;&gt; 55&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-56&#34;&gt; 56&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-57&#34;&gt; 57&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-58&#34;&gt; 58&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-59&#34;&gt; 59&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-60&#34;&gt; 60&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-61&#34;&gt; 61&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-62&#34;&gt; 62&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-63&#34;&gt; 63&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-64&#34;&gt; 64&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-65&#34;&gt; 65&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-66&#34;&gt; 66&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-67&#34;&gt; 67&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-68&#34;&gt; 68&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-69&#34;&gt; 69&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-70&#34;&gt; 70&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-71&#34;&gt; 71&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-72&#34;&gt; 72&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-73&#34;&gt; 73&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-74&#34;&gt; 74&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-75&#34;&gt; 75&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-76&#34;&gt; 76&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-77&#34;&gt; 77&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-78&#34;&gt; 78&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-79&#34;&gt; 79&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-80&#34;&gt; 80&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-81&#34;&gt; 81&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-82&#34;&gt; 82&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-83&#34;&gt; 83&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-84&#34;&gt; 84&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-85&#34;&gt; 85&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-86&#34;&gt; 86&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-87&#34;&gt; 87&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-88&#34;&gt; 88&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-89&#34;&gt; 89&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-90&#34;&gt; 90&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-91&#34;&gt; 91&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-92&#34;&gt; 92&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-93&#34;&gt; 93&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-94&#34;&gt; 94&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-95&#34;&gt; 95&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-96&#34;&gt; 96&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-97&#34;&gt; 97&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-98&#34;&gt; 98&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-99&#34;&gt; 99&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-100&#34;&gt;100&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-101&#34;&gt;101&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-102&#34;&gt;102&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-103&#34;&gt;103&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-104&#34;&gt;104&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-105&#34;&gt;105&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-106&#34;&gt;106&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-107&#34;&gt;107&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-108&#34;&gt;108&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-109&#34;&gt;109&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-110&#34;&gt;110&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-111&#34;&gt;111&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-112&#34;&gt;112&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-113&#34;&gt;113&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-114&#34;&gt;114&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-115&#34;&gt;115&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-116&#34;&gt;116&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-117&#34;&gt;117&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-118&#34;&gt;118&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-119&#34;&gt;119&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-120&#34;&gt;120&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-121&#34;&gt;121&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-122&#34;&gt;122&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-123&#34;&gt;123&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-124&#34;&gt;124&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-125&#34;&gt;125&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-126&#34;&gt;126&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-127&#34;&gt;127&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-128&#34;&gt;128&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-129&#34;&gt;129&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-130&#34;&gt;130&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-131&#34;&gt;131&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-132&#34;&gt;132&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-133&#34;&gt;133&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-134&#34;&gt;134&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-135&#34;&gt;135&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-136&#34;&gt;136&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-137&#34;&gt;137&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-138&#34;&gt;138&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-139&#34;&gt;139&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-140&#34;&gt;140&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-141&#34;&gt;141&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-142&#34;&gt;142&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-143&#34;&gt;143&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-144&#34;&gt;144&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-145&#34;&gt;145&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-146&#34;&gt;146&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-147&#34;&gt;147&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-148&#34;&gt;148&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-149&#34;&gt;149&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-150&#34;&gt;150&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-151&#34;&gt;151&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-152&#34;&gt;152&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-153&#34;&gt;153&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-154&#34;&gt;154&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-155&#34;&gt;155&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-156&#34;&gt;156&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-157&#34;&gt;157&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-158&#34;&gt;158&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-159&#34;&gt;159&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-160&#34;&gt;160&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-161&#34;&gt;161&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-162&#34;&gt;162&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-163&#34;&gt;163&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-164&#34;&gt;164&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-165&#34;&gt;165&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-166&#34;&gt;166&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-167&#34;&gt;167&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-168&#34;&gt;168&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-169&#34;&gt;169&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-170&#34;&gt;170&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-171&#34;&gt;171&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-172&#34;&gt;172&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-173&#34;&gt;173&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-174&#34;&gt;174&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-175&#34;&gt;175&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-176&#34;&gt;176&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-177&#34;&gt;177&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-178&#34;&gt;178&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-179&#34;&gt;179&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-180&#34;&gt;180&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-181&#34;&gt;181&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-182&#34;&gt;182&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-183&#34;&gt;183&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-184&#34;&gt;184&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-185&#34;&gt;185&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-186&#34;&gt;186&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-187&#34;&gt;187&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-188&#34;&gt;188&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-189&#34;&gt;189&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-190&#34;&gt;190&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-191&#34;&gt;191&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-192&#34;&gt;192&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-193&#34;&gt;193&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-194&#34;&gt;194&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-195&#34;&gt;195&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-196&#34;&gt;196&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-197&#34;&gt;197&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-198&#34;&gt;198&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-199&#34;&gt;199&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-200&#34;&gt;200&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-201&#34;&gt;201&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-202&#34;&gt;202&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-203&#34;&gt;203&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-204&#34;&gt;204&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-205&#34;&gt;205&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-206&#34;&gt;206&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-207&#34;&gt;207&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-208&#34;&gt;208&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-209&#34;&gt;209&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-210&#34;&gt;210&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-211&#34;&gt;211&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-212&#34;&gt;212&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-213&#34;&gt;213&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-214&#34;&gt;214&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-215&#34;&gt;215&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-216&#34;&gt;216&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-217&#34;&gt;217&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-218&#34;&gt;218&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-219&#34;&gt;219&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-220&#34;&gt;220&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-221&#34;&gt;221&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-222&#34;&gt;222&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-223&#34;&gt;223&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-224&#34;&gt;224&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-225&#34;&gt;225&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-226&#34;&gt;226&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-227&#34;&gt;227&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-228&#34;&gt;228&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-229&#34;&gt;229&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-230&#34;&gt;230&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-231&#34;&gt;231&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-232&#34;&gt;232&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-233&#34;&gt;233&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-234&#34;&gt;234&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-235&#34;&gt;235&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-236&#34;&gt;236&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-237&#34;&gt;237&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-238&#34;&gt;238&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-239&#34;&gt;239&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-240&#34;&gt;240&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-241&#34;&gt;241&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-242&#34;&gt;242&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-243&#34;&gt;243&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-244&#34;&gt;244&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-245&#34;&gt;245&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-246&#34;&gt;246&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-4-1&#34; name=&#34;__codelineno-4-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// 1. åˆå§‹åŒ–æ©ç å’Œç´¯åŠ å™¨&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-2&#34; name=&#34;__codelineno-4-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// mask = _mm256_set1_epi8(0x03); ç”¨äºæå–2-bitæ•°æ®ã€‚&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-3&#34; name=&#34;__codelineno-4-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// accu = _mm256_setzero_si256(); ç”¨äºç´¯åŠ ç»“æœã€‚&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-4&#34; name=&#34;__codelineno-4-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// 2. åˆ†ç»„å¤„ç†&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-5&#34; name=&#34;__codelineno-4-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// å¤–å±‚å¾ªç¯ï¼šæ¯æ¬¡å¤„ç†32ç»„ã€‚&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-6&#34; name=&#34;__codelineno-4-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// å†…å±‚å¾ªç¯ï¼šéå†æ¯ç»„ä¸­çš„32ä¸ªå…ƒç´ ã€‚&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-7&#34; name=&#34;__codelineno-4-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// å¯¹æ¯ä¸€ç»„æ•°æ®ï¼Œåˆ†åˆ«å–å‡º2-bitå¹¶ä¸8-bitæ•°æ®åšä¹˜æ³•ç´¯åŠ ï¼ˆç‚¹ç§¯ï¼‰ã€‚&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-8&#34; name=&#34;__codelineno-4-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// 3. æ•°æ®è§£ç &lt;/span&gt;
&lt;a id=&#34;__codelineno-4-9&#34; name=&#34;__codelineno-4-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// 2-bitæ•°æ®æ‹†æˆ4ä¸ªbitç»„ï¼ˆshiftå’Œmaskæ“ä½œï¼‰ã€‚&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-10&#34; name=&#34;__codelineno-4-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// 8-bitç›´æ¥è½½å…¥ã€‚&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-11&#34; name=&#34;__codelineno-4-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// ä½¿ç”¨ _mm256_maddubs_epi16 æŒ‡ä»¤åšä¹˜æ³•ç´¯åŠ ã€‚&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-12&#34; name=&#34;__codelineno-4-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// 4. ç´¯åŠ æ‰€æœ‰ç»“æœ&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-13&#34; name=&#34;__codelineno-4-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// ä½¿ç”¨ _mm256_add_epi16 å’Œ _mm256_add_epi32 æŒ‡ä»¤åˆå¹¶ç»“æœã€‚&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-14&#34; name=&#34;__codelineno-4-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// æœ€åç”¨ hsum_i32_8 å¯¹ SIMD ç´¯åŠ ç»“æœæ±‚å’Œï¼Œå¾—åˆ°æœ€ç»ˆç‚¹ç§¯ã€‚&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-15&#34; name=&#34;__codelineno-4-15&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-4-16&#34; name=&#34;__codelineno-4-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sumi&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ï¼Œ&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;å°†ç»“æœèµ‹å€¼ç»™è¾“å‡ºæŒ‡é’ˆ&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ã€‚&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-17&#34; name=&#34;__codelineno-4-17&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-4-18&#34; name=&#34;__codelineno-4-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;cpf&#34;&gt;&amp;lt;vector&amp;gt;&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-19&#34; name=&#34;__codelineno-4-19&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;cpf&#34;&gt;&amp;lt;type_traits&amp;gt;&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-20&#34; name=&#34;__codelineno-4-20&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-4-21&#34; name=&#34;__codelineno-4-21&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// #include &amp;quot;ggml-bitnet.h&amp;quot;&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-22&#34; name=&#34;__codelineno-4-22&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// #include &amp;quot;ggml-quants.h&amp;quot;&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-23&#34; name=&#34;__codelineno-4-23&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;cpf&#34;&gt;&amp;lt;cmath&amp;gt;&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-24&#34; name=&#34;__codelineno-4-24&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;cpf&#34;&gt;&amp;lt;cstring&amp;gt;&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-25&#34; name=&#34;__codelineno-4-25&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-4-26&#34; name=&#34;__codelineno-4-26&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#define QK_I2_S 128&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-27&#34; name=&#34;__codelineno-4-27&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#define QK_I2 128&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-28&#34; name=&#34;__codelineno-4-28&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-4-29&#34; name=&#34;__codelineno-4-29&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;cpf&#34;&gt;&amp;lt;immintrin.h&amp;gt;&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-30&#34; name=&#34;__codelineno-4-30&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;cpf&#34;&gt;&amp;lt;cstdint&amp;gt;&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-31&#34; name=&#34;__codelineno-4-31&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;cpf&#34;&gt;&amp;lt;cstdio&amp;gt;&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-32&#34; name=&#34;__codelineno-4-32&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;cpf&#34;&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-33&#34; name=&#34;__codelineno-4-33&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// horizontally add 8 int32_t&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-34&#34; name=&#34;__codelineno-4-34&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hsum_i32_8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__m256i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-35&#34; name=&#34;__codelineno-4-35&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;__m128i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sum128&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_add_epi32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_castsi256_si128&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_extractf128_si256&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-36&#34; name=&#34;__codelineno-4-36&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;__m128i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hi64&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_unpackhi_epi64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sum128&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sum128&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-37&#34; name=&#34;__codelineno-4-37&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;__m128i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sum64&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_add_epi32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hi64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sum128&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-38&#34; name=&#34;__codelineno-4-38&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;__m128i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hi32&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_shuffle_epi32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sum64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_MM_SHUFFLE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-39&#34; name=&#34;__codelineno-4-39&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_cvtsi128_si32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm_add_epi32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sum64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hi32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-40&#34; name=&#34;__codelineno-4-40&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-41&#34; name=&#34;__codelineno-4-41&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-4-42&#34; name=&#34;__codelineno-4-42&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-4-43&#34; name=&#34;__codelineno-4-43&#34;&gt;&lt;/a&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;print_m256i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__m256i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-44&#34; name=&#34;__codelineno-4-44&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint8_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-45&#34; name=&#34;__codelineno-4-45&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_storeu_si256&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__m256i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-46&#34; name=&#34;__codelineno-4-46&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-47&#34; name=&#34;__codelineno-4-47&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;%02x &amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-48&#34; name=&#34;__codelineno-4-48&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;%&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;16&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-49&#34; name=&#34;__codelineno-4-49&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-50&#34; name=&#34;__codelineno-4-50&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-51&#34; name=&#34;__codelineno-4-51&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-4-52&#34; name=&#34;__codelineno-4-52&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// x æŒ‡å‘ 2-bit é‡åŒ–æ•°æ®ï¼Œy æŒ‡å‘ 8-bit æ•°æ®ã€‚&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-53&#34; name=&#34;__codelineno-4-53&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// æ•°æ®è¢«åˆ†æˆå¤šä¸ªç»„ï¼Œä¾¿äºåé¢çš„ SIMD å¹¶è¡Œå¤„ç†ã€‚&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-54&#34; name=&#34;__codelineno-4-54&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// ä¸»è¦å˜é‡ï¼š&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-55&#34; name=&#34;__codelineno-4-55&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// QK_I2_S é€šå¸¸ä¸º 128ï¼Œè¡¨ç¤ºæ¯ç»„çš„å…ƒç´ æ•°ã€‚&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-56&#34; name=&#34;__codelineno-4-56&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// nb = n / QK_I2_Sï¼Œç»„æ•°ã€‚&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-57&#34; name=&#34;__codelineno-4-57&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// group32_num = nb / 32ï¼Œæ¯ 32 ç»„ä¸ºä¸€å¤§ç»„ã€‚&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-58&#34; name=&#34;__codelineno-4-58&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// la_num = nb % 32ï¼Œå‰©ä½™ç»„æ•°ã€‚&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-59&#34; name=&#34;__codelineno-4-59&#34;&gt;&lt;/a&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_vec_dot_i2_i8_s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;size_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;size_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;size_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;by&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nrc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-60&#34; name=&#34;__codelineno-4-60&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint8_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint8_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-61&#34; name=&#34;__codelineno-4-61&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int8_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int8_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-62&#34; name=&#34;__codelineno-4-62&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-4-63&#34; name=&#34;__codelineno-4-63&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nb&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;QK_I2_S&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-64&#34; name=&#34;__codelineno-4-64&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;group32_num&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nb&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-65&#34; name=&#34;__codelineno-4-65&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;la_num&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nb&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;%&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-66&#34; name=&#34;__codelineno-4-66&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;groupla_num&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nb&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;%&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;32&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;?&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-67&#34; name=&#34;__codelineno-4-67&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-4-68&#34; name=&#34;__codelineno-4-68&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// n : 128 nb : 1 group32_num : 0 la_num : 1 groupla_num : 1&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-69&#34; name=&#34;__codelineno-4-69&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cout&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;n : &amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-70&#34; name=&#34;__codelineno-4-70&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot; nb : &amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nb&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-71&#34; name=&#34;__codelineno-4-71&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot; group32_num : &amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;group32_num&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-72&#34; name=&#34;__codelineno-4-72&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot; la_num : &amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;la_num&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-73&#34; name=&#34;__codelineno-4-73&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot; groupla_num : &amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;groupla_num&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-74&#34; name=&#34;__codelineno-4-74&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;endl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-75&#34; name=&#34;__codelineno-4-75&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-4-76&#34; name=&#34;__codelineno-4-76&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__m256i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mask&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_set1_epi8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x03&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-77&#34; name=&#34;__codelineno-4-77&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__m256i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;accu&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_setzero_si256&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-78&#34; name=&#34;__codelineno-4-78&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-4-79&#34; name=&#34;__codelineno-4-79&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;group32_num&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-80&#34; name=&#34;__codelineno-4-80&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cout&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;i : &amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;endl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-81&#34; name=&#34;__codelineno-4-81&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__m256i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;accu32&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_setzero_si256&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-82&#34; name=&#34;__codelineno-4-82&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-83&#34; name=&#34;__codelineno-4-83&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 128 index&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-84&#34; name=&#34;__codelineno-4-84&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__m256i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_loadu_si256&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__m256i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;32&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;32&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-85&#34; name=&#34;__codelineno-4-85&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__m256i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_srli_epi16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-86&#34; name=&#34;__codelineno-4-86&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__m256i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_srli_epi16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-87&#34; name=&#34;__codelineno-4-87&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__m256i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_srli_epi16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-88&#34; name=&#34;__codelineno-4-88&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-4-89&#34; name=&#34;__codelineno-4-89&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// each 32 index&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-90&#34; name=&#34;__codelineno-4-90&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_and_si256&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mask&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-91&#34; name=&#34;__codelineno-4-91&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_and_si256&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mask&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-92&#34; name=&#34;__codelineno-4-92&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_and_si256&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mask&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-93&#34; name=&#34;__codelineno-4-93&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_and_si256&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mask&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-94&#34; name=&#34;__codelineno-4-94&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-4-95&#34; name=&#34;__codelineno-4-95&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// each 32 index&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-96&#34; name=&#34;__codelineno-4-96&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__m256i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;yq8_0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_loadu_si256&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__m256i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;128&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;32&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;128&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-97&#34; name=&#34;__codelineno-4-97&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__m256i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;yq8_1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_loadu_si256&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__m256i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;128&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;32&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;128&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-98&#34; name=&#34;__codelineno-4-98&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__m256i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;yq8_2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_loadu_si256&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__m256i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;128&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;32&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;128&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-99&#34; name=&#34;__codelineno-4-99&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__m256i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;yq8_3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_loadu_si256&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__m256i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;128&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;32&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;128&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;96&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-100&#34; name=&#34;__codelineno-4-100&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-4-101&#34; name=&#34;__codelineno-4-101&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 128 index accumulation add&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-102&#34; name=&#34;__codelineno-4-102&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// split into 32 accumulation block&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-103&#34; name=&#34;__codelineno-4-103&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// each block each 128 index accumulated 4index&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-104&#34; name=&#34;__codelineno-4-104&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// each index maximum 256&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-105&#34; name=&#34;__codelineno-4-105&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// each block maximum 4 * 256&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-106&#34; name=&#34;__codelineno-4-106&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// each block accumulation maximum 127 * 256&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-107&#34; name=&#34;__codelineno-4-107&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// each 32 group index (128 index in one group) needs cast to int32&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-108&#34; name=&#34;__codelineno-4-108&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_maddubs_epi16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;yq8_0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-109&#34; name=&#34;__codelineno-4-109&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_maddubs_epi16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;yq8_1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-110&#34; name=&#34;__codelineno-4-110&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_maddubs_epi16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;yq8_2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-111&#34; name=&#34;__codelineno-4-111&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_maddubs_epi16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;yq8_3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-112&#34; name=&#34;__codelineno-4-112&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-4-113&#34; name=&#34;__codelineno-4-113&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;accu32&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_add_epi16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;accu32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_add_epi16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-114&#34; name=&#34;__codelineno-4-114&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;accu32&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_add_epi16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;accu32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_add_epi16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-115&#34; name=&#34;__codelineno-4-115&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-116&#34; name=&#34;__codelineno-4-116&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;accu&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_add_epi32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_madd_epi16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;accu32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_set1_epi16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;accu&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-117&#34; name=&#34;__codelineno-4-117&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-118&#34; name=&#34;__codelineno-4-118&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-4-119&#34; name=&#34;__codelineno-4-119&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;groupla_num&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-120&#34; name=&#34;__codelineno-4-120&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__m256i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;accula&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_setzero_si256&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-121&#34; name=&#34;__codelineno-4-121&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;la_num&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-122&#34; name=&#34;__codelineno-4-122&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 128 index&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-123&#34; name=&#34;__codelineno-4-123&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// ä¾‹å­ä¸­çš„128ä¸ªint2ï¼Œåˆ†æˆ4ç»„ï¼Œæ¯ç»„32ä¸ªint2&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-124&#34; name=&#34;__codelineno-4-124&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 128ä¸ªint2&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-125&#34; name=&#34;__codelineno-4-125&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// xx1 xx2 xx3 xx4 xx5 xx6 xx7 xx8 (int 16)&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-126&#34; name=&#34;__codelineno-4-126&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 00  xx1 xx2 xx3 xx4 xx5 xx6 xx7 (shift right 2bit)&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-127&#34; name=&#34;__codelineno-4-127&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 00  00  xx1 xx2 xx3 xx4 xx5 xx6 (shift right 4bit)&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-128&#34; name=&#34;__codelineno-4-128&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 00  00  00  xx1 xx2 xx3 xx4 xx5 (shift right 6bit)&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-129&#34; name=&#34;__codelineno-4-129&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__m256i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_loadu_si256&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__m256i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;group32_num&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;32&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;32&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-130&#34; name=&#34;__codelineno-4-130&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__m256i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_srli_epi16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-131&#34; name=&#34;__codelineno-4-131&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__m256i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_srli_epi16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-132&#34; name=&#34;__codelineno-4-132&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__m256i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_srli_epi16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-133&#34; name=&#34;__codelineno-4-133&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-4-134&#34; name=&#34;__codelineno-4-134&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// each 32 index&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-135&#34; name=&#34;__codelineno-4-135&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// mask: 00000011 00000011&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-136&#34; name=&#34;__codelineno-4-136&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// --  --  --  xx4 -- -- -- xx8 (int 16)&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-137&#34; name=&#34;__codelineno-4-137&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 00  --  --  xx3 -- -- -- xx7 (shift right 2bit)&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-138&#34; name=&#34;__codelineno-4-138&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 00  00  --  xx2 -- -- -- xx6 (shift right 4bit)&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-139&#34; name=&#34;__codelineno-4-139&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 00  00  00  xx1 -- -- -- xx5 (shift right 6bit)&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-140&#34; name=&#34;__codelineno-4-140&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// int2é€šè¿‡ç§»åŠ¨bitä½ç½®å’Œmaskï¼Œæ‹†åˆ†æˆäº†int8è¡¨ç¤ºï¼Œå°±å¯ä»¥ç›´æ¥å’Œint8è¿›è¡Œè¿ç®—äº†&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-141&#34; name=&#34;__codelineno-4-141&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_and_si256&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mask&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-142&#34; name=&#34;__codelineno-4-142&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_and_si256&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mask&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-143&#34; name=&#34;__codelineno-4-143&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_and_si256&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mask&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-144&#34; name=&#34;__codelineno-4-144&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_and_si256&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mask&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-145&#34; name=&#34;__codelineno-4-145&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-4-146&#34; name=&#34;__codelineno-4-146&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-4-147&#34; name=&#34;__codelineno-4-147&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;print_m256i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-148&#34; name=&#34;__codelineno-4-148&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;-----&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-149&#34; name=&#34;__codelineno-4-149&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;print_m256i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-150&#34; name=&#34;__codelineno-4-150&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;-----&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-151&#34; name=&#34;__codelineno-4-151&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;print_m256i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-152&#34; name=&#34;__codelineno-4-152&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;-----&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-153&#34; name=&#34;__codelineno-4-153&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;print_m256i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-154&#34; name=&#34;__codelineno-4-154&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;-----&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-155&#34; name=&#34;__codelineno-4-155&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-4-156&#34; name=&#34;__codelineno-4-156&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// xä¸­çš„int2æ¯é—´éš”4ä¸ªæ•°å­—ä¸ºä¸€ç»„&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-157&#34; name=&#34;__codelineno-4-157&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 03 03 03 03 03 03 03 03 03 03 03 03 03 03 03 03 &lt;/span&gt;
&lt;a id=&#34;__codelineno-4-158&#34; name=&#34;__codelineno-4-158&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 03 03 03 03 03 03 03 03 03 03 03 03 03 03 03 03 &lt;/span&gt;
&lt;a id=&#34;__codelineno-4-159&#34; name=&#34;__codelineno-4-159&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// -----&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-160&#34; name=&#34;__codelineno-4-160&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 02 02 02 02 02 02 02 02 02 02 02 02 02 02 02 02 &lt;/span&gt;
&lt;a id=&#34;__codelineno-4-161&#34; name=&#34;__codelineno-4-161&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 02 02 02 02 02 02 02 02 02 02 02 02 02 02 02 02 &lt;/span&gt;
&lt;a id=&#34;__codelineno-4-162&#34; name=&#34;__codelineno-4-162&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// -----&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-163&#34; name=&#34;__codelineno-4-163&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 &lt;/span&gt;
&lt;a id=&#34;__codelineno-4-164&#34; name=&#34;__codelineno-4-164&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 &lt;/span&gt;
&lt;a id=&#34;__codelineno-4-165&#34; name=&#34;__codelineno-4-165&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// -----&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-166&#34; name=&#34;__codelineno-4-166&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 &lt;/span&gt;
&lt;a id=&#34;__codelineno-4-167&#34; name=&#34;__codelineno-4-167&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-168&#34; name=&#34;__codelineno-4-168&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-4-169&#34; name=&#34;__codelineno-4-169&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-4-170&#34; name=&#34;__codelineno-4-170&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// each 32 index&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-171&#34; name=&#34;__codelineno-4-171&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// ä¾‹å­ä¸­çš„128ä¸ªint8æ•°æ®ï¼Œåˆ†æˆ4ç»„ï¼Œæ¯ç»„32ä¸ªint8æ•°æ®&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-172&#34; name=&#34;__codelineno-4-172&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// xx1 xx2&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-173&#34; name=&#34;__codelineno-4-173&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__m256i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;yq8_0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_loadu_si256&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__m256i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;group32_num&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;128&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;32&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;128&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-174&#34; name=&#34;__codelineno-4-174&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__m256i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;yq8_1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_loadu_si256&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__m256i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;group32_num&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;128&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;32&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;128&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-175&#34; name=&#34;__codelineno-4-175&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__m256i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;yq8_2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_loadu_si256&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__m256i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;group32_num&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;128&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;32&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;128&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-176&#34; name=&#34;__codelineno-4-176&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__m256i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;yq8_3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_loadu_si256&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__m256i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;group32_num&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;128&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;32&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;128&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;96&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-177&#34; name=&#34;__codelineno-4-177&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-4-178&#34; name=&#34;__codelineno-4-178&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;print_m256i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;yq8_0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-179&#34; name=&#34;__codelineno-4-179&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;-----&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-180&#34; name=&#34;__codelineno-4-180&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;print_m256i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;yq8_1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-181&#34; name=&#34;__codelineno-4-181&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;-----&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-182&#34; name=&#34;__codelineno-4-182&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;print_m256i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;yq8_2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-183&#34; name=&#34;__codelineno-4-183&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;-----&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-184&#34; name=&#34;__codelineno-4-184&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;print_m256i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;yq8_3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-185&#34; name=&#34;__codelineno-4-185&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-4-186&#34; name=&#34;__codelineno-4-186&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// æŒ‰é¡ºåºå­˜å‚¨ï¼Œç›¸é‚»çš„32ä¸ªint8ä¸ºä¸€ç»„&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-187&#34; name=&#34;__codelineno-4-187&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// -----&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-188&#34; name=&#34;__codelineno-4-188&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 00 01 02 03 04 05 06 07 08 09 0a 0b 0c 0d 0e 0f &lt;/span&gt;
&lt;a id=&#34;__codelineno-4-189&#34; name=&#34;__codelineno-4-189&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 10 11 12 13 14 15 16 17 18 19 1a 1b 1c 1d 1e 1f &lt;/span&gt;
&lt;a id=&#34;__codelineno-4-190&#34; name=&#34;__codelineno-4-190&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// -----&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-191&#34; name=&#34;__codelineno-4-191&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 20 21 22 23 24 25 26 27 28 29 2a 2b 2c 2d 2e 2f &lt;/span&gt;
&lt;a id=&#34;__codelineno-4-192&#34; name=&#34;__codelineno-4-192&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 30 31 32 33 34 35 36 37 38 39 3a 3b 3c 3d 3e 3f &lt;/span&gt;
&lt;a id=&#34;__codelineno-4-193&#34; name=&#34;__codelineno-4-193&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// -----&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-194&#34; name=&#34;__codelineno-4-194&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 40 41 42 43 44 45 46 47 48 49 4a 4b 4c 4d 4e 4f &lt;/span&gt;
&lt;a id=&#34;__codelineno-4-195&#34; name=&#34;__codelineno-4-195&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 50 51 52 53 54 55 56 57 58 59 5a 5b 5c 5d 5e 5f &lt;/span&gt;
&lt;a id=&#34;__codelineno-4-196&#34; name=&#34;__codelineno-4-196&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// -----&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-197&#34; name=&#34;__codelineno-4-197&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 60 61 62 63 64 65 66 67 68 69 6a 6b 6c 6d 6e 6f &lt;/span&gt;
&lt;a id=&#34;__codelineno-4-198&#34; name=&#34;__codelineno-4-198&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 70 71 72 73 74 75 76 77 78 79 7a 7b 7c 7d 7e 7f&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-199&#34; name=&#34;__codelineno-4-199&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-4-200&#34; name=&#34;__codelineno-4-200&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-4-201&#34; name=&#34;__codelineno-4-201&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 128 index accumulation add&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-202&#34; name=&#34;__codelineno-4-202&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// split into 32 accumulation block&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-203&#34; name=&#34;__codelineno-4-203&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// each block each 128 index accumulated 4index&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-204&#34; name=&#34;__codelineno-4-204&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// each index maximum 256&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-205&#34; name=&#34;__codelineno-4-205&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// each block maximum 4 * 256&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-206&#34; name=&#34;__codelineno-4-206&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// each block accumulation maximum 127 * 256&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-207&#34; name=&#34;__codelineno-4-207&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// each 32 group index (128 index in one group) needs cast to int32&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-208&#34; name=&#34;__codelineno-4-208&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// ä¹˜åŠ è¿ç®—&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-209&#34; name=&#34;__codelineno-4-209&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// xx1, xx5 (16bit)&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-210&#34; name=&#34;__codelineno-4-210&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// yy1, yy2 (16bit)&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-211&#34; name=&#34;__codelineno-4-211&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// res = xx1 * yy1  + xx5 * yy2&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-212&#34; name=&#34;__codelineno-4-212&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_maddubs_epi16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;yq8_0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-213&#34; name=&#34;__codelineno-4-213&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_maddubs_epi16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;yq8_1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-214&#34; name=&#34;__codelineno-4-214&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_maddubs_epi16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;yq8_2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-215&#34; name=&#34;__codelineno-4-215&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_maddubs_epi16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;yq8_3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-216&#34; name=&#34;__codelineno-4-216&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-4-217&#34; name=&#34;__codelineno-4-217&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// printf(&amp;quot;-----\n&amp;quot;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-218&#34; name=&#34;__codelineno-4-218&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// print_m256i(xq8_3);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-219&#34; name=&#34;__codelineno-4-219&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// printf(&amp;quot;-----\n&amp;quot;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-220&#34; name=&#34;__codelineno-4-220&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// print_m256i(xq8_2);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-221&#34; name=&#34;__codelineno-4-221&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// printf(&amp;quot;-----\n&amp;quot;);ã€&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-222&#34; name=&#34;__codelineno-4-222&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// æ‰“å°ç¬¬1ç»„ä¹˜åŠ è®¡ç®—ç»“æœ&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-223&#34; name=&#34;__codelineno-4-223&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;print_m256i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-224&#34; name=&#34;__codelineno-4-224&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;-----&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-225&#34; name=&#34;__codelineno-4-225&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// print_m256i(xq8_0);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-226&#34; name=&#34;__codelineno-4-226&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// printf(&amp;quot;-----\n&amp;quot;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-227&#34; name=&#34;__codelineno-4-227&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-4-228&#34; name=&#34;__codelineno-4-228&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-4-229&#34; name=&#34;__codelineno-4-229&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 &lt;/span&gt;
&lt;a id=&#34;__codelineno-4-230&#34; name=&#34;__codelineno-4-230&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-231&#34; name=&#34;__codelineno-4-231&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// ä¹˜åŠ è®¡ç®—&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-232&#34; name=&#34;__codelineno-4-232&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 20 21 22 23 24 25 26 27 28 29 2a 2b 2c 2d 2e 2f &lt;/span&gt;
&lt;a id=&#34;__codelineno-4-233&#34; name=&#34;__codelineno-4-233&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 30 31 32 33 34 35 36 37 38 39 3a 3b 3c 3d 3e 3f&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-234&#34; name=&#34;__codelineno-4-234&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// ç»“æœ&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-235&#34; name=&#34;__codelineno-4-235&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 41 00 45 00 49 00 4d 00 51 00 55 00 59 00 5d 00 &lt;/span&gt;
&lt;a id=&#34;__codelineno-4-236&#34; name=&#34;__codelineno-4-236&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 61 00 65 00 69 00 6d 00 71 00 75 00 79 00 7d 00&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-237&#34; name=&#34;__codelineno-4-237&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-4-238&#34; name=&#34;__codelineno-4-238&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-4-239&#34; name=&#34;__codelineno-4-239&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;accula&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_add_epi16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;accula&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_add_epi16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-240&#34; name=&#34;__codelineno-4-240&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;accula&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_add_epi16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;accula&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_add_epi16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xq8_3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-241&#34; name=&#34;__codelineno-4-241&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-242&#34; name=&#34;__codelineno-4-242&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;accu&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_add_epi32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;accu&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_madd_epi16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;accula&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_mm256_set1_epi16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)));&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-243&#34; name=&#34;__codelineno-4-243&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-244&#34; name=&#34;__codelineno-4-244&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sumi&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hsum_i32_8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;accu&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-245&#34; name=&#34;__codelineno-4-245&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sumi&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-246&#34; name=&#34;__codelineno-4-246&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
æµ‹è¯•ä»£ç ï¼š
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-21&#34;&gt;21&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-22&#34;&gt;22&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-23&#34;&gt;23&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-24&#34;&gt;24&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-25&#34;&gt;25&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-26&#34;&gt;26&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-27&#34;&gt;27&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-28&#34;&gt;28&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-29&#34;&gt;29&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-30&#34;&gt;30&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-31&#34;&gt;31&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-32&#34;&gt;32&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-33&#34;&gt;33&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-34&#34;&gt;34&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-35&#34;&gt;35&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-36&#34;&gt;36&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-37&#34;&gt;37&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-38&#34;&gt;38&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-39&#34;&gt;39&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-40&#34;&gt;40&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-41&#34;&gt;41&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-42&#34;&gt;42&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-43&#34;&gt;43&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-44&#34;&gt;44&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-45&#34;&gt;45&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-5-1&#34; name=&#34;__codelineno-5-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// g++ int2_int8.cpp  -mavx2&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-2&#34; name=&#34;__codelineno-5-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// cat /proc/cpuinfo | grep avx&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-3&#34; name=&#34;__codelineno-5-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-4&#34; name=&#34;__codelineno-5-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-5&#34; name=&#34;__codelineno-5-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;is_debug&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-6&#34; name=&#34;__codelineno-5-6&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-5-7&#34; name=&#34;__codelineno-5-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// è®¾å®šå‘é‡é•¿åº¦ä¸º128ï¼ˆä¸€ä¸ªblockï¼‰&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-8&#34; name=&#34;__codelineno-5-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;QK_I2_S&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-9&#34; name=&#34;__codelineno-5-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint8_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i2_data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;QK_I2_S&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// æ¯4ä¸ª2bitå‹ç¼©æˆ1å­—èŠ‚ï¼Œ128ä¸ªint2, ä¹Ÿå°±æ˜¯_mm256_loadu_si256ä¸€æ¬¡load256bitï¼Œè¦load 1æ¬¡ï¼Œä¸€æ¬¡load 128ä¸ªint2æ•°å­—ï¼Œå†é€šè¿‡åç§»é‡åˆ†æˆ32ä¸ªint2ä¸€ç»„ï¼Œåˆ†æˆ4ç»„&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-10&#34; name=&#34;__codelineno-5-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int8_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i8_data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;QK_I2_S&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 128ä¸ªint8ï¼Œä¹Ÿå°±æ˜¯_mm256_loadu_si256ä¸€æ¬¡load256bit,è¦load 4æ¬¡ï¼Œæ¯æ¬¡load32ä¸ªint8æ•°å­—&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-11&#34; name=&#34;__codelineno-5-11&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-5-12&#34; name=&#34;__codelineno-5-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// _mm256_maddubs_epi16å°±å¯ä»¥ä¸€æ¬¡è®¡ç®—32ä¸ªint8æ•°å­—å’Œint2æ•°å­—&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-13&#34; name=&#34;__codelineno-5-13&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-5-14&#34; name=&#34;__codelineno-5-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// æ„é€ ç®€å•æ•°æ®ï¼ši2å…¨éƒ¨ä¸º1ï¼Œi8å…¨éƒ¨ä¸º1&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-15&#34; name=&#34;__codelineno-5-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 2bitç¼–ç ï¼š2bitå¯è¡¨ç¤º4ç§çŠ¶æ€ï¼ˆ00, 01, 10, 11ï¼‰ï¼Œè‹¥é‡‡ç”¨å¸¦ç¬¦å·æ•´æ•°è¡¨ç¤ºï¼ŒèŒƒå›´ä¸º-2åˆ°1ï¼›æ— ç¬¦å·æ•´æ•°èŒƒå›´ä¸º0åˆ°3&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-16&#34; name=&#34;__codelineno-5-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;QK_I2_S&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-17&#34; name=&#34;__codelineno-5-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;is_debug&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-18&#34; name=&#34;__codelineno-5-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// æ¯å­—èŠ‚å¡«å……ä¸º 0x55 (01010101) å³æ¯ä¸ª2bitä¸º&amp;quot;1&amp;quot;&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-19&#34; name=&#34;__codelineno-5-19&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i2_data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x55&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-20&#34; name=&#34;__codelineno-5-20&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-21&#34; name=&#34;__codelineno-5-21&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 00 01 10 11&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-22&#34; name=&#34;__codelineno-5-22&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i2_data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x1B&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-23&#34; name=&#34;__codelineno-5-23&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-24&#34; name=&#34;__codelineno-5-24&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-25&#34; name=&#34;__codelineno-5-25&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;QK_I2_S&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-26&#34; name=&#34;__codelineno-5-26&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;is_debug&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-27&#34; name=&#34;__codelineno-5-27&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i8_data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-28&#34; name=&#34;__codelineno-5-28&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-29&#34; name=&#34;__codelineno-5-29&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i8_data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-30&#34; name=&#34;__codelineno-5-30&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-31&#34; name=&#34;__codelineno-5-31&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-32&#34; name=&#34;__codelineno-5-32&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-5-33&#34; name=&#34;__codelineno-5-33&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.0f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-34&#34; name=&#34;__codelineno-5-34&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ggml_vec_dot_i2_i8_s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i2_data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i8_data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-35&#34; name=&#34;__codelineno-5-35&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-5-36&#34; name=&#34;__codelineno-5-36&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cout&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;æµ‹è¯•ç»“æœ: &amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;endl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-37&#34; name=&#34;__codelineno-5-37&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-5-38&#34; name=&#34;__codelineno-5-38&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// ç†è®ºä¸Šï¼Œå¦‚æœi2éƒ½è§£ç ä¸º1ï¼Œi8éƒ½ä¸º1ï¼Œç‚¹ç§¯åº”ä¸º128&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-39&#34; name=&#34;__codelineno-5-39&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;128.0f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-40&#34; name=&#34;__codelineno-5-40&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cout&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;é€šè¿‡&amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;endl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-41&#34; name=&#34;__codelineno-5-41&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-42&#34; name=&#34;__codelineno-5-42&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cout&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;æœªé€šè¿‡&amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;endl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-43&#34; name=&#34;__codelineno-5-43&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-44&#34; name=&#34;__codelineno-5-44&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-45&#34; name=&#34;__codelineno-5-45&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/p&gt;
&lt;p&gt;ä»£ç ä¼¼ä¹æ²¡æœ‰å®Œå…¨å¼€æºï¼Œæ¯”å¦‚æ²¡æœ‰åœ¨ä»£ç ä¸­çœ‹åˆ°å¦‚ä¸‹å†…å®¹ï¼š
+ T-MACçš„å®ç°å’Œåº”ç”¨ï¼Ÿ
+ ggml_vec_dot_i2_i8_så¦‚ä½•è¢«è°ƒç”¨ä¸Šçš„ï¼Ÿ&lt;/p&gt;
&lt;style&gt;
.related-posts {
  margin-top: 1.5rem;
  padding-top: 0.75rem;
  border-top: 1px solid rgba(0,0,0,0.1);
  max-height: none !important; /* é˜²æ­¢Safarié”™è¯¯è®¡ç®—é«˜åº¦ */
  overflow: visible !important; /* é˜²æ­¢å†…å®¹è¢«æˆªæ–­ */
}
.related-posts h3 {
  margin-top: 0;
  margin-bottom: 0.5rem;
  font-size: 1.2rem;
  font-weight: 500;
  line-height: 1.3;
}
.related-posts ul {
  margin: 0 0 0.5rem 0 !important; /* å¼ºåˆ¶è¦†ç›–å¯èƒ½çš„å†²çªæ ·å¼ */
  padding-left: 1.5rem;
  list-style-position: outside;
}
.related-posts li {
  margin-bottom: 0.25rem;
  line-height: 1.4;
}
/* æš—è‰²æ¨¡å¼é€‚é… */
[data-md-color-scheme=&#34;slate&#34;] .related-posts {
  border-top-color: rgba(255,255,255,0.1);
}
/* Safariç‰¹å®šä¿®å¤ */
@supports (-webkit-hyphens:none) {
  .related-posts {
    display: block;
    position: relative;
    height: auto !important;
  }
  .related-posts ul {
    position: static;
  }
}
&lt;/style&gt;
&lt;div class=&#34;related-posts&#34;&gt;
&lt;h3&gt;ğŸ“š ç›¸å…³æ–‡ç« æ¨è&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/300è¡Œå®ç°ä¸€ä¸ªboundedspscqueue/&#34; target=&#34;_blank&#34;&gt;300è¡Œå®ç°ä¸€ä¸ªBoundedSPSCQueue&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/c20å¦‚ä½•å®ç°ä¸€ä¸ªåŸºäºå±æ€§æµ‹è¯•çš„quickcheck-cppåº“/&#34; target=&#34;_blank&#34;&gt;C++20å¦‚ä½•å®ç°ä¸€ä¸ªåŸºäºå±æ€§æµ‹è¯•çš„quickcheck-cppåº“&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/helix-gptå¦‚ä½•å®ç°ai-codeä»¥åŠå¦‚ä½•è°ƒè¯•/&#34; target=&#34;_blank&#34;&gt;helix-gptå¦‚ä½•å®ç°AI codeä»¥åŠå¦‚ä½•è°ƒè¯•?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/cä½¿ç”¨abseil-cppé‡åˆ°çš„å°é—®é¢˜/&#34; target=&#34;_blank&#34;&gt;C++ä½¿ç”¨abseil-cppé‡åˆ°çš„å°é—®é¢˜&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/mit-ç»å…¸è®²åº§how-to-speak---patrick-winston/&#34; target=&#34;_blank&#34;&gt;MIT ç»å…¸è®²åº§ï¼šHow to Speak - Patrick Winston&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;</description>
      <link>https://github.com/KenForever1/blog/bitnet%E4%B8%ADint2%E5%92%8Cint8%E7%9A%84%E4%BD%BF%E7%94%A8/</link>
      <pubDate>Sun, 24 Aug 2025 00:00:00 +0000</pubDate>
      <source url="https://github.com/KenForever1/feed_rss_updated.xml">KenForever1</source>
      
      <guid isPermaLink="true">https://github.com/KenForever1/blog/bitnet%E4%B8%ADint2%E5%92%8Cint8%E7%9A%84%E4%BD%BF%E7%94%A8/</guid>
      
    </item>
    
    <item>
      <title>ä¸¤ç§ä¸åŒè®¾è®¡ç†å¿µçš„è§£æåº“nomå’Œpest</title>
      
      
        
      <author>KenForever1</author>
        
      
      
      
      <description>&lt;!-- more --&gt;

&lt;h2 id=&#34;nomå’Œpestè§£æåº“è®¾è®¡&#34;&gt;nomå’Œpestè§£æåº“è®¾è®¡&lt;a class=&#34;headerlink&#34; href=&#34;#nomå’Œpestè§£æåº“è®¾è®¡&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;nom å’Œ pestæ—¶Rust ç”Ÿæ€ä¸­ä¸¤ä¸ªä¸»æµçš„è§£æåº“ï¼Œä½†æ˜¯è®¾è®¡ç†å¿µå’Œä½¿ç”¨æ–¹å¼æœ‰æ˜¾è‘—å·®å¼‚ã€‚&lt;/p&gt;
&lt;h3 id=&#34;-nomåº“è§£æå™¨ç»„åˆåº“&#34;&gt;ğŸ”§ nomåº“ï¼šè§£æå™¨ç»„åˆåº“&lt;a class=&#34;headerlink&#34; href=&#34;#-nomåº“è§£æå™¨ç»„åˆåº“&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;åŸºäºâ€Œè§£æå™¨ç»„åˆå™¨â€Œï¼ˆParser Combinatorsï¼‰æ¨¡å¼ï¼Œé€šè¿‡ç»„åˆå°å‹è§£æå™¨æ„å»ºå¤æ‚é€»è¾‘ã€‚
æ”¯æŒâ€Œé›¶æ‹·è´è§£æâ€Œï¼Œç›´æ¥æ“ä½œè¾“å…¥æ•°æ®åˆ‡ç‰‡ï¼Œé«˜æ•ˆå¤„ç†äºŒè¿›åˆ¶æˆ–æ–‡æœ¬ã€‚&lt;/p&gt;
&lt;p&gt;é€‚ç”¨äºç½‘ç»œåè®®è§£æï¼ˆHTTPã€WebSocketï¼‰ã€è‡ªå®šä¹‰äºŒè¿›åˆ¶æ ¼å¼ï¼ˆå¦‚æ–‡ä»¶å¤´ã€æ•°æ®åŒ…ï¼‰
é«˜æ€§èƒ½æ–‡æœ¬å¤„ç†ï¼ˆCSVã€æ—¥å¿—ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºè§£æä¸€ä¸ªcvsæ–‡ä»¶ï¼Œé¦–å…ˆè¦ä½¿ç”¨nomæä¾›çš„å°å‹è§£æå™¨ï¼Œå®šä¹‰å¦‚ä½•è§£æä¸€ä¸ªfield,ç„¶åå¦‚ä½•è§£æ&amp;rdquo;,&amp;rdquo;å·åˆ†éš”ï¼Œç„¶åå®šä¹‰å¦‚ä½•è§£æä¸€è¡Œï¼Œæœ€åå®šä¹‰å¦‚ä½•è§£æä¸€ä¸ªcsvæ–‡ä»¶ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Rust&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-21&#34;&gt;21&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-22&#34;&gt;22&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-23&#34;&gt;23&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-24&#34;&gt;24&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-25&#34;&gt;25&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-26&#34;&gt;26&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-27&#34;&gt;27&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-28&#34;&gt;28&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-29&#34;&gt;29&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-30&#34;&gt;30&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-31&#34;&gt;31&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-32&#34;&gt;32&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-33&#34;&gt;33&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-34&#34;&gt;34&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-35&#34;&gt;35&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-36&#34;&gt;36&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-0-1&#34; name=&#34;__codelineno-0-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// è§£ææœªåŠ å¼•å·çš„å­—æ®µ&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-2&#34; name=&#34;__codelineno-0-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;parse_unquoted_field&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;input&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kp&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;IResult&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-3&#34; name=&#34;__codelineno-0-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;escaped_transform&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;alphanumeric1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc&#34;&gt;&amp;#39;\\&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;one_of&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\&amp;quot;&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;bfnrt&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\\&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)).&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;parse&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;input&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-4&#34; name=&#34;__codelineno-0-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-5&#34; name=&#34;__codelineno-0-5&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-6&#34; name=&#34;__codelineno-0-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// å•ä¸ªå­—æ®µè§£æ&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-7&#34; name=&#34;__codelineno-0-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;parse_field&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;input&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kp&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;IResult&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-8&#34; name=&#34;__codelineno-0-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;parse_unquoted_field&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;parse&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;input&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-9&#34; name=&#34;__codelineno-0-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-10&#34; name=&#34;__codelineno-0-10&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-11&#34; name=&#34;__codelineno-0-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// è§£æå•è¡ŒCSVæ•°æ®&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-12&#34; name=&#34;__codelineno-0-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;parse_line&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;input&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kp&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;IResult&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Vec&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-13&#34; name=&#34;__codelineno-0-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;alt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-14&#34; name=&#34;__codelineno-0-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// æ­£å¸¸è¡Œè§£æï¼ˆä»¥æ¢è¡Œç¬¦ç»“æŸï¼‰&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-15&#34; name=&#34;__codelineno-0-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;terminated&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-16&#34; name=&#34;__codelineno-0-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;separated_list0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sc&#34;&gt;&amp;#39;,&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;parse_field&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-17&#34; name=&#34;__codelineno-0-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;alt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tag&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\r\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tag&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;eof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)),&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-18&#34; name=&#34;__codelineno-0-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-19&#34; name=&#34;__codelineno-0-19&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// å¤„ç†ç©ºè¡Œ&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-20&#34; name=&#34;__codelineno-0-20&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;alt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tag&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\r\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tag&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;fm&#34;&gt;vec!&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[]),&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-21&#34; name=&#34;__codelineno-0-21&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-22&#34; name=&#34;__codelineno-0-22&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;parse&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;input&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-23&#34; name=&#34;__codelineno-0-23&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-24&#34; name=&#34;__codelineno-0-24&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-25&#34; name=&#34;__codelineno-0-25&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;
&lt;a id=&#34;__codelineno-0-26&#34; name=&#34;__codelineno-0-26&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;csv_line&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;r#&amp;quot;2,Escapedquote,314\r\n&amp;quot;#&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-27&#34; name=&#34;__codelineno-0-27&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-28&#34; name=&#34;__codelineno-0-28&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;match&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;parse_line&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;csv_line&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-29&#34; name=&#34;__codelineno-0-29&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Ok&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rows&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-30&#34; name=&#34;__codelineno-0-30&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;row&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;in&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rows&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-31&#34; name=&#34;__codelineno-0-31&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;fm&#34;&gt;println!&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;{:?}&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;row&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-32&#34; name=&#34;__codelineno-0-32&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-33&#34; name=&#34;__codelineno-0-33&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-34&#34; name=&#34;__codelineno-0-34&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;fm&#34;&gt;println!&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;Parse error: {:?}&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-35&#34; name=&#34;__codelineno-0-35&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-36&#34; name=&#34;__codelineno-0-36&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;h3 id=&#34;-peståŸºäº-peg-çš„è§£æå™¨ç”Ÿæˆå™¨&#34;&gt;ğŸ“ pestï¼šåŸºäº PEG çš„è§£æå™¨ç”Ÿæˆå™¨&lt;a class=&#34;headerlink&#34; href=&#34;#-peståŸºäº-peg-çš„è§£æå™¨ç”Ÿæˆå™¨&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;ä½¿ç”¨â€Œè§£æè¡¨è¾¾å¼æ–‡æ³•â€Œï¼ˆParsing Expression Grammar, PEGï¼‰å®šä¹‰è¯­æ³•è§„åˆ™ã€‚
è¯­æ³•è§„åˆ™ä¸ Rust ä»£ç åˆ†ç¦»ï¼ˆ.pest æ–‡ä»¶ï¼‰ï¼Œæå‡å¯è¯»æ€§ã€‚&lt;/p&gt;
&lt;p&gt;é€‚ç”¨äºç¼–ç¨‹è¯­è¨€è§£æï¼ˆè‡ªå®šä¹‰ DSLï¼‰ï¼Œå¤æ‚æ–‡æœ¬æ ¼å¼ï¼ˆé…ç½®æ–‡ä»¶ã€æ¨¡æ¿å¼•æ“ï¼‰ï¼Œéœ€è¦ä¸¥æ ¼è¯­æ³•å®šä¹‰çš„åœºæ™¯ï¼ˆå¦‚ç¼–è¯‘å™¨å‰ç«¯ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚è§£æä¸€ä¸ªcsvæ–‡ä»¶ï¼š
&lt;a href=&#34;https://pest.rs/book/examples/csv.html&#34;&gt;pest csv&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å®šä¹‰ä¸€ä¸ª.pestæ–‡ä»¶æè¿°è¯­æ³•çš„è§„åˆ™
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Bash&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-1-1&#34; name=&#34;__codelineno-1-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;nv&#34;&gt;field&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;ASCII_DIGIT&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;.&amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;-&amp;quot;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;+&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-2&#34; name=&#34;__codelineno-1-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;nv&#34;&gt;record&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;field&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;~&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;,&amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;~&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;field&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;*&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-3&#34; name=&#34;__codelineno-1-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;nv&#34;&gt;file&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;SOI&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;~&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;record&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;~&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;\r\n&amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;))&lt;/span&gt;*&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;~&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;EOI&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/p&gt;
&lt;h2 id=&#34;é€‰æ‹©&#34;&gt;é€‰æ‹©&lt;a class=&#34;headerlink&#34; href=&#34;#é€‰æ‹©&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;ä»¥è§£æjsonä¸ºä¾‹ï¼Œnomçš„æ€§èƒ½ç›¸æ¯”pestçš„æ›´é«˜ä¸€äº›ã€‚&lt;/p&gt;
&lt;pre class=&#34;mermaid&#34;&gt;&lt;code&gt;graph TD     
    A[éœ€è§£æä»€ä¹ˆæ•°æ®?] --&amp;gt;|äºŒè¿›åˆ¶/é«˜æ€§èƒ½| B(nom)     
    A --&amp;gt;|ä¸¥æ ¼è¯­æ³•/DSL| C(pest)     
    B --&amp;gt; D{éœ€è¦åŠ¨æ€è°ƒæ•´è§£æé€»è¾‘?}     
    D --&amp;gt;|æ˜¯| E[é€‰æ‹©nom+è‡ªå®šä¹‰ç»„åˆå™¨]     
    D --&amp;gt;|å¦| F[ç›´æ¥ä½¿ç”¨nomå†…ç½®ç»„åˆå™¨]     
    C --&amp;gt; G{æ˜¯å¦éœ€è¦IDEå·¥å…·æ”¯æŒ?}     
    G --&amp;gt;|æ˜¯| H[é€‰æ‹©pest+è¯­æ³•é«˜äº®æ’ä»¶]     
    G --&amp;gt;|å¦| I[çº¯pestè§„åˆ™æ–‡ä»¶]&lt;/code&gt;&lt;/pre&gt;
&lt;style&gt;
.related-posts {
  margin-top: 1.5rem;
  padding-top: 0.75rem;
  border-top: 1px solid rgba(0,0,0,0.1);
  max-height: none !important; /* é˜²æ­¢Safarié”™è¯¯è®¡ç®—é«˜åº¦ */
  overflow: visible !important; /* é˜²æ­¢å†…å®¹è¢«æˆªæ–­ */
}
.related-posts h3 {
  margin-top: 0;
  margin-bottom: 0.5rem;
  font-size: 1.2rem;
  font-weight: 500;
  line-height: 1.3;
}
.related-posts ul {
  margin: 0 0 0.5rem 0 !important; /* å¼ºåˆ¶è¦†ç›–å¯èƒ½çš„å†²çªæ ·å¼ */
  padding-left: 1.5rem;
  list-style-position: outside;
}
.related-posts li {
  margin-bottom: 0.25rem;
  line-height: 1.4;
}
/* æš—è‰²æ¨¡å¼é€‚é… */
[data-md-color-scheme=&#34;slate&#34;] .related-posts {
  border-top-color: rgba(255,255,255,0.1);
}
/* Safariç‰¹å®šä¿®å¤ */
@supports (-webkit-hyphens:none) {
  .related-posts {
    display: block;
    position: relative;
    height: auto !important;
  }
  .related-posts ul {
    position: static;
  }
}
&lt;/style&gt;
&lt;div class=&#34;related-posts&#34;&gt;
&lt;h3&gt;ğŸ“š ç›¸å…³æ–‡ç« æ¨è&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/pyo3å®ç°pythonå’Œrustè·¨è¯­è¨€è°ƒç”¨/&#34; target=&#34;_blank&#34;&gt;pyo3å®ç°pythonå’Œrustè·¨è¯­è¨€è°ƒç”¨&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/helix-gptå¦‚ä½•å®ç°ai-codeä»¥åŠå¦‚ä½•è°ƒè¯•/&#34; target=&#34;_blank&#34;&gt;helix-gptå¦‚ä½•å®ç°AI codeä»¥åŠå¦‚ä½•è°ƒè¯•?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/cä½¿ç”¨abseil-cppé‡åˆ°çš„å°é—®é¢˜/&#34; target=&#34;_blank&#34;&gt;C++ä½¿ç”¨abseil-cppé‡åˆ°çš„å°é—®é¢˜&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/mit-ç»å…¸è®²åº§how-to-speak---patrick-winston/&#34; target=&#34;_blank&#34;&gt;MIT ç»å…¸è®²åº§ï¼šHow to Speak - Patrick Winston&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/300è¡Œå®ç°ä¸€ä¸ªboundedspscqueue/&#34; target=&#34;_blank&#34;&gt;300è¡Œå®ç°ä¸€ä¸ªBoundedSPSCQueue&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;</description>
      <link>https://github.com/KenForever1/blog/%E4%B8%A4%E7%A7%8D%E4%B8%8D%E5%90%8C%E8%AE%BE%E8%AE%A1%E7%90%86%E5%BF%B5%E7%9A%84%E8%A7%A3%E6%9E%90%E5%BA%93nom%E5%92%8Cpest/</link>
      <pubDate>Sun, 10 Aug 2025 00:00:00 +0000</pubDate>
      <source url="https://github.com/KenForever1/feed_rss_updated.xml">KenForever1</source>
      
      <guid isPermaLink="true">https://github.com/KenForever1/blog/%E4%B8%A4%E7%A7%8D%E4%B8%8D%E5%90%8C%E8%AE%BE%E8%AE%A1%E7%90%86%E5%BF%B5%E7%9A%84%E8%A7%A3%E6%9E%90%E5%BA%93nom%E5%92%8Cpest/</guid>
      
    </item>
    
    <item>
      <title>C++å¦‚ä½•å®ç°ä¸€ä¸ªæ”¯æŒåŠ¨æ€ã€é™æ€æ’ä»¶çš„ç³»ç»Ÿ</title>
      
      
        
      <author>KenForever1</author>
        
      
      
      
      <description>&lt;!-- more --&gt;

&lt;h2 id=&#34;å¼•è¨€&#34;&gt;å¼•è¨€&lt;a class=&#34;headerlink&#34; href=&#34;#å¼•è¨€&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;é€šè¿‡&lt;a href=&#34;https://github.com/ai-dynamo/nixl&#34;&gt;è‹±ä¼Ÿè¾¾æ¨ç†ä¼ è¾“åº“ï¼ˆNIXLï¼‰&lt;/a&gt;å­¦ä¹ C++å¦‚ä½•å®ç°ä¸€ä¸ªæ”¯æŒåŠ¨æ€ã€é™æ€æ’ä»¶æ³¨å†Œå’Œç®¡ç†ï¼&lt;/p&gt;
&lt;p&gt;NIXLæ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œè‹±ä¼Ÿè¾¾æ¨ç†ä¼ è¾“åº“ï¼ˆNIXLï¼‰æ—¨åœ¨åŠ é€Ÿè¯¸å¦‚è‹±ä¼Ÿè¾¾Dynamoç­‰äººå·¥æ™ºèƒ½æ¨ç†æ¡†æ¶ä¸­çš„ç‚¹å¯¹ç‚¹é€šä¿¡ï¼ŒåŒæ—¶é€šè¿‡æ¨¡å—åŒ–æ’ä»¶æ¶æ„ï¼Œä¸ºå„ç§ç±»å‹çš„å†…å­˜ï¼ˆå¦‚CPUå’ŒGPUï¼‰å’Œå­˜å‚¨ï¼ˆå¦‚æ–‡ä»¶ã€å—å­˜å‚¨å’Œå¯¹è±¡å­˜å‚¨ï¼‰æä¾›æŠ½è±¡ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ”¯æŒPythonã€Rustè¯­è¨€ç»‘å®šã€‚pythoné‡‡ç”¨pybind11å®ç°ï¼ŒRusté‡‡ç”¨bindgenå®ç°ã€‚&lt;/li&gt;
&lt;li&gt;é‡‡ç”¨mesonæ„å»ºç³»ç»Ÿè¿›è¡Œæ„å»ºã€‚&lt;/li&gt;
&lt;li&gt;é‡‡ç”¨æ’ä»¶æœºåˆ¶ï¼ŒåŒºåˆ†äº†åŠ¨æ€æ’ä»¶ï¼ˆdlsymåŠ¨æ€åº“åŠ è½½ï¼‰å’Œé™æ€æ’ä»¶ï¼ˆç¼–è¯‘æ—¶é“¾æ¥ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;æ¥å£apiå®ç°æ¸…æ™°ï¼Œæ¥å£å’Œå®ç°åˆ†ç¦»ï¼Œæ–¹ä¾¿è¿›è¡Œè·¨è¯­è¨€FFIç»‘å®šã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;cæ’ä»¶ç³»ç»Ÿæ¥å£å’Œç®¡ç†&#34;&gt;C++æ’ä»¶ç³»ç»Ÿæ¥å£å’Œç®¡ç†&lt;a class=&#34;headerlink&#34; href=&#34;#cæ’ä»¶ç³»ç»Ÿæ¥å£å’Œç®¡ç†&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;ä¸€ä¸ªæ’ä»¶ç³»ç»Ÿéœ€è¦å¦‚ä½•è€ƒè™‘æ¥å£å®ç°å‘¢ï¼Ÿéœ€è¦åŒ…æ‹¬å“ªäº›ä¿¡æ¯ï¼Ÿ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ’ä»¶ç‰ˆæœ¬å®šä¹‰ï¼Œåœ¨æ’ä»¶åŠ è½½æ—¶å¯ä»¥å¯¹æ’ä»¶ç‰ˆæœ¬è¿›è¡Œæ ¡éªŒï¼Œç¡®ä¿æ’ä»¶å’Œä¸»ç¨‹åºå…¼å®¹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é€šè¿‡ &lt;strong&gt;attribute&lt;/strong&gt;((visibility(&amp;ldquo;default&amp;rdquo;))) å¯¼å‡ºæ¥å£å‡½æ•°ï¼Œä½¿å¾—åŠ¨æ€åº“åŠ è½½æ—¶å¯ä»¥æ‰¾åˆ°è¿™äº›å‡½æ•°ã€‚æ˜¾å¼å£°æ˜éœ€è¦å¯¹å¤–æš´éœ²çš„æ¥å£ï¼Œé¿å…é»˜è®¤å¯¼å‡ºæ‰€æœ‰ç¬¦å·ï¼Œç¡®ä¿å…³é”®å‡½æ•°æˆ–å˜é‡å¯è¢«å¤–éƒ¨é“¾æ¥ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æ’ä»¶æ¥å£å®šä¹‰&#34;&gt;æ’ä»¶æ¥å£å®šä¹‰&lt;a class=&#34;headerlink&#34; href=&#34;#æ’ä»¶æ¥å£å®šä¹‰&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;åœ¨ä¸€ä¸ªapiæ¥å£å¤´æ–‡ä»¶ä¸­å®šä¹‰æ’ä»¶æ¥å£ï¼ŒåŒ…æ‹¬æ’ä»¶ç‰ˆæœ¬ã€æ’ä»¶åç§°ã€æ’ä»¶åˆå§‹åŒ–ã€æ’ä»¶é”€æ¯ç­‰å‡½æ•°ã€‚åœ¨é¡¹ç›®çš„ç»„ç»‡ç»“æ„ä¸­ï¼Œå¯ä»¥ä¸“é—¨æ”¾åˆ°ä¸€ä¸ªapiç›®å½•ä¸‹ã€‚
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-21&#34;&gt;21&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-22&#34;&gt;22&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-23&#34;&gt;23&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-24&#34;&gt;24&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-25&#34;&gt;25&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-26&#34;&gt;26&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-27&#34;&gt;27&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-28&#34;&gt;28&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-29&#34;&gt;29&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-30&#34;&gt;30&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-31&#34;&gt;31&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-32&#34;&gt;32&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-33&#34;&gt;33&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-34&#34;&gt;34&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-35&#34;&gt;35&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-36&#34;&gt;36&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-37&#34;&gt;37&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-38&#34;&gt;38&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-39&#34;&gt;39&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-40&#34;&gt;40&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-41&#34;&gt;41&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-42&#34;&gt;42&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-43&#34;&gt;43&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-0-1&#34; name=&#34;__codelineno-0-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;cpf&#34;&gt;&amp;quot;backend/backend_engine.h&amp;quot;&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-2&#34; name=&#34;__codelineno-0-2&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-3&#34; name=&#34;__codelineno-0-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// Define the plugin API version&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-4&#34; name=&#34;__codelineno-0-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#define NIXL_PLUGIN_API_VERSION 1&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-5&#34; name=&#34;__codelineno-0-5&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-6&#34; name=&#34;__codelineno-0-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// Define the plugin interface class&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-7&#34; name=&#34;__codelineno-0-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;nixlBackendPlugin&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-8&#34; name=&#34;__codelineno-0-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-9&#34; name=&#34;__codelineno-0-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;api_version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-10&#34; name=&#34;__codelineno-0-10&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-11&#34; name=&#34;__codelineno-0-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// Function pointer for creating a new backend engine instance&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-12&#34; name=&#34;__codelineno-0-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixlBackendEngine&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;create_engine&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixlBackendInitParams&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;init_params&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-13&#34; name=&#34;__codelineno-0-13&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-14&#34; name=&#34;__codelineno-0-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// Function pointer for destroying a backend engine instance&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-15&#34; name=&#34;__codelineno-0-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;destroy_engine&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixlBackendEngine&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;engine&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-16&#34; name=&#34;__codelineno-0-16&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-17&#34; name=&#34;__codelineno-0-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// Function to get the plugin name&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-18&#34; name=&#34;__codelineno-0-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get_plugin_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)();&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-19&#34; name=&#34;__codelineno-0-19&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-20&#34; name=&#34;__codelineno-0-20&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// Function to get the plugin version&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-21&#34; name=&#34;__codelineno-0-21&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get_plugin_version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)();&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-22&#34; name=&#34;__codelineno-0-22&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-23&#34; name=&#34;__codelineno-0-23&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// Function to get backend options&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-24&#34; name=&#34;__codelineno-0-24&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixl_b_params_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get_backend_options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)();&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-25&#34; name=&#34;__codelineno-0-25&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-26&#34; name=&#34;__codelineno-0-26&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// Function to get supported backend mem types&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-27&#34; name=&#34;__codelineno-0-27&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixl_mem_list_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get_backend_mems&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)();&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-28&#34; name=&#34;__codelineno-0-28&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-29&#34; name=&#34;__codelineno-0-29&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-30&#34; name=&#34;__codelineno-0-30&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// Macro to define exported C functions for the plugin&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-31&#34; name=&#34;__codelineno-0-31&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#define NIXL_PLUGIN_EXPORT __attribute__((visibility(&amp;quot;default&amp;quot;)))&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-32&#34; name=&#34;__codelineno-0-32&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-33&#34; name=&#34;__codelineno-0-33&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// Creator Function type for static plugins&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-34&#34; name=&#34;__codelineno-0-34&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;typedef&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixlBackendPlugin&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixlStaticPluginCreatorFunc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)();&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-35&#34; name=&#34;__codelineno-0-35&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-36&#34; name=&#34;__codelineno-0-36&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// Plugin must implement these functions for dynamic loading&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-37&#34; name=&#34;__codelineno-0-37&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;extern&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;C&amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-38&#34; name=&#34;__codelineno-0-38&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// Initialize the plugin&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-39&#34; name=&#34;__codelineno-0-39&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NIXL_PLUGIN_EXPORT&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixlBackendPlugin&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixl_plugin_init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-40&#34; name=&#34;__codelineno-0-40&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-41&#34; name=&#34;__codelineno-0-41&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// Cleanup the plugin&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-42&#34; name=&#34;__codelineno-0-42&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NIXL_PLUGIN_EXPORT&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixl_plugin_fini&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-43&#34; name=&#34;__codelineno-0-43&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/p&gt;
&lt;h3 id=&#34;æ’ä»¶ç®¡ç†å™¨&#34;&gt;æ’ä»¶ç®¡ç†å™¨&lt;a class=&#34;headerlink&#34; href=&#34;#æ’ä»¶ç®¡ç†å™¨&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;é€šè¿‡ä¸€ä¸ªå•ä¾‹ï¼Œè¿›è¡Œæ’ä»¶ç®¡ç†ã€‚
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-5&#34;&gt;5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-6&#34;&gt;6&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-1-1&#34; name=&#34;__codelineno-1-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;nixlPluginManager&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;nixlPluginManager::getInstance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-2&#34; name=&#34;__codelineno-1-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// Meyers singleton initialization is safe in multi-threaded environment.&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-3&#34; name=&#34;__codelineno-1-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// Consult standard [stmt.dcl] chapter for details.&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-4&#34; name=&#34;__codelineno-1-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixlPluginManager&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-5&#34; name=&#34;__codelineno-1-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-6&#34; name=&#34;__codelineno-1-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
çœ‹ä¸€ä¸‹nixlPluginManagerçš„æˆå‘˜å˜é‡å®šä¹‰ï¼š
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-5&#34;&gt;5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-6&#34;&gt;6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-7&#34;&gt;7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-8&#34;&gt;8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-9&#34;&gt;9&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-2-1&#34; name=&#34;__codelineno-2-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;using&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixl_backend_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-2&#34; name=&#34;__codelineno-2-2&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-2-3&#34; name=&#34;__codelineno-2-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;nixlPluginManager&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-4&#34; name=&#34;__codelineno-2-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-5&#34; name=&#34;__codelineno-2-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixl_backend_t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shared_ptr&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixlPluginHandle&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;loaded_plugins_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// åŒæ—¶ä¿å­˜äº†æ³¨å†Œçš„åŠ¨æ€æ’ä»¶å’Œé™æ€æ’ä»¶ä¿¡æ¯&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-6&#34; name=&#34;__codelineno-2-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vector&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plugin_dirs_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// ä¿å­˜æ’ä»¶æœç´¢è·¯å¾„&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-7&#34; name=&#34;__codelineno-2-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vector&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixlStaticPluginInfo&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;static_plugins_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// ä¿å­˜æœ‰é™æ€æ’ä»¶çš„ä¿¡æ¯ï¼Œæ–¹ä¾¿åœ¨unloadæ—¶è¿›è¡Œè¿‡æ»¤é™æ€æ’ä»¶ï¼Œå› ä¸ºé™æ€æ’ä»¶ä¸éœ€è¦dlcloseã€‚&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-8&#34; name=&#34;__codelineno-2-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// ......&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-9&#34; name=&#34;__codelineno-2-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/p&gt;
&lt;h3 id=&#34;ç»´æŠ¤æ’ä»¶ä¿¡æ¯&#34;&gt;ç»´æŠ¤æ’ä»¶ä¿¡æ¯&lt;a class=&#34;headerlink&#34; href=&#34;#ç»´æŠ¤æ’ä»¶ä¿¡æ¯&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;nixlPluginHandleåŒæ—¶æ”¯æŒä¿å­˜åŠ¨æ€æ’ä»¶å’Œé™æ€æ’ä»¶çš„ä¿¡æ¯ã€‚nixlPluginHandleç»“æ„åªåœ¨æ„é€ å’Œææ„æ—¶ä¿®æ”¹ï¼Œåœ¨æŸ¥è¯¢å’Œæ’ä»¶å®ä¾‹åŒ–æ—¶åªè¯»ã€‚å› æ­¤å¯ä»¥åœ¨å¤šçº¿ç¨‹ä¸­å®‰å…¨ä½¿ç”¨ï¼Œä¸éœ€è¦åŠ é”ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-3-1&#34; name=&#34;__codelineno-3-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;nixlPluginHandle&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-2&#34; name=&#34;__codelineno-3-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-3&#34; name=&#34;__codelineno-3-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;handle_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;         &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// Handle to the dynamically loaded library&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-4&#34; name=&#34;__codelineno-3-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixlBackendPlugin&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plugin_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// Plugin interface&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-5&#34; name=&#34;__codelineno-3-5&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-3-6&#34; name=&#34;__codelineno-3-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-7&#34; name=&#34;__codelineno-3-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixlPluginHandle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;handle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixlBackendPlugin&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plugin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-8&#34; name=&#34;__codelineno-3-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;~&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixlPluginHandle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-9&#34; name=&#34;__codelineno-3-9&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-3-10&#34; name=&#34;__codelineno-3-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixlBackendEngine&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;createEngine&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixlBackendInitParams&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;init_params&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-11&#34; name=&#34;__codelineno-3-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;destroyEngine&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixlBackendEngine&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;engine&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-12&#34; name=&#34;__codelineno-3-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;getName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-13&#34; name=&#34;__codelineno-3-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;getVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-14&#34; name=&#34;__codelineno-3-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixl_b_params_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;getBackendOptions&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-15&#34; name=&#34;__codelineno-3-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixl_mem_list_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;getBackendMems&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-16&#34; name=&#34;__codelineno-3-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;h2 id=&#34;é™æ€æ’ä»¶å’ŒåŠ¨æ€æ’ä»¶æ³¨å†Œ&#34;&gt;é™æ€æ’ä»¶å’ŒåŠ¨æ€æ’ä»¶æ³¨å†Œ&lt;a class=&#34;headerlink&#34; href=&#34;#é™æ€æ’ä»¶å’ŒåŠ¨æ€æ’ä»¶æ³¨å†Œ&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;h3 id=&#34;é™æ€æ’ä»¶&#34;&gt;é™æ€æ’ä»¶&lt;a class=&#34;headerlink&#34; href=&#34;#é™æ€æ’ä»¶&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-5&#34;&gt;5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-6&#34;&gt;6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-7&#34;&gt;7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-8&#34;&gt;8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-9&#34;&gt;9&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-4-1&#34; name=&#34;__codelineno-4-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// Creator Function for static plugins&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-2&#34; name=&#34;__codelineno-4-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;typedef&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixlBackendPlugin&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixlStaticPluginCreatorFunc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)();&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-3&#34; name=&#34;__codelineno-4-3&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-4-4&#34; name=&#34;__codelineno-4-4&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-4-5&#34; name=&#34;__codelineno-4-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// Structure to hold static plugin info&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-6&#34; name=&#34;__codelineno-4-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;nixlStaticPluginInfo&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-7&#34; name=&#34;__codelineno-4-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-8&#34; name=&#34;__codelineno-4-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixlStaticPluginCreatorFunc&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;createFunc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-9&#34; name=&#34;__codelineno-4-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;æ³¨å†Œé™æ€æ’ä»¶: é™æ€æ’ä»¶åªéœ€è¦ä¿å­˜ä¸€ä¸ªnameå’ŒcreateFuncï¼Œå¹¶ä¸”åœ¨æ³¨å†Œæ—¶ï¼Œæ‰§è¡ŒcreateFuncè¿›è¡Œå®ä¾‹åŒ–ï¼ˆä¸€ä¸ªé™æ€å…¨å±€å®ä¾‹ï¼‰ã€‚ç„¶åå°†nixlBackendPlugin*ä¿¡æ¯ä¿å­˜åˆ°loaded_plugins_çš„mapä¸­ã€‚
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-5-1&#34; name=&#34;__codelineno-5-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;nixlPluginManager::registerStaticPlugin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixlStaticPluginCreatorFunc&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;creator&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-2&#34; name=&#34;__codelineno-5-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;lock_guard&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;lg&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;lock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-3&#34; name=&#34;__codelineno-5-3&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-5-4&#34; name=&#34;__codelineno-5-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixlStaticPluginInfo&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;info&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-5&#34; name=&#34;__codelineno-5-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;info&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-6&#34; name=&#34;__codelineno-5-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;info&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;createFunc&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;creator&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-7&#34; name=&#34;__codelineno-5-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;static_plugins_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;push_back&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;info&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-8&#34; name=&#34;__codelineno-5-8&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-5-9&#34; name=&#34;__codelineno-5-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;//Static Plugins are considered pre-loaded&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-10&#34; name=&#34;__codelineno-5-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixlBackendPlugin&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plugin&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;info&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;createFunc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-11&#34; name=&#34;__codelineno-5-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NIXL_INFO&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;Loading static plugin: &amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-12&#34; name=&#34;__codelineno-5-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plugin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-13&#34; name=&#34;__codelineno-5-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// Register the loaded plugin&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-14&#34; name=&#34;__codelineno-5-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plugin_handle&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;make_shared&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixlPluginHandle&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plugin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-15&#34; name=&#34;__codelineno-5-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;loaded_plugins_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plugin_handle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-16&#34; name=&#34;__codelineno-5-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-17&#34; name=&#34;__codelineno-5-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/p&gt;
&lt;p&gt;é™æ€æ’ä»¶ä¸éœ€è¦unload, ç›¸æ¯”åŠ¨æ€æ’ä»¶éœ€è¦dlcloseã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ç¼–è¯‘æ—¶ï¼Œå†³å®šæ˜¯å¦æ³¨å†Œé™æ€æ’ä»¶ã€‚createStaticPosixPluginå‡½æ•°åœ¨æ’ä»¶æ¨¡å—ä¸­å®ç°ï¼ˆåé¢å®ç°ç¯èŠ‚æœ‰ä»‹ç»ï¼‰ï¼Œè¿™é‡Œé€šè¿‡å®æ§åˆ¶æ˜¯å¦æ³¨å†Œé™æ€æ’ä»¶ã€‚
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-6-1&#34; name=&#34;__codelineno-6-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#ifdef STATIC_PLUGIN_POSIX&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-2&#34; name=&#34;__codelineno-6-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;extern&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixlBackendPlugin&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;createStaticPosixPlugin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-3&#34; name=&#34;__codelineno-6-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;registerStaticPlugin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;POSIX&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;createStaticPosixPlugin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-4&#34; name=&#34;__codelineno-6-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#endif &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// STATIC_PLUGIN_POSIX&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-5&#34; name=&#34;__codelineno-6-5&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-6-6&#34; name=&#34;__codelineno-6-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#ifdef STATIC_PLUGIN_GDS&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-7&#34; name=&#34;__codelineno-6-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#ifndef DISABLE_GDS_BACKEND&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-8&#34; name=&#34;__codelineno-6-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;extern&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixlBackendPlugin&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;createStaticGdsPlugin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-9&#34; name=&#34;__codelineno-6-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;registerStaticPlugin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;GDS&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;createStaticGdsPlugin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-10&#34; name=&#34;__codelineno-6-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#endif &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// DISABLE_GDS_BACKEND&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-11&#34; name=&#34;__codelineno-6-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#endif &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// STATIC_PLUGIN_GDS&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/p&gt;
&lt;h3 id=&#34;åŠ¨æ€æ’ä»¶åŠ è½½&#34;&gt;åŠ¨æ€æ’ä»¶åŠ è½½&lt;a class=&#34;headerlink&#34; href=&#34;#åŠ¨æ€æ’ä»¶åŠ è½½&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;é€šè¿‡ä¸€ä¸ªvoid *handleï¼Œä¿å­˜åŠ¨æ€åº“çš„å¥æŸ„ã€‚&lt;/p&gt;
&lt;p&gt;æ”¯æŒè®¾ç½®æ’ä»¶æœç´¢è·¯å¾„ï¼Œå¹¶åŠ è½½æ’ä»¶ã€‚åœ¨åŠ è½½æ’ä»¶æ—¶ï¼Œå…ˆæ ¹æ®æ’ä»¶åç§°æ ¡éªŒæ˜¯å¦å·²ç»ä¸ºé™æ€æ’ä»¶ï¼Œå³å·²ç»preloadï¼Œå¯ä»¥ç›´æ¥è¿”å›é™æ€æ’ä»¶çš„handleã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æ’ä»¶åŠ è½½æ—¶ï¼Œä¼šè¿›è¡Œæ’ä»¶ç‰ˆæœ¬æ ¡éªŒã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-21&#34;&gt;21&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-22&#34;&gt;22&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-23&#34;&gt;23&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-24&#34;&gt;24&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-25&#34;&gt;25&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-26&#34;&gt;26&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-27&#34;&gt;27&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-28&#34;&gt;28&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-29&#34;&gt;29&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-30&#34;&gt;30&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-31&#34;&gt;31&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-32&#34;&gt;32&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-33&#34;&gt;33&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-34&#34;&gt;34&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-35&#34;&gt;35&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-36&#34;&gt;36&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-37&#34;&gt;37&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-38&#34;&gt;38&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-39&#34;&gt;39&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-7-1&#34; name=&#34;__codelineno-7-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shared_ptr&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixlPluginHandle&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixlPluginManager&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;loadPluginFromPath&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plugin_path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-2&#34; name=&#34;__codelineno-7-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// Open the plugin file&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-3&#34; name=&#34;__codelineno-7-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;handle&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dlopen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plugin_path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;c_str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;RTLD_NOW&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;RTLD_LOCAL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-4&#34; name=&#34;__codelineno-7-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;handle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-5&#34; name=&#34;__codelineno-7-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NIXL_ERROR&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;Failed to load plugin from &amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plugin_path&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;: &amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dlerror&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-6&#34; name=&#34;__codelineno-7-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-7&#34; name=&#34;__codelineno-7-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-8&#34; name=&#34;__codelineno-7-8&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-7-9&#34; name=&#34;__codelineno-7-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// Get the initialization function&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-10&#34; name=&#34;__codelineno-7-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typedef&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixlBackendPlugin&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;init_func_t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)();&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-11&#34; name=&#34;__codelineno-7-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;init_func_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;init&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;init_func_t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dlsym&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;handle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;nixl_plugin_init&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-12&#34; name=&#34;__codelineno-7-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-13&#34; name=&#34;__codelineno-7-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NIXL_ERROR&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;Failed to find nixl_plugin_init in &amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plugin_path&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;: &amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dlerror&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-14&#34; name=&#34;__codelineno-7-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dlclose&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;handle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-15&#34; name=&#34;__codelineno-7-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-16&#34; name=&#34;__codelineno-7-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-17&#34; name=&#34;__codelineno-7-17&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-7-18&#34; name=&#34;__codelineno-7-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// Call the initialization function&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-19&#34; name=&#34;__codelineno-7-19&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixlBackendPlugin&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plugin&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-20&#34; name=&#34;__codelineno-7-20&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plugin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-21&#34; name=&#34;__codelineno-7-21&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NIXL_ERROR&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;Plugin initialization failed for &amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plugin_path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-22&#34; name=&#34;__codelineno-7-22&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dlclose&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;handle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-23&#34; name=&#34;__codelineno-7-23&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-24&#34; name=&#34;__codelineno-7-24&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-25&#34; name=&#34;__codelineno-7-25&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-7-26&#34; name=&#34;__codelineno-7-26&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// Check API version&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-27&#34; name=&#34;__codelineno-7-27&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plugin&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;api_version&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NIXL_PLUGIN_API_VERSION&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-28&#34; name=&#34;__codelineno-7-28&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NIXL_ERROR&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;Plugin API version mismatch for &amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plugin_path&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-29&#34; name=&#34;__codelineno-7-29&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                   &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;: expected &amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NIXL_PLUGIN_API_VERSION&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-30&#34; name=&#34;__codelineno-7-30&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                   &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;, got &amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plugin&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;api_version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-31&#34; name=&#34;__codelineno-7-31&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dlclose&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;handle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-32&#34; name=&#34;__codelineno-7-32&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-33&#34; name=&#34;__codelineno-7-33&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-34&#34; name=&#34;__codelineno-7-34&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-7-35&#34; name=&#34;__codelineno-7-35&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// Create and store the plugin handle&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-36&#34; name=&#34;__codelineno-7-36&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plugin_handle&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;make_shared&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixlPluginHandle&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;handle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plugin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-37&#34; name=&#34;__codelineno-7-37&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-7-38&#34; name=&#34;__codelineno-7-38&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plugin_handle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-39&#34; name=&#34;__codelineno-7-39&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;ä»‹ç»åˆ°ç°åœ¨ï¼Œä¸€ä¸ªæ’ä»¶çš„æ¡†æ¶å·²ç»æ­å»ºå¥½äº†ã€‚æ”¯æŒæ’ä»¶ç®¡ç†ã€æ’ä»¶æ¥å£å®šä¹‰ã€åŠ¨æ€å’Œé™æ€æ’ä»¶åŠ è½½ã€‚
æ¥ä¸‹æ¥ï¼Œå°±æ˜¯æ ¹æ®æ’ä»¶æ¥å£ï¼Œå®ç°å…·ä½“çš„æ’ä»¶ã€‚å¦‚ä½•å®ç°æ”¯æŒåŠ¨æ€åŠ è½½çš„æ’ä»¶å’Œé™æ€æ’ä»¶ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¦‚ä½•å®ç°æ’ä»¶plugin&#34;&gt;å¦‚ä½•å®ç°æ’ä»¶Plugin&lt;a class=&#34;headerlink&#34; href=&#34;#å¦‚ä½•å®ç°æ’ä»¶plugin&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;å®ç°æ’ä»¶åªéœ€è¦å¯¼å…¥å¤´æ–‡ä»¶ï¼Œå¹¶å®ç°æ’ä»¶æ¥å£ã€‚ä¿è¯äº†æ’ä»¶æ¥å£çš„ç»Ÿä¸€æ€§ï¼Œç»“æ„ç»„ç»‡çš„æ¸…æ™°ã€‚
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-8-1&#34; name=&#34;__codelineno-8-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;cpf&#34;&gt;&amp;quot;backend/backend_plugin.h&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
è¿™ä¸ªPosixæ˜¯è‹±ä¼Ÿè¾¾æ¨ç†ä¼ è¾“åº“ï¼ˆNIXLï¼‰ä¸­å…¶ä¸­ä¸€ä¸ªæ’ä»¶å®ç°ï¼Œå…¶ä»–æ’ä»¶è¿˜åŒ…æ‹¬äº†hf3fsã€mooncakeã€cuda_gdsç­‰ã€‚çœ‹ä¸€ä¸‹å¦‚ä½•å®ç°ä¸€ä¸ªPosixæ’ä»¶ï¼Œä¸‹é¢æ˜¯å¯¹æ’ä»¶æ¥å£å‡½æ•°çš„å®ç°ï¼š
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-21&#34;&gt;21&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-22&#34;&gt;22&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-23&#34;&gt;23&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-24&#34;&gt;24&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-25&#34;&gt;25&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-26&#34;&gt;26&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-27&#34;&gt;27&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-28&#34;&gt;28&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-29&#34;&gt;29&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-30&#34;&gt;30&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-9-1&#34; name=&#34;__codelineno-9-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// Function to create a new POSIX backend engine instance&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-2&#34; name=&#34;__codelineno-9-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixlBackendEngine&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;create_posix_engine&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixlBackendInitParams&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;init_params&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-3&#34; name=&#34;__codelineno-9-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixlPosixEngine&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;init_params&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-4&#34; name=&#34;__codelineno-9-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-5&#34; name=&#34;__codelineno-9-5&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-9-6&#34; name=&#34;__codelineno-9-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// èµ„æºçš„æ­£ç¡®é‡Šæ”¾&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-7&#34; name=&#34;__codelineno-9-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;destroy_posix_engine&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixlBackendEngine&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;engine&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-8&#34; name=&#34;__codelineno-9-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;delete&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;engine&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-9&#34; name=&#34;__codelineno-9-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-10&#34; name=&#34;__codelineno-9-10&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-9-11&#34; name=&#34;__codelineno-9-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// Function to get the plugin nameï¼Œæ’ä»¶åç§°&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-12&#34; name=&#34;__codelineno-9-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;get_plugin_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-13&#34; name=&#34;__codelineno-9-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;POSIX&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-14&#34; name=&#34;__codelineno-9-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-15&#34; name=&#34;__codelineno-9-15&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-9-16&#34; name=&#34;__codelineno-9-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// Function to get the plugin versionï¼Œæ’ä»¶ç‰ˆæœ¬&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-17&#34; name=&#34;__codelineno-9-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;get_plugin_version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-18&#34; name=&#34;__codelineno-9-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;0.1.0&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-19&#34; name=&#34;__codelineno-9-19&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-20&#34; name=&#34;__codelineno-9-20&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-9-21&#34; name=&#34;__codelineno-9-21&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// Function to get backend options&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-22&#34; name=&#34;__codelineno-9-22&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixl_b_params_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;get_backend_options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-23&#34; name=&#34;__codelineno-9-23&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixl_b_params_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;params&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-24&#34; name=&#34;__codelineno-9-24&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;params&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-25&#34; name=&#34;__codelineno-9-25&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-26&#34; name=&#34;__codelineno-9-26&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-9-27&#34; name=&#34;__codelineno-9-27&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// Function to get supported backend mem types&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-28&#34; name=&#34;__codelineno-9-28&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixl_mem_list_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;get_backend_mems&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-29&#34; name=&#34;__codelineno-9-29&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;DRAM_SEG&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;FILE_SEG&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-30&#34; name=&#34;__codelineno-9-30&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/p&gt;
&lt;p&gt;é™æ€æ’ä»¶å’ŒåŠ¨æ€æ’ä»¶å®ç°çš„åŒºåˆ«ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;é™æ€æ’ä»¶åœ¨ç¼–è¯‘æ—¶ï¼Œé€šè¿‡å®æ§åˆ¶æ˜¯å¦æ³¨å†Œé™æ€æ’ä»¶ï¼Œåœ¨ç¨‹åºç¼–è¯‘æ—¶ï¼Œæ ¹æ®å®å®šä¹‰ï¼Œå†³å®šæ˜¯å¦è°ƒç”¨createStaticPosixPluginå‡½æ•°ã€‚å°†é™æ€å…¨å±€å˜é‡nixlBackendPlugin*ä¿¡æ¯ä¿å­˜åˆ°loaded_plugins_çš„mapä¸­ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åŠ¨æ€æ’ä»¶åœ¨è¿è¡Œæ—¶ï¼Œé€šè¿‡dlopenåŠ è½½åŠ¨æ€åº“ï¼Œå¹¶è°ƒç”¨nixl_plugin_initå‡½æ•°ï¼Œåˆå§‹åŒ–æ’ä»¶ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-21&#34;&gt;21&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-22&#34;&gt;22&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-23&#34;&gt;23&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-24&#34;&gt;24&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-25&#34;&gt;25&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-26&#34;&gt;26&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-27&#34;&gt;27&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-28&#34;&gt;28&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-29&#34;&gt;29&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-30&#34;&gt;30&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-31&#34;&gt;31&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-32&#34;&gt;32&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-33&#34;&gt;33&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-34&#34;&gt;34&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-35&#34;&gt;35&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-36&#34;&gt;36&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-37&#34;&gt;37&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-38&#34;&gt;38&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-39&#34;&gt;39&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-40&#34;&gt;40&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-41&#34;&gt;41&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-10-1&#34; name=&#34;__codelineno-10-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#ifdef STATIC_PLUGIN_POSIX&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-2&#34; name=&#34;__codelineno-10-2&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-10-3&#34; name=&#34;__codelineno-10-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// é€šè¿‡é™æ€å…¨å±€å˜é‡ï¼Œæ³¨å†Œé™æ€æ’ä»¶å®ä¾‹ï¼Œåœ¨ç¨‹åºç¼–è¯‘æ—¶ï¼Œæ ¹æ®å®å®šä¹‰ï¼Œå†³å®šæ˜¯å¦è°ƒç”¨createStaticPosixPluginå‡½æ•°&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-4&#34; name=&#34;__codelineno-10-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// å†³å®šæ˜¯å¦æ³¨å†Œé™æ€æ’ä»¶&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-5&#34; name=&#34;__codelineno-10-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// Static plugin structure&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-6&#34; name=&#34;__codelineno-10-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixlBackendPlugin&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plugin&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-7&#34; name=&#34;__codelineno-10-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NIXL_PLUGIN_API_VERSION&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-8&#34; name=&#34;__codelineno-10-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;create_posix_engine&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-9&#34; name=&#34;__codelineno-10-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;destroy_posix_engine&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-10&#34; name=&#34;__codelineno-10-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get_plugin_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-11&#34; name=&#34;__codelineno-10-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get_plugin_version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-12&#34; name=&#34;__codelineno-10-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get_backend_options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-13&#34; name=&#34;__codelineno-10-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get_backend_mems&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-14&#34; name=&#34;__codelineno-10-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-15&#34; name=&#34;__codelineno-10-15&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-10-16&#34; name=&#34;__codelineno-10-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;nixlBackendPlugin&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;createStaticPosixPlugin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-17&#34; name=&#34;__codelineno-10-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plugin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// Return the static plugin instance&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-18&#34; name=&#34;__codelineno-10-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-19&#34; name=&#34;__codelineno-10-19&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-10-20&#34; name=&#34;__codelineno-10-20&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#else&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-21&#34; name=&#34;__codelineno-10-21&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-10-22&#34; name=&#34;__codelineno-10-22&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// Plugin initialization function&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-23&#34; name=&#34;__codelineno-10-23&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;extern&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;C&amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NIXL_PLUGIN_EXPORT&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixlBackendPlugin&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixl_plugin_init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-24&#34; name=&#34;__codelineno-10-24&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;try&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-25&#34; name=&#34;__codelineno-10-25&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;unique_ptr&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixlBackendPlugin&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plugin&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;make_unique&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixlBackendPlugin&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-26&#34; name=&#34;__codelineno-10-26&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plugin&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;create_engine&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;create_posix_engine&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-27&#34; name=&#34;__codelineno-10-27&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plugin&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;destroy_engine&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;destroy_posix_engine&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-28&#34; name=&#34;__codelineno-10-28&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plugin&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get_plugin_name&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get_plugin_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-29&#34; name=&#34;__codelineno-10-29&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plugin&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get_plugin_version&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get_plugin_version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-30&#34; name=&#34;__codelineno-10-30&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plugin&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get_backend_options&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get_backend_options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-31&#34; name=&#34;__codelineno-10-31&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plugin&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get_backend_mems&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get_backend_mems&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-32&#34; name=&#34;__codelineno-10-32&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plugin&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;api_version&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NIXL_PLUGIN_API_VERSION&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// Set the API version&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-33&#34; name=&#34;__codelineno-10-33&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plugin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;release&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-34&#34; name=&#34;__codelineno-10-34&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;catch&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;exception&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-35&#34; name=&#34;__codelineno-10-35&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-36&#34; name=&#34;__codelineno-10-36&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-37&#34; name=&#34;__codelineno-10-37&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-38&#34; name=&#34;__codelineno-10-38&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-10-39&#34; name=&#34;__codelineno-10-39&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// Plugin cleanup function&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-40&#34; name=&#34;__codelineno-10-40&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;extern&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;C&amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NIXL_PLUGIN_EXPORT&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nixl_plugin_fini&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-41&#34; name=&#34;__codelineno-10-41&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;æ„Ÿè°¢æ‚¨çš„é˜…è¯»ï¼Œä»Šå¤©çš„å†…å®¹å°±åˆ°è¿™é‡Œäº†ã€‚é€šè¿‡æœ¬æ–‡æˆ‘ä»¬äº†è§£äº†c++é¡¹ç›®NIXLæ’ä»¶æ¡†æ¶çš„è®¾è®¡å’Œå®ç°ï¼Œä»¥åŠå¦‚ä½•å®ç°ä¸€ä¸ªæ’ä»¶ã€‚&lt;/p&gt;
&lt;style&gt;
.related-posts {
  margin-top: 1.5rem;
  padding-top: 0.75rem;
  border-top: 1px solid rgba(0,0,0,0.1);
  max-height: none !important; /* é˜²æ­¢Safarié”™è¯¯è®¡ç®—é«˜åº¦ */
  overflow: visible !important; /* é˜²æ­¢å†…å®¹è¢«æˆªæ–­ */
}
.related-posts h3 {
  margin-top: 0;
  margin-bottom: 0.5rem;
  font-size: 1.2rem;
  font-weight: 500;
  line-height: 1.3;
}
.related-posts ul {
  margin: 0 0 0.5rem 0 !important; /* å¼ºåˆ¶è¦†ç›–å¯èƒ½çš„å†²çªæ ·å¼ */
  padding-left: 1.5rem;
  list-style-position: outside;
}
.related-posts li {
  margin-bottom: 0.25rem;
  line-height: 1.4;
}
/* æš—è‰²æ¨¡å¼é€‚é… */
[data-md-color-scheme=&#34;slate&#34;] .related-posts {
  border-top-color: rgba(255,255,255,0.1);
}
/* Safariç‰¹å®šä¿®å¤ */
@supports (-webkit-hyphens:none) {
  .related-posts {
    display: block;
    position: relative;
    height: auto !important;
  }
  .related-posts ul {
    position: static;
  }
}
&lt;/style&gt;
&lt;div class=&#34;related-posts&#34;&gt;
&lt;h3&gt;ğŸ“š ç›¸å…³æ–‡ç« æ¨è&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/cä½¿ç”¨abseil-cppé‡åˆ°çš„å°é—®é¢˜/&#34; target=&#34;_blank&#34;&gt;C++ä½¿ç”¨abseil-cppé‡åˆ°çš„å°é—®é¢˜&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/cæŠ€æ³•å¦‚ä½•ä¸ºä¸€ä¸ªç±»åŠ¨æ€é™„åŠ ä»»æ„ç±»å‹æ•°æ®/&#34; target=&#34;_blank&#34;&gt;C++æŠ€æ³•ï¼šå¦‚ä½•ä¸ºä¸€ä¸ªç±»åŠ¨æ€é™„åŠ ä»»æ„ç±»å‹æ•°æ®&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/helix-gptå¦‚ä½•å®ç°ai-codeä»¥åŠå¦‚ä½•è°ƒè¯•/&#34; target=&#34;_blank&#34;&gt;helix-gptå¦‚ä½•å®ç°AI codeä»¥åŠå¦‚ä½•è°ƒè¯•?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/mit-ç»å…¸è®²åº§how-to-speak---patrick-winston/&#34; target=&#34;_blank&#34;&gt;MIT ç»å…¸è®²åº§ï¼šHow to Speak - Patrick Winston&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/300è¡Œå®ç°ä¸€ä¸ªboundedspscqueue/&#34; target=&#34;_blank&#34;&gt;300è¡Œå®ç°ä¸€ä¸ªBoundedSPSCQueue&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;</description>
      <link>https://github.com/KenForever1/blog/c%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E6%94%AF%E6%8C%81%E5%8A%A8%E6%80%81%E9%9D%99%E6%80%81%E6%8F%92%E4%BB%B6%E7%9A%84%E7%B3%BB%E7%BB%9F/</link>
      <pubDate>Sun, 03 Aug 2025 00:00:00 +0000</pubDate>
      <source url="https://github.com/KenForever1/feed_rss_updated.xml">KenForever1</source>
      
      <guid isPermaLink="true">https://github.com/KenForever1/blog/c%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E6%94%AF%E6%8C%81%E5%8A%A8%E6%80%81%E9%9D%99%E6%80%81%E6%8F%92%E4%BB%B6%E7%9A%84%E7%B3%BB%E7%BB%9F/</guid>
      
    </item>
    
    <item>
      <title>rust-facetåº“å¦‚ä½•å®ç°è¿è¡Œæ—¶åå°„</title>
      
      
        
      <author>KenForever1</author>
        
      
      
      
      <description>&lt;!-- more --&gt;

&lt;h2 id=&#34;ä»facet-åå°„å®ç°&#34;&gt;ä»facet åå°„å®ç°&lt;a class=&#34;headerlink&#34; href=&#34;#ä»facet-åå°„å®ç°&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;h3 id=&#34;ä»ä¾‹å­çœ‹facetåå°„çš„ä¸¤å¤§åŠŸèƒ½&#34;&gt;ä»ä¾‹å­çœ‹facetåå°„çš„ä¸¤å¤§åŠŸèƒ½&lt;a class=&#34;headerlink&#34; href=&#34;#ä»ä¾‹å­çœ‹facetåå°„çš„ä¸¤å¤§åŠŸèƒ½&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;ä¸ºåºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œæ¯”å¦‚jsonã€yamlæœåŠ¡ã€‚&lt;/p&gt;
&lt;h4 id=&#34;partialåŠŸèƒ½ä»‹ç»&#34;&gt;PartialåŠŸèƒ½ä»‹ç»&lt;a class=&#34;headerlink&#34; href=&#34;#partialåŠŸèƒ½ä»‹ç»&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;ç”¨äºæ„å»ºå€¼ï¼Œå¯ä»¥ç”¨äºæ ¹æ®jsonã€yamlç­‰æ ¼å¼ï¼Œååºåˆ—åŒ–æ„å»ºrustç±»å‹ä»¥åŠè®¾ç½®æˆå‘˜çš„å€¼ã€‚å…ˆé€šè¿‡Partial::allocåˆ†é…å…³äºç±»å‹Outerçš„æœªåˆå§‹åŒ–å†…å­˜ï¼Œç„¶åé€šè¿‡.begin_field(&amp;ldquo;name&amp;rdquo;).set(String::from(&amp;ldquo;Hello, world!&amp;rdquo;))ä¸ºæˆå‘˜nameè®¾ç½®å€¼ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Rust&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-21&#34;&gt;21&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-22&#34;&gt;22&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-23&#34;&gt;23&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-24&#34;&gt;24&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-25&#34;&gt;25&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-26&#34;&gt;26&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-27&#34;&gt;27&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-28&#34;&gt;28&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-29&#34;&gt;29&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-30&#34;&gt;30&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-31&#34;&gt;31&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-32&#34;&gt;32&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-33&#34;&gt;33&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-34&#34;&gt;34&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-35&#34;&gt;35&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-36&#34;&gt;36&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-0-1&#34; name=&#34;__codelineno-0-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#[derive(Facet, PartialEq, Eq, Debug)]&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-2&#34; name=&#34;__codelineno-0-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Outer&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-3&#34; name=&#34;__codelineno-0-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-4&#34; name=&#34;__codelineno-0-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;inner&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Inner&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-5&#34; name=&#34;__codelineno-0-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-6&#34; name=&#34;__codelineno-0-6&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-7&#34; name=&#34;__codelineno-0-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#[derive(Facet, PartialEq, Eq, Debug)]&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-8&#34; name=&#34;__codelineno-0-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Inner&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-9&#34; name=&#34;__codelineno-0-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;i32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-10&#34; name=&#34;__codelineno-0-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;i32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-11&#34; name=&#34;__codelineno-0-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-12&#34; name=&#34;__codelineno-0-12&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-13&#34; name=&#34;__codelineno-0-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#[test]&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-14&#34; name=&#34;__codelineno-0-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;wip_struct_testleak1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-15&#34; name=&#34;__codelineno-0-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Partial&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;alloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Outer&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-16&#34; name=&#34;__codelineno-0-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;begin_field&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-17&#34; name=&#34;__codelineno-0-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;Hello, world!&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-18&#34; name=&#34;__codelineno-0-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;end&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-19&#34; name=&#34;__codelineno-0-19&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;begin_field&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;inner&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-20&#34; name=&#34;__codelineno-0-20&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;begin_field&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;x&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-21&#34; name=&#34;__codelineno-0-21&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;42&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-22&#34; name=&#34;__codelineno-0-22&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;end&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-23&#34; name=&#34;__codelineno-0-23&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;begin_field&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;b&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-24&#34; name=&#34;__codelineno-0-24&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;43&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-25&#34; name=&#34;__codelineno-0-25&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;end&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-26&#34; name=&#34;__codelineno-0-26&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;end&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-27&#34; name=&#34;__codelineno-0-27&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;build&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-28&#34; name=&#34;__codelineno-0-28&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-29&#34; name=&#34;__codelineno-0-29&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;fm&#34;&gt;assert_eq!&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-30&#34; name=&#34;__codelineno-0-30&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-31&#34; name=&#34;__codelineno-0-31&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Outer&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-32&#34; name=&#34;__codelineno-0-32&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;Hello, world!&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-33&#34; name=&#34;__codelineno-0-33&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;inner&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Inner&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;42&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;43&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-34&#34; name=&#34;__codelineno-0-34&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-35&#34; name=&#34;__codelineno-0-35&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-36&#34; name=&#34;__codelineno-0-36&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;h4 id=&#34;peekvalueåŠŸèƒ½ä»‹ç»&#34;&gt;PeekValueåŠŸèƒ½ä»‹ç»&lt;a class=&#34;headerlink&#34; href=&#34;#peekvalueåŠŸèƒ½ä»‹ç»&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;æŸ¥çœ‹å­˜åœ¨çš„å€¼ã€‚ä¾‹å¦‚ï¼šé€šè¿‡.field_by_name(&amp;ldquo;number&amp;rdquo;)è·å–numberæˆå‘˜çš„å€¼ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Rust&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-21&#34;&gt;21&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-22&#34;&gt;22&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-23&#34;&gt;23&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-24&#34;&gt;24&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-25&#34;&gt;25&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-26&#34;&gt;26&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-27&#34;&gt;27&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-28&#34;&gt;28&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-29&#34;&gt;29&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-30&#34;&gt;30&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-31&#34;&gt;31&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-32&#34;&gt;32&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-33&#34;&gt;33&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-34&#34;&gt;34&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-35&#34;&gt;35&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-1-1&#34; name=&#34;__codelineno-1-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#[derive(Facet)]&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-2&#34; name=&#34;__codelineno-1-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;TestStruct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-3&#34; name=&#34;__codelineno-1-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;number&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;i32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-4&#34; name=&#34;__codelineno-1-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-5&#34; name=&#34;__codelineno-1-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-6&#34; name=&#34;__codelineno-1-6&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-1-7&#34; name=&#34;__codelineno-1-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#[test]&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-8&#34; name=&#34;__codelineno-1-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;peek_struct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-9&#34; name=&#34;__codelineno-1-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// Create test struct instance&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-10&#34; name=&#34;__codelineno-1-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;test_struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TestStruct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-11&#34; name=&#34;__codelineno-1-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;number&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;42&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-12&#34; name=&#34;__codelineno-1-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;hello&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;to_string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-13&#34; name=&#34;__codelineno-1-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-14&#34; name=&#34;__codelineno-1-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;peek_value&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Peek&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;test_struct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-15&#34; name=&#34;__codelineno-1-15&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-1-16&#34; name=&#34;__codelineno-1-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// Convert to struct and check we can convert to PeekStruct&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-17&#34; name=&#34;__codelineno-1-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;peek_struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;peek_value&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-18&#34; name=&#34;__codelineno-1-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;into_struct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-19&#34; name=&#34;__codelineno-1-19&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;expect&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;Should be convertible to struct&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-20&#34; name=&#34;__codelineno-1-20&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-1-21&#34; name=&#34;__codelineno-1-21&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// Test field access by name&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-22&#34; name=&#34;__codelineno-1-22&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;number_field&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;peek_struct&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-23&#34; name=&#34;__codelineno-1-23&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;field_by_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;number&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-24&#34; name=&#34;__codelineno-1-24&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;expect&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;Should have a number field&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-25&#34; name=&#34;__codelineno-1-25&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;text_field&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;peek_struct&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-26&#34; name=&#34;__codelineno-1-26&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;field_by_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;text&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-27&#34; name=&#34;__codelineno-1-27&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;expect&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;Should have a text field&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-28&#34; name=&#34;__codelineno-1-28&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-1-29&#34; name=&#34;__codelineno-1-29&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// Test field values&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-30&#34; name=&#34;__codelineno-1-30&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;number_value&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;number_field&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;i32&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;unwrap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-31&#34; name=&#34;__codelineno-1-31&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;fm&#34;&gt;assert_eq!&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;number_value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;42&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-32&#34; name=&#34;__codelineno-1-32&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-1-33&#34; name=&#34;__codelineno-1-33&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;text_value&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;text_field&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;unwrap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-34&#34; name=&#34;__codelineno-1-34&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;fm&#34;&gt;assert_eq!&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;text_value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;hello&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-35&#34; name=&#34;__codelineno-1-35&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;h3 id=&#34;æ ¸å¿ƒå­˜å‚¨ç»“æ„&#34;&gt;æ ¸å¿ƒå­˜å‚¨ç»“æ„&lt;a class=&#34;headerlink&#34; href=&#34;#æ ¸å¿ƒå­˜å‚¨ç»“æ„&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;facetå­˜å‚¨çš„æ ¸å¿ƒæ•°æ®ç»“æ„ï¼Œ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;SHAPE&lt;/li&gt;
&lt;li&gt;VTABLE
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Rust&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-2-1&#34; name=&#34;__codelineno-2-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;pub&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;unsafe&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;trait&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Facet&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;facet&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;facet&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-2&#34; name=&#34;__codelineno-2-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;/// The shape of this type&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-3&#34; name=&#34;__codelineno-2-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;///&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-4&#34; name=&#34;__codelineno-2-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;/// Shape embeds all other constants of this trait.&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-5&#34; name=&#34;__codelineno-2-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SHAPE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kp&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Shape&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-6&#34; name=&#34;__codelineno-2-6&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-2-7&#34; name=&#34;__codelineno-2-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;/// Function pointers to perform various operations: print the full type&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-8&#34; name=&#34;__codelineno-2-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;/// name (with generic type parameters), use the Display implementation,&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-9&#34; name=&#34;__codelineno-2-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;/// the Debug implementation, build a default value, clone, etc.&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-10&#34; name=&#34;__codelineno-2-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;///&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-11&#34; name=&#34;__codelineno-2-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;/// If [`Self::SHAPE`] has `ShapeLayout::Unsized`, then the parent pointer needs to be passed.&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-12&#34; name=&#34;__codelineno-2-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;///&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-13&#34; name=&#34;__codelineno-2-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;/// There are more specific vtables in variants of [`Def`]&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-14&#34; name=&#34;__codelineno-2-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;VTABLE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kp&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ValueVTable&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-15&#34; name=&#34;__codelineno-2-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸ºcoreã€allocã€stdç­‰æ¨¡å—ä¸­çš„æ•°æ®ç»“æ„éƒ½å®ç°äº†Facet traitã€‚ä»¥å®ç°åå°„çš„ä¸¤å¤§åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;h3 id=&#34;stringç±»å‹å¦‚ä½•å®ç°trait&#34;&gt;Stringç±»å‹å¦‚ä½•å®ç°trait&lt;a class=&#34;headerlink&#34; href=&#34;#stringç±»å‹å¦‚ä½•å®ç°trait&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;çœ‹ä¸ªæœ€ç®€å•çš„ç±»å‹ï¼Œä»allocæ¨¡å—ä¸­å¼•å…¥çš„Stringç±»å‹ã€‚å¯¹æ¯ä¸ªç±»å‹ä¸ºäº†å®ç°åå°„ï¼Œéƒ½æœ‰ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„æè¿°æ ‡å¿—ï¼ŒStringç±»å‹å°±æ˜¯&amp;rdquo;String&amp;rdquo;ã€‚
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Rust&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-21&#34;&gt;21&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-22&#34;&gt;22&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-23&#34;&gt;23&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-24&#34;&gt;24&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-25&#34;&gt;25&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-26&#34;&gt;26&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-27&#34;&gt;27&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-28&#34;&gt;28&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-29&#34;&gt;29&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-3-1&#34; name=&#34;__codelineno-3-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#[cfg(feature = &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;alloc&amp;quot;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;)]&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-2&#34; name=&#34;__codelineno-3-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;unsafe&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;impl&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Facet&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;alloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-3&#34; name=&#34;__codelineno-3-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;VTABLE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kp&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ValueVTable&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-4&#34; name=&#34;__codelineno-3-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;mut&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vtable&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value_vtable&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;alloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_opts&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;fm&#34;&gt;write!&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-5&#34; name=&#34;__codelineno-3-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-6&#34; name=&#34;__codelineno-3-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;{}&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-7&#34; name=&#34;__codelineno-3-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;Self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SHAPE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;type_identifier&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-8&#34; name=&#34;__codelineno-3-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-9&#34; name=&#34;__codelineno-3-9&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-3-10&#34; name=&#34;__codelineno-3-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vtable_sized&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vtable&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sized_mut&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;unwrap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-11&#34; name=&#34;__codelineno-3-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// å¦‚ä½•è§£æStringç±»å‹&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-12&#34; name=&#34;__codelineno-3-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vtable_sized&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;parse&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;||&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-13&#34; name=&#34;__codelineno-3-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Some&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-14&#34; name=&#34;__codelineno-3-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// For String, parsing from a string is just copying the string&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-15&#34; name=&#34;__codelineno-3-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Ok&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;unsafe&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;put&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;to_string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-16&#34; name=&#34;__codelineno-3-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-17&#34; name=&#34;__codelineno-3-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-18&#34; name=&#34;__codelineno-3-18&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-3-19&#34; name=&#34;__codelineno-3-19&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vtable&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-20&#34; name=&#34;__codelineno-3-20&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-21&#34; name=&#34;__codelineno-3-21&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-3-22&#34; name=&#34;__codelineno-3-22&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SHAPE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kp&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Shape&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-23&#34; name=&#34;__codelineno-3-23&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Shape&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;builder_for_sized&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;Self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-24&#34; name=&#34;__codelineno-3-24&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;def&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Def&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Scalar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-25&#34; name=&#34;__codelineno-3-25&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;type_identifier&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;String&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-26&#34; name=&#34;__codelineno-3-26&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ty&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;User&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;UserType&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Opaque&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-27&#34; name=&#34;__codelineno-3-27&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;build&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-28&#34; name=&#34;__codelineno-3-28&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-29&#34; name=&#34;__codelineno-3-29&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/p&gt;
&lt;h3 id=&#34;vtableå¦‚ä½•å®ç°&#34;&gt;VTABLEå¦‚ä½•å®ç°&lt;a class=&#34;headerlink&#34; href=&#34;#vtableå¦‚ä½•å®ç°&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;é€šè¿‡ValueVTableBuilderç»‘å®šäº†å‡½æ•°æŒ‡é’ˆï¼Œé€šè¿‡Spezç»Ÿä¸€è°ƒç”¨åˆ°å¯¹åº”çš„å‡½æ•°ã€‚
impl! crate
å¯ä»¥åˆ¤æ–­æŸä¸ªç±»å‹æ˜¯å¦å®ç°äº†æŸä¸ª traitï¼Œ&lt;a href=&#34;https://docs.rs/impls/latest/impls/&#34;&gt;impls crate&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Rust&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-21&#34;&gt;21&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-4-1&#34; name=&#34;__codelineno-4-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#[macro_export]&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-2&#34; name=&#34;__codelineno-4-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;fm&#34;&gt;macro_rules!&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value_vtable&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-3&#34; name=&#34;__codelineno-4-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;$type_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ty&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;$type_name_fn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;expr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-4&#34; name=&#34;__codelineno-4-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-5&#34; name=&#34;__codelineno-4-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;$crate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ValueVTable&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;builder&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;$type_name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-6&#34; name=&#34;__codelineno-4-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;type_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;$type_name_fn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-7&#34; name=&#34;__codelineno-4-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;display&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;||&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-8&#34; name=&#34;__codelineno-4-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;$crate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;spez&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;impls&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;$type_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;core&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Display&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-9&#34; name=&#34;__codelineno-4-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                        &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Some&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-10&#34; name=&#34;__codelineno-4-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                            &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;use&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;$crate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;spez&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-11&#34; name=&#34;__codelineno-4-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                            &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Spez&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)).&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;spez_display&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-12&#34; name=&#34;__codelineno-4-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-13&#34; name=&#34;__codelineno-4-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-14&#34; name=&#34;__codelineno-4-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                        &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;None&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-15&#34; name=&#34;__codelineno-4-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-16&#34; name=&#34;__codelineno-4-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-17&#34; name=&#34;__codelineno-4-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// ...&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-18&#34; name=&#34;__codelineno-4-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;build&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-19&#34; name=&#34;__codelineno-4-19&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-20&#34; name=&#34;__codelineno-4-20&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-21&#34; name=&#34;__codelineno-4-21&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;specæ¨¡å—å®ç°äº†â€œè‡ªåŠ¨è§£å¼•ç”¨ç‰¹åŒ–è¾…åŠ©å·¥å…·â€æŒ‡çš„æ˜¯é€šè¿‡è‡ªåŠ¨è§£å¼•ç”¨ï¼ˆauto-derefï¼‰æŠ€æœ¯ï¼Œå®ç°ç±»ä¼¼äºspecializationçš„åŠŸèƒ½ã€‚
ç®€è€Œè¨€ä¹‹ï¼Œæœ¬æ¨¡å—è®©ä½ å¯ä»¥æ ¹æ®ç±»å‹å®ç°çš„ trait è‡ªåŠ¨é€‰æ‹©æ›´åˆé€‚çš„å®ç°ï¼Œä¸”ä¸éœ€è¦ç”¨åˆ° Rust è¿˜æœªç¨³å®šçš„specialization featureåŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/dtolnay/case-studies/blob/master/autoref-specialization/README.md&#34;&gt;rustè‡ªåŠ¨å¼•ç”¨ç‰¹åŒ–å‚è€ƒ&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œä¸€ä¸ªç±»å‹å®ç°äº† &lt;code&gt;Default&lt;/code&gt; traitï¼Œé‚£ä¹ˆ &lt;code&gt;spez_default_in_place&lt;/code&gt; æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªæŒ‡å‘é»˜è®¤å€¼çš„æŒ‡é’ˆã€‚å°†é»˜è®¤å€¼å†™å…¥åˆ°æŒ‡å®šçš„å†…å­˜ä½ç½®ï¼Œä¹Ÿå°±æ˜¯PtrUninitã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Rust&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-21&#34;&gt;21&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-22&#34;&gt;22&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-23&#34;&gt;23&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-24&#34;&gt;24&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-25&#34;&gt;25&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-26&#34;&gt;26&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-27&#34;&gt;27&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-28&#34;&gt;28&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-29&#34;&gt;29&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-30&#34;&gt;30&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-31&#34;&gt;31&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-32&#34;&gt;32&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-33&#34;&gt;33&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-34&#34;&gt;34&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-35&#34;&gt;35&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-36&#34;&gt;36&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-37&#34;&gt;37&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-38&#34;&gt;38&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-39&#34;&gt;39&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-40&#34;&gt;40&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-41&#34;&gt;41&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-5-1&#34; name=&#34;__codelineno-5-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;//////////////////////////////////////////////////////////////////////////////////////&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-2&#34; name=&#34;__codelineno-5-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// Default (in place, because we can&amp;#39;t have sized) ğŸ ğŸ”„&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-3&#34; name=&#34;__codelineno-5-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;//////////////////////////////////////////////////////////////////////////////////////&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-4&#34; name=&#34;__codelineno-5-4&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-5-5&#34; name=&#34;__codelineno-5-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;sd&#34;&gt;/// Specialization proxy for [`core::default::Default`]&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-6&#34; name=&#34;__codelineno-5-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;pub&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;trait&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SpezDefaultInPlaceYes&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-7&#34; name=&#34;__codelineno-5-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;/// Creates a default value for the inner type in place.&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-8&#34; name=&#34;__codelineno-5-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;///&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-9&#34; name=&#34;__codelineno-5-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;/// This method is called when the wrapped type implements `Default`.&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-10&#34; name=&#34;__codelineno-5-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;/// It writes the default value into the provided uninitialized memory.&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-11&#34; name=&#34;__codelineno-5-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;///&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-12&#34; name=&#34;__codelineno-5-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;/// # Safety&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-13&#34; name=&#34;__codelineno-5-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;///&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-14&#34; name=&#34;__codelineno-5-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;/// This function operates on uninitialized memory and requires that `target`&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-15&#34; name=&#34;__codelineno-5-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;/// has sufficient space allocated for type `T`.&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-16&#34; name=&#34;__codelineno-5-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;unsafe&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;spez_default_in_place&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;mem&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;PtrUninit&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;mem&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;PtrMut&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;mem&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-17&#34; name=&#34;__codelineno-5-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-18&#34; name=&#34;__codelineno-5-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;impl&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Default&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SpezDefaultInPlaceYes&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SpezEmpty&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-19&#34; name=&#34;__codelineno-5-19&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;unsafe&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;spez_default_in_place&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;mem&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;PtrUninit&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;mem&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;PtrMut&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;mem&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-20&#34; name=&#34;__codelineno-5-20&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;unsafe&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;put&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;as&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Default&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-21&#34; name=&#34;__codelineno-5-21&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-22&#34; name=&#34;__codelineno-5-22&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-23&#34; name=&#34;__codelineno-5-23&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-5-24&#34; name=&#34;__codelineno-5-24&#34;&gt;&lt;/a&gt;&lt;span class=&#34;sd&#34;&gt;/// Specialization proxy for [`core::default::Default`]&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-25&#34; name=&#34;__codelineno-5-25&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;pub&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;trait&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SpezDefaultInPlaceNo&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-26&#34; name=&#34;__codelineno-5-26&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;/// Fallback implementation when the type doesn&amp;#39;t implement `Default`.&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-27&#34; name=&#34;__codelineno-5-27&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;///&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-28&#34; name=&#34;__codelineno-5-28&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;/// This method is used as a fallback and is designed to be unreachable in practice.&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-29&#34; name=&#34;__codelineno-5-29&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;/// It&amp;#39;s only selected when the wrapped type doesn&amp;#39;t implement `Default`.&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-30&#34; name=&#34;__codelineno-5-30&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;///&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-31&#34; name=&#34;__codelineno-5-31&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;/// # Safety&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-32&#34; name=&#34;__codelineno-5-32&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;///&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-33&#34; name=&#34;__codelineno-5-33&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;/// This function is marked unsafe as it deals with uninitialized memory,&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-34&#34; name=&#34;__codelineno-5-34&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;/// but it should never be reachable in practice.&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-35&#34; name=&#34;__codelineno-5-35&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;unsafe&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;spez_default_in_place&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;mem&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;PtrUninit&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;mem&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;PtrMut&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;mem&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-36&#34; name=&#34;__codelineno-5-36&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-37&#34; name=&#34;__codelineno-5-37&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;impl&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SpezDefaultInPlaceNo&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SpezEmpty&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-38&#34; name=&#34;__codelineno-5-38&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;unsafe&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;spez_default_in_place&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;mem&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;PtrUninit&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;mem&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;PtrMut&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;mem&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-39&#34; name=&#34;__codelineno-5-39&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;fm&#34;&gt;unreachable!&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-40&#34; name=&#34;__codelineno-5-40&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-41&#34; name=&#34;__codelineno-5-41&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;ValueVTableBuilderæ˜¯ValueVTableç±»å‹çš„æ„å»ºå™¨ã€‚
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Rust&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-5&#34;&gt;5&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-6-1&#34; name=&#34;__codelineno-6-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;pub&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ValueVTableBuilder&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-2&#34; name=&#34;__codelineno-6-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;type_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Option&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TypeNameFn&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-3&#34; name=&#34;__codelineno-6-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;display&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Option&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;DisplayFn&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-4&#34; name=&#34;__codelineno-6-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// ...&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-5&#34; name=&#34;__codelineno-6-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
displayå‡½æ•°å®ç°å°±æ˜¯é€šè¿‡transmuteè¿›è¡Œç±»å‹è½¬æ¢ï¼Œä»DisplayFnTypedç±»å‹è½¬æ¢ä¸ºDisplayFnã€‚&lt;/p&gt;
&lt;p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Rust&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-5&#34;&gt;5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-6&#34;&gt;6&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-7-1&#34; name=&#34;__codelineno-7-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;pub&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;display&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;mut&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;display&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Option&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;DisplayFnTyped&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Self&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-2&#34; name=&#34;__codelineno-7-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;display&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;unsafe&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-3&#34; name=&#34;__codelineno-7-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mem&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;transmute&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Option&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;DisplayFnTyped&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Option&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;DisplayFn&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;display&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-4&#34; name=&#34;__codelineno-7-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-5&#34; name=&#34;__codelineno-7-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-6&#34; name=&#34;__codelineno-7-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Rust&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-8-1&#34; name=&#34;__codelineno-8-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;sd&#34;&gt;/// Function to format a value for display&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-2&#34; name=&#34;__codelineno-8-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;sd&#34;&gt;///&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-3&#34; name=&#34;__codelineno-8-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;sd&#34;&gt;/// If both [`DisplayFn`] and [`ParseFn`] are set, we should be able to round-trip the value.&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-4&#34; name=&#34;__codelineno-8-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;sd&#34;&gt;///&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-5&#34; name=&#34;__codelineno-8-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;sd&#34;&gt;/// # Safety&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-6&#34; name=&#34;__codelineno-8-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;sd&#34;&gt;///&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-7&#34; name=&#34;__codelineno-8-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;sd&#34;&gt;/// The `value` parameter must point to aligned, initialized memory of the correct type.&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-8&#34; name=&#34;__codelineno-8-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;pub&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;DisplayFn&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-9&#34; name=&#34;__codelineno-8-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;mem&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;unsafe&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;PtrConst&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;mem&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kp&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;mut&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;core&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Formatter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;core&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-10&#34; name=&#34;__codelineno-8-10&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-8-11&#34; name=&#34;__codelineno-8-11&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-8-12&#34; name=&#34;__codelineno-8-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;sd&#34;&gt;/// Function to format a value for display&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-13&#34; name=&#34;__codelineno-8-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;sd&#34;&gt;///&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-14&#34; name=&#34;__codelineno-8-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;sd&#34;&gt;/// If both [`DisplayFn`] and [`ParseFn`] are set, we should be able to round-trip the value.&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-15&#34; name=&#34;__codelineno-8-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;pub&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;DisplayFnTyped&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kp&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kp&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;mut&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;core&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Formatter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;core&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;****&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/p&gt;
&lt;h3 id=&#34;shapeå¦‚ä½•å®ç°&#34;&gt;SHAPEå¦‚ä½•å®ç°&lt;a class=&#34;headerlink&#34; href=&#34;#shapeå¦‚ä½•å®ç°&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Rust&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-5&#34;&gt;5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-6&#34;&gt;6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-7&#34;&gt;7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-8&#34;&gt;8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-9&#34;&gt;9&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-9-1&#34; name=&#34;__codelineno-9-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;impl&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Shape&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-2&#34; name=&#34;__codelineno-9-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;/// Returns a builder for a shape for some type `T`.&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-3&#34; name=&#34;__codelineno-9-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;pub&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;builder_for_sized&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Facet&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ShapeBuilder&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-4&#34; name=&#34;__codelineno-9-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ShapeBuilder&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;VTABLE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-5&#34; name=&#34;__codelineno-9-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;layout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Layout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-6&#34; name=&#34;__codelineno-9-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ConstTypeId&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;of&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-7&#34; name=&#34;__codelineno-9-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-8&#34; name=&#34;__codelineno-9-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// ....&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-9&#34; name=&#34;__codelineno-9-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Rust&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-10-1&#34; name=&#34;__codelineno-10-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;sd&#34;&gt;/// Builder for [`Shape`]&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-2&#34; name=&#34;__codelineno-10-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;pub&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ShapeBuilder&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-3&#34; name=&#34;__codelineno-10-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Option&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ConstTypeId&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-4&#34; name=&#34;__codelineno-10-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;layout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Option&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ShapeLayout&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// è®°å½•äº†layoutä¿¡æ¯&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-5&#34; name=&#34;__codelineno-10-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vtable&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kp&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ValueVTable&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// è®°å½•äº†vtableä¿¡æ¯ï¼Œå°±æ˜¯ä¸Šé¢çš„value_vtableï¼Œå­˜å‚¨äº†å‡½æ•°æŒ‡é’ˆ&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-6&#34; name=&#34;__codelineno-10-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;def&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Def&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-7&#34; name=&#34;__codelineno-10-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ty&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Option&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-8&#34; name=&#34;__codelineno-10-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;type_identifier&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Option&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;amp;&amp;#39;&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-9&#34; name=&#34;__codelineno-10-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;type_params&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kp&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TypeParam&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-10&#34; name=&#34;__codelineno-10-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;doc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kp&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;#39;&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-11&#34; name=&#34;__codelineno-10-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;attributes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kp&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ShapeAttribute&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-12&#34; name=&#34;__codelineno-10-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;type_tag&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Option&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;amp;&amp;#39;&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-13&#34; name=&#34;__codelineno-10-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;inner&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Option&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kp&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Shape&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-14&#34; name=&#34;__codelineno-10-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;layoutæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå®é™…ä¸Šå°±æ˜¯å­˜å‚¨çš„core::alloc::Layoutï¼Œè®°å½•äº†Sizeã€Alignç­‰ä¿¡æ¯ã€‚å¯ä»¥åˆ†é…ä¸€æ®µè¯¥ç±»å‹çš„æœªåˆå§‹åŒ–å†…å­˜ï¼Œç„¶åå°±å¯ä»¥ååºåˆ—åŒ–æ—¶å°†å†…å­˜å†™å…¥åˆ°æŒ‡å®šçš„å†…å­˜ä¸­ï¼Œå°±æ„é€ å‡ºäº†typeçš„å®ä¾‹ã€‚
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Rust&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-11-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-11-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-11-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-11-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-11-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-11-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-11-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-11-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-11-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-11-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-11-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-11-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-11-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-11-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-11-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-11-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-11-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-11-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-11-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-11-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-11-21&#34;&gt;21&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-11-22&#34;&gt;22&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-11-23&#34;&gt;23&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-11-24&#34;&gt;24&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-11-25&#34;&gt;25&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-11-26&#34;&gt;26&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-11-27&#34;&gt;27&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-11-28&#34;&gt;28&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-11-29&#34;&gt;29&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-11-30&#34;&gt;30&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-11-31&#34;&gt;31&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-11-32&#34;&gt;32&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-11-1&#34; name=&#34;__codelineno-11-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;use&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;core&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;alloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Layout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-11-2&#34; name=&#34;__codelineno-11-2&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-11-3&#34; name=&#34;__codelineno-11-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;sd&#34;&gt;/// Schema for reflection of a type&lt;/span&gt;
&lt;a id=&#34;__codelineno-11-4&#34; name=&#34;__codelineno-11-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#[derive(Clone, Copy)]&lt;/span&gt;
&lt;a id=&#34;__codelineno-11-5&#34; name=&#34;__codelineno-11-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#[repr(C)]&lt;/span&gt;
&lt;a id=&#34;__codelineno-11-6&#34; name=&#34;__codelineno-11-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;pub&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Shape&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-11-7&#34; name=&#34;__codelineno-11-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;/// Unique type identifier, provided by the compiler.&lt;/span&gt;
&lt;a id=&#34;__codelineno-11-8&#34; name=&#34;__codelineno-11-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;pub&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ConstTypeId&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-11-9&#34; name=&#34;__codelineno-11-9&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-11-10&#34; name=&#34;__codelineno-11-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;/// Size, alignment â€” enough to allocate a value of this type&lt;/span&gt;
&lt;a id=&#34;__codelineno-11-11&#34; name=&#34;__codelineno-11-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;/// (but not initialize it.)&lt;/span&gt;
&lt;a id=&#34;__codelineno-11-12&#34; name=&#34;__codelineno-11-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;pub&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;layout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ShapeLayout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-11-13&#34; name=&#34;__codelineno-11-13&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-11-14&#34; name=&#34;__codelineno-11-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;/// Function pointers to perform various operations: print the full type&lt;/span&gt;
&lt;a id=&#34;__codelineno-11-15&#34; name=&#34;__codelineno-11-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;/// name (with generic type parameters), use the Display implementation,&lt;/span&gt;
&lt;a id=&#34;__codelineno-11-16&#34; name=&#34;__codelineno-11-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;/// the Debug implementation, build a default value, clone, etc.&lt;/span&gt;
&lt;a id=&#34;__codelineno-11-17&#34; name=&#34;__codelineno-11-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;///&lt;/span&gt;
&lt;a id=&#34;__codelineno-11-18&#34; name=&#34;__codelineno-11-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;/// If the shape has `ShapeLayout::Unsized`, then the parent pointer needs to be passed.&lt;/span&gt;
&lt;a id=&#34;__codelineno-11-19&#34; name=&#34;__codelineno-11-19&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;///&lt;/span&gt;
&lt;a id=&#34;__codelineno-11-20&#34; name=&#34;__codelineno-11-20&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;/// There are more specific vtables in variants of [`Def`]&lt;/span&gt;
&lt;a id=&#34;__codelineno-11-21&#34; name=&#34;__codelineno-11-21&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;pub&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vtable&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kp&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ValueVTable&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-11-22&#34; name=&#34;__codelineno-11-22&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// ...&lt;/span&gt;
&lt;a id=&#34;__codelineno-11-23&#34; name=&#34;__codelineno-11-23&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-11-24&#34; name=&#34;__codelineno-11-24&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-11-25&#34; name=&#34;__codelineno-11-25&#34;&gt;&lt;/a&gt;&lt;span class=&#34;sd&#34;&gt;/// Layout of the shape&lt;/span&gt;
&lt;a id=&#34;__codelineno-11-26&#34; name=&#34;__codelineno-11-26&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#[derive(Clone, Copy, Debug, Hash)]&lt;/span&gt;
&lt;a id=&#34;__codelineno-11-27&#34; name=&#34;__codelineno-11-27&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;pub&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;enum&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ShapeLayout&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-11-28&#34; name=&#34;__codelineno-11-28&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;/// `Sized` type&lt;/span&gt;
&lt;a id=&#34;__codelineno-11-29&#34; name=&#34;__codelineno-11-29&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Sized&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Layout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;
&lt;a id=&#34;__codelineno-11-30&#34; name=&#34;__codelineno-11-30&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;/// `!Sized` type&lt;/span&gt;
&lt;a id=&#34;__codelineno-11-31&#34; name=&#34;__codelineno-11-31&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Unsized&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-11-32&#34; name=&#34;__codelineno-11-32&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/p&gt;
&lt;h4 id=&#34;å¦‚ä½•åœ¨å †ä¸Šåˆ†é…ä¸€æ®µæœªåˆå§‹åŒ–å†…å­˜&#34;&gt;å¦‚ä½•åœ¨å †ä¸Šåˆ†é…ä¸€æ®µæœªåˆå§‹åŒ–å†…å­˜ï¼Ÿ&lt;a class=&#34;headerlink&#34; href=&#34;#å¦‚ä½•åœ¨å †ä¸Šåˆ†é…ä¸€æ®µæœªåˆå§‹åŒ–å†…å­˜&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Rust&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-21&#34;&gt;21&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-22&#34;&gt;22&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-23&#34;&gt;23&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-24&#34;&gt;24&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-25&#34;&gt;25&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-26&#34;&gt;26&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-27&#34;&gt;27&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-28&#34;&gt;28&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-29&#34;&gt;29&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-30&#34;&gt;30&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-31&#34;&gt;31&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-32&#34;&gt;32&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-33&#34;&gt;33&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-34&#34;&gt;34&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-35&#34;&gt;35&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-12-1&#34; name=&#34;__codelineno-12-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// facet/facet-core/src/types/mod.rs&lt;/span&gt;
&lt;a id=&#34;__codelineno-12-2&#34; name=&#34;__codelineno-12-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;impl&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Shape&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-12-3&#34; name=&#34;__codelineno-12-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;/// Heap-allocate a value of this shape&lt;/span&gt;
&lt;a id=&#34;__codelineno-12-4&#34; name=&#34;__codelineno-12-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;#[cfg(feature = &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;alloc&amp;quot;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;)]&lt;/span&gt;
&lt;a id=&#34;__codelineno-12-5&#34; name=&#34;__codelineno-12-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;#[inline]&lt;/span&gt;
&lt;a id=&#34;__codelineno-12-6&#34; name=&#34;__codelineno-12-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;pub&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;allocate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;crate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PtrUninit&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;UnsizedError&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-12-7&#34; name=&#34;__codelineno-12-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;layout&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;layout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sized_layout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;?&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-12-8&#34; name=&#34;__codelineno-12-8&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-12-9&#34; name=&#34;__codelineno-12-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Ok&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;crate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PtrUninit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;layout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-12-10&#34; name=&#34;__codelineno-12-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;core&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;without_provenance_mut&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;layout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;align&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;
&lt;a id=&#34;__codelineno-12-11&#34; name=&#34;__codelineno-12-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-12-12&#34; name=&#34;__codelineno-12-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// SAFETY: We have checked that layout&amp;#39;s size is non-zero&lt;/span&gt;
&lt;a id=&#34;__codelineno-12-13&#34; name=&#34;__codelineno-12-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;unsafe&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;alloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;alloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;alloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;layout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-12-14&#34; name=&#34;__codelineno-12-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}))&lt;/span&gt;
&lt;a id=&#34;__codelineno-12-15&#34; name=&#34;__codelineno-12-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-12-16&#34; name=&#34;__codelineno-12-16&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-12-17&#34; name=&#34;__codelineno-12-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;/// Deallocate a heap-allocated value of this shape&lt;/span&gt;
&lt;a id=&#34;__codelineno-12-18&#34; name=&#34;__codelineno-12-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;#[cfg(feature = &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;alloc&amp;quot;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;)]&lt;/span&gt;
&lt;a id=&#34;__codelineno-12-19&#34; name=&#34;__codelineno-12-19&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;#[inline]&lt;/span&gt;
&lt;a id=&#34;__codelineno-12-20&#34; name=&#34;__codelineno-12-20&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;pub&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;unsafe&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;deallocate_mut&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;PtrMut&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;UnsizedError&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-12-21&#34; name=&#34;__codelineno-12-21&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;use&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;alloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;alloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dealloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-12-22&#34; name=&#34;__codelineno-12-22&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-12-23&#34; name=&#34;__codelineno-12-23&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;layout&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;layout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sized_layout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;?&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-12-24&#34; name=&#34;__codelineno-12-24&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-12-25&#34; name=&#34;__codelineno-12-25&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;layout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-12-26&#34; name=&#34;__codelineno-12-26&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// Nothing to deallocate&lt;/span&gt;
&lt;a id=&#34;__codelineno-12-27&#34; name=&#34;__codelineno-12-27&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Ok&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(());&lt;/span&gt;
&lt;a id=&#34;__codelineno-12-28&#34; name=&#34;__codelineno-12-28&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-12-29&#34; name=&#34;__codelineno-12-29&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// SAFETY: The user guarantees ptr is valid and from allocate, we checked size isn&amp;#39;t 0&lt;/span&gt;
&lt;a id=&#34;__codelineno-12-30&#34; name=&#34;__codelineno-12-30&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;unsafe&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dealloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;as_mut_byte_ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;layout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-12-31&#34; name=&#34;__codelineno-12-31&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-12-32&#34; name=&#34;__codelineno-12-32&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Ok&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(())&lt;/span&gt;
&lt;a id=&#34;__codelineno-12-33&#34; name=&#34;__codelineno-12-33&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-12-34&#34; name=&#34;__codelineno-12-34&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// ...&lt;/span&gt;
&lt;a id=&#34;__codelineno-12-35&#34; name=&#34;__codelineno-12-35&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;ä»€ä¹ˆæ—¶å€™ä¼šç”¨åˆ°æ ¹æ®layoutåˆ†é…å†…å­˜å‘¢ï¼Ÿåœ¨facet reflectçš„PartialåŠŸèƒ½ä¸­ã€‚è¿˜è®°å¾—æœ€å‰é¢çš„Partialå°±æ˜¯è°ƒç”¨äº†allocå‡½æ•°åˆ†é…Outerç±»å‹çš„å†…å­˜å—ï¼Ÿ
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Rust&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-21&#34;&gt;21&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-22&#34;&gt;22&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-23&#34;&gt;23&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-24&#34;&gt;24&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-25&#34;&gt;25&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-26&#34;&gt;26&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-27&#34;&gt;27&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-13-1&#34; name=&#34;__codelineno-13-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;impl&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;facet&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Partial&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;facet&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-13-2&#34; name=&#34;__codelineno-13-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;/// Allocates a new Partial instance with the given shape&lt;/span&gt;
&lt;a id=&#34;__codelineno-13-3&#34; name=&#34;__codelineno-13-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;pub&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;alloc_shape&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shape&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kp&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Shape&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;Self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ReflectError&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-13-4&#34; name=&#34;__codelineno-13-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;crate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;trace&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;a id=&#34;__codelineno-13-5&#34; name=&#34;__codelineno-13-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;alloc_shape({:?}), with layout {:?}&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-13-6&#34; name=&#34;__codelineno-13-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shape&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-13-7&#34; name=&#34;__codelineno-13-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shape&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;layout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sized_layout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;a id=&#34;__codelineno-13-8&#34; name=&#34;__codelineno-13-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-13-9&#34; name=&#34;__codelineno-13-9&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-13-10&#34; name=&#34;__codelineno-13-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shape&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;allocate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;map_err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ReflectError&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Unsized&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-13-11&#34; name=&#34;__codelineno-13-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shape&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-13-12&#34; name=&#34;__codelineno-13-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;operation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;alloc_shape&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-13-13&#34; name=&#34;__codelineno-13-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;?&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-13-14&#34; name=&#34;__codelineno-13-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// ....&lt;/span&gt;
&lt;a id=&#34;__codelineno-13-15&#34; name=&#34;__codelineno-13-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-13-16&#34; name=&#34;__codelineno-13-16&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-13-17&#34; name=&#34;__codelineno-13-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;/// Allocates a new TypedPartial instance with the given shape and type&lt;/span&gt;
&lt;a id=&#34;__codelineno-13-18&#34; name=&#34;__codelineno-13-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;pub&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;alloc&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TypedPartial&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;facet&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ReflectError&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;a id=&#34;__codelineno-13-19&#34; name=&#34;__codelineno-13-19&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;where&lt;/span&gt;
&lt;a id=&#34;__codelineno-13-20&#34; name=&#34;__codelineno-13-20&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Facet&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;facet&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-13-21&#34; name=&#34;__codelineno-13-21&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-13-22&#34; name=&#34;__codelineno-13-22&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Ok&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TypedPartial&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-13-23&#34; name=&#34;__codelineno-13-23&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;inner&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;alloc_shape&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SHAPE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;?&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-13-24&#34; name=&#34;__codelineno-13-24&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;phantom&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;PhantomData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-13-25&#34; name=&#34;__codelineno-13-25&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;
&lt;a id=&#34;__codelineno-13-26&#34; name=&#34;__codelineno-13-26&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-13-27&#34; name=&#34;__codelineno-13-27&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/p&gt;
&lt;h3 id=&#34;partialçš„å®ç°åŸç†&#34;&gt;Partialçš„å®ç°åŸç†&lt;a class=&#34;headerlink&#34; href=&#34;#partialçš„å®ç°åŸç†&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Partialé€šè¿‡ä¸€ä¸ªVec&amp;lt;Frame&amp;gt;æ¥ä¿å­˜æ“ä½œçš„å…ƒç´ ã€‚ä»¥Partialæ„é€ ä¸€ä¸ªStructä¸ºä¾‹ã€‚å½“å‰æ“ä½œname fieldï¼Œé‚£ä¹ˆVecä¿å­˜çš„æœ€åä¸€å¸§å°±æ˜¯è®°å½•çš„name fileldçš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬shapeã€æ•°æ®æŒ‡é’ˆã€çŠ¶æ€Trackerç­‰ã€‚
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Rust&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-14-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-14-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-14-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-14-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-14-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-14-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-14-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-14-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-14-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-14-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-14-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-14-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-14-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-14-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-14-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-14-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-14-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-14-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-14-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-14-1&#34; name=&#34;__codelineno-14-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;pub&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Partial&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;facet&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-14-2&#34; name=&#34;__codelineno-14-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;/// stack of frames to keep track of deeply nested initialization&lt;/span&gt;
&lt;a id=&#34;__codelineno-14-3&#34; name=&#34;__codelineno-14-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;frames&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Vec&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Frame&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-14-4&#34; name=&#34;__codelineno-14-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// ...&lt;/span&gt;
&lt;a id=&#34;__codelineno-14-5&#34; name=&#34;__codelineno-14-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-14-6&#34; name=&#34;__codelineno-14-6&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-14-7&#34; name=&#34;__codelineno-14-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Frame&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-14-8&#34; name=&#34;__codelineno-14-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;/// Address of the value being initialized&lt;/span&gt;
&lt;a id=&#34;__codelineno-14-9&#34; name=&#34;__codelineno-14-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;PtrUninit&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-14-10&#34; name=&#34;__codelineno-14-10&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-14-11&#34; name=&#34;__codelineno-14-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;/// Shape of the value being initialized&lt;/span&gt;
&lt;a id=&#34;__codelineno-14-12&#34; name=&#34;__codelineno-14-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shape&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kp&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Shape&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-14-13&#34; name=&#34;__codelineno-14-13&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-14-14&#34; name=&#34;__codelineno-14-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;/// Tracks initialized fields&lt;/span&gt;
&lt;a id=&#34;__codelineno-14-15&#34; name=&#34;__codelineno-14-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tracker&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Tracker&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-14-16&#34; name=&#34;__codelineno-14-16&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-14-17&#34; name=&#34;__codelineno-14-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;/// Whether this frame owns the allocation or is just a field pointer&lt;/span&gt;
&lt;a id=&#34;__codelineno-14-18&#34; name=&#34;__codelineno-14-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ownership&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;FrameOwnership&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-14-19&#34; name=&#34;__codelineno-14-19&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
ä»å‰é¢çš„ä¾‹å­çœ‹
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Rust&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-15-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-15-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-15-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-15-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-15-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-15-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-15-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-15-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-15-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-15-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-15-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-15-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-15-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-15-1&#34; name=&#34;__codelineno-15-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#[derive(Facet, PartialEq, Eq, Debug)]&lt;/span&gt;
&lt;a id=&#34;__codelineno-15-2&#34; name=&#34;__codelineno-15-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Outer&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-15-3&#34; name=&#34;__codelineno-15-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-15-4&#34; name=&#34;__codelineno-15-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-15-5&#34; name=&#34;__codelineno-15-5&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-15-6&#34; name=&#34;__codelineno-15-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#[test]&lt;/span&gt;
&lt;a id=&#34;__codelineno-15-7&#34; name=&#34;__codelineno-15-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;wip_struct_testleak1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-15-8&#34; name=&#34;__codelineno-15-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Partial&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;alloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Outer&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;a id=&#34;__codelineno-15-9&#34; name=&#34;__codelineno-15-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;begin_field&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-15-10&#34; name=&#34;__codelineno-15-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;Hello, world!&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;a id=&#34;__codelineno-15-11&#34; name=&#34;__codelineno-15-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;end&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;a id=&#34;__codelineno-15-12&#34; name=&#34;__codelineno-15-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// ......&lt;/span&gt;
&lt;a id=&#34;__codelineno-15-13&#34; name=&#34;__codelineno-15-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/p&gt;
&lt;p&gt;é¦–å…ˆ,allocåˆ†é…Outerç±»å‹æˆ‘ä»¬å·²ç»ä»‹ç»æ¸…æ¥šäº†ã€‚ä»begin_fieldè¯´èµ·ã€‚
æ ¹æ®field_name, ä¾‹å¦‚Outer ç»“æ„ä½“çš„nameå­—æ®µï¼Œå…ˆè·å–Structçš„struct_type.fieldsï¼Œç„¶åè·å–åˆ°ä¸€ä¸ªindexã€‚å°±å¯ä»¥æ ¹æ®indexå»è·å–è¿™ä¸ªfieldçš„ä¿¡æ¯äº†ã€‚æˆ‘ä»¬çš„ç›®çš„æ˜¯è·å–fieldçš„Shapeå’Œæœªåˆå§‹åŒ–æŒ‡é’ˆï¼Œåç»­å°±å¯ä»¥é€šè¿‡setå‡½æ•°è®¾ç½®è¯¥å­—æ®µçš„å€¼ã€‚&lt;/p&gt;
&lt;p&gt;self.frames.last_mut()å°±æ˜¯è·å–å½“å‰æ ˆå¸§ã€‚å½“å‰æ“ä½œçš„æ˜¯Structç±»å‹çš„æ ˆå¸§ã€‚
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Rust&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-16-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-16-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-16-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-16-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-16-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-16-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-16-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-16-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-16-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-16-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-16-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-16-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-16-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-16-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-16-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-16-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-16-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-16-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-16-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-16-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-16-21&#34;&gt;21&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-16-22&#34;&gt;22&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-16-1&#34; name=&#34;__codelineno-16-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// /home/ken/tmp/facet/facet-reflect/src/partial/mod.rs&lt;/span&gt;
&lt;a id=&#34;__codelineno-16-2&#34; name=&#34;__codelineno-16-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;sd&#34;&gt;/// Selects a field of a struct with a given name&lt;/span&gt;
&lt;a id=&#34;__codelineno-16-3&#34; name=&#34;__codelineno-16-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;pub&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;begin_field&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;mut&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;field_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kp&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;mut&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;Self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ReflectError&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-16-4&#34; name=&#34;__codelineno-16-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;frame&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;frames&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;last_mut&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;unwrap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;a id=&#34;__codelineno-16-5&#34; name=&#34;__codelineno-16-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;match&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;frame&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shape&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ty&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-16-6&#34; name=&#34;__codelineno-16-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;User&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;user_type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;match&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;user_type&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-16-7&#34; name=&#34;__codelineno-16-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;UserType&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Struct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;struct_type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-16-8&#34; name=&#34;__codelineno-16-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;idx&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;struct_type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fields&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;iter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;position&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;field_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-16-9&#34; name=&#34;__codelineno-16-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;idx&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;match&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;idx&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-16-10&#34; name=&#34;__codelineno-16-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                    &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Some&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;idx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;idx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-16-11&#34; name=&#34;__codelineno-16-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                    &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;None&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-16-12&#34; name=&#34;__codelineno-16-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ReflectError&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;OperationFailed&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-16-13&#34; name=&#34;__codelineno-16-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                            &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shape&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;frame&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shape&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-16-14&#34; name=&#34;__codelineno-16-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                            &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;operation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;field not found&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-16-15&#34; name=&#34;__codelineno-16-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;a id=&#34;__codelineno-16-16&#34; name=&#34;__codelineno-16-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-16-17&#34; name=&#34;__codelineno-16-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;a id=&#34;__codelineno-16-18&#34; name=&#34;__codelineno-16-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;begin_nth_field&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;idx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-16-19&#34; name=&#34;__codelineno-16-19&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-16-20&#34; name=&#34;__codelineno-16-20&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
&lt;a id=&#34;__codelineno-16-21&#34; name=&#34;__codelineno-16-21&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-16-22&#34; name=&#34;__codelineno-16-22&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/p&gt;
&lt;p&gt;è°ƒç”¨begin_nth_fieldå‡½æ•°æ—¶ï¼Œæœ€åä¸€ä¸ªFrameè¿˜æ˜¯Structçš„ä¿¡æ¯ã€‚
åœ¨æ‰¾åˆ°name feildåï¼Œå¦‚æœå·²ç»åˆå§‹åŒ–ï¼Œå°±å…ˆdropåˆå§‹åŒ–çš„æ•°æ®ï¼Œç„¶ååç»­é‡æ–°åˆå§‹åŒ–ã€‚åŒæ—¶ï¼Œæ›´æ–°æœ€åä¸€å¸§ï¼Œä¹Ÿå°±æ˜¯last_frameä¸ºå½“å‰æ“ä½œçš„Structçš„name fieldã€‚
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Rust&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-21&#34;&gt;21&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-22&#34;&gt;22&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-23&#34;&gt;23&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-24&#34;&gt;24&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-25&#34;&gt;25&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-26&#34;&gt;26&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-27&#34;&gt;27&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-28&#34;&gt;28&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-29&#34;&gt;29&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-30&#34;&gt;30&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-31&#34;&gt;31&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-32&#34;&gt;32&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-33&#34;&gt;33&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-34&#34;&gt;34&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-35&#34;&gt;35&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-36&#34;&gt;36&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-37&#34;&gt;37&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-38&#34;&gt;38&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-39&#34;&gt;39&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-40&#34;&gt;40&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-41&#34;&gt;41&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-42&#34;&gt;42&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-43&#34;&gt;43&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-44&#34;&gt;44&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-45&#34;&gt;45&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-46&#34;&gt;46&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-47&#34;&gt;47&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-48&#34;&gt;48&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-49&#34;&gt;49&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-50&#34;&gt;50&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-51&#34;&gt;51&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-52&#34;&gt;52&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-53&#34;&gt;53&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-54&#34;&gt;54&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-55&#34;&gt;55&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-17-1&#34; name=&#34;__codelineno-17-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;/// Selects the nth field of a struct by index&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-2&#34; name=&#34;__codelineno-17-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;pub&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;begin_nth_field&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;mut&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;idx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;usize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;mut&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;Self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ReflectError&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-3&#34; name=&#34;__codelineno-17-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;frame&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;frames&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;last_mut&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;unwrap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-4&#34; name=&#34;__codelineno-17-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;match&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;frame&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shape&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ty&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-5&#34; name=&#34;__codelineno-17-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;User&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;user_type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;match&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;user_type&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-6&#34; name=&#34;__codelineno-17-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;UserType&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Struct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;struct_type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-7&#34; name=&#34;__codelineno-17-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;idx&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;struct_type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fields&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-8&#34; name=&#34;__codelineno-17-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ReflectError&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;OperationFailed&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-9&#34; name=&#34;__codelineno-17-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                            &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shape&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;frame&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shape&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-10&#34; name=&#34;__codelineno-17-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                            &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;operation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;field index out of bounds&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-11&#34; name=&#34;__codelineno-17-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-12&#34; name=&#34;__codelineno-17-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-13&#34; name=&#34;__codelineno-17-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                    &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;field&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;struct_type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fields&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;idx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-14&#34; name=&#34;__codelineno-17-14&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-17-15&#34; name=&#34;__codelineno-17-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;match&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;mut&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;frame&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tracker&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-16&#34; name=&#34;__codelineno-17-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Tracker&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Uninit&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-17&#34; name=&#34;__codelineno-17-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                            &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;frame&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tracker&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Tracker&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-18&#34; name=&#34;__codelineno-17-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                                &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;iset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ISet&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;struct_type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fields&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()),&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-19&#34; name=&#34;__codelineno-17-19&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                                &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;current_child&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Some&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;idx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-20&#34; name=&#34;__codelineno-17-20&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                            &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-21&#34; name=&#34;__codelineno-17-21&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-22&#34; name=&#34;__codelineno-17-22&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Tracker&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-23&#34; name=&#34;__codelineno-17-23&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                            &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;iset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-24&#34; name=&#34;__codelineno-17-24&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                            &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;current_child&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-25&#34; name=&#34;__codelineno-17-25&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-26&#34; name=&#34;__codelineno-17-26&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                            &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// Check if this field was already initialized&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-27&#34; name=&#34;__codelineno-17-27&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                            &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;iset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;idx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-28&#34; name=&#34;__codelineno-17-28&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                                &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// Drop the existing value before re-initializing&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-29&#34; name=&#34;__codelineno-17-29&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                                &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// è·å–nameå­—æ®µçš„æŒ‡é’ˆï¼Œdropå·²ç»åˆå§‹åŒ–çš„æ•°æ®ï¼Œè¿›è¡Œé‡æ–°åˆå§‹åŒ–&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-30&#34; name=&#34;__codelineno-17-30&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                                &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;field_ptr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;unsafe&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;frame&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;field_init_at&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;field&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;offset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-31&#34; name=&#34;__codelineno-17-31&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                                &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Some&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;drop_fn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-32&#34; name=&#34;__codelineno-17-32&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                                    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;field&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shape&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vtable&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sized&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;and_then&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;drop_in_place&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)())&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-33&#34; name=&#34;__codelineno-17-33&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                                &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-34&#34; name=&#34;__codelineno-17-34&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                                    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;unsafe&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;drop_fn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;field_ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-35&#34; name=&#34;__codelineno-17-35&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                                &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-36&#34; name=&#34;__codelineno-17-36&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                                &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// Unset the bit so we can re-initialize&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-37&#34; name=&#34;__codelineno-17-37&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                                &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;iset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;unset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;idx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-38&#34; name=&#34;__codelineno-17-38&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                            &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-39&#34; name=&#34;__codelineno-17-39&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                            &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;current_child&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Some&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;idx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-40&#34; name=&#34;__codelineno-17-40&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-41&#34; name=&#34;__codelineno-17-41&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;fm&#34;&gt;unreachable!&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-42&#34; name=&#34;__codelineno-17-42&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-43&#34; name=&#34;__codelineno-17-43&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-17-44&#34; name=&#34;__codelineno-17-44&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// Push a new frame for this field onto the frames stack.&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-45&#34; name=&#34;__codelineno-17-45&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                    &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;field_ptr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;unsafe&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;frame&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;field_uninit_at&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;field&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;offset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-46&#34; name=&#34;__codelineno-17-46&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                    &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;field_shape&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;field&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shape&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-47&#34; name=&#34;__codelineno-17-47&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// ä¿®æ”¹æœ€åä¸€å¸§ï¼Œä¹Ÿå°±æ˜¯last_frameä¸ºå½“å‰æ“ä½œçš„Structçš„name field&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-48&#34; name=&#34;__codelineno-17-48&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                    &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;frames&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-49&#34; name=&#34;__codelineno-17-49&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;push&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Frame&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;field_ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;field_shape&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;FrameOwnership&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Field&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-50&#34; name=&#34;__codelineno-17-50&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-17-51&#34; name=&#34;__codelineno-17-51&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                    &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Ok&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-52&#34; name=&#34;__codelineno-17-52&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-53&#34; name=&#34;__codelineno-17-53&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-54&#34; name=&#34;__codelineno-17-54&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-55&#34; name=&#34;__codelineno-17-55&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/p&gt;
&lt;p&gt;setè®¾ç½®å€¼
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Rust&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-18-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-18-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-18-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-18-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-18-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-18-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-18-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-18-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-18-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-18-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-18-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-18-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-18-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-18-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-18-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-18-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-18-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-18-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-18-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-18-1&#34; name=&#34;__codelineno-18-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;sd&#34;&gt;/// Sets a value wholesale into the current frame&lt;/span&gt;
&lt;a id=&#34;__codelineno-18-2&#34; name=&#34;__codelineno-18-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;pub&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;set&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;U&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;mut&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;U&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;mut&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;Self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ReflectError&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;a id=&#34;__codelineno-18-3&#34; name=&#34;__codelineno-18-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;where&lt;/span&gt;
&lt;a id=&#34;__codelineno-18-4&#34; name=&#34;__codelineno-18-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;U&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Facet&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;facet&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-18-5&#34; name=&#34;__codelineno-18-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-18-6&#34; name=&#34;__codelineno-18-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;require_active&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;?&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-18-7&#34; name=&#34;__codelineno-18-7&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-18-8&#34; name=&#34;__codelineno-18-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// For conversion frames, store the value in the conversion frame itself&lt;/span&gt;
&lt;a id=&#34;__codelineno-18-9&#34; name=&#34;__codelineno-18-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// The conversion will happen during end()&lt;/span&gt;
&lt;a id=&#34;__codelineno-18-10&#34; name=&#34;__codelineno-18-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr_const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PtrConst&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;raw&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-18-11&#34; name=&#34;__codelineno-18-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;unsafe&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-18-12&#34; name=&#34;__codelineno-18-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// Safety: We are calling set_shape with a valid shape and a valid pointer&lt;/span&gt;
&lt;a id=&#34;__codelineno-18-13&#34; name=&#34;__codelineno-18-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_shape&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr_const&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;U&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SHAPE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;?&lt;/span&gt;
&lt;a id=&#34;__codelineno-18-14&#34; name=&#34;__codelineno-18-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;a id=&#34;__codelineno-18-15&#34; name=&#34;__codelineno-18-15&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-18-16&#34; name=&#34;__codelineno-18-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// Prevent the value from being dropped since we&amp;#39;ve copied it&lt;/span&gt;
&lt;a id=&#34;__codelineno-18-17&#34; name=&#34;__codelineno-18-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;core&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mem&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;forget&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-18-18&#34; name=&#34;__codelineno-18-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Ok&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-18-19&#34; name=&#34;__codelineno-18-19&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
setå‡½æ•°è°ƒç”¨äº†set_shapeå‡½æ•°ï¼Œå› ä¸ºbegin_fieldå‡½æ•°æ¥ç€è°ƒç”¨çš„å°±æ˜¯setå‡½æ•°ï¼Œå› æ­¤set_shapeå‡½æ•°ä¸­è·å–çš„last_mut frameå°±æ˜¯nameå­—æ®µçš„ä¿¡æ¯ã€‚ç„¶åå°±ä¸ºdataæŒ‡é’ˆæŒ‡å‘çš„æ•°æ®èµ‹å€¼äº†ã€‚
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Rust&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-19-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-19-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-19-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-19-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-19-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-19-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-19-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-19-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-19-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-19-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-19-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-19-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-19-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-19-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-19-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-19-1&#34; name=&#34;__codelineno-19-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;sd&#34;&gt;/// Sets a value into the current frame by shape, for shape-based operations&lt;/span&gt;
&lt;a id=&#34;__codelineno-19-2&#34; name=&#34;__codelineno-19-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#[inline]&lt;/span&gt;
&lt;a id=&#34;__codelineno-19-3&#34; name=&#34;__codelineno-19-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;pub&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;unsafe&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;set_shape&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;a id=&#34;__codelineno-19-4&#34; name=&#34;__codelineno-19-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;mut&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-19-5&#34; name=&#34;__codelineno-19-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;src_value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;PtrConst&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-19-6&#34; name=&#34;__codelineno-19-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;src_shape&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kp&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Shape&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-19-7&#34; name=&#34;__codelineno-19-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;mut&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;Self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ReflectError&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-19-8&#34; name=&#34;__codelineno-19-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;frames&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;last_mut&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;unwrap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;a id=&#34;__codelineno-19-9&#34; name=&#34;__codelineno-19-9&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-19-10&#34; name=&#34;__codelineno-19-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;unsafe&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-19-11&#34; name=&#34;__codelineno-19-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;copy_from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;src_value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shape&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;unwrap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;a id=&#34;__codelineno-19-12&#34; name=&#34;__codelineno-19-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-19-13&#34; name=&#34;__codelineno-19-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tracker&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Tracker&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-19-14&#34; name=&#34;__codelineno-19-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Ok&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-19-15&#34; name=&#34;__codelineno-19-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
åˆ°æ­¤ï¼ŒæˆåŠŸå®ç°äº†Structçš„PartialåŠŸèƒ½ï¼Œä»åˆ†é…æœªåˆå§‹åŒ–çš„å†…å­˜ï¼Œç„¶åé€šè¿‡stringç±»å‹çš„fieldåç§°ï¼Œæ„é€ ä¸€ä¸ªä¸ªfieldï¼Œæœ€ç»ˆæ„é€ å‡ºä¸€ä¸ªç»“æ„ä½“ã€‚&lt;/p&gt;
&lt;style&gt;
.related-posts {
  margin-top: 1.5rem;
  padding-top: 0.75rem;
  border-top: 1px solid rgba(0,0,0,0.1);
  max-height: none !important; /* é˜²æ­¢Safarié”™è¯¯è®¡ç®—é«˜åº¦ */
  overflow: visible !important; /* é˜²æ­¢å†…å®¹è¢«æˆªæ–­ */
}
.related-posts h3 {
  margin-top: 0;
  margin-bottom: 0.5rem;
  font-size: 1.2rem;
  font-weight: 500;
  line-height: 1.3;
}
.related-posts ul {
  margin: 0 0 0.5rem 0 !important; /* å¼ºåˆ¶è¦†ç›–å¯èƒ½çš„å†²çªæ ·å¼ */
  padding-left: 1.5rem;
  list-style-position: outside;
}
.related-posts li {
  margin-bottom: 0.25rem;
  line-height: 1.4;
}
/* æš—è‰²æ¨¡å¼é€‚é… */
[data-md-color-scheme=&#34;slate&#34;] .related-posts {
  border-top-color: rgba(255,255,255,0.1);
}
/* Safariç‰¹å®šä¿®å¤ */
@supports (-webkit-hyphens:none) {
  .related-posts {
    display: block;
    position: relative;
    height: auto !important;
  }
  .related-posts ul {
    position: static;
  }
}
&lt;/style&gt;
&lt;div class=&#34;related-posts&#34;&gt;
&lt;h3&gt;ğŸ“š ç›¸å…³æ–‡ç« æ¨è&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/pyo3å®ç°pythonå’Œrustè·¨è¯­è¨€è°ƒç”¨/&#34; target=&#34;_blank&#34;&gt;pyo3å®ç°pythonå’Œrustè·¨è¯­è¨€è°ƒç”¨&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/cå¼€å‘å¸¸è§é—®é¢˜ä¹‹abiå…¼å®¹æ€§é—®é¢˜/&#34; target=&#34;_blank&#34;&gt;C++å¼€å‘å¸¸è§é—®é¢˜ä¹‹ABIå…¼å®¹æ€§é—®é¢˜&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/mit-ç»å…¸è®²åº§how-to-speak---patrick-winston/&#34; target=&#34;_blank&#34;&gt;MIT ç»å…¸è®²åº§ï¼šHow to Speak - Patrick Winston&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/c20å¦‚ä½•å®ç°ä¸€ä¸ªåŸºäºå±æ€§æµ‹è¯•çš„quickcheck-cppåº“/&#34; target=&#34;_blank&#34;&gt;C++20å¦‚ä½•å®ç°ä¸€ä¸ªåŸºäºå±æ€§æµ‹è¯•çš„quickcheck-cppåº“&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/helix-gptå¦‚ä½•å®ç°ai-codeä»¥åŠå¦‚ä½•è°ƒè¯•/&#34; target=&#34;_blank&#34;&gt;helix-gptå¦‚ä½•å®ç°AI codeä»¥åŠå¦‚ä½•è°ƒè¯•?&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;</description>
      <link>https://github.com/KenForever1/blog/rust-facet%E5%BA%93%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E8%BF%90%E8%A1%8C%E6%97%B6%E5%8F%8D%E5%B0%84/</link>
      <pubDate>Sat, 02 Aug 2025 00:00:00 +0000</pubDate>
      <source url="https://github.com/KenForever1/feed_rss_updated.xml">KenForever1</source>
      
      <guid isPermaLink="true">https://github.com/KenForever1/blog/rust-facet%E5%BA%93%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E8%BF%90%E8%A1%8C%E6%97%B6%E5%8F%8D%E5%B0%84/</guid>
      
    </item>
    
    <item>
      <title>å…³äºé˜…è¯»æºç çš„ä¸€ç‚¹å¿ƒå¾—</title>
      
      
        
      <author>KenForever1</author>
        
      
      
      
      <description>&lt;p&gt;æœ‹å‹ä»¬ï¼Œé˜…è¯»ä¼˜ç§€çš„æºç å¯ä»¥å­¦åˆ°å¾ˆå¤šï¼Œä¾‹å¦‚ä»£ç çš„ç»“æ„ç»„ç»‡ã€è®¾è®¡æ¨¡å¼ã€ä¸ºäº†è§£å†³ä¸€äº›é—®é¢˜ç‰¹æ®Šå¤„ç†ã€å†™æ³•æŠ€å·§ã€ä¼˜åŒ–ç­–ç•¥ç­‰ï¼ŒåŒæ—¶ä¹Ÿæ‰©å±•äº†å¯¹ç¼–ç¨‹è¯­è¨€çš„ç†Ÿæ‚‰ç¨‹åº¦ã€å…³äºè¿™ä¸ªé¡¹ç›®çš„è§£å†³é—®é¢˜æ€è·¯ã€‚&lt;/p&gt;
&lt;!-- more --&gt;

&lt;p&gt;æœ¬æ–‡ä¸»è¦è®°å½•å’Œåˆ†äº«ä¸€äº›æˆ‘é˜…è¯»ä»£ç è¿‡ç¨‹ä¸­çš„å¿ƒå¾—ï¼ŒåŒ…æ‹¬å¦‚ä½•é˜…è¯»ä»£ç ã€åˆ©ç”¨é˜…è¯»ä»£ç å·¥å…·ã€å¦‚ä½•é€‰æ‹©ä¸€äº›ä»£ç åº“é˜…è¯»ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¦‚ä½•é˜…è¯»ä»£ç &#34;&gt;å¦‚ä½•é˜…è¯»ä»£ç &lt;a class=&#34;headerlink&#34; href=&#34;#å¦‚ä½•é˜…è¯»ä»£ç &#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;é˜…è¯»ä»£ç çš„è¿‡ç¨‹ï¼Œå°±åƒæ˜¯æ¢æ¡ˆå¯»æ‰¾å«Œç–‘äººã€ç ´è§£æ•Œäººçš„é˜µæ³•ã€åˆæˆ–è€…æ¬£èµä¸€ä»¶è‰ºæœ¯å“ã€‚å¦‚æœæ²¡æœ‰æ€è·¯ã€ä¸€å¤´æ‰è¿›å»ï¼Œæˆ–è€…å˜æˆäº†æŒ‰é¡ºåºè¯»ä»£ç ï¼Œå°±ä¼šçœ¼ç›ç—›ã€å¤´å‘æ™•äº†ï¼Œå¾ˆéš¾è¿›è¡Œä¸‹å»ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å¸¦ç€é—®é¢˜æˆ–è€…ç›®æ ‡å»é˜…è¯»ä»£ç ï¼Œå¤§å‹ä»£ç åº“éƒ½æ˜¯ç”±å¾ˆå¤šäººå¼€å‘çš„ã€ç”±å¾ˆå¤šåŠŸèƒ½ç»„æˆï¼Œç‰¹åˆ«åºå¤§ï¼Œéœ€è¦ç”±é—®é¢˜åˆ‡å…¥ã€‚æ¯”å¦‚è¿™ä¸ªä»£ç åº“ä¸­å¦‚ä½•å®ç°æŸä¸ªåŠŸèƒ½çš„ï¼Ÿæ¯”å¦‚Pytorchä¸­å¦‚ä½•ä½¿ç”¨cudaIpcåŠŸèƒ½çš„ï¼Ÿæ¯”å¦‚LLMæ¨ç†åº“ä¸­å¦‚ä½•å®ç°æŠ•æœºé‡‡æ ·çš„ï¼Ÿ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¸æ¨èé¡ºåºè¯»ä»£ç ï¼Œæ¯”å¦‚æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œä»å¤´å¼€å§‹å¾€åè¯»ï¼Œä¸€ä¸ªä¸€ä¸ªæ–‡ä»¶è¯»ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ‹¿C++çš„ä¸€ä¸ªæ–‡ä»¶æ¥è¯´ï¼Œå¯èƒ½ç”±ä¸€ä¸ªç±»æˆ–è€…å¤šä¸ªç±»ï¼Œé‡Œé¢åŒ…æ‹¬äº†æ ¸å¿ƒå‡½æ•°ã€å·¥å…·è¾…åŠ©å‡½æ•°ã€ç”¨çš„å°‘çš„å‡½æ•°å˜é‡ç­‰ã€‚æœ‰äº›å‡½æ•°å˜é‡å¯¹è§£å†³çš„ä½ é—®é¢˜æ²¡æœ‰ä»»ä½•æ„ä¹‰ï¼ŒæŒ‰é¡ºåºé˜…è¯»å°±ä¼šå¢åŠ æ··ä¹±åº¦ã€‚æ¨èæ ¹æ®ç±»å’Œæ–¹æ³•çš„è°ƒç”¨å…³ç³»ï¼Œä¸æ–­çš„è·³è½¬ï¼ŒæŸ¥çœ‹ä»£ç å¦‚ä½•å®ç°å’Œè§£å†³é—®é¢˜çš„ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¯¹äºä¸€ä¸ªä¸äº†è§£çš„é¡¹ç›®æˆ–è€…åº“ï¼Œæ¨èå¯ä»¥ä»æµ‹è¯•çœ‹èµ·ã€å…ˆä»ç”¨èµ·æ¥çš„è§’åº¦ï¼Œå»ç†è§£è¿™ä¸ªé¡¹ç›®æ˜¯å¹²å˜›çš„ï¼Œå®ƒèƒ½å¤Ÿè§£å†³å“ªäº›é—®é¢˜ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä½ å°±ä¼šå»æŸ¥é˜…å®ƒçš„æ–‡æ¡£ï¼ˆreadmeã€blogï¼‰ä»¥åŠç†Ÿæ‚‰APIç”¨æ³•ã€‚åŒæ—¶ä¹Ÿä¼šå¸¦ç»™ä½ å¾ˆå¤šé—®é¢˜ï¼Œè®©ä½ ä½œä¸ºåˆ‡å…¥ç‚¹é˜…è¯»æºç ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;é˜…è¯»ä»£ç å·¥å…·çš„åˆ©ç”¨&#34;&gt;é˜…è¯»ä»£ç å·¥å…·çš„åˆ©ç”¨&lt;a class=&#34;headerlink&#34; href=&#34;#é˜…è¯»ä»£ç å·¥å…·çš„åˆ©ç”¨&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;github1s&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;sourcegraph&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;commandç­‰è½¯ä»¶&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å¦‚ä½•é€‰æ‹©é˜…è¯»çš„ä»£ç åº“&#34;&gt;å¦‚ä½•é€‰æ‹©é˜…è¯»çš„ä»£ç åº“&lt;a class=&#34;headerlink&#34; href=&#34;#å¦‚ä½•é€‰æ‹©é˜…è¯»çš„ä»£ç åº“&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;å…´è¶£ã€æŠ€èƒ½æå‡ã€ç»“åˆå·¥ä½œä¸­çš„éœ€æ±‚ï¼ˆæˆ–è€…æœªæ¥å·¥ä½œçš„å‘å±•æƒ…å†µï¼‰&lt;/p&gt;
&lt;style&gt;
.related-posts {
  margin-top: 1.5rem;
  padding-top: 0.75rem;
  border-top: 1px solid rgba(0,0,0,0.1);
  max-height: none !important; /* é˜²æ­¢Safarié”™è¯¯è®¡ç®—é«˜åº¦ */
  overflow: visible !important; /* é˜²æ­¢å†…å®¹è¢«æˆªæ–­ */
}
.related-posts h3 {
  margin-top: 0;
  margin-bottom: 0.5rem;
  font-size: 1.2rem;
  font-weight: 500;
  line-height: 1.3;
}
.related-posts ul {
  margin: 0 0 0.5rem 0 !important; /* å¼ºåˆ¶è¦†ç›–å¯èƒ½çš„å†²çªæ ·å¼ */
  padding-left: 1.5rem;
  list-style-position: outside;
}
.related-posts li {
  margin-bottom: 0.25rem;
  line-height: 1.4;
}
/* æš—è‰²æ¨¡å¼é€‚é… */
[data-md-color-scheme=&#34;slate&#34;] .related-posts {
  border-top-color: rgba(255,255,255,0.1);
}
/* Safariç‰¹å®šä¿®å¤ */
@supports (-webkit-hyphens:none) {
  .related-posts {
    display: block;
    position: relative;
    height: auto !important;
  }
  .related-posts ul {
    position: static;
  }
}
&lt;/style&gt;
&lt;div class=&#34;related-posts&#34;&gt;
&lt;h3&gt;ğŸ“š ç›¸å…³æ–‡ç« æ¨è&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/ä½¿ç”¨pytorchä»é›¶æ„å»ºllama3å¤§æ¨¡å‹--æ·±å…¥äº†è§£è¾“å‡ºæ¨¡å—ä»¥åŠè®­ç»ƒæ¨ç†/&#34; target=&#34;_blank&#34;&gt;ä½¿ç”¨Pytorchä»é›¶æ„å»ºLlama3å¤§æ¨¡å‹--æ·±å…¥äº†è§£è¾“å‡ºæ¨¡å—ä»¥åŠè®­ç»ƒæ¨ç†&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/cistaé›¶æ‹·è´ååºåˆ—åŒ–åº“å®ç°ä¹‹swiss_tableå“ˆå¸Œè¡¨å®ç°/&#34; target=&#34;_blank&#34;&gt;cistaé›¶æ‹·è´ååºåˆ—åŒ–åº“å®ç°ä¹‹swiss_tableå“ˆå¸Œè¡¨å®ç°&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/helix-gptå¦‚ä½•å®ç°ai-codeä»¥åŠå¦‚ä½•è°ƒè¯•/&#34; target=&#34;_blank&#34;&gt;helix-gptå¦‚ä½•å®ç°AI codeä»¥åŠå¦‚ä½•è°ƒè¯•?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/mit-ç»å…¸è®²åº§how-to-speak---patrick-winston/&#34; target=&#34;_blank&#34;&gt;MIT ç»å…¸è®²åº§ï¼šHow to Speak - Patrick Winston&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/300è¡Œå®ç°ä¸€ä¸ªboundedspscqueue/&#34; target=&#34;_blank&#34;&gt;300è¡Œå®ç°ä¸€ä¸ªBoundedSPSCQueue&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;</description>
      <link>https://github.com/KenForever1/blog/%E5%85%B3%E4%BA%8E%E9%98%85%E8%AF%BB%E6%BA%90%E7%A0%81%E7%9A%84%E4%B8%80%E7%82%B9%E5%BF%83%E5%BE%97/</link>
      <pubDate>Fri, 01 Aug 2025 00:00:00 +0000</pubDate>
      <source url="https://github.com/KenForever1/feed_rss_updated.xml">KenForever1</source>
      
      <guid isPermaLink="true">https://github.com/KenForever1/blog/%E5%85%B3%E4%BA%8E%E9%98%85%E8%AF%BB%E6%BA%90%E7%A0%81%E7%9A%84%E4%B8%80%E7%82%B9%E5%BF%83%E5%BE%97/</guid>
      
    </item>
    
    <item>
      <title>VLLMæ¨ç†æ¡†æ¶ä¸­çš„sleep_modeå¦‚ä½•å®ç°</title>
      
      
        
      <author>KenForever1</author>
        
      
      
      
      <description>&lt;!-- [TOC] --&gt;

&lt;h2 id=&#34;vllm-sleep_model-ç®€ä»‹&#34;&gt;vllm sleep_model ç®€ä»‹&lt;a class=&#34;headerlink&#34; href=&#34;#vllm-sleep_model-ç®€ä»‹&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;å‰æ–‡&lt;a href=&#34;https://zhuanlan.zhihu.com/p/1919901725592093271&#34; title=&#34;torch_memory_saver é«˜æ€§èƒ½ CUDA å†…å­˜ç®¡ç†å·¥å…·å®ç°&#34;&gt;torch_memory_saver é«˜æ€§èƒ½ CUDA å†…å­˜ç®¡ç†å·¥å…·å®ç°&lt;/a&gt;ï¼Œä»‹ç»äº† sglang ä¸­åˆ©ç”¨äº†è¯¥åº“å°†ä¿å­˜ kv_cache å’Œæƒé‡çš„æ˜¾å­˜é‡Šæ”¾å‡ºæ¥ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ VLLM ä¸­ä¹Ÿæœ‰åŒæ ·çš„åŠŸèƒ½å®ç°ï¼Œåœ¨ VLLM ä¸­çš„ç›´æ¥åº”ç”¨æ˜¯â€œsleep modeâ€ã€‚å°†æ¨¡å‹æƒé‡ä»æ˜¾å­˜ï¼ˆæˆ–è€… NPU å†…å­˜ä¸­ï¼‰å¸è½½ï¼Œå¹¶ä¸¢å¼ƒå…¶ä¸­çš„ KV ç¼“å­˜ã€‚&lt;/p&gt;
&lt;!-- more --&gt;

&lt;p&gt;ä¸¤ç§ level ä¸åŒç­–ç•¥ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Bash&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-0-1&#34; name=&#34;__codelineno-0-1&#34;&gt;&lt;/a&gt;Level&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Sleep
&lt;a id=&#34;__codelineno-0-2&#34; name=&#34;__codelineno-0-2&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-3&#34; name=&#34;__codelineno-0-3&#34;&gt;&lt;/a&gt;Action:&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Offloads&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;model&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;weights&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;and&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;discards&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;the&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;KV&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;cache.
&lt;a id=&#34;__codelineno-0-4&#34; name=&#34;__codelineno-0-4&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-5&#34; name=&#34;__codelineno-0-5&#34;&gt;&lt;/a&gt;Memory:&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Model&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;weights&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;are&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;moved&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;to&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;CPU&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;memory&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;KV&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;cache&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;is&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;forgotten.
&lt;a id=&#34;__codelineno-0-6&#34; name=&#34;__codelineno-0-6&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-7&#34; name=&#34;__codelineno-0-7&#34;&gt;&lt;/a&gt;Use&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Case:&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Suitable&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;when&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;reusing&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;the&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;same&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;model&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;later.
&lt;a id=&#34;__codelineno-0-8&#34; name=&#34;__codelineno-0-8&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-9&#34; name=&#34;__codelineno-0-9&#34;&gt;&lt;/a&gt;Note:&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Ensure&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;sufficient&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;CPU&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;memory&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;is&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;available&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;to&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;hold&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;the&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;model&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;weights.
&lt;a id=&#34;__codelineno-0-10&#34; name=&#34;__codelineno-0-10&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-11&#34; name=&#34;__codelineno-0-11&#34;&gt;&lt;/a&gt;Level&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Sleep
&lt;a id=&#34;__codelineno-0-12&#34; name=&#34;__codelineno-0-12&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-13&#34; name=&#34;__codelineno-0-13&#34;&gt;&lt;/a&gt;Action:&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Discards&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;both&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;model&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;weights&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;and&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;KV&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;cache.
&lt;a id=&#34;__codelineno-0-14&#34; name=&#34;__codelineno-0-14&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-15&#34; name=&#34;__codelineno-0-15&#34;&gt;&lt;/a&gt;Memory:&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;The&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;content&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;of&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;both&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;the&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;model&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;weights&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;and&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kv&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;cache&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;is&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;forgotten.
&lt;a id=&#34;__codelineno-0-16&#34; name=&#34;__codelineno-0-16&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-17&#34; name=&#34;__codelineno-0-17&#34;&gt;&lt;/a&gt;Use&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Case:&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Ideal&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;when&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;switching&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;to&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;a&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;different&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;model&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;or&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;updating&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;the&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;current&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;one.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;h2 id=&#34;å¦‚ä½•ä½¿ç”¨-sleep-å’Œ-wake_up&#34;&gt;å¦‚ä½•ä½¿ç”¨ sleep å’Œ wake_up?&lt;a class=&#34;headerlink&#34; href=&#34;#å¦‚ä½•ä½¿ç”¨-sleep-å’Œ-wake_up&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;åœ¨ VLLM ä¸­é€šè¿‡ CuMemAllocator.get_instance()ä½¿ç”¨ sleep å’Œ wake_up æ–¹æ³•ï¼Œå®ç°é‡Šæ”¾æ˜¾å­˜å’Œæ¢å¤æ˜¾å­˜ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Python&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-21&#34;&gt;21&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-22&#34;&gt;22&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-23&#34;&gt;23&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-24&#34;&gt;24&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-25&#34;&gt;25&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-26&#34;&gt;26&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-27&#34;&gt;27&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-28&#34;&gt;28&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-29&#34;&gt;29&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-30&#34;&gt;30&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-31&#34;&gt;31&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-32&#34;&gt;32&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-1-1&#34; name=&#34;__codelineno-1-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;load_model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;None&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-2&#34; name=&#34;__codelineno-1-2&#34;&gt;&lt;/a&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vllm_config&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model_config&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;enable_sleep_mode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-3&#34; name=&#34;__codelineno-1-3&#34;&gt;&lt;/a&gt;        &lt;span class=&#34;n&#34;&gt;allocator&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CuMemAllocator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get_instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-4&#34; name=&#34;__codelineno-1-4&#34;&gt;&lt;/a&gt;        &lt;span class=&#34;k&#34;&gt;assert&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;allocator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get_current_usage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-5&#34; name=&#34;__codelineno-1-5&#34;&gt;&lt;/a&gt;            &lt;span class=&#34;s2&#34;&gt;&amp;quot;Sleep mode can only be &amp;quot;&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-6&#34; name=&#34;__codelineno-1-6&#34;&gt;&lt;/a&gt;            &lt;span class=&#34;s2&#34;&gt;&amp;quot;used for one instance per process.&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-7&#34; name=&#34;__codelineno-1-7&#34;&gt;&lt;/a&gt;        &lt;span class=&#34;n&#34;&gt;context&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;allocator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;use_memory_pool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tag&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;weights&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-8&#34; name=&#34;__codelineno-1-8&#34;&gt;&lt;/a&gt;    &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-9&#34; name=&#34;__codelineno-1-9&#34;&gt;&lt;/a&gt;        &lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;contextlib&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nullcontext&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-10&#34; name=&#34;__codelineno-1-10&#34;&gt;&lt;/a&gt;        &lt;span class=&#34;n&#34;&gt;context&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nullcontext&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-11&#34; name=&#34;__codelineno-1-11&#34;&gt;&lt;/a&gt;    &lt;span class=&#34;k&#34;&gt;with&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-12&#34; name=&#34;__codelineno-1-12&#34;&gt;&lt;/a&gt;        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model_runner&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;load_model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-13&#34; name=&#34;__codelineno-1-13&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-1-14&#34; name=&#34;__codelineno-1-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Worker&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;():&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-15&#34; name=&#34;__codelineno-1-15&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-1-16&#34; name=&#34;__codelineno-1-16&#34;&gt;&lt;/a&gt;    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;sleep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;level&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;None&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-17&#34; name=&#34;__codelineno-1-17&#34;&gt;&lt;/a&gt;        &lt;span class=&#34;n&#34;&gt;free_bytes_before_sleep&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;torch&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cuda&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mem_get_info&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-18&#34; name=&#34;__codelineno-1-18&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-1-19&#34; name=&#34;__codelineno-1-19&#34;&gt;&lt;/a&gt;        &lt;span class=&#34;n&#34;&gt;allocator&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CuMemAllocator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get_instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-20&#34; name=&#34;__codelineno-1-20&#34;&gt;&lt;/a&gt;        &lt;span class=&#34;n&#34;&gt;allocator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sleep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;offload_tags&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;weights&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;level&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;tuple&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-21&#34; name=&#34;__codelineno-1-21&#34;&gt;&lt;/a&gt;        &lt;span class=&#34;n&#34;&gt;free_bytes_after_sleep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;total&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;torch&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cuda&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mem_get_info&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-22&#34; name=&#34;__codelineno-1-22&#34;&gt;&lt;/a&gt;        &lt;span class=&#34;n&#34;&gt;freed_bytes&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;free_bytes_after_sleep&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;free_bytes_before_sleep&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-23&#34; name=&#34;__codelineno-1-23&#34;&gt;&lt;/a&gt;        &lt;span class=&#34;n&#34;&gt;used_bytes&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;total&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;free_bytes_after_sleep&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-24&#34; name=&#34;__codelineno-1-24&#34;&gt;&lt;/a&gt;        &lt;span class=&#34;k&#34;&gt;assert&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;freed_bytes&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;quot;Memory usage increased after sleeping.&amp;quot;&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-25&#34; name=&#34;__codelineno-1-25&#34;&gt;&lt;/a&gt;        &lt;span class=&#34;n&#34;&gt;logger&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;info&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-26&#34; name=&#34;__codelineno-1-26&#34;&gt;&lt;/a&gt;            &lt;span class=&#34;s2&#34;&gt;&amp;quot;Sleep mode freed &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;%.2f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt; GiB memory, &amp;quot;&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-27&#34; name=&#34;__codelineno-1-27&#34;&gt;&lt;/a&gt;            &lt;span class=&#34;s2&#34;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;%.2f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt; GiB memory is still in use.&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;freed_bytes&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GiB_bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-28&#34; name=&#34;__codelineno-1-28&#34;&gt;&lt;/a&gt;            &lt;span class=&#34;n&#34;&gt;used_bytes&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GiB_bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-29&#34; name=&#34;__codelineno-1-29&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-1-30&#34; name=&#34;__codelineno-1-30&#34;&gt;&lt;/a&gt;    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;wake_up&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tags&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Optional&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;list&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;None&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;None&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-31&#34; name=&#34;__codelineno-1-31&#34;&gt;&lt;/a&gt;        &lt;span class=&#34;n&#34;&gt;allocator&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CuMemAllocator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get_instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-32&#34; name=&#34;__codelineno-1-32&#34;&gt;&lt;/a&gt;        &lt;span class=&#34;n&#34;&gt;allocator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;wake_up&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tags&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;å½“è°ƒç”¨ sleep æ–¹æ³•æ—¶ï¼Œæ‰€æœ‰å…·æœ‰æŒ‡å®šæ ‡ç­¾çš„å¼ é‡éƒ½å°†è¢«å¸è½½(offload)åˆ° CPU å†…å­˜ä¸­ï¼Œå…¶ä½™å¼ é‡å°†è¢«ä¸¢å¼ƒ(discard)ã€‚
å½“æˆ‘ä»¬è°ƒç”¨ wake_up æ—¶ï¼Œä¹‹å‰å¸è½½çš„æ‰€æœ‰å¼ é‡éƒ½å°†è¢«åŠ è½½å› GPU å†…å­˜ï¼Œå…¶ä½™å¼ é‡ä¸ºç©ºã€‚&lt;/p&gt;
&lt;h2 id=&#34;sleep-å’Œ-wake_up-å®ç°&#34;&gt;sleep å’Œ wake_up å®ç°&lt;a class=&#34;headerlink&#34; href=&#34;#sleep-å’Œ-wake_up-å®ç°&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;cuda å®ç°é’ˆå¯¹ NVIDIA GPU, npu å®ç°é’ˆå¯¹åä¸º Ascend NPUã€‚&lt;/p&gt;
&lt;h3 id=&#34;cuda-å®ç°&#34;&gt;cuda å®ç°&lt;a class=&#34;headerlink&#34; href=&#34;#cuda-å®ç°&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;cuda å®ç°é‡‡ç”¨ &lt;a href=&#34;https://github.com/vllm-project/vllm/blob/main/vllm/device_allocator/cumem.py#L106-L107&#34; title=&#34;CuMemAllocator ç±»å®ç°&#34;&gt;CuMemAllocator ç±»å®ç°&lt;/a&gt;ã€‚pointer_to_data ä¸­ä¿å­˜äº† ptr å’Œå…ƒæ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;sleep æ–¹æ³•å°±æ˜¯å°†offload_tagsä¸­çš„æ•°æ®å…ˆoffloadåˆ°cpuï¼Œå³è°ƒç”¨ cudaMemcpy DeviceToHost æ‹·è´åˆ° cpu å†…å­˜ä¸­ã€‚å¹¶ä¸”è®°å½•ä¸‹ cpu_backup_tensorï¼Œä¾› wakeup çš„æ—¶å€™ï¼Œå°† cpu å†…å­˜ä¸­çš„æ•°æ®æ‹·è´å› gpu å†…å­˜ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºæ²¡æœ‰åœ¨ offload_tags ä¸­çš„æ•°æ®ï¼Œsleep æ–¹æ³•ä¼šç›´æ¥ä¸¢å¼ƒæ•°æ®ï¼Œé‡Šæ”¾æ˜¾å­˜ã€‚è°ƒç”¨ unmap_and_releaseå®ç°ã€‚ä¸»è¦æ˜¯ä¿æŒç”¨æˆ·ä½¿ç”¨çš„è™šæ‹Ÿåœ°å€ä¸å˜ï¼Œæš‚åœåé‡Šæ”¾æ˜¾å­˜ï¼Œæ¢å¤é‡æ–°åˆ†é…æ˜¾å­˜ï¼Œç»‘å®šåˆ°è™šæ‹Ÿåœ°å€ä¸Šã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Python&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-21&#34;&gt;21&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-22&#34;&gt;22&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-23&#34;&gt;23&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-24&#34;&gt;24&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-25&#34;&gt;25&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-26&#34;&gt;26&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-27&#34;&gt;27&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-28&#34;&gt;28&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-29&#34;&gt;29&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-2-1&#34; name=&#34;__codelineno-2-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;sleep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-2&#34; name=&#34;__codelineno-2-2&#34;&gt;&lt;/a&gt;            &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-3&#34; name=&#34;__codelineno-2-3&#34;&gt;&lt;/a&gt;            &lt;span class=&#34;n&#34;&gt;offload_tags&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Optional&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Union&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;tuple&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;...&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-4&#34; name=&#34;__codelineno-2-4&#34;&gt;&lt;/a&gt;                                         &lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;None&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;None&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-5&#34; name=&#34;__codelineno-2-5&#34;&gt;&lt;/a&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;offload_tags&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;is&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;None&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-6&#34; name=&#34;__codelineno-2-6&#34;&gt;&lt;/a&gt;        &lt;span class=&#34;c1&#34;&gt;# by default, allocated tensors are offloaded&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-7&#34; name=&#34;__codelineno-2-7&#34;&gt;&lt;/a&gt;        &lt;span class=&#34;c1&#34;&gt;# when the allocator sleeps&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-8&#34; name=&#34;__codelineno-2-8&#34;&gt;&lt;/a&gt;        &lt;span class=&#34;n&#34;&gt;offload_tags&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CuMemAllocator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;default_tag&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-9&#34; name=&#34;__codelineno-2-9&#34;&gt;&lt;/a&gt;    &lt;span class=&#34;k&#34;&gt;elif&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;isinstance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;offload_tags&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-10&#34; name=&#34;__codelineno-2-10&#34;&gt;&lt;/a&gt;        &lt;span class=&#34;n&#34;&gt;offload_tags&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;offload_tags&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-11&#34; name=&#34;__codelineno-2-11&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-2-12&#34; name=&#34;__codelineno-2-12&#34;&gt;&lt;/a&gt;    &lt;span class=&#34;k&#34;&gt;assert&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;isinstance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;offload_tags&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;tuple&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-13&#34; name=&#34;__codelineno-2-13&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-2-14&#34; name=&#34;__codelineno-2-14&#34;&gt;&lt;/a&gt;    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pointer_to_data&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;items&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;():&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-15&#34; name=&#34;__codelineno-2-15&#34;&gt;&lt;/a&gt;        &lt;span class=&#34;n&#34;&gt;handle&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;handle&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-16&#34; name=&#34;__codelineno-2-16&#34;&gt;&lt;/a&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tag&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;offload_tags&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-17&#34; name=&#34;__codelineno-2-17&#34;&gt;&lt;/a&gt;            &lt;span class=&#34;n&#34;&gt;size_in_bytes&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;handle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-18&#34; name=&#34;__codelineno-2-18&#34;&gt;&lt;/a&gt;            &lt;span class=&#34;n&#34;&gt;cpu_backup_tensor&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;torch&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;empty&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-19&#34; name=&#34;__codelineno-2-19&#34;&gt;&lt;/a&gt;                &lt;span class=&#34;n&#34;&gt;size_in_bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-20&#34; name=&#34;__codelineno-2-20&#34;&gt;&lt;/a&gt;                &lt;span class=&#34;n&#34;&gt;dtype&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;torch&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;uint8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-21&#34; name=&#34;__codelineno-2-21&#34;&gt;&lt;/a&gt;                &lt;span class=&#34;n&#34;&gt;device&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;cpu&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-22&#34; name=&#34;__codelineno-2-22&#34;&gt;&lt;/a&gt;                &lt;span class=&#34;n&#34;&gt;pin_memory&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;is_pin_memory_available&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-23&#34; name=&#34;__codelineno-2-23&#34;&gt;&lt;/a&gt;            &lt;span class=&#34;n&#34;&gt;cpu_ptr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cpu_backup_tensor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data_ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-24&#34; name=&#34;__codelineno-2-24&#34;&gt;&lt;/a&gt;            &lt;span class=&#34;n&#34;&gt;libcudart&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cudaMemcpy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cpu_ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;size_in_bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-25&#34; name=&#34;__codelineno-2-25&#34;&gt;&lt;/a&gt;            &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cpu_backup_tensor&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cpu_backup_tensor&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-26&#34; name=&#34;__codelineno-2-26&#34;&gt;&lt;/a&gt;        &lt;span class=&#34;n&#34;&gt;unmap_and_release&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;handle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-27&#34; name=&#34;__codelineno-2-27&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-2-28&#34; name=&#34;__codelineno-2-28&#34;&gt;&lt;/a&gt;    &lt;span class=&#34;n&#34;&gt;gc&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;collect&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-29&#34; name=&#34;__codelineno-2-29&#34;&gt;&lt;/a&gt;    &lt;span class=&#34;n&#34;&gt;torch&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cuda&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;empty_cache&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;wake_up æ–¹æ³•åˆ™æ˜¯è°ƒç”¨ create_and_map(handle)å®ç°é‡æ–°åˆ†é…æ˜¾å­˜ï¼Œå¹¶ç»‘å®šåˆ°è™šæ‹Ÿåœ°å€ä¸Šã€‚å°† offload çš„æ•°æ®ä» cpu æ‹·è´åˆ° gpu ä¸­ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Python&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-3-1&#34; name=&#34;__codelineno-3-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;wake_up&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tags&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Optional&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;list&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;None&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;None&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-2&#34; name=&#34;__codelineno-3-2&#34;&gt;&lt;/a&gt;    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pointer_to_data&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;items&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;():&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-3&#34; name=&#34;__codelineno-3-3&#34;&gt;&lt;/a&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tags&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;is&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;None&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;or&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tag&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tags&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-4&#34; name=&#34;__codelineno-3-4&#34;&gt;&lt;/a&gt;            &lt;span class=&#34;n&#34;&gt;handle&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;handle&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-5&#34; name=&#34;__codelineno-3-5&#34;&gt;&lt;/a&gt;            &lt;span class=&#34;n&#34;&gt;create_and_map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;handle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-6&#34; name=&#34;__codelineno-3-6&#34;&gt;&lt;/a&gt;            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cpu_backup_tensor&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;is&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;not&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;None&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-7&#34; name=&#34;__codelineno-3-7&#34;&gt;&lt;/a&gt;                &lt;span class=&#34;n&#34;&gt;cpu_backup_tensor&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cpu_backup_tensor&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-8&#34; name=&#34;__codelineno-3-8&#34;&gt;&lt;/a&gt;                &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cpu_backup_tensor&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;is&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;not&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;None&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-9&#34; name=&#34;__codelineno-3-9&#34;&gt;&lt;/a&gt;                    &lt;span class=&#34;n&#34;&gt;size_in_bytes&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cpu_backup_tensor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;numel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-10&#34; name=&#34;__codelineno-3-10&#34;&gt;&lt;/a&gt;                    &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cpu_backup_tensor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;element_size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-11&#34; name=&#34;__codelineno-3-11&#34;&gt;&lt;/a&gt;                    &lt;span class=&#34;n&#34;&gt;cpu_ptr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cpu_backup_tensor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data_ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-12&#34; name=&#34;__codelineno-3-12&#34;&gt;&lt;/a&gt;                    &lt;span class=&#34;n&#34;&gt;libcudart&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cudaMemcpy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cpu_ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;size_in_bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-13&#34; name=&#34;__codelineno-3-13&#34;&gt;&lt;/a&gt;                    &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cpu_backup_tensor&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;None&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;pointer_to_data å…ƒæ•°æ®ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Python&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-5&#34;&gt;5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-6&#34;&gt;6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-7&#34;&gt;7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-8&#34;&gt;8&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-4-1&#34; name=&#34;__codelineno-4-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;# py_device, py_alignedSize, py_d_mem (ä¿å­˜çš„ç”¨æˆ·ä½¿ç”¨çš„æŒ‡é’ˆ), py_p_memHandleï¼ˆå†…å­˜mmapçš„æ–‡ä»¶æè¿°ç¬¦ï¼‰&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-2&#34; name=&#34;__codelineno-4-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;HandleType&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;tuple&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-3&#34; name=&#34;__codelineno-4-3&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-4-4&#34; name=&#34;__codelineno-4-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;nd&#34;&gt;@dataclasses&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dataclass&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-5&#34; name=&#34;__codelineno-4-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;AllocationData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-6&#34; name=&#34;__codelineno-4-6&#34;&gt;&lt;/a&gt;    &lt;span class=&#34;n&#34;&gt;handle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;HandleType&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-7&#34; name=&#34;__codelineno-4-7&#34;&gt;&lt;/a&gt;    &lt;span class=&#34;n&#34;&gt;tag&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-8&#34; name=&#34;__codelineno-4-8&#34;&gt;&lt;/a&gt;    &lt;span class=&#34;n&#34;&gt;cpu_backup_tensor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Optional&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;torch&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Tensor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;None&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# offloadåˆ°cpuçš„tensor&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;python è°ƒç”¨åº•å±‚ c++å®ç°ï¼Œå’Œ&lt;strong&gt;torch_memory_saver&lt;/strong&gt;åŸç†å®Œå…¨ä¸€è‡´ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Python&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-5&#34;&gt;5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-6&#34;&gt;6&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-5-1&#34; name=&#34;__codelineno-5-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;create_and_map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;allocation_handle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;HandleType&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;None&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-2&#34; name=&#34;__codelineno-5-2&#34;&gt;&lt;/a&gt;    &lt;span class=&#34;n&#34;&gt;python_create_and_map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;allocation_handle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-3&#34; name=&#34;__codelineno-5-3&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-5-4&#34; name=&#34;__codelineno-5-4&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-5-5&#34; name=&#34;__codelineno-5-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;unmap_and_release&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;allocation_handle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;HandleType&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;None&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-6&#34; name=&#34;__codelineno-5-6&#34;&gt;&lt;/a&gt;    &lt;span class=&#34;n&#34;&gt;python_unmap_and_release&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;allocation_handle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;c++å®ç°æŸ¥çœ‹&lt;a href=&#34;https://github.com/vllm-project/vllm/blob/main/csrc/cumem_allocator.cpp#L297&#34; title=&#34;cumem_allocator.cpp&#34;&gt;cumem_allocator.cpp&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ascend-npu-çš„å®ç°&#34;&gt;Ascend NPU çš„å®ç°&lt;a class=&#34;headerlink&#34; href=&#34;#ascend-npu-çš„å®ç°&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;ä¸»è¦é€šè¿‡&lt;a href=&#34;https://github.com/vllm-project/vllm-ascend/blob/main/vllm_ascend/device_allocator/camem.py&#34; title=&#34;CaMemAllocator ç±»çš„å®ç°&#34;&gt;CaMemAllocator ç±»å®ç°&lt;/a&gt;ã€‚python è°ƒç”¨åº•å±‚ c++å®ç°ã€‚å’Œ cuda å®ç°çš„åŒºåˆ«å°±æ˜¯ sleep ä¸­çš„ unmap_and_release å‡½æ•°ã€wake_up ä¸­çš„ create_and_map å‡½æ•°å®ç°ä¸ä¸€æ ·ã€‚&lt;/p&gt;
&lt;p&gt;å…·ä½“å®ç°å¯ä»¥å‚è€ƒ&lt;a href=&#34;https://github.com/vllm-project/vllm-ascend/blob/main/csrc/camem_allocator.cpp&#34; title=&#34;camem_allocator.cpp&#34;&gt;camem_allocator.cpp&lt;/a&gt;ï¼Œä½¿ç”¨ Ascend NPU çš„ aclrt å®ç°äº†ä¿å­˜æŒ‡é’ˆ aclrtReserveMemAddressã€å†…å­˜æ˜ å°„ç­‰ APIã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-21&#34;&gt;21&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-22&#34;&gt;22&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-23&#34;&gt;23&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-24&#34;&gt;24&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-25&#34;&gt;25&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-26&#34;&gt;26&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-27&#34;&gt;27&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-28&#34;&gt;28&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-29&#34;&gt;29&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-30&#34;&gt;30&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-31&#34;&gt;31&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-32&#34;&gt;32&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-33&#34;&gt;33&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-34&#34;&gt;34&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-35&#34;&gt;35&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-36&#34;&gt;36&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-37&#34;&gt;37&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-38&#34;&gt;38&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-39&#34;&gt;39&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-40&#34;&gt;40&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-41&#34;&gt;41&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-42&#34;&gt;42&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-43&#34;&gt;43&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-44&#34;&gt;44&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-45&#34;&gt;45&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-46&#34;&gt;46&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-6-1&#34; name=&#34;__codelineno-6-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;create_and_map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;long&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;long&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;device&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;ssize_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;d_mem&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-2&#34; name=&#34;__codelineno-6-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;aclrtDrvMemHandle&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p_memHandle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-3&#34; name=&#34;__codelineno-6-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ensure_context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;device&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-4&#34; name=&#34;__codelineno-6-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// Define memory allocation properties&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-5&#34; name=&#34;__codelineno-6-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;aclrtPhysicalMemProp&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;prop&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{};&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-6&#34; name=&#34;__codelineno-6-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;prop&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;handleType&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ACL_MEM_HANDLE_TYPE_NONE&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-7&#34; name=&#34;__codelineno-6-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;prop&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;allocationType&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ACL_MEM_ALLOCATION_TYPE_PINNED&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-8&#34; name=&#34;__codelineno-6-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;prop&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;memAttr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ACL_HBM_MEM_HUGE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-9&#34; name=&#34;__codelineno-6-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;prop&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;location&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;device&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-10&#34; name=&#34;__codelineno-6-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;prop&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;location&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ACL_MEM_LOCATION_TYPE_DEVICE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-11&#34; name=&#34;__codelineno-6-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;prop&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;reserve&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-12&#34; name=&#34;__codelineno-6-12&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-6-13&#34; name=&#34;__codelineno-6-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// Allocate memory using aclrtMallocPhysical&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-14&#34; name=&#34;__codelineno-6-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;aclError&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;error_code&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;aclrtMallocPhysical&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p_memHandle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;prop&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-15&#34; name=&#34;__codelineno-6-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;error_code&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-16&#34; name=&#34;__codelineno-6-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cerr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;acl Error, code: &amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;error_code&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot; at &amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__FILE__&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;:&amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;\
&lt;a id=&#34;__codelineno-6-17&#34; name=&#34;__codelineno-6-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__LINE__&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;endl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-18&#34; name=&#34;__codelineno-6-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-19&#34; name=&#34;__codelineno-6-19&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-20&#34; name=&#34;__codelineno-6-20&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;error_code&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;aclrtMapMem&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;d_mem&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p_memHandle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-21&#34; name=&#34;__codelineno-6-21&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;error_code&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-22&#34; name=&#34;__codelineno-6-22&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cerr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;acl Error, code: &amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;error_code&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot; at &amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__FILE__&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;:&amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;\
&lt;a id=&#34;__codelineno-6-23&#34; name=&#34;__codelineno-6-23&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__LINE__&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;endl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-24&#34; name=&#34;__codelineno-6-24&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-25&#34; name=&#34;__codelineno-6-25&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-26&#34; name=&#34;__codelineno-6-26&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-27&#34; name=&#34;__codelineno-6-27&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-6-28&#34; name=&#34;__codelineno-6-28&#34;&gt;&lt;/a&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;unmap_and_release&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;long&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;long&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;device&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;ssize_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-29&#34; name=&#34;__codelineno-6-29&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                       &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;d_mem&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-30&#34; name=&#34;__codelineno-6-30&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                       &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;aclrtDrvMemHandle&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p_memHandle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-31&#34; name=&#34;__codelineno-6-31&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// std::cout &amp;lt;&amp;lt; &amp;quot;unmap_and_release: device=&amp;quot; &amp;lt;&amp;lt; device &amp;lt;&amp;lt; &amp;quot;, size=&amp;quot; &amp;lt;&amp;lt; size &amp;lt;&amp;lt;&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-32&#34; name=&#34;__codelineno-6-32&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// &amp;quot;, d_mem=&amp;quot; &amp;lt;&amp;lt; d_mem &amp;lt;&amp;lt; &amp;quot;, p_memHandle=&amp;quot; &amp;lt;&amp;lt; p_memHandle &amp;lt;&amp;lt; std::endl;&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-33&#34; name=&#34;__codelineno-6-33&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ensure_context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;device&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-34&#34; name=&#34;__codelineno-6-34&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;aclError&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;error_code&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;aclrtUnmapMem&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;d_mem&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-35&#34; name=&#34;__codelineno-6-35&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;error_code&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-36&#34; name=&#34;__codelineno-6-36&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cerr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;acl Error, code: &amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;error_code&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot; at &amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__FILE__&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;:&amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;\
&lt;a id=&#34;__codelineno-6-37&#34; name=&#34;__codelineno-6-37&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__LINE__&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;endl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-38&#34; name=&#34;__codelineno-6-38&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-39&#34; name=&#34;__codelineno-6-39&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-40&#34; name=&#34;__codelineno-6-40&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;error_code&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;aclrtFreePhysical&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p_memHandle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-41&#34; name=&#34;__codelineno-6-41&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;error_code&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-42&#34; name=&#34;__codelineno-6-42&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cerr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;acl Error, code: &amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;error_code&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot; at &amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__FILE__&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;:&amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;\
&lt;a id=&#34;__codelineno-6-43&#34; name=&#34;__codelineno-6-43&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__LINE__&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;endl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-44&#34; name=&#34;__codelineno-6-44&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-45&#34; name=&#34;__codelineno-6-45&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-46&#34; name=&#34;__codelineno-6-46&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;é€šè¿‡ pytorch æ’ä»¶æ³¨å†Œäº† NPU çš„è‡ªå®šä¹‰ my_malloc å’Œ my_free å‡½æ•°ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Python&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-7-1&#34; name=&#34;__codelineno-7-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;get_pluggable_allocator&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-2&#34; name=&#34;__codelineno-7-2&#34;&gt;&lt;/a&gt;    &lt;span class=&#34;n&#34;&gt;python_malloc_fn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Callable&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;tuple&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]],&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;None&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-3&#34; name=&#34;__codelineno-7-3&#34;&gt;&lt;/a&gt;    &lt;span class=&#34;n&#34;&gt;python_free_func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Callable&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;tuple&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]]&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-4&#34; name=&#34;__codelineno-7-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;torch&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;npu&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;memory&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NPUPluggableAllocator&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-5&#34; name=&#34;__codelineno-7-5&#34;&gt;&lt;/a&gt;    &lt;span class=&#34;n&#34;&gt;init_module&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;python_malloc_fn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;python_free_func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-6&#34; name=&#34;__codelineno-7-6&#34;&gt;&lt;/a&gt;    &lt;span class=&#34;n&#34;&gt;new_alloc&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;torch&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;npu&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;memory&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NPUPluggableAllocator&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;lib_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;my_malloc&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-7&#34; name=&#34;__codelineno-7-7&#34;&gt;&lt;/a&gt;                                                       &lt;span class=&#34;s1&#34;&gt;&amp;#39;my_free&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-8&#34; name=&#34;__codelineno-7-8&#34;&gt;&lt;/a&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;new_alloc&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-9&#34; name=&#34;__codelineno-7-9&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-7-10&#34; name=&#34;__codelineno-7-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;nd&#34;&gt;@contextmanager&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-11&#34; name=&#34;__codelineno-7-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;use_memory_pool_with_allocator&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-12&#34; name=&#34;__codelineno-7-12&#34;&gt;&lt;/a&gt;        &lt;span class=&#34;n&#34;&gt;python_malloc_fn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Callable&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;tuple&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]],&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;None&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-13&#34; name=&#34;__codelineno-7-13&#34;&gt;&lt;/a&gt;        &lt;span class=&#34;n&#34;&gt;python_free_func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Callable&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;tuple&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]]):&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-14&#34; name=&#34;__codelineno-7-14&#34;&gt;&lt;/a&gt;    &lt;span class=&#34;n&#34;&gt;new_alloc&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;get_pluggable_allocator&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;python_malloc_fn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;python_free_func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-15&#34; name=&#34;__codelineno-7-15&#34;&gt;&lt;/a&gt;    &lt;span class=&#34;n&#34;&gt;mem_pool&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;torch&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;npu&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;memory&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MemPool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;new_alloc&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_allocator&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-16&#34; name=&#34;__codelineno-7-16&#34;&gt;&lt;/a&gt;    &lt;span class=&#34;k&#34;&gt;with&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;torch&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;npu&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;memory&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;use_mem_pool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mem_pool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-17&#34; name=&#34;__codelineno-7-17&#34;&gt;&lt;/a&gt;        &lt;span class=&#34;k&#34;&gt;yield&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mem_pool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;new_alloc&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;torch_memory_saver çš„å®ç°å’Œ vllm ä¸­ sleep_mode ç”¨åˆ°çš„ CuMemAllocator å®ç°æ˜¯ä¸€æ ·çš„ï¼Œé™¤æ­¤ä¹‹å¤– vllm é’ˆå¯¹ npu å®ç°äº† CaMemAllocatorï¼Œè°ƒç”¨çš„ aclrt å®ç°ã€‚
vllm çš„ sleep_mode é™¤äº†å°† gpu å†…å­˜é‡Šæ”¾ï¼Œè¿˜å®ç°äº†æ ¹æ® offload_tags offload åˆ° cpuï¼ˆä¸»è¦æ˜¯æƒé‡ï¼‰ã€‚&lt;/p&gt;
&lt;style&gt;
.related-posts {
  margin-top: 1.5rem;
  padding-top: 0.75rem;
  border-top: 1px solid rgba(0,0,0,0.1);
  max-height: none !important; /* é˜²æ­¢Safarié”™è¯¯è®¡ç®—é«˜åº¦ */
  overflow: visible !important; /* é˜²æ­¢å†…å®¹è¢«æˆªæ–­ */
}
.related-posts h3 {
  margin-top: 0;
  margin-bottom: 0.5rem;
  font-size: 1.2rem;
  font-weight: 500;
  line-height: 1.3;
}
.related-posts ul {
  margin: 0 0 0.5rem 0 !important; /* å¼ºåˆ¶è¦†ç›–å¯èƒ½çš„å†²çªæ ·å¼ */
  padding-left: 1.5rem;
  list-style-position: outside;
}
.related-posts li {
  margin-bottom: 0.25rem;
  line-height: 1.4;
}
/* æš—è‰²æ¨¡å¼é€‚é… */
[data-md-color-scheme=&#34;slate&#34;] .related-posts {
  border-top-color: rgba(255,255,255,0.1);
}
/* Safariç‰¹å®šä¿®å¤ */
@supports (-webkit-hyphens:none) {
  .related-posts {
    display: block;
    position: relative;
    height: auto !important;
  }
  .related-posts ul {
    position: static;
  }
}
&lt;/style&gt;
&lt;div class=&#34;related-posts&#34;&gt;
&lt;h3&gt;ğŸ“š ç›¸å…³æ–‡ç« æ¨è&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/gpuçš„pin_memoryæ˜¯ä»€ä¹ˆ/&#34; target=&#34;_blank&#34;&gt;GPUçš„pin_memoryæ˜¯ä»€ä¹ˆï¼Ÿ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/helix-gptå¦‚ä½•å®ç°ai-codeä»¥åŠå¦‚ä½•è°ƒè¯•/&#34; target=&#34;_blank&#34;&gt;helix-gptå¦‚ä½•å®ç°AI codeä»¥åŠå¦‚ä½•è°ƒè¯•?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/cä½¿ç”¨abseil-cppé‡åˆ°çš„å°é—®é¢˜/&#34; target=&#34;_blank&#34;&gt;C++ä½¿ç”¨abseil-cppé‡åˆ°çš„å°é—®é¢˜&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/mit-ç»å…¸è®²åº§how-to-speak---patrick-winston/&#34; target=&#34;_blank&#34;&gt;MIT ç»å…¸è®²åº§ï¼šHow to Speak - Patrick Winston&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/300è¡Œå®ç°ä¸€ä¸ªboundedspscqueue/&#34; target=&#34;_blank&#34;&gt;300è¡Œå®ç°ä¸€ä¸ªBoundedSPSCQueue&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;</description>
      <link>https://github.com/KenForever1/blog/vllm%E6%8E%A8%E7%90%86%E6%A1%86%E6%9E%B6%E4%B8%AD%E7%9A%84sleep_mode%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0/</link>
      <pubDate>Sun, 06 Jul 2025 00:00:00 +0000</pubDate>
      <source url="https://github.com/KenForever1/feed_rss_updated.xml">KenForever1</source>
      
      <guid isPermaLink="true">https://github.com/KenForever1/blog/vllm%E6%8E%A8%E7%90%86%E6%A1%86%E6%9E%B6%E4%B8%AD%E7%9A%84sleep_mode%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0/</guid>
      
    </item>
    
    <item>
      <title>ä¼˜é›…å¼€å‘ç¯‡ï¼šgit worktreeå¹¶è¡Œåˆ†æ”¯å¼€å‘ï¼ŒåŠä¸€ä¸ªæµ‹é‡äºŒè¿›ç¨‹è†¨èƒ€çš„rustå·¥å…·åº”ç”¨</title>
      
      
        
      <author>KenForever1</author>
        
      
      
      
      <description>&lt;h2 id=&#34;git-worktree-æ˜¯ä»€ä¹ˆ&#34;&gt;git worktree æ˜¯ä»€ä¹ˆï¼Ÿ&lt;a class=&#34;headerlink&#34; href=&#34;#git-worktree-æ˜¯ä»€ä¹ˆ&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Git Worktree æ˜¯ Git æä¾›çš„ä¸€ä¸ªå¼ºå¤§åŠŸèƒ½ï¼Œå…è®¸ä½ åœ¨åŒä¸€ä¸ªä»“åº“ä¸­&lt;strong&gt;åˆ›å»ºå¤šä¸ªç‹¬ç«‹çš„å·¥ä½œç›®å½•&lt;/strong&gt;ï¼Œæ¯ä¸ªç›®å½•å¯ä»¥å…³è”ä¸åŒçš„åˆ†æ”¯ï¼ˆæˆ–è€… commitï¼‰ï¼Œä»è€Œå®ç°å¹¶è¡Œå¼€å‘è€Œ&lt;strong&gt;æ— éœ€é¢‘ç¹åˆ‡æ¢åˆ†æ”¯æˆ–ä¾èµ– git stash æš‚å­˜ä»£ç  â€Œ&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;!-- more --&gt;

&lt;p&gt;&lt;img alt=&#34;&#34; src=&#34;https://raw.githubusercontent.com/KenForever1/CDN/main/git-worktree.png&#34; /&gt;&lt;/p&gt;
&lt;h3 id=&#34;å¯ä»¥è§£å†³ä»€ä¹ˆé—®é¢˜&#34;&gt;å¯ä»¥è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ&lt;a class=&#34;headerlink&#34; href=&#34;#å¯ä»¥è§£å†³ä»€ä¹ˆé—®é¢˜&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;æ²¡æœ‰ä½¿ç”¨ worktree çš„åŒå­¦ï¼Œå‡è®¾åœ¨ dev åˆ†æ”¯ä¸Šå¼€å‘ï¼Œå¼€å‘äº†ä¸€åŠï¼Œéœ€è¦åˆ‡æ¢åˆ° release åˆ†æ”¯ä¿®å¤ bugï¼Œé‚£ä¹ˆéœ€è¦ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä¿å­˜å½“å‰åˆ†æ”¯çš„çŠ¶æ€ï¼Œæ¯”å¦‚ git commit æˆ–è€… git stashã€‚&lt;/li&gt;
&lt;li&gt;åˆ‡æ¢åˆ° release åˆ†æ”¯ï¼Œåˆ‡ä¸€ä¸ª hotfix åˆ†æ”¯ï¼Œä¿®å¤ bugï¼Œæäº¤ã€‚&lt;/li&gt;
&lt;li&gt;åˆ‡æ¢å›æ¥ç»§ç»­å¼€å‘ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æˆ–è€…ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;git clone repo åˆ°å¦ä¸€ä¸ªç›®å½•ï¼Œä¿®å¤ bugã€‚&lt;/li&gt;
&lt;li&gt;åˆ‡æ¢å›åŸç›®å½•ï¼Œç»§ç»­å¼€å‘ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç¼ºç‚¹å°±æ˜¯ï¼š&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€ï¼Œè¿™æ ·å¾ˆéº»çƒ¦ï¼Œåˆ‡æ¥åˆ‡å»ã€‚&lt;/p&gt;
&lt;p&gt;ç¬¬äºŒï¼Œå åœ°æ–¹ï¼Œå¤šä¸ª repo æ‹·è´å ç£ç›˜ç©ºé—´ã€‚&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸‰ï¼Œå¦‚æœ 2 ä¸ªç‰ˆæœ¬åˆ†æ”¯çš„å·¥ç¨‹ä¾èµ–ç¯å¢ƒå·®å¼‚è¾ƒå¤§ï¼Œå¯¼è‡´æ¯æ¬¡åˆ‡æ¢åˆ†æ”¯åï¼Œå·¥ç¨‹éƒ½éƒ½éœ€è¦é‡æ–°å®‰è£…ä¾èµ–ä»¥åŠåšå…¨é‡ç¼–è¯‘â€”â€”è¿™æ— ç–‘å¢åŠ äº†ç¼–è¯‘æ—¶é—´ï¼Œå¯¼è‡´å¼€å‘æ•ˆç‡ä¸‹é™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æœ‰ä»€ä¹ˆä¼˜åŠ¿&#34;&gt;æœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ&lt;a class=&#34;headerlink&#34; href=&#34;#æœ‰ä»€ä¹ˆä¼˜åŠ¿&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;é’ˆå¯¹è¿™ä¸ªç—›ç‚¹ï¼Œ Git Worktree å‡ºç°äº†, å®ƒå…·æœ‰ä¸‹é¢çš„ä¼˜åŠ¿ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä¸éœ€è¦æäº¤æˆ–è€…æš‚å­˜ä»£ç ï¼Œå°±å¯ä»¥åˆ‡æ¢åˆ†æ”¯ã€‚é¢å¯¹å¤šä¸ªåˆ†æ”¯çš„ä»£ç ä¸éœ€è¦é¢‘ç¹åˆ‡æ¢ã€‚&lt;/li&gt;
&lt;li&gt;æ¯ä¸ªå·¥ä½œåŒºå…±äº«åŒä¸€ä¸ªç‰ˆæœ¬ä»“åº“ä¿¡æ¯ï¼Œæ›´èŠ‚çœç¡¬ç›˜ç©ºé—´ã€‚&lt;/li&gt;
&lt;li&gt;å„ä¸ªå·¥ä½œåŒºä¹‹é—´çš„æ›´æ–°åŒæ­¥æ›´å¿«ï¼Œgit clone æ–¹å¼ä¸‹ï¼ŒA å·¥ä½œåŒºå’Œ B å·¥ä½œåŒºéœ€è¦ A commit-&amp;gt; A push -&amp;gt; B pullã€‚git worktree æ–¹å¼ä¸‹ï¼ŒA å·¥ä½œåŒºåªè¦æœ¬åœ°æäº¤æ›´æ–°åï¼Œå…¶ä»–å·¥ä½œåŒºå°±èƒ½ç«‹å³æ”¶åˆ°ï¼ˆå› ä¸ºå®ƒä»¬å…±äº«åŒä¸€ä¸ªç‰ˆæœ¬ä»“åº“ï¼‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;é€šè¿‡ä¸€ä¸ªä¾‹å­å­¦ä¹ ä½¿ç”¨-git-worktree&#34;&gt;é€šè¿‡ä¸€ä¸ªä¾‹å­å­¦ä¹ ä½¿ç”¨ git worktree&lt;a class=&#34;headerlink&#34; href=&#34;#é€šè¿‡ä¸€ä¸ªä¾‹å­å­¦ä¹ ä½¿ç”¨-git-worktree&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;h3 id=&#34;git-worktreeå¦‚ä½•ä½¿ç”¨&#34;&gt;git worktreeå¦‚ä½•ä½¿ç”¨&lt;a class=&#34;headerlink&#34; href=&#34;#git-worktreeå¦‚ä½•ä½¿ç”¨&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;å‡è®¾æˆ‘ä»¬æœ‰ä¸ª helloworld çš„ä»“åº“ï¼šhttps://github.com/KenForever1/helloworldã€‚&lt;/p&gt;
&lt;p&gt;å½“å‰å·¥ä½œåœ¨ dev åˆ†æ”¯ä¸Šï¼Œæƒ³è¦åœ¨ release åˆ†æ”¯ä¿®å¤ bugï¼Œé‚£ä¹ˆå°±å¯ä»¥ä½¿ç”¨ git worktreeï¼Œè€Œæ— éœ€åˆ‡æ¢åˆ†æ”¯ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºreleaseåˆ†æ”¯å¢åŠ ä¸€ä¸ªworktreeï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Bash&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-0-1&#34; name=&#34;__codelineno-0-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;/workspace/helloworld
&lt;a id=&#34;__codelineno-0-2&#34; name=&#34;__codelineno-0-2&#34;&gt;&lt;/a&gt;git&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;worktree&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;add&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;../release-branch&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;release
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;è¿›å…¥releaseåˆ†æ”¯çš„worktreeç›®å½•ï¼Œä¿®å¤bug:
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Bash&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-1-1&#34; name=&#34;__codelineno-1-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;../release-branch
&lt;a id=&#34;__codelineno-1-2&#34; name=&#34;__codelineno-1-2&#34;&gt;&lt;/a&gt;//&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;fix&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;your&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;bug&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;here
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/p&gt;
&lt;p&gt;æŸ¥çœ‹å½“å‰ worktree åˆ—è¡¨ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Bash&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-2-1&#34; name=&#34;__codelineno-2-1&#34;&gt;&lt;/a&gt;git&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;worktree&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;list
&lt;a id=&#34;__codelineno-2-2&#34; name=&#34;__codelineno-2-2&#34;&gt;&lt;/a&gt;/workspace/helloworld&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;main&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-3&#34; name=&#34;__codelineno-2-3&#34;&gt;&lt;/a&gt;/workspace/release-branch&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;release-branch&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;åˆ‡æ¢å› dev åˆ†æ”¯ï¼Œåˆ é™¤ release åˆ†æ”¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Bash&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-3-1&#34; name=&#34;__codelineno-3-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;../dev-branch
&lt;a id=&#34;__codelineno-3-2&#34; name=&#34;__codelineno-3-2&#34;&gt;&lt;/a&gt;git&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;worktree&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;remove&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;release-branch
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;h3 id=&#34;å…¶ä»–å‘½ä»¤&#34;&gt;å…¶ä»–å‘½ä»¤&lt;a class=&#34;headerlink&#34; href=&#34;#å…¶ä»–å‘½ä»¤&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;åˆ é™¤é™¤äº† remove å‘½ä»¤ï¼Œè¿˜å¯ä»¥æ‰‹åŠ¨åˆ é™¤ç›®å½•ï¼Œç„¶å git worktree ä¼šè‡ªåŠ¨æ¸…ç†&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Bash&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-4-1&#34; name=&#34;__codelineno-4-1&#34;&gt;&lt;/a&gt;rm&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-rf&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;../release-branch
&lt;a id=&#34;__codelineno-4-2&#34; name=&#34;__codelineno-4-2&#34;&gt;&lt;/a&gt;git&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;worktree&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;prune
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;ol&gt;
&lt;li&gt;é”å®šä¸è§£é” â€Œ&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Bash&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-5-1&#34; name=&#34;__codelineno-5-1&#34;&gt;&lt;/a&gt;git&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;worktree&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;lock&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;releas-branch&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;--reason&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;ç»´æŠ¤ä¸­&amp;quot;&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-2&#34; name=&#34;__codelineno-5-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;# è§£é”â€Œ&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-3&#34; name=&#34;__codelineno-5-3&#34;&gt;&lt;/a&gt;git&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;worktree&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;unlock&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;releas-branch
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;é”å®šäº†ä»¥åï¼Œgit worktree remove ä¼šæŠ¥é”™ï¼Œéœ€è¦å…ˆè§£é”ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä¸€ä¸ªæµ‹é‡äºŒè¿›åˆ¶è†¨èƒ€çš„-rust-å°å·¥å…·&#34;&gt;ä¸€ä¸ªæµ‹é‡äºŒè¿›åˆ¶è†¨èƒ€çš„ rust å°å·¥å…·&lt;a class=&#34;headerlink&#34; href=&#34;#ä¸€ä¸ªæµ‹é‡äºŒè¿›åˆ¶è†¨èƒ€çš„-rust-å°å·¥å…·&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;h3 id=&#34;è®¾è®¡åŸç†&#34;&gt;è®¾è®¡åŸç†&lt;a class=&#34;headerlink&#34; href=&#34;#è®¾è®¡åŸç†&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;ä¸‹é¢ä»‹ç»çš„ä¸€ä¸ª rust å·¥å…·æµ‹é‡äºŒè¿›åˆ¶è†¨èƒ€ï¼ˆMeasures bloatï¼‰çš„å°å·¥å…·ï¼š
&lt;a href=&#34;https://github.com/facet-rs/limpid/blob/HEAD/limpid/src/main.rs&#34; title=&#34;facet-rs/limpid&#34;&gt;facet-rs/limpid&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªæ˜¯å½“å‰ HEADï¼ˆç›®å‰å¼€å‘çš„æ–°ç‰¹æ€§ï¼‰ï¼Œä¸€ä¸ªæ˜¯ main åˆ†æ”¯ï¼ˆå·²ç»å‘å¸ƒçš„ç‰ˆæœ¬ï¼‰ã€‚ç›®çš„æ˜¯æƒ³å¯¹æ¯”åˆ†æä¸¤ä¸ªç›®å½•ä¸‹çš„ç¼–è¯‘æ„å»ºè€—æ—¶ï¼ŒäºŒè¿›åˆ¶å¤§å°å·®å¼‚ç­‰ã€‚
ä¸ºäº†å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œé’ˆå¯¹ HEAD å¼€å‘ç›®å½•ï¼Œåˆ›å»ºäº†ä¸€ä¸ª worktree ç›®å½•ï¼Œå‘½åä¸º mainã€‚å¯¹æ¯”åˆ†æå®Œæˆåï¼Œåˆ é™¤ worktree ç›®å½•ã€‚&lt;/p&gt;
&lt;p&gt;å› ä¸ºå¯¹æ¯”çš„ä»“åº“&lt;a href=&#34;https://github.com/facet-rs/facet&#34; title=&#34;facet-rs/facet&#34;&gt;facet-rs/facet&lt;/a&gt;ï¼Œæ˜¯ä¸€ä¸ª rust åºåˆ—åŒ–åº“ crateï¼Œå¯ä»¥ç†è§£å’Œ serde å·®ä¸å¤šã€‚
åœ¨ limpid å·¥å…·ä¸­ï¼ŒåŒ…æ‹¬äº†åˆ›å»º worktree å’Œç¼–è¯‘ç»Ÿè®¡ä¿¡æ¯çš„ä»£ç ï¼Œå¦ä¸€ä¸ªå°±æ˜¯ä½¿ç”¨ facet åº“çš„ä¾‹å­ï¼Œé‡‡ç”¨ç›¸å¯¹ç›®å½•å¼•ç”¨ facetã€‚æ‰€ä»¥åªè¦ä¿æŒå±‚çº§ä¸€è‡´ï¼Œå°±å¯ä»¥ä½¿ç”¨ä¸åŒåˆ†æ”¯çš„ facet åº“ã€‚&lt;/p&gt;
&lt;p&gt;å·¥ä½œç›®å½•çš„ç»“æ„å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Bash&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-6-1&#34; name=&#34;__codelineno-6-1&#34;&gt;&lt;/a&gt;facet/&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;# facetåº“HEADåˆ†æ”¯&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-2&#34; name=&#34;__codelineno-6-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;facet/
&lt;a id=&#34;__codelineno-6-3&#34; name=&#34;__codelineno-6-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;Cargo.toml
&lt;a id=&#34;__codelineno-6-4&#34; name=&#34;__codelineno-6-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;facet-core/
&lt;a id=&#34;__codelineno-6-5&#34; name=&#34;__codelineno-6-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;Cargo.toml
&lt;a id=&#34;__codelineno-6-6&#34; name=&#34;__codelineno-6-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;facet-reflect/
&lt;a id=&#34;__codelineno-6-7&#34; name=&#34;__codelineno-6-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;Cargo.toml
&lt;a id=&#34;__codelineno-6-8&#34; name=&#34;__codelineno-6-8&#34;&gt;&lt;/a&gt;limpid/&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;# limpidå·¥å…·&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-9&#34; name=&#34;__codelineno-6-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;limpid/&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;# limpidå·¥å…·&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-10&#34; name=&#34;__codelineno-6-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;Cargo.toml&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;# this tool&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-11&#34; name=&#34;__codelineno-6-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;kitchensink/&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;# ä½¿ç”¨facetåº“çš„ä¾‹å­ï¼Œå¯ä»¥ç¼–è¯‘æˆäºŒè¿›åˆ¶ç¨‹åº&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-12&#34; name=&#34;__codelineno-6-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;ks-facet/
&lt;a id=&#34;__codelineno-6-13&#34; name=&#34;__codelineno-6-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;Cargo.toml&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;# ç›¸å¯¹ç›®å½•æ–¹å¼ï¼Œå¼•ç”¨../facetåº“&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-14&#34; name=&#34;__codelineno-6-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;ks-serde/
&lt;a id=&#34;__codelineno-6-15&#34; name=&#34;__codelineno-6-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;Cargo.toml
&lt;a id=&#34;__codelineno-6-16&#34; name=&#34;__codelineno-6-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;ks-facet-json-read/
&lt;a id=&#34;__codelineno-6-17&#34; name=&#34;__codelineno-6-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;# etc.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;å¯¹æ¯”çš„ main worktree ç›®å½•ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Bash&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-7-1&#34; name=&#34;__codelineno-7-1&#34;&gt;&lt;/a&gt;/tmp/
&lt;a id=&#34;__codelineno-7-2&#34; name=&#34;__codelineno-7-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;limpid-main-workspace/
&lt;a id=&#34;__codelineno-7-3&#34; name=&#34;__codelineno-7-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;facet/&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;# worktree from facet repo at main branch&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-4&#34; name=&#34;__codelineno-7-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;facet/
&lt;a id=&#34;__codelineno-7-5&#34; name=&#34;__codelineno-7-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;facet-core/
&lt;a id=&#34;__codelineno-7-6&#34; name=&#34;__codelineno-7-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;facet-reflect/
&lt;a id=&#34;__codelineno-7-7&#34; name=&#34;__codelineno-7-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;limpid/&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;# worktree from limpid repo at current HEAD&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-8&#34; name=&#34;__codelineno-7-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;limpid/
&lt;a id=&#34;__codelineno-7-9&#34; name=&#34;__codelineno-7-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;kitchensink/
&lt;a id=&#34;__codelineno-7-10&#34; name=&#34;__codelineno-7-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;ks-facet/
&lt;a id=&#34;__codelineno-7-11&#34; name=&#34;__codelineno-7-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;ks-serde/
&lt;a id=&#34;__codelineno-7-12&#34; name=&#34;__codelineno-7-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;ks-facet-json-read/
&lt;a id=&#34;__codelineno-7-13&#34; name=&#34;__codelineno-7-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;# etc.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;é€šè¿‡ï¼Œè¿™ä¸ªå·¥å…·æˆ‘ä»¬å¯ä»¥å­¦ä¹  worktree çš„ç”¨æ³•ï¼Œä¹Ÿå¯ä»¥å­¦ä¹ åˆ°ä¸€äº›å·¥å…·çš„è®¾è®¡ç†å¿µã€‚ä¸è¯­è¨€æ— å…³ï¼Œä½ ä¹Ÿå¯ä»¥ç”¨ python æˆ– c++ä»¥åŠå…¶ä»–è¯­è¨€å®ç°ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ‚è°ˆ&#34;&gt;æ‚è°ˆ&lt;a class=&#34;headerlink&#34; href=&#34;#æ‚è°ˆ&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;è¿™ä¸ªä¾‹å­å¦‚æœä½ æƒ³å­¦ä¹  rust ä¹Ÿå¯ä»¥å‚è€ƒï¼Œé‡Œé¢æœ‰å¾ˆå¤šå¸¸ç”¨çš„ä¸é”™çš„ crate ä½¿ç”¨ï¼Œæ¯”å¦‚ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;Bash&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-5&#34;&gt;5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-6&#34;&gt;6&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-8-1&#34; name=&#34;__codelineno-8-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;nv&#34;&gt;anyhow&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;1.0&amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;# ç”¨äºé”™è¯¯å¤„ç†&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-2&#34; name=&#34;__codelineno-8-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;nv&#34;&gt;substance&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;0.7.1&amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;# https://github.com/fasterthanlime/substance.gitï¼Œæ£€æŸ¥äºŒè¿›åˆ¶æ–‡ä»¶çš„ç¬¦å·ã€åˆ†æäºŒè¿›åˆ¶æ–‡ä»¶çš„å¤§å°æ„æˆ&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-3&#34; name=&#34;__codelineno-8-3&#34;&gt;&lt;/a&gt;owo-colors&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;4.0&amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;# ç”¨äºå‘½ä»¤è¡Œè¾“å‡ºå½©è‰²å­—&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-4&#34; name=&#34;__codelineno-8-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;nv&#34;&gt;indicatif&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;0.17&amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;# è¿›åº¦æ¡&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-5&#34; name=&#34;__codelineno-8-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;nv&#34;&gt;camino&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;1.1.10&amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;# Utf8è·¯å¾„æ”¯æŒï¼ŒPathå’ŒPathBufæ›´å¥½çš„åŒ…è£…&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-6&#34; name=&#34;__codelineno-8-6&#34;&gt;&lt;/a&gt;pico-args&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;0.5.0&amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;# å‘½ä»¤è¡Œå‚æ•°è§£æï¼Œæ¯”clapæ›´è½»é‡&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;é¡ºä¾¿æä¸€å¥ï¼Œé’ˆå¯¹åˆšåˆšæåˆ°çš„ substance rust å·¥å…·ï¼Œgoogle ä¹Ÿæœ‰ä¸ª c++å·¥å…·&lt;a href=&#34;https://github.com/google/bloaty&#34; title=&#34;Bloaty&#34;&gt;Bloaty&lt;/a&gt;ã€‚å¯ä»¥è§£å†³æ˜¯ä»€ä¹ˆè®©ä½ çš„äºŒè¿›åˆ¶æ–‡ä»¶å˜å¾—è¿™ä¹ˆå¤§ï¼Ÿ&lt;strong&gt;Bloaty ä¼šä¸ºä½ å±•ç¤ºäºŒè¿›åˆ¶æ–‡ä»¶çš„å¤§å°åˆ†å¸ƒ&lt;/strong&gt;ï¼Œè¿™æ ·ä½ å°±èƒ½äº†è§£å…¶ä¸­æ˜¯ä»€ä¹ˆå ç”¨äº†ç©ºé—´ã€‚&lt;/p&gt;
&lt;style&gt;
.related-posts {
  margin-top: 1.5rem;
  padding-top: 0.75rem;
  border-top: 1px solid rgba(0,0,0,0.1);
  max-height: none !important; /* é˜²æ­¢Safarié”™è¯¯è®¡ç®—é«˜åº¦ */
  overflow: visible !important; /* é˜²æ­¢å†…å®¹è¢«æˆªæ–­ */
}
.related-posts h3 {
  margin-top: 0;
  margin-bottom: 0.5rem;
  font-size: 1.2rem;
  font-weight: 500;
  line-height: 1.3;
}
.related-posts ul {
  margin: 0 0 0.5rem 0 !important; /* å¼ºåˆ¶è¦†ç›–å¯èƒ½çš„å†²çªæ ·å¼ */
  padding-left: 1.5rem;
  list-style-position: outside;
}
.related-posts li {
  margin-bottom: 0.25rem;
  line-height: 1.4;
}
/* æš—è‰²æ¨¡å¼é€‚é… */
[data-md-color-scheme=&#34;slate&#34;] .related-posts {
  border-top-color: rgba(255,255,255,0.1);
}
/* Safariç‰¹å®šä¿®å¤ */
@supports (-webkit-hyphens:none) {
  .related-posts {
    display: block;
    position: relative;
    height: auto !important;
  }
  .related-posts ul {
    position: static;
  }
}
&lt;/style&gt;
&lt;div class=&#34;related-posts&#34;&gt;
&lt;h3&gt;ğŸ“š ç›¸å…³æ–‡ç« æ¨è&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/git_sparse_checkoutæ£€å‡ºç‰¹å®šæ–‡ä»¶æˆ–ç›®å½•/&#34; target=&#34;_blank&#34;&gt;git_sparse_checkoutæ£€å‡ºç‰¹å®šæ–‡ä»¶æˆ–ç›®å½•&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/cé™æ€åº“å’ŒåŠ¨æ€åº“å…¨å±€å˜é‡åˆå§‹åŒ–æœ‰ä½•ä¸åŒ/&#34; target=&#34;_blank&#34;&gt;c++é™æ€åº“å’ŒåŠ¨æ€åº“å…¨å±€å˜é‡åˆå§‹åŒ–æœ‰ä½•ä¸åŒï¼Ÿ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/c20å¦‚ä½•å®ç°ä¸€ä¸ªåŸºäºå±æ€§æµ‹è¯•çš„quickcheck-cppåº“/&#34; target=&#34;_blank&#34;&gt;C++20å¦‚ä½•å®ç°ä¸€ä¸ªåŸºäºå±æ€§æµ‹è¯•çš„quickcheck-cppåº“&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/helix-gptå¦‚ä½•å®ç°ai-codeä»¥åŠå¦‚ä½•è°ƒè¯•/&#34; target=&#34;_blank&#34;&gt;helix-gptå¦‚ä½•å®ç°AI codeä»¥åŠå¦‚ä½•è°ƒè¯•?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/mit-ç»å…¸è®²åº§how-to-speak---patrick-winston/&#34; target=&#34;_blank&#34;&gt;MIT ç»å…¸è®²åº§ï¼šHow to Speak - Patrick Winston&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;</description>
      <link>https://github.com/KenForever1/blog/%E4%BC%98%E9%9B%85%E5%BC%80%E5%8F%91%E7%AF%87git-worktree%E5%B9%B6%E8%A1%8C%E5%88%86%E6%94%AF%E5%BC%80%E5%8F%91%E5%8F%8A%E4%B8%80%E4%B8%AA%E6%B5%8B%E9%87%8F%E4%BA%8C%E8%BF%9B%E7%A8%8B%E8%86%A8%E8%83%80%E7%9A%84rust%E5%B7%A5%E5%85%B7%E5%BA%94%E7%94%A8/</link>
      <pubDate>Tue, 01 Jul 2025 00:00:00 +0000</pubDate>
      <source url="https://github.com/KenForever1/feed_rss_updated.xml">KenForever1</source>
      
      <guid isPermaLink="true">https://github.com/KenForever1/blog/%E4%BC%98%E9%9B%85%E5%BC%80%E5%8F%91%E7%AF%87git-worktree%E5%B9%B6%E8%A1%8C%E5%88%86%E6%94%AF%E5%BC%80%E5%8F%91%E5%8F%8A%E4%B8%80%E4%B8%AA%E6%B5%8B%E9%87%8F%E4%BA%8C%E8%BF%9B%E7%A8%8B%E8%86%A8%E8%83%80%E7%9A%84rust%E5%B7%A5%E5%85%B7%E5%BA%94%E7%94%A8/</guid>
      
    </item>
    
    <item>
      <title>C++æŠ€æ³•:æ¨¡æ¿å…ƒç¼–ç¨‹ç¼–è¯‘æœŸè·å–ç±»æˆå‘˜æ•°é‡</title>
      
      
        
      <author>KenForever1</author>
        
      
      
      
      <description>&lt;p&gt;C++åå°„ä¸­ï¼Œæœ‰ä¸ªå¿…è¦çš„å°±æ˜¯éœ€è¦è·å–ä¸€ä¸ªç±»çš„æˆå‘˜ä¸ªæ•°ï¼Œç„¶åå°±å¯ä»¥æ ¹æ®ä¸ªæ•°ï¼Œå°†ç±»çš„æˆå‘˜é€šè¿‡std::tieè½¬æ¢æˆtupleã€‚ç»§è€Œå¯ä»¥å®ç°equalã€hashã€serializeç­‰åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;!-- more --&gt;

&lt;h3 id=&#34;åŸºæœ¬åŸç†&#34;&gt;åŸºæœ¬åŸç†&lt;a class=&#34;headerlink&#34; href=&#34;#åŸºæœ¬åŸç†&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;æœ¬æ–‡ä»‹ç»åˆ†æå¦‚ä½•è·å–ä¸€ä¸ªç±»çš„æˆå‘˜ä¸ªæ•°çš„æ–¹æ³•ï¼Œé€šè¿‡æ¨¡æ¿å…ƒç¼–ç¨‹å®ç°ï¼ŒåŸºæœ¬åŸç†ï¼š
+ &lt;strong&gt;ç¼–è¯‘æ—¶è®¡ç®—&lt;/strong&gt;ç»“æ„ä½“æˆå‘˜æ•°é‡&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨&lt;strong&gt;SFINAE&lt;/strong&gt;æŠ€æœ¯ï¼Œé€šè¿‡&lt;strong&gt;é€’å½’å®ä¾‹åŒ–arity_implæ¨¡æ¿æ¥æ¢æµ‹&lt;/strong&gt;ç»“æ„ä½“èƒ½æ¥å—çš„æœ€å¤§å‚æ•°æ•°é‡&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é€šè¿‡ä¸€ä¸ªinstanceç±»æä¾›&lt;strong&gt;åˆ°ä»»æ„ç±»å‹çš„éšå¼è½¬æ¢&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æ ¸å¿ƒä»£ç å®ç°&#34;&gt;æ ¸å¿ƒä»£ç å®ç°&lt;a class=&#34;headerlink&#34; href=&#34;#æ ¸å¿ƒä»£ç å®ç°&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-21&#34;&gt;21&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-22&#34;&gt;22&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-23&#34;&gt;23&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-24&#34;&gt;24&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-25&#34;&gt;25&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-26&#34;&gt;26&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-27&#34;&gt;27&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-28&#34;&gt;28&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-29&#34;&gt;29&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-30&#34;&gt;30&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-0-1&#34; name=&#34;__codelineno-0-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#pragma once&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-2&#34; name=&#34;__codelineno-0-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;cpf&#34;&gt;&amp;lt;type_traits&amp;gt;&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-3&#34; name=&#34;__codelineno-0-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;detail&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-4&#34; name=&#34;__codelineno-0-4&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-5&#34; name=&#34;__codelineno-0-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// instanceç±»çš„ä½œç”¨ï¼šå®šä¹‰äº†operatorå‡½æ•°ï¼Œæä¾›åˆ°ä»»æ„ç±»å‹çš„éšå¼è½¬æ¢æ“ä½œç¬¦ï¼Œç”¨äºæ¨¡æ‹Ÿæ„é€ Aggregateç±»å‹æ—¶æ‰€éœ€çš„ä»»æ„ç±»å‹å‚æ•°&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-6&#34; name=&#34;__codelineno-0-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;instance&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-7&#34; name=&#34;__codelineno-0-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-8&#34; name=&#34;__codelineno-0-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;operator&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-9&#34; name=&#34;__codelineno-0-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-10&#34; name=&#34;__codelineno-0-10&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-11&#34; name=&#34;__codelineno-0-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Aggregate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;IndexSequence&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;index_sequence&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-12&#34; name=&#34;__codelineno-0-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-13&#34; name=&#34;__codelineno-0-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;arity_impl&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;IndexSequence&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{};&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-14&#34; name=&#34;__codelineno-0-14&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-15&#34; name=&#34;__codelineno-0-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// ç‰¹åŒ–ç‰ˆæœ¬&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-16&#34; name=&#34;__codelineno-0-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Aggregate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;size_t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;...&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Indices&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-17&#34; name=&#34;__codelineno-0-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;arity_impl&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Aggregate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;index_sequence&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Indices&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;...&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-18&#34; name=&#34;__codelineno-0-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;void_t&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;decltype&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Aggregate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-19&#34; name=&#34;__codelineno-0-19&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                      &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;static_cast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Indices&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;declval&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;instance&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())...,&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-20&#34; name=&#34;__codelineno-0-20&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                      &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;declval&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;instance&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()})&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-21&#34; name=&#34;__codelineno-0-21&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;arity_impl&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Aggregate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-22&#34; name=&#34;__codelineno-0-22&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                 &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;index_sequence&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Indices&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;...,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;...(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Indices&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{};&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-23&#34; name=&#34;__codelineno-0-23&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-24&#34; name=&#34;__codelineno-0-24&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// namespace detail&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-25&#34; name=&#34;__codelineno-0-25&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-26&#34; name=&#34;__codelineno-0-26&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-27&#34; name=&#34;__codelineno-0-27&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;constexpr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;size_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;arity&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;noexcept&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-28&#34; name=&#34;__codelineno-0-28&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// ä½¿ç”¨decay_tå»é™¤ç±»å‹ä¿®é¥°ï¼ˆå¦‚const/volatile/å¼•ç”¨ï¼‰&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-29&#34; name=&#34;__codelineno-0-29&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;detail&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;arity_impl&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;decay_t&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-30&#34; name=&#34;__codelineno-0-30&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;é¦–å…ˆï¼Œå¯¹ä¸Šé¢çš„ä»£ç è¿›è¡Œæ‹†è§£ï¼Œåˆ†ç»†èŠ‚è¿›è¡Œè®¨è®ºï¼š&lt;/p&gt;
&lt;h4 id=&#34;ç»†èŠ‚1-æ„é€ aggregateå¯¹è±¡é€—å·è¡¨è¾¾å¼&#34;&gt;ç»†èŠ‚1: æ„é€ Aggregateå¯¹è±¡+é€—å·è¡¨è¾¾å¼&lt;a class=&#34;headerlink&#34; href=&#34;#ç»†èŠ‚1-æ„é€ aggregateå¯¹è±¡é€—å·è¡¨è¾¾å¼&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-1-1&#34; name=&#34;__codelineno-1-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;Aggregate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-2&#34; name=&#34;__codelineno-1-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;static_cast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Indices&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;declval&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;instance&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())...,&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-3&#34; name=&#34;__codelineno-1-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;declval&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;instance&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
è¿™æ®µä»£ç å°è¯•æ„é€ Aggregateå¯¹è±¡ï¼Œé€šè¿‡ä¸æ–­å¢åŠ å‚æ•°æ•°é‡ç›´åˆ°ç¼–è¯‘å¤±è´¥ï¼Œä»è€Œç¡®å®šæœ€å¤§æœ‰æ•ˆå‚æ•°æ•°é‡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-2-1&#34; name=&#34;__codelineno-2-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;static_cast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Indices&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;declval&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;instance&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
è¿™æ®µä»£ç é€šè¿‡std::declval&amp;lt;instance&amp;gt;()ç”Ÿæˆä¸€ä¸ªinstanceå¯¹è±¡ï¼Œå¹¶é€šè¿‡static_cast&amp;lt;void&amp;gt;(Indices)æ¥é¿å…ç¼–è¯‘å™¨è­¦å‘Šã€‚è¿™é‡Œè¿˜ç”¨åˆ°äº†ä¸€ä¸ªæŠ€æœ¯ï¼Œå°±æ˜¯c++ä¸­çš„é€—å·è¡¨è¾¾å¼ã€‚&lt;/p&gt;
&lt;p&gt;C++ä¸­çš„é€—å·è¡¨è¾¾å¼æ˜¯ä¸€ç§ç‰¹æ®Šçš„è¿ç®—ç¬¦ï¼Œå®ƒå¯ä»¥å°†å¤šä¸ªè¡¨è¾¾å¼è¿æ¥èµ·æ¥å¹¶æŒ‰é¡ºåºæ±‚å€¼ã€‚é€—å·è¡¨è¾¾å¼çš„ä¸€èˆ¬å½¢å¼ä¸ºï¼šè¡¨è¾¾å¼1, è¡¨è¾¾å¼2, &amp;hellip;, è¡¨è¾¾å¼nã€‚å…¶æ±‚å€¼è¿‡ç¨‹æ˜¯ä»å·¦åˆ°å³ä¾æ¬¡è®¡ç®—æ¯ä¸ªå­è¡¨è¾¾å¼ï¼Œæœ€ç»ˆæ•´ä¸ªè¡¨è¾¾å¼çš„å€¼ä¸ºæœ€åä¸€ä¸ªè¡¨è¾¾å¼ï¼ˆè¡¨è¾¾å¼nï¼‰çš„å€¼ã€‚ä¾‹å¦‚ï¼š
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-3-1&#34; name=&#34;__codelineno-3-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// açš„å€¼ä¸º3&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
ç»“åˆä¸Šé¢çš„ä»£ç ï¼Œå°±åªä¼šè¾“å…¥std::declval&amp;lt;instance&amp;gt;()ä½œä¸ºå‚æ•°æ„é€ Aggregateå¯¹è±¡ã€‚&lt;/p&gt;
&lt;p&gt;å‚æ•°åŒ…(Indices, instance)&amp;hellip;ç”ŸæˆNä¸ªinstanceï¼Œé¢å¤–æ·»åŠ çš„instanceç”¨äºæ¢æµ‹è¾¹ç•Œæ¡ä»¶ã€‚ä¹Ÿå°±æ˜¯indicesä¸º(0, 1)æ—¶ï¼Œä¼ é€’3ä¸ªå‚æ•°ï¼Œå½“indicesä¸º(0, 1, 2)æ—¶ï¼Œä¼ é€’4ä¸ªå‚æ•°ã€‚&lt;/p&gt;
&lt;h4 id=&#34;ç»†èŠ‚2sfinaeæŠ€æœ¯void_tè¡¨è¾¾å¼åˆæ³•æ€§æ£€æŸ¥&#34;&gt;ç»†èŠ‚2ï¼šSFINAEæŠ€æœ¯+void_tè¡¨è¾¾å¼åˆæ³•æ€§æ£€æŸ¥&lt;a class=&#34;headerlink&#34; href=&#34;#ç»†èŠ‚2sfinaeæŠ€æœ¯void_tè¡¨è¾¾å¼åˆæ³•æ€§æ£€æŸ¥&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-4-1&#34; name=&#34;__codelineno-4-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;void_t&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;decltype&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Aggregate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-2&#34; name=&#34;__codelineno-4-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                      &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;static_cast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Indices&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;declval&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;instance&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())...,&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-3&#34; name=&#34;__codelineno-4-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                      &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;declval&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;instance&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()})&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;è¯´æ˜ä¸€ä¸‹è¿™é‡Œstd::void_tï¼Œvoid_té€šå¸¸ç»“åˆSFINAEæŠ€æœ¯è¿›è¡Œå…ƒç¼–ç¨‹çš„ç±»å‹è¯Šæ–­ä¸è¡¨è¾¾å¼çš„åˆæ³•æ€§æ£€æŸ¥ï¼Œvoid_tæœ¬èº«å®šä¹‰éå¸¸ç®€å•ï¼Œå¯¹äºä»»æ„ç±»å‹ï¼Œä¹ƒè‡³å¯å˜çš„å‚æ•°ç±»å‹ï¼Œéƒ½é‡å®šä¹‰ä¸ºvoidã€‚&lt;/p&gt;
&lt;p&gt;çœ‹ä¸ªä¾‹å­ä½ å°±æ˜ç™½äº†ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ£€æµ‹ç±»å‹æˆå‘˜æ˜¯å¦å­˜åœ¨
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-5&#34;&gt;5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-6&#34;&gt;6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-7&#34;&gt;7&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-5-1&#34; name=&#34;__codelineno-5-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// æ³›åŒ–ç‰ˆæœ¬ï¼ˆé»˜è®¤è¿”å› falseï¼‰&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-2&#34; name=&#34;__codelineno-5-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-3&#34; name=&#34;__codelineno-5-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;has_type_member&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;false_type&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{};&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-4&#34; name=&#34;__codelineno-5-4&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-5-5&#34; name=&#34;__codelineno-5-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// ç‰¹åŒ–ç‰ˆæœ¬ï¼ˆå½“ T::type å­˜åœ¨æ—¶åŒ¹é…ï¼‰&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-6&#34; name=&#34;__codelineno-5-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-7&#34; name=&#34;__codelineno-5-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;has_type_member&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;void_t&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;true_type&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è‹¥ T åŒ…å« type æˆå‘˜ç±»å‹ï¼Œåˆ™ç‰¹åŒ–ç‰ˆæœ¬ç”Ÿæ•ˆï¼Œè¿”å› trueã€‚
+ æ£€æµ‹å‡½æ•°æ˜¯å¦å­˜åœ¨&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-5&#34;&gt;5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-6&#34;&gt;6&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-6-1&#34; name=&#34;__codelineno-6-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-2&#34; name=&#34;__codelineno-6-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;has_hello_func&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;false_type&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{};&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-3&#34; name=&#34;__codelineno-6-3&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-6-4&#34; name=&#34;__codelineno-6-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-5&#34; name=&#34;__codelineno-6-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;has_hello_func&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;void_t&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;decltype&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;declval&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hello&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;
&lt;a id=&#34;__codelineno-6-6&#34; name=&#34;__codelineno-6-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;true_type&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;h4 id=&#34;ç»†èŠ‚3index_sequenceçš„ä½¿ç”¨&#34;&gt;ç»†èŠ‚3ï¼šindex_sequenceçš„ä½¿ç”¨&lt;a class=&#34;headerlink&#34; href=&#34;#ç»†èŠ‚3index_sequenceçš„ä½¿ç”¨&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;std::index_sequenceæ˜¯C++14å¼•å…¥çš„ç¼–è¯‘æœŸæ•´æ•°åºåˆ—å·¥å…·ï¼Œä¸»è¦ç”¨äºæ¨¡æ¿å…ƒç¼–ç¨‹ä¸­å¤„ç†å‚æ•°åŒ…å’Œç´¢å¼•æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼š
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-5&#34;&gt;5&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-7-1&#34; name=&#34;__codelineno-7-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;size_t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;...&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;I&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-2&#34; name=&#34;__codelineno-7-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;constexpr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;make_squares&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;index_sequence&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;I&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;...&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-3&#34; name=&#34;__codelineno-7-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;array&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;I&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;I&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;...};&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-4&#34; name=&#34;__codelineno-7-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-5&#34; name=&#34;__codelineno-7-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;arr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;make_squares&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;make_index_sequence&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{});&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// {0,1,4,9,16}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/p&gt;
&lt;h4 id=&#34;ç»†èŠ‚4-é€’å½’æ¢æµ‹çš„æœºåˆ¶&#34;&gt;ç»†èŠ‚4: é€’å½’æ¢æµ‹çš„æœºåˆ¶&lt;a class=&#34;headerlink&#34; href=&#34;#ç»†èŠ‚4-é€’å½’æ¢æµ‹çš„æœºåˆ¶&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-5&#34;&gt;5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-6&#34;&gt;6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-7&#34;&gt;7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-8&#34;&gt;8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-9&#34;&gt;9&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-8-1&#34; name=&#34;__codelineno-8-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Aggregate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;size_t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;...&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Indices&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-2&#34; name=&#34;__codelineno-8-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;arity_impl&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Aggregate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;index_sequence&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Indices&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;...&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-3&#34; name=&#34;__codelineno-8-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// æœ¬æ¬¡æ¢æµ‹çš„å‚æ•°åˆ—è¡¨ï¼Œç”¨äºæ¢æµ‹Aggregateèƒ½æ¥å—çš„å‚æ•°æ•°é‡ï¼Œå‚æ•°æ•°é‡ä¸ºsizeof...(Indices)+ 1&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-4&#34; name=&#34;__codelineno-8-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;void_t&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;decltype&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Aggregate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-5&#34; name=&#34;__codelineno-8-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                      &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;static_cast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Indices&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;declval&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;instance&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())...,&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-6&#34; name=&#34;__codelineno-8-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                      &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;declval&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;instance&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()})&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-7&#34; name=&#34;__codelineno-8-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// é€’å½’æ¢æµ‹ï¼Œæ¯æ¬¡é€’å½’å¢åŠ ä¸€ä¸ªå‚æ•°ï¼Œå¢åŠ çš„å‚æ•°ä¸ºsizeof...(Indices)&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-8&#34; name=&#34;__codelineno-8-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;arity_impl&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Aggregate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-9&#34; name=&#34;__codelineno-8-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                 &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;index_sequence&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Indices&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;...,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;...(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Indices&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;é€’å½’æ¢æµ‹æœºåˆ¶ï¼š
+ ä»ç©ºå‚æ•°åˆ—è¡¨å¼€å§‹(std::index_sequence&amp;lt;&amp;gt;)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ¯æ¬¡é€’å½’å¢åŠ ä¸€ä¸ªå‚æ•°(std::index_sequence&amp;lt;Indices&amp;hellip;, sizeof&amp;hellip;(Indices)&amp;gt;)ï¼Œæ¯”å¦‚åŸæ¥æ˜¯ï¼šstd::index_sequence&amp;lt;&amp;gt;ï¼Œä¸‹ä¸€æ¬¡é€’å½’å˜ä¸ºstd::index_sequence&amp;lt;0&amp;gt;ï¼Œå†ä¸‹ä¸€æ¬¡é€’å½’å˜ä¸ºstd::index_sequence&amp;lt;0, 1&amp;gt;ï¼Œä»¥æ­¤ç±»æ¨ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å½“å‚æ•°æ•°é‡è¶…è¿‡Aggregateç±»å‹æˆå‘˜æ•°é‡æ—¶ï¼ŒSFINAEä½¿ç‰¹åŒ–ç‰ˆæœ¬å¤±æ•ˆ&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;é€šè¿‡ä¸€ä¸ªä¾‹å­ç†è§£è®¡ç®—è¿‡ç¨‹&#34;&gt;é€šè¿‡ä¸€ä¸ªä¾‹å­ç†è§£è®¡ç®—è¿‡ç¨‹&lt;a class=&#34;headerlink&#34; href=&#34;#é€šè¿‡ä¸€ä¸ªä¾‹å­ç†è§£è®¡ç®—è¿‡ç¨‹&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;arity&amp;lt;T&amp;gt;()å‡½æ•°æ¨¡æ¿å¯ä»¥è¿”å›ä»»æ„ç±»å‹Tçš„æˆå‘˜æ•°é‡ï¼Œå®Œå…¨åœ¨ç¼–è¯‘æœŸè®¡ç®—ï¼Œé›¶è¿è¡Œæ—¶å¼€é”€ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-5&#34;&gt;5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-6&#34;&gt;6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-7&#34;&gt;7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-8&#34;&gt;8&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-9-1&#34; name=&#34;__codelineno-9-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Point&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;double&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-2&#34; name=&#34;__codelineno-9-2&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-9-3&#34; name=&#34;__codelineno-9-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// å°è¯•æ„é€ ï¼š&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-4&#34; name=&#34;__codelineno-9-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;Point&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-5&#34; name=&#34;__codelineno-9-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{},&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// åŒ¹é…x&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-6&#34; name=&#34;__codelineno-9-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{},&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// åŒ¹é…y &lt;/span&gt;
&lt;a id=&#34;__codelineno-9-7&#34; name=&#34;__codelineno-9-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// è§¦å‘SFINAE (Pointåªæœ‰2ä¸ªæˆå‘˜)&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-8&#34; name=&#34;__codelineno-9-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;å½“å‚æ•°æ•°é‡=3æ—¶æ„é€ å¤±è´¥ï¼Œé€’å½’ç»ˆæ­¢ï¼Œç¡®å®šarity=2ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ç»“æ„ä½“Pointä¸ºä¾‹ï¼Œé€æ­¥è§£é‡Šè¿™ä¸ªæ¨¡æ¿ç‰¹åŒ–çš„æ‰§è¡Œè¿‡ç¨‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç¬¬ä¸€æ­¥, å°è¯•åŒ¹é…ç‰¹åŒ–ç‰ˆæœ¬ï¼ˆå¸¦std::void_tçš„ç‰ˆæœ¬ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-10-1&#34; name=&#34;__codelineno-10-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;arity_impl&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Point&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;index_sequence&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;gt;&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
æ­¤æ—¶IndicesåŒ…ä¸ºç©ºï¼Œå°è¯•æ„é€ ï¼š
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-11-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-11-1&#34; name=&#34;__codelineno-11-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;Point&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{}}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
æ„é€ æˆåŠŸï¼ˆåŒ¹é…1ä¸ªæˆå‘˜ï¼‰ï¼Œè§¦å‘é€’å½’ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç¬¬ä¸€æ¬¡é€’å½’ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-12-1&#34; name=&#34;__codelineno-12-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;arity_impl&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Point&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;index_sequence&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
å°è¯•æ„é€ ï¼š
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-13-1&#34; name=&#34;__codelineno-13-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;Point&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{},&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{}}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
æ„é€ æˆåŠŸï¼ˆåŒ¹é…2ä¸ªæˆå‘˜ï¼‰, è§¦å‘é€’å½’&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç¬¬äºŒæ¬¡é€’å½’ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-14-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-14-1&#34; name=&#34;__codelineno-14-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;arity_impl&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Point&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;index_sequence&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;å°è¯•æ„é€ ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-15-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-15-1&#34; name=&#34;__codelineno-15-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;Point&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{},&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{},&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{}}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;æ„é€ å¤±è´¥ï¼ˆè¶…è¿‡2ä¸ªå‚æ•°ï¼‰, é€’å½’ç»ˆæ­¢ã€‚
æœ€ç»ˆç»§æ‰¿arity_impl&amp;lt;Point, std::index_sequence&amp;lt;0,1&amp;gt;&amp;gt;, size()è¿”å›2ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-16-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-16-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-16-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-16-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-16-5&#34;&gt;5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-16-6&#34;&gt;6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-16-7&#34;&gt;7&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-16-1&#34; name=&#34;__codelineno-16-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;Point&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{};&lt;/span&gt;
&lt;a id=&#34;__codelineno-16-2&#34; name=&#34;__codelineno-16-2&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-16-3&#34; name=&#34;__codelineno-16-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;Point&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;a id=&#34;__codelineno-16-4&#34; name=&#34;__codelineno-16-4&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-16-5&#34; name=&#34;__codelineno-16-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;Point&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;a id=&#34;__codelineno-16-6&#34; name=&#34;__codelineno-16-6&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-16-7&#34; name=&#34;__codelineno-16-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;Point&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p4&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// error, è¶…è¿‡2ä¸ªå‚æ•°&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;é€šè¿‡è¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡é€’å½’æ¢æµ‹ï¼Œå¯ä»¥ç¡®å®šä»»æ„ç±»å‹çš„æˆå‘˜æ•°é‡ã€‚&lt;/p&gt;
&lt;p&gt;å…·ä½“ä½¿ç”¨ï¼š&lt;/p&gt;
&lt;p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-17-5&#34;&gt;5&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-17-1&#34; name=&#34;__codelineno-17-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(){&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-2&#34; name=&#34;__codelineno-17-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cista&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;arity&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Point&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-3&#34; name=&#34;__codelineno-17-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cout&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;endl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-4&#34; name=&#34;__codelineno-17-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-17-5&#34; name=&#34;__codelineno-17-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
å®Œæ•´ä¾‹å­å¯ä»¥å‚è€ƒ&lt;a href=&#34;https://github.com/KenForever1/cpp_idioms/blob/main/cpp/template/main.cpp&#34;&gt;KenForever1/cpp_idioms&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;style&gt;
.related-posts {
  margin-top: 1.5rem;
  padding-top: 0.75rem;
  border-top: 1px solid rgba(0,0,0,0.1);
  max-height: none !important; /* é˜²æ­¢Safarié”™è¯¯è®¡ç®—é«˜åº¦ */
  overflow: visible !important; /* é˜²æ­¢å†…å®¹è¢«æˆªæ–­ */
}
.related-posts h3 {
  margin-top: 0;
  margin-bottom: 0.5rem;
  font-size: 1.2rem;
  font-weight: 500;
  line-height: 1.3;
}
.related-posts ul {
  margin: 0 0 0.5rem 0 !important; /* å¼ºåˆ¶è¦†ç›–å¯èƒ½çš„å†²çªæ ·å¼ */
  padding-left: 1.5rem;
  list-style-position: outside;
}
.related-posts li {
  margin-bottom: 0.25rem;
  line-height: 1.4;
}
/* æš—è‰²æ¨¡å¼é€‚é… */
[data-md-color-scheme=&#34;slate&#34;] .related-posts {
  border-top-color: rgba(255,255,255,0.1);
}
/* Safariç‰¹å®šä¿®å¤ */
@supports (-webkit-hyphens:none) {
  .related-posts {
    display: block;
    position: relative;
    height: auto !important;
  }
  .related-posts ul {
    position: static;
  }
}
&lt;/style&gt;
&lt;div class=&#34;related-posts&#34;&gt;
&lt;h3&gt;ğŸ“š ç›¸å…³æ–‡ç« æ¨è&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/cå¼€å‘å¸¸è§é—®é¢˜ä¹‹abiå…¼å®¹æ€§é—®é¢˜/&#34; target=&#34;_blank&#34;&gt;C++å¼€å‘å¸¸è§é—®é¢˜ä¹‹ABIå…¼å®¹æ€§é—®é¢˜&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/cæŠ€æ³•å¦‚ä½•ä¸ºä¸€ä¸ªç±»åŠ¨æ€é™„åŠ ä»»æ„ç±»å‹æ•°æ®/&#34; target=&#34;_blank&#34;&gt;C++æŠ€æ³•ï¼šå¦‚ä½•ä¸ºä¸€ä¸ªç±»åŠ¨æ€é™„åŠ ä»»æ„ç±»å‹æ•°æ®&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/cæŠ€æ³•iguanaåºåˆ—åŒ–åº“ä¸­å¦‚ä½•å®ç°enum-reflectionåå°„/&#34; target=&#34;_blank&#34;&gt;C++æŠ€æ³•ï¼šiguanaåºåˆ—åŒ–åº“ä¸­å¦‚ä½•å®ç°enum reflectionåå°„&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/mit-ç»å…¸è®²åº§how-to-speak---patrick-winston/&#34; target=&#34;_blank&#34;&gt;MIT ç»å…¸è®²åº§ï¼šHow to Speak - Patrick Winston&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/helix-gptå¦‚ä½•å®ç°ai-codeä»¥åŠå¦‚ä½•è°ƒè¯•/&#34; target=&#34;_blank&#34;&gt;helix-gptå¦‚ä½•å®ç°AI codeä»¥åŠå¦‚ä½•è°ƒè¯•?&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;</description>
      <link>https://github.com/KenForever1/blog/c%E6%8A%80%E6%B3%95%E6%A8%A1%E6%9D%BF%E5%85%83%E7%BC%96%E7%A8%8B%E7%BC%96%E8%AF%91%E6%9C%9F%E8%8E%B7%E5%8F%96%E7%B1%BB%E6%88%90%E5%91%98%E6%95%B0%E9%87%8F/</link>
      <pubDate>Sun, 29 Jun 2025 00:00:00 +0000</pubDate>
      <source url="https://github.com/KenForever1/feed_rss_updated.xml">KenForever1</source>
      
      <guid isPermaLink="true">https://github.com/KenForever1/blog/c%E6%8A%80%E6%B3%95%E6%A8%A1%E6%9D%BF%E5%85%83%E7%BC%96%E7%A8%8B%E7%BC%96%E8%AF%91%E6%9C%9F%E8%8E%B7%E5%8F%96%E7%B1%BB%E6%88%90%E5%91%98%E6%95%B0%E9%87%8F/</guid>
      
    </item>
    
    <item>
      <title>C++é›¶æ‹·è´ååºåˆ—åŒ–åº“cista</title>
      
      
        
      <author>KenForever1</author>
        
      
      
      
      <description>&lt;h2 id=&#34;cé›¶æ‹·è´ååºåˆ—åŒ–åº“cista&#34;&gt;C++é›¶æ‹·è´ååºåˆ—åŒ–åº“cista&lt;a class=&#34;headerlink&#34; href=&#34;#cé›¶æ‹·è´ååºåˆ—åŒ–åº“cista&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;åœ¨é˜…è¯»Candleï¼ˆrustçš„æœºå™¨å­¦ä¹ åº“ï¼‰æ—¶ï¼Œçœ‹åˆ°äº†rustä¸­åˆ©ç”¨mmapå’ŒCowæœºåˆ¶å®ç°é›¶æ‹·è´ååºåˆ—åŒ–åŠ è½½æ¨¡å‹çš„tensorã€‚&lt;/p&gt;
&lt;p&gt;å…¶ä¸­ä¸ºäº†è§£å†³mmapçš„æ•°æ®ç”Ÿå‘½å‘¨æœŸä¸º&amp;rsquo;a, å¦‚æœç”¨Cow&amp;lt;&amp;rsquo;a&amp;gt;å¼•ç”¨mmapè¿”å›çš„æŒ‡é’ˆ, ä½¿ç”¨çš„ç”Ÿå‘½å‘¨æœŸå¦‚æœè¶…è¿‡&amp;rsquo;aåˆ™ä¸èƒ½ä½¿ç”¨ï¼Œä¸åˆ©äºä»£ç å¼€å‘å’Œå¼•ç”¨ã€‚å› æ­¤å¼•å…¥äº†yoke crateæ“¦é™¤ç”Ÿå‘½å‘¨æœŸã€‚&lt;/p&gt;
&lt;p&gt;å€Ÿæ­¤ï¼Œæœç´¢äº†ä¸€ä¸‹c++çš„é›¶æ‹·è´ååºåˆ—åŒ–åº“ï¼Œæ‰¾åˆ°äº†&lt;a href=&#34;https://github.com/felixguendling/cista&#34;&gt;cista&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;!-- more --&gt;

&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-0-1&#34; name=&#34;__codelineno-0-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;cista&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;offset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-2&#34; name=&#34;__codelineno-0-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;constexpr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MODE&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// opt. versioning + check sum&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-3&#34; name=&#34;__codelineno-0-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cista&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mode&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;WITH_VERSION&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cista&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mode&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;WITH_INTEGRITY&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-4&#34; name=&#34;__codelineno-0-4&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-5&#34; name=&#34;__codelineno-0-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;pos&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-6&#34; name=&#34;__codelineno-0-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;using&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pos_map&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// Automatic deduction of hash &amp;amp; equality&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-7&#34; name=&#34;__codelineno-0-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hash_map&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vector&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pos&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-8&#34; name=&#34;__codelineno-0-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;                   &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hash_set&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-9&#34; name=&#34;__codelineno-0-9&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-10&#34; name=&#34;__codelineno-0-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// Serialize.&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-11&#34; name=&#34;__codelineno-0-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;positions&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-12&#34; name=&#34;__codelineno-0-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pos_map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{{{{&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}},&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;hello&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;cista&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}},&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-13&#34; name=&#34;__codelineno-0-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{{{&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;7&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}},&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;hello&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;world&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}}};&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-14&#34; name=&#34;__codelineno-0-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cista&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mmap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cista&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mmap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;data&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}};&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-15&#34; name=&#34;__codelineno-0-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cista&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;serialize&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MODE&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mmap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;positions&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-16&#34; name=&#34;__codelineno-0-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-17&#34; name=&#34;__codelineno-0-17&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-0-18&#34; name=&#34;__codelineno-0-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// Deserialize.&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-19&#34; name=&#34;__codelineno-0-19&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cista&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mmap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;data&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cista&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mmap&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;protection&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;READ&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-20&#34; name=&#34;__codelineno-0-20&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;positions&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cista&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;deserialize&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pos_map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MODE&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;å®ƒæœ‰ä¸¤ç§æ¨¡å¼ï¼š
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-1-1&#34; name=&#34;__codelineno-1-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;cista&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;raw&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-2&#34; name=&#34;__codelineno-1-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;å’Œ&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-3&#34; name=&#34;__codelineno-1-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;cista&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;offset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
åœ¨dataå‘½åç©ºé—´ä¸‹ï¼Œå®ç°äº†hashmapã€hashsetã€stringã€vectorç­‰æ•°æ®ç»“æ„ï¼Œæ”¯æŒåˆ¤æ–­ç›¸ç­‰ã€hashç­‰ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆoffsetæ–¹å¼ç›¸æ¯”rawæ–¹å¼é€Ÿåº¦æ›´å¿«ï¼Ÿ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;hashmapå¦‚ä½•å®ç°çš„ï¼Ÿ&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;offsetå’Œrawæ–¹å¼&#34;&gt;offsetå’Œrawæ–¹å¼&lt;a class=&#34;headerlink&#34; href=&#34;#offsetå’Œrawæ–¹å¼&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Offset Based Data Structures&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;+ can be read without any deserialization step (i.e. reinterpret_cast&lt;T&gt; is sufficient).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;+ suitable for shared memory applications&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;- slower at runtime (pointers need to be resolved using one more add)&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Raw Data Structures&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;- deserialize step takes time (but still very fast also for GBs of data)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;- the buffer containing the serialized data needs to be modified&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;+ fast runtime access (raw access)&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æˆ‘ä»¬ç®€å•è¿‡ä¸€ä¸‹ä»£ç å®ç°ï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥é˜…è¯»æºç ï¼Œä»£ç å¾ˆæ¸…æ™°ã€‚&lt;/p&gt;
&lt;h2 id=&#34;é›¶æ‹·è´ååºåˆ—åŒ–&#34;&gt;é›¶æ‹·è´ååºåˆ—åŒ–&lt;a class=&#34;headerlink&#34; href=&#34;#é›¶æ‹·è´ååºåˆ—åŒ–&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;é›¶æ‹·è´ä¸»è¦ä½¿ç”¨äº†mmapæ–¹å¼ï¼Œå°†æ–‡ä»¶æ˜ å°„åˆ°è¿›ç¨‹åœ°å€ç©ºé—´ï¼Œç›´æ¥é€šè¿‡æŒ‡é’ˆè®¿é—®æ–‡ä»¶å†…å®¹ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-21&#34;&gt;21&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-22&#34;&gt;22&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-23&#34;&gt;23&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-24&#34;&gt;24&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-25&#34;&gt;25&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-26&#34;&gt;26&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-27&#34;&gt;27&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-28&#34;&gt;28&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-29&#34;&gt;29&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-2-1&#34; name=&#34;__codelineno-2-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mode&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Mode&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;kDefaultMode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-2&#34; name=&#34;__codelineno-2-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;write&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;filesystem&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;w&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-3&#34; name=&#34;__codelineno-2-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mmap&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-4&#34; name=&#34;__codelineno-2-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cista&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mmap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;generic_string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;c_str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cista&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mmap&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;protection&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;WRITE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-5&#34; name=&#34;__codelineno-2-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;writer&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cista&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cista&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mmap&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;move&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mmap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-6&#34; name=&#34;__codelineno-2-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cista&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;serialize&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Mode&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;writer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;w&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-7&#34; name=&#34;__codelineno-2-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-8&#34; name=&#34;__codelineno-2-8&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-2-9&#34; name=&#34;__codelineno-2-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mode&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Mode&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;kDefaultMode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-10&#34; name=&#34;__codelineno-2-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;write&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;filesystem&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;wrapped&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;w&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-11&#34; name=&#34;__codelineno-2-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;write&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Mode&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;w&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-12&#34; name=&#34;__codelineno-2-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-13&#34; name=&#34;__codelineno-2-13&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-2-14&#34; name=&#34;__codelineno-2-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mode&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Mode&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;kDefaultMode&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-15&#34; name=&#34;__codelineno-2-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;cista&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;wrapped&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;read&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;filesystem&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-16&#34; name=&#34;__codelineno-2-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cista&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;generic_string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;c_str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;r&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;content&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-17&#34; name=&#34;__codelineno-2-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cista&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;deserialize&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Mode&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-18&#34; name=&#34;__codelineno-2-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mem&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cista&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;memory_holder&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;move&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)};&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-19&#34; name=&#34;__codelineno-2-19&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cista&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;wrapped&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;move&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mem&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-20&#34; name=&#34;__codelineno-2-20&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-21&#34; name=&#34;__codelineno-2-21&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-2-22&#34; name=&#34;__codelineno-2-22&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mode&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Mode&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;kDefaultMode&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-23&#34; name=&#34;__codelineno-2-23&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;cista&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;wrapped&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;read_mmap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;filesystem&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-24&#34; name=&#34;__codelineno-2-24&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mmap&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-25&#34; name=&#34;__codelineno-2-25&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cista&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mmap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;generic_string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;c_str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cista&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mmap&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;protection&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;READ&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-26&#34; name=&#34;__codelineno-2-26&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cista&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;deserialize&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Mode&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mmap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-27&#34; name=&#34;__codelineno-2-27&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mem&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cista&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;memory_holder&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;move&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mmap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)}};&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-28&#34; name=&#34;__codelineno-2-28&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cista&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;wrapped&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;move&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mem&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-29&#34; name=&#34;__codelineno-2-29&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;h2 id=&#34;hashmapå®ç°&#34;&gt;hashmapå®ç°&lt;a class=&#34;headerlink&#34; href=&#34;#hashmapå®ç°&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;h3 id=&#34;swiss-tableå®ç°&#34;&gt;swiss tableå®ç°&lt;a class=&#34;headerlink&#34; href=&#34;#swiss-tableå®ç°&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;å‚è€ƒäº†&lt;a href=&#34;https://abseil.io/blog/20180927-swisstables&#34;&gt;abseilçš„swiss tables&lt;/a&gt;å®ç°ï¼Œåœ¨åŸå…ˆå®ç°çš„ä¸Šåˆ é™¤äº†å¤šä½™çš„åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;swiss tableä»ç”¨æ³•ä¸Šåˆ†ä¸ºä¸¤ç±»ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;absl::flat_hash_map and absl::flat_hash_set&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;flatæ–¹å¼å°†value_typeå­˜å‚¨åœ¨å®¹å™¨çš„ä¸»æ•°ç»„ä¸­ï¼Œä»¥é¿å…å†…å­˜é—´æ¥å¯»å€ã€‚ç”±äºå®ƒä»¬åœ¨é‡æ–°å“ˆå¸Œæ—¶ä¼šç§»åŠ¨æ•°æ®ï¼Œå› æ­¤å…ƒç´ æ— æ³•ä¿æŒæŒ‡é’ˆç¨³å®šæ€§ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;&#34; src=&#34;https://abseil.io/img/flat_hash_map.svg&#34; /&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;absl::node_hash_map and absl::node_hash_set&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿½æ±‚æŒ‡é’ˆç¨³å®šæ€§ï¼Œæˆ–è€…ä½ çš„å€¼å¾ˆå¤§ï¼Œå°±é‡‡ç”¨nodeæ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;&#34; src=&#34;https://abseil.io/img/node_hash_map.svg&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://abseil.io/blog/20180927-swisstables&#34;&gt;blog/20180927-swisstables&lt;/a&gt;ä¸­ä»‹ç»ï¼Œæ›´æ¨èä½¿ç”¨ absl::flat_hash_map&amp;lt;K, std::unique_ptr&amp;lt;V&amp;gt;&amp;gt;æ–¹å¼æ›¿ä»£ absl::node_hash_map&amp;lt;K, V&amp;gt;ã€‚&lt;/p&gt;
&lt;h3 id=&#34;hash_storageå®ç°&#34;&gt;hash_storageå®ç°&lt;a class=&#34;headerlink&#34; href=&#34;#hash_storageå®ç°&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;hashmapå’Œhashsetçš„æ ¸å¿ƒå®ç°æ˜¯&lt;strong&gt;hash_storage&lt;/strong&gt; struct, hash_storageé‡‡ç”¨&lt;strong&gt;swiss_table&lt;/strong&gt;å®ç°ã€‚åœ¨åé¢çš„æ–‡ç« çš„ä»‹ç»ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-3-1&#34; name=&#34;__codelineno-3-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;raw&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-2&#34; name=&#34;__codelineno-3-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Hash&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hashing&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Key&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-3&#34; name=&#34;__codelineno-3-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Eq&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;equal_to&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Key&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-4&#34; name=&#34;__codelineno-3-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;using&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hash_map&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-5&#34; name=&#34;__codelineno-3-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hash_storage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pair&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Value&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get_first&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get_second&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Hash&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Eq&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-6&#34; name=&#34;__codelineno-3-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// namespace raw&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-7&#34; name=&#34;__codelineno-3-7&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-3-8&#34; name=&#34;__codelineno-3-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;offset&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-9&#34; name=&#34;__codelineno-3-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Hash&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hashing&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Key&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-10&#34; name=&#34;__codelineno-3-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Eq&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;equal_to&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Key&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-11&#34; name=&#34;__codelineno-3-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;using&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hash_map&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-12&#34; name=&#34;__codelineno-3-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hash_storage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pair&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Value&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get_first&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get_second&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Hash&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Eq&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-13&#34; name=&#34;__codelineno-3-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// namespace offset&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-14&#34; name=&#34;__codelineno-3-14&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-3-15&#34; name=&#34;__codelineno-3-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;offset&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-16&#34; name=&#34;__codelineno-3-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Hash&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hashing&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Eq&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;equal_to&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-17&#34; name=&#34;__codelineno-3-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;using&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hash_set&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hash_storage&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;identity&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;identity&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Hash&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Eq&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-18&#34; name=&#34;__codelineno-3-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// namespace offset&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;h2 id=&#34;stringçš„å®ç°&#34;&gt;stringçš„å®ç°&lt;a class=&#34;headerlink&#34; href=&#34;#stringçš„å®ç°&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;æ ¹æ®stringçš„å¤§å°ï¼Œåˆ†ä¸ºä¸¤ç§å®ç°ï¼Œå°çš„ç”¨stackï¼Œå¤§çš„ç”¨heap, short_length_limitæ˜¯16å­—èŠ‚ã€‚
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-21&#34;&gt;21&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-22&#34;&gt;22&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-4-1&#34; name=&#34;__codelineno-4-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;generate_string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-2&#34; name=&#34;__codelineno-4-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;heap&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-3&#34; name=&#34;__codelineno-4-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;is_short_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-4&#34; name=&#34;__codelineno-4-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;self_allocated_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-5&#34; name=&#34;__codelineno-4-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint16_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__fill__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-6&#34; name=&#34;__codelineno-4-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-7&#34; name=&#34;__codelineno-4-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Ptr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-8&#34; name=&#34;__codelineno-4-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-9&#34; name=&#34;__codelineno-4-9&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-4-10&#34; name=&#34;__codelineno-4-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;stack&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-11&#34; name=&#34;__codelineno-4-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;union&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-12&#34; name=&#34;__codelineno-4-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;is_short_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-13&#34; name=&#34;__codelineno-4-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CharT&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__fill__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-14&#34; name=&#34;__codelineno-4-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-15&#34; name=&#34;__codelineno-4-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CharT&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;short_length_limit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]{&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-16&#34; name=&#34;__codelineno-4-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-17&#34; name=&#34;__codelineno-4-17&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-4-18&#34; name=&#34;__codelineno-4-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;union&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-19&#34; name=&#34;__codelineno-4-19&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;heap&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;h_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{};&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-20&#34; name=&#34;__codelineno-4-20&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;stack&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-21&#34; name=&#34;__codelineno-4-21&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-22&#34; name=&#34;__codelineno-4-22&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/p&gt;
&lt;p&gt;åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼Œownå’Œnon_ownã€‚ä¹Ÿå°±æ˜¯ç®¡ç†å†…å­˜è¿˜æ˜¯ä¸ç®¡ç†å†…å­˜ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-5-1&#34; name=&#34;__codelineno-5-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;constexpr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;owning_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-2&#34; name=&#34;__codelineno-5-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;owning&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{};&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-3&#34; name=&#34;__codelineno-5-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;constexpr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;non_owning_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-4&#34; name=&#34;__codelineno-5-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;non_owning&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;å¦‚æœè¦ä»non_owningè½¬æ¢æˆowningï¼Œåˆ™éœ€è¦è°ƒç”¨std::memcpyã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-21&#34;&gt;21&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-22&#34;&gt;22&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-23&#34;&gt;23&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-6-1&#34; name=&#34;__codelineno-6-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;constexpr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;msize_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;short_length_limit&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;15U&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CharT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-2&#34; name=&#34;__codelineno-6-2&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-6-3&#34; name=&#34;__codelineno-6-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;set_owning&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CharT&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;msize_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-4&#34; name=&#34;__codelineno-6-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;reset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-5&#34; name=&#34;__codelineno-6-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;||&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0U&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-6&#34; name=&#34;__codelineno-6-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-7&#34; name=&#34;__codelineno-6-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-8&#34; name=&#34;__codelineno-6-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;is_short_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;short_length_limit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-9&#34; name=&#34;__codelineno-6-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;is_short_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-10&#34; name=&#34;__codelineno-6-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;memcpy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CharT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-11&#34; name=&#34;__codelineno-6-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;short_length_limit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-12&#34; name=&#34;__codelineno-6-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-13&#34; name=&#34;__codelineno-6-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-14&#34; name=&#34;__codelineno-6-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-15&#34; name=&#34;__codelineno-6-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;h_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;static_cast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CharT&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;malloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CharT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)));&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-16&#34; name=&#34;__codelineno-6-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;h_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-17&#34; name=&#34;__codelineno-6-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;throw_exception&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bad_alloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{});&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-18&#34; name=&#34;__codelineno-6-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-19&#34; name=&#34;__codelineno-6-19&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;h_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-20&#34; name=&#34;__codelineno-6-20&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;h_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;self_allocated_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-21&#34; name=&#34;__codelineno-6-21&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;memcpy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CharT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-22&#34; name=&#34;__codelineno-6-22&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-23&#34; name=&#34;__codelineno-6-23&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;h2 id=&#34;å…¶å®ƒåºåˆ—åŒ–åº“&#34;&gt;å…¶å®ƒåºåˆ—åŒ–åº“&lt;a class=&#34;headerlink&#34; href=&#34;#å…¶å®ƒåºåˆ—åŒ–åº“&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Protocol Buffers&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Capâ€™n Proto&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://flatbuffers.dev/languages/rust/&#34;&gt;Flatbuffers&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;cereal&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Boost Serialization&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;MessagePack&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;style&gt;
.related-posts {
  margin-top: 1.5rem;
  padding-top: 0.75rem;
  border-top: 1px solid rgba(0,0,0,0.1);
  max-height: none !important; /* é˜²æ­¢Safarié”™è¯¯è®¡ç®—é«˜åº¦ */
  overflow: visible !important; /* é˜²æ­¢å†…å®¹è¢«æˆªæ–­ */
}
.related-posts h3 {
  margin-top: 0;
  margin-bottom: 0.5rem;
  font-size: 1.2rem;
  font-weight: 500;
  line-height: 1.3;
}
.related-posts ul {
  margin: 0 0 0.5rem 0 !important; /* å¼ºåˆ¶è¦†ç›–å¯èƒ½çš„å†²çªæ ·å¼ */
  padding-left: 1.5rem;
  list-style-position: outside;
}
.related-posts li {
  margin-bottom: 0.25rem;
  line-height: 1.4;
}
/* æš—è‰²æ¨¡å¼é€‚é… */
[data-md-color-scheme=&#34;slate&#34;] .related-posts {
  border-top-color: rgba(255,255,255,0.1);
}
/* Safariç‰¹å®šä¿®å¤ */
@supports (-webkit-hyphens:none) {
  .related-posts {
    display: block;
    position: relative;
    height: auto !important;
  }
  .related-posts ul {
    position: static;
  }
}
&lt;/style&gt;
&lt;div class=&#34;related-posts&#34;&gt;
&lt;h3&gt;ğŸ“š ç›¸å…³æ–‡ç« æ¨è&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/cistaé›¶æ‹·è´ååºåˆ—åŒ–åº“å®ç°ä¹‹swiss_tableå“ˆå¸Œè¡¨å®ç°/&#34; target=&#34;_blank&#34;&gt;cistaé›¶æ‹·è´ååºåˆ—åŒ–åº“å®ç°ä¹‹swiss_tableå“ˆå¸Œè¡¨å®ç°&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/cå¼€å‘å¸¸è§é—®é¢˜ä¹‹abiå…¼å®¹æ€§é—®é¢˜/&#34; target=&#34;_blank&#34;&gt;C++å¼€å‘å¸¸è§é—®é¢˜ä¹‹ABIå…¼å®¹æ€§é—®é¢˜&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/fast-pimpl-åˆæ˜¯ä»€ä¹ˆæŠ€æ³•/&#34; target=&#34;_blank&#34;&gt;Fast PIMPL åˆæ˜¯ä»€ä¹ˆæŠ€æ³•ï¼Ÿ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/helix-gptå¦‚ä½•å®ç°ai-codeä»¥åŠå¦‚ä½•è°ƒè¯•/&#34; target=&#34;_blank&#34;&gt;helix-gptå¦‚ä½•å®ç°AI codeä»¥åŠå¦‚ä½•è°ƒè¯•?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/mit-ç»å…¸è®²åº§how-to-speak---patrick-winston/&#34; target=&#34;_blank&#34;&gt;MIT ç»å…¸è®²åº§ï¼šHow to Speak - Patrick Winston&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;</description>
      <link>https://github.com/KenForever1/blog/c%E9%9B%B6%E6%8B%B7%E8%B4%9D%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E5%BA%93cista/</link>
      <pubDate>Sat, 28 Jun 2025 00:00:00 +0000</pubDate>
      <source url="https://github.com/KenForever1/feed_rss_updated.xml">KenForever1</source>
      
      <guid isPermaLink="true">https://github.com/KenForever1/blog/c%E9%9B%B6%E6%8B%B7%E8%B4%9D%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E5%BA%93cista/</guid>
      
    </item>
    
    <item>
      <title>cistaé›¶æ‹·è´ååºåˆ—åŒ–åº“å®ç°ä¹‹swiss_table--groupåŒ¹é…ä½è¿ç®—</title>
      
      
        
      <author>KenForever1</author>
        
      
      
      
      <description>&lt;h2 id=&#34;swiss-tableä¸­groupçš„å®ç°è§£æ&#34;&gt;Swiss Tableä¸­Groupçš„å®ç°è§£æ&lt;a class=&#34;headerlink&#34; href=&#34;#swiss-tableä¸­groupçš„å®ç°è§£æ&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;è¿™ä¸ª&lt;code&gt;group&lt;/code&gt;ç»“æ„ä½“æ˜¯Swiss Tableå®ç°ä¸­çš„æ ¸å¿ƒç»„ä»¶ï¼Œç”¨äºé«˜æ•ˆå¤„ç†å“ˆå¸Œè¡¨æ§åˆ¶ä½çš„æ‰¹é‡æ“ä½œã€‚&lt;/p&gt;
&lt;!-- more --&gt;

&lt;p&gt;å®šä¹‰æ ¸å¿ƒå¸¸é‡ï¼Œç”¨äºä½è¿ç®—ï¼š
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-0-1&#34; name=&#34;__codelineno-0-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;constexpr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MSBS&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x8080808080808080ULL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// æ¯ä¸ªå­—èŠ‚çš„æœ€é«˜ä½æ©ç &lt;/span&gt;
&lt;a id=&#34;__codelineno-0-2&#34; name=&#34;__codelineno-0-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;constexpr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;LSBS&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x0101010101010101ULL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// æ¯ä¸ªå­—èŠ‚çš„æœ€ä½ä½æ©ç &lt;/span&gt;
&lt;a id=&#34;__codelineno-0-3&#34; name=&#34;__codelineno-0-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;constexpr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GAPS&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00FEFEFEFEFEFEFEULL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// ç”¨äºè®¡ç®—å‰å¯¼ç©ºä½çš„æ©ç &lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
æ„é€ å‡½æ•°ï¼š
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-5&#34;&gt;5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-6&#34;&gt;6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-7&#34;&gt;7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-8&#34;&gt;8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-9&#34;&gt;9&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-1-1&#34; name=&#34;__codelineno-1-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;using&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;group_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint64_t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-2&#34; name=&#34;__codelineno-1-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;using&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;h2_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint8_t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-3&#34; name=&#34;__codelineno-1-3&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-1-4&#34; name=&#34;__codelineno-1-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;explicit&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;group&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctrl_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pos&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;noexcept&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-5&#34; name=&#34;__codelineno-1-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;memcpy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctrl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pos&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;WIDTH&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-6&#34; name=&#34;__codelineno-1-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#if defined(CISTA_BIG_ENDIAN)&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-7&#34; name=&#34;__codelineno-1-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctrl_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;endian_swap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctrl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-8&#34; name=&#34;__codelineno-1-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#endif&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-9&#34; name=&#34;__codelineno-1-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
* ä»æŒ‡å®šä½ç½®æ‹·è´8ä¸ªæ§åˆ¶å­—èŠ‚åˆ°&lt;code&gt;ctrl_&lt;/code&gt;æˆå‘˜
* å¤§ç«¯ç³»ç»Ÿéœ€è¦åšå­—èŠ‚åºè½¬æ¢&lt;/p&gt;
&lt;h2 id=&#34;å…³é”®åŒ¹é…æ–¹æ³•&#34;&gt;å…³é”®åŒ¹é…æ–¹æ³•&lt;a class=&#34;headerlink&#34; href=&#34;#å…³é”®åŒ¹é…æ–¹æ³•&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;h3 id=&#34;matchæ–¹æ³•---åŒ¹é…ç‰¹å®šh2å€¼&#34;&gt;&lt;code&gt;match&lt;/code&gt;æ–¹æ³• - åŒ¹é…ç‰¹å®šh2å€¼&lt;a class=&#34;headerlink&#34; href=&#34;#matchæ–¹æ³•---åŒ¹é…ç‰¹å®šh2å€¼&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-2-1&#34; name=&#34;__codelineno-2-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;bit_mask&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;match&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;h2_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hash&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;noexcept&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-2&#34; name=&#34;__codelineno-2-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctrl_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;^&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;LSBS&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hash&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-3&#34; name=&#34;__codelineno-2-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bit_mask&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;LSBS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;~&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MSBS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-4&#34; name=&#34;__codelineno-2-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
* é€šè¿‡ä½è¿ç®—åŒæ—¶æ£€æŸ¥8ä¸ªæ§åˆ¶å­—èŠ‚æ˜¯å¦åŒ¹é…ç»™å®šçš„h2å€¼
* ç®—æ³•åŸç†ï¼š
  1. &lt;code&gt;LSBS * hash&lt;/code&gt;ï¼šå°†h2å€¼å¤åˆ¶åˆ°æ¯ä¸ªå­—èŠ‚
  2. &lt;code&gt;ctrl_ ^ ...&lt;/code&gt;ï¼šå¼‚æˆ–æ“ä½œæ‰¾å‡ºåŒ¹é…çš„å­—èŠ‚
  3. &lt;code&gt;(x - LSBS) &amp;amp; ~x &amp;amp; MSBS&lt;/code&gt;ï¼šç²¾ç¡®å®šä½åŒ¹é…çš„å­—èŠ‚&lt;/p&gt;
&lt;h4 id=&#34;é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥ç†è§£match&#34;&gt;é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥ç†è§£&lt;code&gt;match&lt;/code&gt;ï¼š&lt;a class=&#34;headerlink&#34; href=&#34;#é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥ç†è§£match&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;ç›¸å…³ä¾‹å­å®ç°æºç &lt;a href=&#34;https://github.com/KenForever1/cpp_idioms/blob/main/cpp/swiss_table/bit_verify_match.cpp&#34;&gt;KenForever1/cpp_idioms&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå…·ä½“ä¾‹å­æ¥è¯´æ˜matchæ–¹æ³•çš„ä½è¿ç®—è¿‡ç¨‹ã€‚å‡è®¾ï¼š&lt;/p&gt;
&lt;p&gt;å½“å‰groupçš„8ä¸ªæ§åˆ¶å­—èŠ‚ä¸ºï¼š[0x12, 0x34, 0x56, 0x78, 0x12, 0x9A, EMPTY, DELETED]&lt;/p&gt;
&lt;p&gt;å¯¹åº”ctrl_å€¼ï¼š0xFE80129A78563412 (å°ç«¯åº)&lt;/p&gt;
&lt;p&gt;EMPTY = 0x80, DELETED = 0xFE&lt;/p&gt;
&lt;p&gt;è¦åŒ¹é…çš„h2å€¼ä¸ºï¼š0x12&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-3-1&#34; name=&#34;__codelineno-3-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;o&#34;&gt;===&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;å¼€å§‹åŒ¹é…è¿‡ç¨‹&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;===&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-2&#34; name=&#34;__codelineno-3-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;æ§åˆ¶å­—èŠ‚&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctrl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xff809a1278563412&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x12&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x34&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x56&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x78&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x12&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x9a&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x80&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xff&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;
&lt;a id=&#34;__codelineno-3-3&#34; name=&#34;__codelineno-3-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;nl&#34;&gt;åŒ¹é…çš„h2å€¼&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x12&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-4&#34; name=&#34;__codelineno-3-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;LSBS&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hash&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x1212121212121212&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x12&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x12&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x12&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x12&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x12&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x12&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x12&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x12&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;
&lt;a id=&#34;__codelineno-3-5&#34; name=&#34;__codelineno-3-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctrl_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;^&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;LSBS&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hash&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xed9288006a442600&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x26&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x44&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x6a&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x88&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x92&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xed&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;
&lt;a id=&#34;__codelineno-3-6&#34; name=&#34;__codelineno-3-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;LSBS&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xec9186ff694324ff&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xff&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x24&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x43&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x69&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xff&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x86&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x91&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xec&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;
&lt;a id=&#34;__codelineno-3-7&#34; name=&#34;__codelineno-3-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;o&#34;&gt;~&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x126d77ff95bbd9ff&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xff&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xd9&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xbb&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x95&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xff&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x77&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x6d&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x12&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;
&lt;a id=&#34;__codelineno-3-8&#34; name=&#34;__codelineno-3-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;LSBS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;~&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x000106ff010300ff&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xff&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x03&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x01&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xff&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x06&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x01&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;
&lt;a id=&#34;__codelineno-3-9&#34; name=&#34;__codelineno-3-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;æœ€ç»ˆç»“æœ&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mask&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x0000008000000080&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x80&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x80&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;
&lt;a id=&#34;__codelineno-3-10&#34; name=&#34;__codelineno-3-10&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-3-11&#34; name=&#34;__codelineno-3-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;o&#34;&gt;===&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;åŒ¹é…ç»“æœ&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;===&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-12&#34; name=&#34;__codelineno-3-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;åŒ¹é…æ©ç &lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x0000008000000080&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x80&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x80&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;
&lt;a id=&#34;__codelineno-3-13&#34; name=&#34;__codelineno-3-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;nl&#34;&gt;åŒ¹é…çš„å­—èŠ‚ä½ç½®&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;h3 id=&#34;match_emptyæ–¹æ³•---åŒ¹é…ç©ºæ§½ä½&#34;&gt;&lt;code&gt;match_empty&lt;/code&gt;æ–¹æ³• - åŒ¹é…ç©ºæ§½ä½&lt;a class=&#34;headerlink&#34; href=&#34;#match_emptyæ–¹æ³•---åŒ¹é…ç©ºæ§½ä½&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-4-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-4-1&#34; name=&#34;__codelineno-4-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;bit_mask&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;match_empty&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;noexcept&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-2&#34; name=&#34;__codelineno-4-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bit_mask&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctrl_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;~&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctrl_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;6U&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MSBS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;a id=&#34;__codelineno-4-3&#34; name=&#34;__codelineno-4-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;é€šè¿‡ä½è¿ç®—æ‰¾å‡ºEMPTY(-128)æ§åˆ¶å­—èŠ‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åˆ©ç”¨äº†EMPTYçš„ç‰¹æ®Šä½æ¨¡å¼(10000000)&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥ç†è§£match_empty&#34;&gt;é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥ç†è§£&lt;code&gt;match_empty&lt;/code&gt;&lt;a class=&#34;headerlink&#34; href=&#34;#é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥ç†è§£match_empty&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;å‡è®¾æˆ‘ä»¬æœ‰ä»¥ä¸‹æ§åˆ¶å­—èŠ‚ç»„ï¼ˆå°ç«¯åºæ’åˆ—ï¼‰ï¼š
[0x12, 0x34, EMPTY, 0x56, DELETED, EMPTY, 0x78, END]&lt;/p&gt;
&lt;p&gt;EMPTY = 0x80&lt;/p&gt;
&lt;p&gt;DELETED = 0xFE&lt;/p&gt;
&lt;p&gt;END = 0xFF&lt;/p&gt;
&lt;p&gt;å¯¹åº”çš„ 64 ä½ ctrl_ å€¼ä¸ºï¼š0xFF8078FE56803412&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-5&#34;&gt;5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-6&#34;&gt;6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-7&#34;&gt;7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-5-8&#34;&gt;8&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-5-1&#34; name=&#34;__codelineno-5-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;o&#34;&gt;===&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;match_empty&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ç¤ºä¾‹&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;===&lt;/span&gt;
&lt;a id=&#34;__codelineno-5-2&#34; name=&#34;__codelineno-5-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;åŸå§‹æ§åˆ¶å­—èŠ‚&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xff7880fe56803412&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x12&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x34&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x80&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x56&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xfe&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x80&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x78&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xff&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;
&lt;a id=&#34;__codelineno-5-3&#34; name=&#34;__codelineno-5-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;o&#34;&gt;~&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctrl_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00877f01a97fcbed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xed&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xcb&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x7f&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xa9&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x01&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x7f&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x87&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;
&lt;a id=&#34;__codelineno-5-4&#34; name=&#34;__codelineno-5-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;o&#34;&gt;~&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctrl_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x21dfc06a5ff2fb40&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x40&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xfb&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xf2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x5f&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x6a&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xc0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xdf&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x21&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;
&lt;a id=&#34;__codelineno-5-5&#34; name=&#34;__codelineno-5-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;ctrl_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;~&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctrl_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x2158806a56803000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x30&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x80&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x56&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x6a&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x80&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x58&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x21&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;
&lt;a id=&#34;__codelineno-5-6&#34; name=&#34;__codelineno-5-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;æœ€ç»ˆç»“æœ&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mask&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x0000800000800000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x80&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x80&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;
&lt;a id=&#34;__codelineno-5-7&#34; name=&#34;__codelineno-5-7&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-5-8&#34; name=&#34;__codelineno-5-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;nl&#34;&gt;åŒ¹é…çš„EMPTYä½ç½®&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;h3 id=&#34;match_empty_or_deletedæ–¹æ³•&#34;&gt;&lt;code&gt;match_empty_or_deleted&lt;/code&gt;æ–¹æ³•&lt;a class=&#34;headerlink&#34; href=&#34;#match_empty_or_deletedæ–¹æ³•&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-6-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-6-1&#34; name=&#34;__codelineno-6-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;bit_mask&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;match_empty_or_deleted&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;noexcept&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-2&#34; name=&#34;__codelineno-6-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bit_mask&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctrl_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;~&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctrl_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;7U&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MSBS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;a id=&#34;__codelineno-6-3&#34; name=&#34;__codelineno-6-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ç±»ä¼¼&lt;code&gt;match_empty&lt;/code&gt;ä½†åŒ¹é…EMPTYæˆ–DELETEDçŠ¶æ€&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åˆ©ç”¨äº†è¿™ä¸¤ç§çŠ¶æ€çš„é«˜ä½éƒ½æ˜¯1çš„ç‰¹æ€§&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥ç†è§£match_empty_or_deleted&#34;&gt;é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥ç†è§£&lt;code&gt;match_empty_or_deleted&lt;/code&gt;&lt;a class=&#34;headerlink&#34; href=&#34;#é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥ç†è§£match_empty_or_deleted&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;å‡è®¾æˆ‘ä»¬æœ‰ä»¥ä¸‹æ§åˆ¶å­—èŠ‚ç»„ï¼ˆå°ç«¯åºæ’åˆ—ï¼‰ï¼š
[0x12, 0x34, EMPTY, 0x56, DELETED, EMPTY, 0x78, END]&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-5&#34;&gt;5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-6&#34;&gt;6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-7&#34;&gt;7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-8&#34;&gt;8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-7-9&#34;&gt;9&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-7-1&#34; name=&#34;__codelineno-7-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;nl&#34;&gt;shift_pos&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;7&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-2&#34; name=&#34;__codelineno-7-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;o&#34;&gt;===&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;match_empty&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ç¤ºä¾‹&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;===&lt;/span&gt;
&lt;a id=&#34;__codelineno-7-3&#34; name=&#34;__codelineno-7-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;åŸå§‹æ§åˆ¶å­—èŠ‚&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xff7880fe56803412&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x12&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x34&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x80&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x56&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xfe&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x80&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x78&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xff&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;
&lt;a id=&#34;__codelineno-7-4&#34; name=&#34;__codelineno-7-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;o&#34;&gt;~&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctrl_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00877f01a97fcbed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xed&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xcb&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x7f&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xa9&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x01&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x7f&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x87&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;
&lt;a id=&#34;__codelineno-7-5&#34; name=&#34;__codelineno-7-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;o&#34;&gt;~&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctrl_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;$shift_pos$&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x43bf80d4bfe5f680&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x80&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xf6&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xe5&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xbf&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xd4&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x80&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xbf&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x43&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;
&lt;a id=&#34;__codelineno-7-6&#34; name=&#34;__codelineno-7-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;ctrl_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;~&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctrl_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;$shift_pos$&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x433880d416803400&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x34&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x80&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x16&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xd4&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x80&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x38&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x43&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;
&lt;a id=&#34;__codelineno-7-7&#34; name=&#34;__codelineno-7-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;æœ€ç»ˆç»“æœ&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mask&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x0000808000800000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x80&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x80&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x80&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;
&lt;a id=&#34;__codelineno-7-8&#34; name=&#34;__codelineno-7-8&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-7-9&#34; name=&#34;__codelineno-7-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;nl&#34;&gt;åŒ¹é…çš„EMPTYä½ç½®&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;h3 id=&#34;count_leading_empty_or_deletedæ–¹æ³•&#34;&gt;&lt;code&gt;count_leading_empty_or_deleted&lt;/code&gt;æ–¹æ³•&lt;a class=&#34;headerlink&#34; href=&#34;#count_leading_empty_or_deletedæ–¹æ³•&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-8-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-8-1&#34; name=&#34;__codelineno-8-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;size_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;count_leading_empty_or_deleted&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;noexcept&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-2&#34; name=&#34;__codelineno-8-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;trailing_zeros&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(((&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;~&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctrl_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctrl_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;7U&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GAPS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1U&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;7U&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3U&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-8-3&#34; name=&#34;__codelineno-8-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;è®¡ç®—å‰å¯¼çš„EMPTYæˆ–DELETEDæ§½ä½æ•°é‡&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç”¨äºæ¢æµ‹åºåˆ—ä¸­å¿«é€Ÿè·³è¿‡è¿ç»­æ— æ•ˆæ§½ä½&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä½¿ç”¨æ–¹æ³•ï¼š
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-5&#34;&gt;5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-6&#34;&gt;6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-9-7&#34;&gt;7&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-9-1&#34; name=&#34;__codelineno-9-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;skip_empty_or_deleted&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;noexcept&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-2&#34; name=&#34;__codelineno-9-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;while&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;is_empty_or_deleted&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctrl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-3&#34; name=&#34;__codelineno-9-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shift&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;group&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctrl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;count_leading_empty_or_deleted&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-4&#34; name=&#34;__codelineno-9-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctrl_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shift&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-5&#34; name=&#34;__codelineno-9-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;entry_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shift&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-6&#34; name=&#34;__codelineno-9-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-9-7&#34; name=&#34;__codelineno-9-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/p&gt;
&lt;p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-10-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-10-1&#34; name=&#34;__codelineno-10-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;o&#34;&gt;===&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ç¤ºä¾‹1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;===&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-2&#34; name=&#34;__codelineno-10-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;åŸå§‹æ§åˆ¶å­—èŠ‚&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xff788056fe803412&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x12&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x34&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x80&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xfe&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x56&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x80&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x78&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xff&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;
&lt;a id=&#34;__codelineno-10-3&#34; name=&#34;__codelineno-10-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;ctrl_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;7&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x01fef100adfd0068&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x68&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xfd&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xad&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xf1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xfe&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x01&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;
&lt;a id=&#34;__codelineno-10-4&#34; name=&#34;__codelineno-10-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;o&#34;&gt;~&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctrl_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00877fa9017fcbed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xed&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xcb&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x7f&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x01&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xa9&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x7f&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x87&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;
&lt;a id=&#34;__codelineno-10-5&#34; name=&#34;__codelineno-10-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;o&#34;&gt;~&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctrl_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctrl_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;7&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00867100017d0068&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x68&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x7d&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x01&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x71&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x86&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;
&lt;a id=&#34;__codelineno-10-6&#34; name=&#34;__codelineno-10-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GAPS&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00fefffefffffefe&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xfe&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xfe&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xff&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xff&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xfe&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xff&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xfe&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;
&lt;a id=&#34;__codelineno-10-7&#34; name=&#34;__codelineno-10-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00fefffefffffeff&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xff&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xfe&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xff&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xff&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xfe&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xff&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xfe&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;
&lt;a id=&#34;__codelineno-10-8&#34; name=&#34;__codelineno-10-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;nl&#34;&gt;trailing_zeros&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-9&#34; name=&#34;__codelineno-10-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;å‰å¯¼EMPTY&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;DELETEDæ•°é‡&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-10&#34; name=&#34;__codelineno-10-10&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-10-11&#34; name=&#34;__codelineno-10-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;o&#34;&gt;===&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ç¤ºä¾‹2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;===&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-12&#34; name=&#34;__codelineno-10-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;åŸå§‹æ§åˆ¶å­—èŠ‚&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xffbc9a785680fe80&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x80&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xfe&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x80&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x56&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x78&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x9a&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xbc&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xff&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;
&lt;a id=&#34;__codelineno-10-13&#34; name=&#34;__codelineno-10-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;ctrl_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;7&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x01ff7934f0ad01fd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xfd&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x01&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xad&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xf0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x34&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x79&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xff&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x01&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;
&lt;a id=&#34;__codelineno-10-14&#34; name=&#34;__codelineno-10-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;o&#34;&gt;~&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctrl_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00436587a97f017f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x7f&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x01&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x7f&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xa9&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x87&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x65&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x43&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;
&lt;a id=&#34;__codelineno-10-15&#34; name=&#34;__codelineno-10-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;o&#34;&gt;~&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctrl_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctrl_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;7&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00436104a02d017d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x7d&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x01&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x2d&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xa0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x04&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x61&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x43&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;
&lt;a id=&#34;__codelineno-10-16&#34; name=&#34;__codelineno-10-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GAPS&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00fffffefeffffff&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xff&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xff&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xff&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xfe&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xfe&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xff&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xff&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;
&lt;a id=&#34;__codelineno-10-17&#34; name=&#34;__codelineno-10-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00fffffeff000000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xff&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xfe&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xff&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xff&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;
&lt;a id=&#34;__codelineno-10-18&#34; name=&#34;__codelineno-10-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;nl&#34;&gt;trailing_zeros&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;24&lt;/span&gt;
&lt;a id=&#34;__codelineno-10-19&#34; name=&#34;__codelineno-10-19&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;å‰å¯¼EMPTY&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;DELETEDæ•°é‡&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
å¯ä»¥çœ‹åˆ°ï¼Œä¸ºäº†é‡‡ç”¨ä½è¿ç®—ï¼ŒåŠ å¿«è®¡ç®—é€Ÿåº¦ï¼Œåœ¨æ§åˆ¶å­—èŠ‚ä¸­ï¼ŒEMPTY = 0x80ï¼ŒDELETED = 0xFEï¼ŒEND = 0xFFçš„æ•°å€¼éƒ½æ˜¯ç»è¿‡ç‰¹æ®Šè®¾è®¡çš„ã€‚&lt;/p&gt;
&lt;h3 id=&#34;bit_maskç»“æ„è§£æ&#34;&gt;bit_maskç»“æ„è§£æ&lt;a class=&#34;headerlink&#34; href=&#34;#bit_maskç»“æ„è§£æ&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;bit_mask&lt;/code&gt;æ˜¯Swiss Tableä¸­ç”¨äºé«˜æ•ˆå¤„ç†ä½æ©ç çš„è¾…åŠ©ç»“æ„ï¼Œä¸»è¦åŠŸèƒ½æ˜¯è¿­ä»£å’Œæ“ä½œ64ä½æ©ç ä¸­çš„åŒ¹é…ä½ã€‚&lt;/p&gt;
&lt;p&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-11-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-11-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-11-1&#34; name=&#34;__codelineno-11-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;group_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mask_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 64ä½æ©ç ï¼Œæ¯ä¸ªå­—èŠ‚ä»£è¡¨ä¸€ä¸ªæ§åˆ¶å­—èŠ‚çš„çŠ¶æ€&lt;/span&gt;
&lt;a id=&#34;__codelineno-11-2&#34; name=&#34;__codelineno-11-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;constexpr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SHIFT&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3U&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// ç”¨äºå­—èŠ‚ç´¢å¼•ä½ç§»(8=2^3)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
è¿­ä»£å™¨å’Œæ©ç æ“ä½œï¼Œå®ç°äº†ç±»ä¼¼è¿­ä»£å™¨çš„æ¥å£ï¼Œå¯ä»¥åœ¨èŒƒå›´forå¾ªç¯ä¸­ä½¿ç”¨ï¼š
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-12-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-12-1&#34; name=&#34;__codelineno-12-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;bit_mask&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;operator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;noexcept&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-12-2&#34; name=&#34;__codelineno-12-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mask_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mask_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1U&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// æ¸…é™¤æœ€ä½ä½çš„1&lt;/span&gt;
&lt;a id=&#34;__codelineno-12-3&#34; name=&#34;__codelineno-12-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-12-4&#34; name=&#34;__codelineno-12-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-12-5&#34; name=&#34;__codelineno-12-5&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-12-6&#34; name=&#34;__codelineno-12-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;size_type&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;operator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;noexcept&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;
&lt;a id=&#34;__codelineno-12-7&#34; name=&#34;__codelineno-12-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;trailing_zeros&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// è¿”å›å½“å‰æœ€ä½ä½1çš„å­—èŠ‚ä½ç½®&lt;/span&gt;
&lt;a id=&#34;__codelineno-12-8&#34; name=&#34;__codelineno-12-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-12-9&#34; name=&#34;__codelineno-12-9&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-12-10&#34; name=&#34;__codelineno-12-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;explicit&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;operator&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;noexcept&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;
&lt;a id=&#34;__codelineno-12-11&#34; name=&#34;__codelineno-12-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mask_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0U&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// åˆ¤æ–­æ˜¯å¦æœ‰åŒ¹é…&lt;/span&gt;
&lt;a id=&#34;__codelineno-12-12&#34; name=&#34;__codelineno-12-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-12-13&#34; name=&#34;__codelineno-12-13&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-12-14&#34; name=&#34;__codelineno-12-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;bit_mask&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;begin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;noexcept&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-12-15&#34; name=&#34;__codelineno-12-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;bit_mask&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;end&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;noexcept&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bit_mask&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/p&gt;
&lt;h3 id=&#34;ä½æ“ä½œ&#34;&gt;ä½æ“ä½œ&lt;a class=&#34;headerlink&#34; href=&#34;#ä½æ“ä½œ&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;trailing_zeros&lt;/code&gt;: è®¡ç®—æœ€ä½ä½1çš„ä½ç½®(ä»¥å­—èŠ‚ä¸ºå•ä½)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;leading_zeros&lt;/code&gt;: è®¡ç®—æœ€é«˜ä½1çš„ä½ç½®(ä»¥å­—èŠ‚ä¸ºå•ä½)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;éƒ½ä½¿ç”¨äº†ä½è¿ç®—ä¼˜åŒ–ï¼Œé€šè¿‡ä½ç§»è½¬æ¢ä½ç´¢å¼•åˆ°å­—èŠ‚ç´¢å¼•&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-13-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-13-1&#34; name=&#34;__codelineno-13-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;size_type&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;trailing_zeros&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;noexcept&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-13-2&#34; name=&#34;__codelineno-13-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// ::cista::trailing_zeros(mask_) è¿”å›çš„æ˜¯æœ€ä½ä½1çš„ä½ç½®(ä»¥bitä¸ºå•ä½)&lt;/span&gt;
&lt;a id=&#34;__codelineno-13-3&#34; name=&#34;__codelineno-13-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// è¿™é‡Œ &amp;gt;&amp;gt; SHIFT æ˜¯å°†bitç´¢å¼•è½¬æ¢ä¸ºå­—èŠ‚ç´¢å¼•&lt;/span&gt;
&lt;a id=&#34;__codelineno-13-4&#34; name=&#34;__codelineno-13-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cista&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;trailing_zeros&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mask_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SHIFT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-13-5&#34; name=&#34;__codelineno-13-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-13-6&#34; name=&#34;__codelineno-13-6&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-13-7&#34; name=&#34;__codelineno-13-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;size_type&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;leading_zeros&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;noexcept&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-13-8&#34; name=&#34;__codelineno-13-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;constexpr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;total_significant_bits&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;8&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SHIFT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 64&lt;/span&gt;
&lt;a id=&#34;__codelineno-13-9&#34; name=&#34;__codelineno-13-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;constexpr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;extra_bits&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;group_t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;8&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;total_significant_bits&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-13-10&#34; name=&#34;__codelineno-13-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cista&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;leading_zeros&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mask_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;extra_bits&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SHIFT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-13-11&#34; name=&#34;__codelineno-13-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-13-12&#34; name=&#34;__codelineno-13-12&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-13-13&#34; name=&#34;__codelineno-13-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;//         00000000 000000000 00000000 00000000&lt;/span&gt;
&lt;a id=&#34;__codelineno-13-14&#34; name=&#34;__codelineno-13-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// bitç´¢å¼•ï¼š 1-8 9-16 17-24 25-32&lt;/span&gt;
&lt;a id=&#34;__codelineno-13-15&#34; name=&#34;__codelineno-13-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;c1&#34;&gt;// å­—èŠ‚ç´¢å¼•ï¼š 1 2 3 4&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-14-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-14-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-14-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-14-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-14-5&#34;&gt;5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-14-6&#34;&gt;6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-14-7&#34;&gt;7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-14-8&#34;&gt;8&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-14-1&#34; name=&#34;__codelineno-14-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;a id=&#34;__codelineno-14-2&#34; name=&#34;__codelineno-14-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;constexpr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;trailing_zeros&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;noexcept&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-14-3&#34; name=&#34;__codelineno-14-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;constexpr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;8U&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-14-4&#34; name=&#34;__codelineno-14-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;static_cast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__builtin_ctzll&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;a id=&#34;__codelineno-14-5&#34; name=&#34;__codelineno-14-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;constexpr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4U&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 32bit&lt;/span&gt;
&lt;a id=&#34;__codelineno-14-6&#34; name=&#34;__codelineno-14-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;static_cast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__builtin_ctz&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;a id=&#34;__codelineno-14-7&#34; name=&#34;__codelineno-14-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-14-8&#34; name=&#34;__codelineno-14-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;è¿™ä¸ªå‡½æ•°ä½œç”¨æ˜¯è¿”å›è¾“å…¥æ•°äºŒè¿›åˆ¶è¡¨ç¤ºä»æœ€ä½ä½å¼€å§‹(å³èµ·)çš„è¿ç»­çš„0çš„ä¸ªæ•°ï¼›å¦‚æœä¼ å…¥0åˆ™è¡Œä¸ºæœªå®šä¹‰ã€‚é€šè¿‡__builtin_ctzllå®ç°ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-15-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-15-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-15-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-15-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-15-5&#34;&gt;5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-15-6&#34;&gt;6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-15-7&#34;&gt;7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-15-8&#34;&gt;8&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-15-1&#34; name=&#34;__codelineno-15-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;a id=&#34;__codelineno-15-2&#34; name=&#34;__codelineno-15-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;constexpr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;leading_zeros&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;noexcept&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-15-3&#34; name=&#34;__codelineno-15-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;constexpr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;8U&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-15-4&#34; name=&#34;__codelineno-15-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;static_cast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__builtin_clzll&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;a id=&#34;__codelineno-15-5&#34; name=&#34;__codelineno-15-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;constexpr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4U&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 32bit&lt;/span&gt;
&lt;a id=&#34;__codelineno-15-6&#34; name=&#34;__codelineno-15-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;static_cast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__builtin_clz&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;a id=&#34;__codelineno-15-7&#34; name=&#34;__codelineno-15-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-15-8&#34; name=&#34;__codelineno-15-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;è¿™ä¸ªå‡½æ•°ä½œç”¨æ˜¯è¿”å›è¾“å…¥æ•°äºŒè¿›åˆ¶è¡¨ç¤ºä»æœ€é«˜ä½å¼€å§‹(å·¦èµ·)çš„è¿ç»­çš„0çš„ä¸ªæ•°ï¼›å¦‚æœä¼ å…¥0åˆ™è¡Œä¸ºæœªå®šä¹‰ã€‚é€šè¿‡__builtin_clzllå®ç°ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;a class=&#34;headerlink&#34; href=&#34;#æ€»ç»“&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;é€šè¿‡ä½è¿ç®—å¹¶è¡Œå¤„ç†ï¼Œè™½ç„¶æœªä½¿ç”¨å®é™…SIMDæŒ‡ä»¤ï¼Œä½†é€šè¿‡64ä½æ•´æ•°è¿ç®—æ¨¡æ‹Ÿäº†å¹¶è¡Œå¤„ç†8ä¸ªæ§åˆ¶å­—èŠ‚çš„æ•ˆæœã€‚æ‰€æœ‰æ“ä½œéƒ½é€šè¿‡&lt;strong&gt;ç²¾å¿ƒè®¾è®¡çš„ä½è¿ç®—&lt;/strong&gt;å®Œæˆï¼Œé¿å…äº†åˆ†æ”¯å’Œå¾ªç¯ã€‚&lt;strong&gt;å†…å­˜å±€éƒ¨æ€§&lt;/strong&gt;ï¼šæ§åˆ¶å­—èŠ‚è¿ç»­å­˜å‚¨ï¼Œå……åˆ†åˆ©ç”¨CPUç¼“å­˜ã€‚&lt;strong&gt;çŠ¶æ€å¿«é€Ÿåˆ¤æ–­&lt;/strong&gt;ï¼šå¯ä»¥ä¸€æ¬¡æ€§åˆ¤æ–­æ•´ä¸ªgroupçš„çŠ¶æ€(å…¨ç©º/éƒ¨åˆ†åŒ¹é…ç­‰)ã€‚é€šè¿‡è¿™äº›è®¾è®¡ï¼Œä½¿å¾—Swiss Tableåœ¨æŸ¥æ‰¾ã€æ’å…¥ç­‰æ“ä½œä¸Šè·å¾—é«˜ååé‡ã€‚&lt;/p&gt;
&lt;style&gt;
.related-posts {
  margin-top: 1.5rem;
  padding-top: 0.75rem;
  border-top: 1px solid rgba(0,0,0,0.1);
  max-height: none !important; /* é˜²æ­¢Safarié”™è¯¯è®¡ç®—é«˜åº¦ */
  overflow: visible !important; /* é˜²æ­¢å†…å®¹è¢«æˆªæ–­ */
}
.related-posts h3 {
  margin-top: 0;
  margin-bottom: 0.5rem;
  font-size: 1.2rem;
  font-weight: 500;
  line-height: 1.3;
}
.related-posts ul {
  margin: 0 0 0.5rem 0 !important; /* å¼ºåˆ¶è¦†ç›–å¯èƒ½çš„å†²çªæ ·å¼ */
  padding-left: 1.5rem;
  list-style-position: outside;
}
.related-posts li {
  margin-bottom: 0.25rem;
  line-height: 1.4;
}
/* æš—è‰²æ¨¡å¼é€‚é… */
[data-md-color-scheme=&#34;slate&#34;] .related-posts {
  border-top-color: rgba(255,255,255,0.1);
}
/* Safariç‰¹å®šä¿®å¤ */
@supports (-webkit-hyphens:none) {
  .related-posts {
    display: block;
    position: relative;
    height: auto !important;
  }
  .related-posts ul {
    position: static;
  }
}
&lt;/style&gt;
&lt;div class=&#34;related-posts&#34;&gt;
&lt;h3&gt;ğŸ“š ç›¸å…³æ–‡ç« æ¨è&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/cä½¿ç”¨abseil-cppé‡åˆ°çš„å°é—®é¢˜/&#34; target=&#34;_blank&#34;&gt;C++ä½¿ç”¨abseil-cppé‡åˆ°çš„å°é—®é¢˜&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/cæŠ€æ³•å¦‚ä½•ä¸ºä¸€ä¸ªç±»åŠ¨æ€é™„åŠ ä»»æ„ç±»å‹æ•°æ®/&#34; target=&#34;_blank&#34;&gt;C++æŠ€æ³•ï¼šå¦‚ä½•ä¸ºä¸€ä¸ªç±»åŠ¨æ€é™„åŠ ä»»æ„ç±»å‹æ•°æ®&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/c20å¦‚ä½•å®ç°ä¸€ä¸ªåŸºäºå±æ€§æµ‹è¯•çš„quickcheck-cppåº“/&#34; target=&#34;_blank&#34;&gt;C++20å¦‚ä½•å®ç°ä¸€ä¸ªåŸºäºå±æ€§æµ‹è¯•çš„quickcheck-cppåº“&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/helix-gptå¦‚ä½•å®ç°ai-codeä»¥åŠå¦‚ä½•è°ƒè¯•/&#34; target=&#34;_blank&#34;&gt;helix-gptå¦‚ä½•å®ç°AI codeä»¥åŠå¦‚ä½•è°ƒè¯•?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/mit-ç»å…¸è®²åº§how-to-speak---patrick-winston/&#34; target=&#34;_blank&#34;&gt;MIT ç»å…¸è®²åº§ï¼šHow to Speak - Patrick Winston&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;</description>
      <link>https://github.com/KenForever1/blog/cista%E9%9B%B6%E6%8B%B7%E8%B4%9D%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E5%BA%93%E5%AE%9E%E7%8E%B0%E4%B9%8Bswiss_table--group%E5%8C%B9%E9%85%8D%E4%BD%8D%E8%BF%90%E7%AE%97/</link>
      <pubDate>Sat, 28 Jun 2025 00:00:00 +0000</pubDate>
      <source url="https://github.com/KenForever1/feed_rss_updated.xml">KenForever1</source>
      
      <guid isPermaLink="true">https://github.com/KenForever1/blog/cista%E9%9B%B6%E6%8B%B7%E8%B4%9D%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E5%BA%93%E5%AE%9E%E7%8E%B0%E4%B9%8Bswiss_table--group%E5%8C%B9%E9%85%8D%E4%BD%8D%E8%BF%90%E7%AE%97/</guid>
      
    </item>
    
    <item>
      <title>cistaé›¶æ‹·è´ååºåˆ—åŒ–åº“å®ç°ä¹‹swiss_tableå“ˆå¸Œè¡¨å®ç°</title>
      
      
        
      <author>KenForever1</author>
        
      
      
      
      <description>&lt;p&gt;æœ‹å‹ä»¬ï¼Œå¤§å®¶å¥½ï¼ä¸Šæ–‡æˆ‘ä»¬ä»‹ç»äº†&lt;a href=&#34;https://mp.weixin.qq.com/s/KENr2Q4HoU9R75L-l95uoQ&#34;&gt;C++é›¶æ‹·è´ååºåˆ—åŒ–åº“ cista&lt;/a&gt;ï¼Œä»Šå¤©æ¥ç€ä»‹ç»ä¸€ä¸‹ cista åº“çš„å®ç°ã€‚&lt;/p&gt;
&lt;h2 id=&#34;swiss_tableå®ç°åŸç†&#34;&gt;swiss_tableå®ç°åŸç†&lt;a class=&#34;headerlink&#34; href=&#34;#swiss_tableå®ç°åŸç†&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;å¯ä»¥ä»cistaåº“çš„ä»‹ç»ä¸­çœ‹åˆ°å¦‚ä¸‹å†…å®¹ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Comes with a serializable high-performance hash map and hash set implementation based on Google&amp;rsquo;s Swiss Table technique.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;swiss tableçš„å®ç°å¯ä»¥å‚è€ƒ&lt;a href=&#34;https://www.cnblogs.com/apocelipes/p/17562468.html&#34;&gt;ç®€å•äº†è§£ä¸‹æœ€è¿‘æ­£ç«çš„SwissTable&lt;/a&gt;ï¼Œè®²è§£çš„å¾ˆæ¸…æ™°ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬å°èŠ‚å¤§å¤šæ•°å†…å®¹æ˜¯ç«™åœ¨å·¨äººè‚©è†€ä¸Šï¼Œå¼•ç”¨&lt;a href=&#34;https://www.cnblogs.com/apocelipes/p/17562468.html&#34;&gt;ç®€å•äº†è§£ä¸‹æœ€è¿‘æ­£ç«çš„SwissTable&lt;/a&gt;ï¼ŒåŠ ä¸Šä½œè€…ç»“åˆcistaåº“çš„ä»‹ç»ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‰ç§å®ç°hashmapçš„æ–¹å¼ï¼Œçœ‹ä¼˜ç¼ºç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;é“¾è¡¨æ³•ï¼šæŒ‡é’ˆç¨³å®šæ€§ï¼Œèƒ½é‡‡å–æ‰©å®¹ä¹‹å¤–çš„æ‰‹æ®µé˜»æ­¢æŸ¥è¯¢æ€§èƒ½é€€åŒ–ï¼Œæ¯”å¦‚æŠŠè¿‡é•¿é“¾è¡¨è½¬æ¢æˆæœç´¢æ ‘ã€‚ç¼ºç‚¹ï¼šç¼“å­˜ä¸å¤Ÿå‹å¥½ï¼Œå†²çªè¾ƒå¤šçš„æ—¶å€™ç¼“å­˜å‘½ä¸­ç‡è¾ƒä½ä»è€Œå½±å“æ€§èƒ½ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;çº¿æ€§æ¢æµ‹æ³•ï¼šç¼“å­˜å‹å¥½ï¼ŒåŠ ä¸Šå†²çªä¼šæœ‰è¿é”å½±å“ï¼Œæ²¡æœ‰æŒ‡é’ˆç¨³å®šæ€§ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- more --&gt;

&lt;p&gt;swiss tableæ˜¯ä¸ºäº†æ”¹è¿›å“ˆå¸Œè¡¨æœ¬èº«çš„ç»“æ„åŠ›æ±‚åœ¨ç¼“å­˜å‹å¥½ã€æ€§èƒ½å’Œå†…å­˜ç”¨é‡ä¸Šæ‰¾åˆ°å¹³è¡¡ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;swisstableæ‹¥æœ‰æƒŠäººæ€§èƒ½çš„ä¸»è¦åŸå› ï¼šå®ƒå°½é‡é¿å…çº¿æ€§æ¢æµ‹æ³•å¯¼è‡´çš„å¤§é‡ç­‰å€¼æ¯”è¾ƒå’Œé“¾è¡¨æ³•ä¼šå¸¦æ¥çš„ç¼“å­˜å‘½ä¸­ç‡ä½ä¸‹ï¼Œä»¥åŠåœ¨å•ä½æ—¶é—´å†…å®ƒèƒ½åŒæ—¶è¿‡æ»¤Nä¸ªï¼ˆé€šå¸¸ä¸º16ï¼Œå› ä¸º16x8=128ï¼Œæ˜¯å¤§å¤šæ•°å¹³å°ä¸ŠSIMDæŒ‡ä»¤ä¸“ç”¨çš„å‘é‡å¯„å­˜å™¨çš„å¤§å°ï¼‰å…ƒç´ ï¼Œä¸”å¯ä»¥ç”¨ä½è¿ç®—ä»£æ›¿å¯¹æ•°æ®çš„éå†ã€‚è¿™ä¼šä¸ºå“ˆå¸Œè¡¨çš„ååé‡å¸¦æ¥è´¨çš„é£è·ƒã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ”¹è¿›çš„çº¿æ€§æ¢æµ‹æ–¹å¼ï¼Œåˆ†groupå¤„ç†ï¼Œå¯ä»¥SIMDæŒ‡ä»¤åŠ é€Ÿå¤„ç†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;swiss tableé‡‡ç”¨äº† &lt;strong&gt;controlæ§åˆ¶ä¿¡æ¯ å’Œ slotå­˜å‚¨æ•°æ®&lt;/strong&gt; åˆ†ç¦»çš„æ–¹å¼è¿›è¡Œå­˜å‚¨ã€‚ç›¸æ¯”é“¾å¼ï¼Œæ•°æ®å±€éƒ¨æ€§æ›´å¥½ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;hashä¸€å…±64ä½ï¼Œ57ä½ä¸ºh1ï¼Œç”¨äºé”å®šæ˜¯slotä½ç½®ã€‚7ä½ä¸ºh2ï¼Œä½œä¸ºkeyã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;resizeæ‰©å®¹2å€ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ§åˆ¶ä¿¡æ¯contrlä¸­ï¼Œä¸‹é¢çš„å®šä¹‰ï¼Œè¡¨ç¤ºäº†ä¸‰ç§çŠ¶æ€ï¼Œéƒ½æ˜¯1å¼€å¤´ã€‚å¦‚æœæ˜¯0å¼€å¤´ï¼Œåé¢å°±æ˜¯7ä½h2æ•°æ®ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-0-5&#34;&gt;5&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-0-1&#34; name=&#34;__codelineno-0-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;enum&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ctrl_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int8_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-2&#34; name=&#34;__codelineno-0-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;EMPTY&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;-128&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 10000000&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-3&#34; name=&#34;__codelineno-0-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;DELETED&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;-2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 11111110&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-4&#34; name=&#34;__codelineno-0-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;END&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;-1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 11111111&lt;/span&gt;
&lt;a id=&#34;__codelineno-0-5&#34; name=&#34;__codelineno-0-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;abseilçš„å®ç°ä¸­ï¼Œæ–‡ç« é‡Œä¹Ÿæåˆ°äº†ï¼Œé‡‡ç”¨äº†SSEï¼ˆSIMDæŒ‡ä»¤ï¼‰è¿›è¡ŒåŠ é€Ÿï¼Œä¸€æ¬¡åŒæ—¶æ¯”è¾ƒä¸€ä¸ªGroupï¼ˆ16ä¸ªslotï¼‰ã€‚åœ¨cistaä¸­ï¼Œæ²¡æœ‰å®ç°SSEã€‚&lt;/p&gt;
&lt;p&gt;å¼•ç”¨æ–‡ç« ä¸­çš„ä¸€å¼ å›¾è¯´æ˜swiss_tableå­˜å‚¨å¸ƒå±€ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;&#34; src=&#34;https://raw.githubusercontent.com/KenForever1/CDN/main/swiss_table.jpg&#34; /&gt;&lt;/p&gt;
&lt;p&gt;åœ¨cistaä¸­é€šè¿‡ä½è¿ç®—å¹¶è¡Œå¤„ç†ï¼Œè™½ç„¶æœªä½¿ç”¨å®é™…SIMDæŒ‡ä»¤ï¼Œä½†é€šè¿‡64ä½æ•´æ•°è¿ç®—æ¨¡æ‹Ÿäº†å¹¶è¡Œå¤„ç†8ä¸ªæ§åˆ¶å­—èŠ‚çš„æ•ˆæœã€‚
+ æ‰€æœ‰æ“ä½œéƒ½é€šè¿‡&lt;strong&gt;ç²¾å¿ƒè®¾è®¡çš„ä½è¿ç®—&lt;/strong&gt;å®Œæˆï¼Œé¿å…äº†åˆ†æ”¯å’Œå¾ªç¯ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å†…å­˜å±€éƒ¨æ€§&lt;/strong&gt;ï¼šæ§åˆ¶å­—èŠ‚è¿ç»­å­˜å‚¨ï¼Œå……åˆ†åˆ©ç”¨CPUç¼“å­˜ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;çŠ¶æ€å¿«é€Ÿåˆ¤æ–­&lt;/strong&gt;ï¼šå¯ä»¥ä¸€æ¬¡æ€§åˆ¤æ–­æ•´ä¸ªgroupçš„çŠ¶æ€(å…¨ç©º/éƒ¨åˆ†åŒ¹é…ç­‰)ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é€šè¿‡è¿™äº›è®¾è®¡ï¼Œä½¿å¾—Swiss Tableåœ¨æŸ¥æ‰¾ã€æ’å…¥ç­‰æ“ä½œä¸Šè·å¾—é«˜ååé‡ã€‚åœ¨hashmapçš„å®ç°ä¸­ï¼Œå“ˆå¸Œå‡½æ•°çš„ç®—æ³•ä¹Ÿå¾ˆé‡è¦ï¼Œä¸€ä¸ªæ›´åŠ é«˜æ•ˆâ€œå®Œç¾å“ˆå¸Œå‡½æ•°â€ï¼Œå¯ä»¥å‡å°‘å†²çªï¼Œå‡å°‘ç­‰å€¼æ¯”è¾ƒï¼Œæé«˜æ€§èƒ½ã€‚&lt;/p&gt;
&lt;h2 id=&#34;cistaä¸­swiss_tableå“ˆå¸Œè¡¨å®ç°&#34;&gt;cistaä¸­swiss_tableå“ˆå¸Œè¡¨å®ç°&lt;a class=&#34;headerlink&#34; href=&#34;#cistaä¸­swiss_tableå“ˆå¸Œè¡¨å®ç°&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;h3 id=&#34;findæŸ¥æ‰¾å®ç°&#34;&gt;findæŸ¥æ‰¾å®ç°&lt;a class=&#34;headerlink&#34; href=&#34;#findæŸ¥æ‰¾å®ç°&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;find_implå®ç°å¦‚ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°é€šè¿‡h1ç¡®å®šæŸ¥æ‰¾çš„groupï¼Œç„¶åé€šè¿‡h2è¿›è¡ŒåŒ¹é…ï¼Œåˆ¤æ–­keyç›¸ç­‰ï¼Œè¿”å›iteratorã€‚
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-1-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-1-1&#34; name=&#34;__codelineno-1-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;typename&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;Key&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-2&#34; name=&#34;__codelineno-1-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;n&#34;&gt;iterator&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;find_impl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Key&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-3&#34; name=&#34;__codelineno-1-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hash&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;compute_hash&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-4&#34; name=&#34;__codelineno-1-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;seq&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;probe_seq&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;h1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hash&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;capacity_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;seq&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-5&#34; name=&#34;__codelineno-1-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;group&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;g&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctrl_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;seq&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;offset_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-6&#34; name=&#34;__codelineno-1-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;g&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;match&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;h2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hash&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)))&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-7&#34; name=&#34;__codelineno-1-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Eq&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{}(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetKey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;entries_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;seq&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;offset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)]),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-8&#34; name=&#34;__codelineno-1-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;iterator_at&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;seq&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;offset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-9&#34; name=&#34;__codelineno-1-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-10&#34; name=&#34;__codelineno-1-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-11&#34; name=&#34;__codelineno-1-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;g&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;match_empty&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-12&#34; name=&#34;__codelineno-1-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;end&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-13&#34; name=&#34;__codelineno-1-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-1-14&#34; name=&#34;__codelineno-1-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;
&lt;a id=&#34;__codelineno-1-15&#34; name=&#34;__codelineno-1-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
ç”±äºcontrolä¿¡æ¯å’Œslotä¿¡æ¯çš„indexæ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œå› æ­¤iteratorä¸­ä¿æŒçš„ctrlå’Œentryçš„æŒ‡é’ˆï¼Œè·å–valueï¼Œå°±æ˜¯*entry_ã€‚
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-1&#34;&gt;1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-2&#34;&gt;2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-3&#34;&gt;3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-4&#34;&gt;4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-2-5&#34;&gt;5&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-2-1&#34; name=&#34;__codelineno-2-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;iterator&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-2&#34; name=&#34;__codelineno-2-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;reference&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;operator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;noexcept&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;entry_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-3&#34; name=&#34;__codelineno-2-3&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctrl_t&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctrl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-4&#34; name=&#34;__codelineno-2-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;entry_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;a id=&#34;__codelineno-2-5&#34; name=&#34;__codelineno-2-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/p&gt;
&lt;p&gt;åˆ é™¤ã€æ’å…¥æ“ä½œçš„é€»è¾‘æ„Ÿå…´è¶£çš„æœ‹å‹æ¨èé˜…è¯»&lt;a href=&#34;https://github.com/felixguendling/cista/blob/master/include/cista/containers/hash_storage.h&#34;&gt;cista hashstorageæºç &lt;/a&gt;ï¼Œå¸Œæœ›æœ¬æ–‡å¯ä»¥å¸®åŠ©ä½ æ›´åŠ å¿«é€Ÿç†è§£å®ç°ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ ¸å¿ƒå­˜å‚¨ç»“æ„çš„åˆå§‹åŒ–&#34;&gt;æ ¸å¿ƒå­˜å‚¨ç»“æ„çš„åˆå§‹åŒ–&lt;a class=&#34;headerlink&#34; href=&#34;#æ ¸å¿ƒå­˜å‚¨ç»“æ„çš„åˆå§‹åŒ–&#34; title=&#34;Permanent link&#34;&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;æ ¸å¿ƒå­˜å‚¨ç»“æ„entries_çš„åˆå§‹åŒ–ä»£ç å¦‚ä¸‹ï¼Œä¿å­˜äº†slotæ•°æ®å’Œcontrolæ•°æ®ã€‚WIDTHä¸º8ï¼ŒALIGNMENTä¸ºalignof(T)ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;th colspan=&#34;2&#34; class=&#34;filename&#34;&gt;&lt;span class=&#34;filename&#34;&gt;C++&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-1&#34;&gt; 1&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-2&#34;&gt; 2&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-3&#34;&gt; 3&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-4&#34;&gt; 4&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-5&#34;&gt; 5&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-6&#34;&gt; 6&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-7&#34;&gt; 7&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-8&#34;&gt; 8&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-9&#34;&gt; 9&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-10&#34;&gt;10&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-11&#34;&gt;11&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-12&#34;&gt;12&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-13&#34;&gt;13&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-14&#34;&gt;14&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-15&#34;&gt;15&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-16&#34;&gt;16&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-17&#34;&gt;17&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-18&#34;&gt;18&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-19&#34;&gt;19&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-20&#34;&gt;20&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-21&#34;&gt;21&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-22&#34;&gt;22&lt;/a&gt;&lt;/span&gt;
&lt;span class=&#34;normal&#34;&gt;&lt;a href=&#34;#__codelineno-3-23&#34;&gt;23&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;a id=&#34;__codelineno-3-1&#34; name=&#34;__codelineno-3-1&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;constexpr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size_type&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;WIDTH&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;8U&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-2&#34; name=&#34;__codelineno-3-2&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;constexpr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;size_t&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ALIGNMENT&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;alignof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-3&#34; name=&#34;__codelineno-3-3&#34;&gt;&lt;/a&gt;
&lt;a id=&#34;__codelineno-3-4&#34; name=&#34;__codelineno-3-4&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;initialize_entries&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-5&#34; name=&#34;__codelineno-3-5&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;self_allocated_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-6&#34; name=&#34;__codelineno-3-6&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// capacity_ * sizeof(T)  ä¿å­˜slotæ•°æ®&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-7&#34; name=&#34;__codelineno-3-7&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// (capacity_ + 1U + WIDTH) * sizeof(ctrl_t) ä¿å­˜controlä¿¡æ¯ï¼ŒåŠ ä¸Šåé¢çš„paddingå¯¹é½&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-8&#34; name=&#34;__codelineno-3-8&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;static_cast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size_type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-9&#34; name=&#34;__codelineno-3-9&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;capacity_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;capacity_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1U&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;WIDTH&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctrl_t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-10&#34; name=&#34;__codelineno-3-10&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;entries_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;reinterpret_cast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-11&#34; name=&#34;__codelineno-3-11&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CISTA_ALIGNED_ALLOC&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ALIGNMENT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;static_cast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;size_t&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)));&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-12&#34; name=&#34;__codelineno-3-12&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;entries_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-13&#34; name=&#34;__codelineno-3-13&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;throw_exception&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bad_alloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{});&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-14&#34; name=&#34;__codelineno-3-14&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-15&#34; name=&#34;__codelineno-3-15&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#if defined(CISTA_ZERO_OUT)&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-16&#34; name=&#34;__codelineno-3-16&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;memset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;entries_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-17&#34; name=&#34;__codelineno-3-17&#34;&gt;&lt;/a&gt;&lt;span class=&#34;cp&#34;&gt;#endif&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-18&#34; name=&#34;__codelineno-3-18&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctrl_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;reinterpret_cast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctrl_t&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-19&#34; name=&#34;__codelineno-3-19&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;reinterpret_cast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint8_t&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr_cast&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;entries_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-20&#34; name=&#34;__codelineno-3-20&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;capacity_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-21&#34; name=&#34;__codelineno-3-21&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;reset_ctrl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-22&#34; name=&#34;__codelineno-3-22&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;reset_growth_left&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;a id=&#34;__codelineno-3-23&#34; name=&#34;__codelineno-3-23&#34;&gt;&lt;/a&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;ä¸‹ç¯‡æ–‡ç« ï¼Œæˆ‘å°†è¯¦ç»†ä»‹ç»Swiss Tableä¸­Groupçš„ä»£ç å®ç°ï¼ŒgroupåŒ¹é…ä½è¿ç®—ã€‚&lt;/p&gt;
&lt;style&gt;
.related-posts {
  margin-top: 1.5rem;
  padding-top: 0.75rem;
  border-top: 1px solid rgba(0,0,0,0.1);
  max-height: none !important; /* é˜²æ­¢Safarié”™è¯¯è®¡ç®—é«˜åº¦ */
  overflow: visible !important; /* é˜²æ­¢å†…å®¹è¢«æˆªæ–­ */
}
.related-posts h3 {
  margin-top: 0;
  margin-bottom: 0.5rem;
  font-size: 1.2rem;
  font-weight: 500;
  line-height: 1.3;
}
.related-posts ul {
  margin: 0 0 0.5rem 0 !important; /* å¼ºåˆ¶è¦†ç›–å¯èƒ½çš„å†²çªæ ·å¼ */
  padding-left: 1.5rem;
  list-style-position: outside;
}
.related-posts li {
  margin-bottom: 0.25rem;
  line-height: 1.4;
}
/* æš—è‰²æ¨¡å¼é€‚é… */
[data-md-color-scheme=&#34;slate&#34;] .related-posts {
  border-top-color: rgba(255,255,255,0.1);
}
/* Safariç‰¹å®šä¿®å¤ */
@supports (-webkit-hyphens:none) {
  .related-posts {
    display: block;
    position: relative;
    height: auto !important;
  }
  .related-posts ul {
    position: static;
  }
}
&lt;/style&gt;
&lt;div class=&#34;related-posts&#34;&gt;
&lt;h3&gt;ğŸ“š ç›¸å…³æ–‡ç« æ¨è&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/cé›¶æ‹·è´ååºåˆ—åŒ–åº“cista/&#34; target=&#34;_blank&#34;&gt;C++é›¶æ‹·è´ååºåˆ—åŒ–åº“cista&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/cä½¿ç”¨abseil-cppé‡åˆ°çš„å°é—®é¢˜/&#34; target=&#34;_blank&#34;&gt;C++ä½¿ç”¨abseil-cppé‡åˆ°çš„å°é—®é¢˜&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/helix-gptå¦‚ä½•å®ç°ai-codeä»¥åŠå¦‚ä½•è°ƒè¯•/&#34; target=&#34;_blank&#34;&gt;helix-gptå¦‚ä½•å®ç°AI codeä»¥åŠå¦‚ä½•è°ƒè¯•?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/mit-ç»å…¸è®²åº§how-to-speak---patrick-winston/&#34; target=&#34;_blank&#34;&gt;MIT ç»å…¸è®²åº§ï¼šHow to Speak - Patrick Winston&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kenforever1.github.io/blog/300è¡Œå®ç°ä¸€ä¸ªboundedspscqueue/&#34; target=&#34;_blank&#34;&gt;300è¡Œå®ç°ä¸€ä¸ªBoundedSPSCQueue&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;</description>
      <link>https://github.com/KenForever1/blog/cista%E9%9B%B6%E6%8B%B7%E8%B4%9D%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E5%BA%93%E5%AE%9E%E7%8E%B0%E4%B9%8Bswiss_table%E5%93%88%E5%B8%8C%E8%A1%A8%E5%AE%9E%E7%8E%B0/</link>
      <pubDate>Sat, 28 Jun 2025 00:00:00 +0000</pubDate>
      <source url="https://github.com/KenForever1/feed_rss_updated.xml">KenForever1</source>
      
      <guid isPermaLink="true">https://github.com/KenForever1/blog/cista%E9%9B%B6%E6%8B%B7%E8%B4%9D%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E5%BA%93%E5%AE%9E%E7%8E%B0%E4%B9%8Bswiss_table%E5%93%88%E5%B8%8C%E8%A1%A8%E5%AE%9E%E7%8E%B0/</guid>
      
    </item>
    
  </channel>
</rss>